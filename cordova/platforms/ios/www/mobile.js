!function t(e,i,n){function o(s,a){if(!i[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[s]={exports:{}};e[s][0].call(c.exports,function(t){var i=e[s][1][t];return o(i?i:t)},c,c.exports,t,e,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e,i){var n="cordova",o=t("../config/config.json")[n];e.exports=o},{"../config/config.json":80}],2:[function(t,e,i){(function(n){jQuery=n.jQuery=t("jquery");var o=t;(function(t,e,n){!function(t){"function"==typeof e&&e.amd?e(["jquery"],t):t("object"==typeof i?o("jquery"):jQuery)}(function(t){function e(e){var i=!1;return t('[data-notify="container"]').each(function(n,o){var r=t(o),s=r.find('[data-notify="title"]').text().trim(),a=r.find('[data-notify="message"]').html().trim(),l=s===t("<div>"+e.settings.content.title+"</div>").html().trim(),u=a===t("<div>"+e.settings.content.message+"</div>").html().trim(),c=r.hasClass("alert-"+e.settings.type);return l&&u&&c&&(i=!0),!i}),i}function i(i,o,r){var s={content:{message:"object"==typeof o?o.message:o,title:o.title?o.title:"",icon:o.icon?o.icon:"",url:o.url?o.url:"#",target:o.target?o.target:"-"}};r=t.extend(!0,{},s,r),this.settings=t.extend(!0,{},n,r),this._defaults=n,"-"===this.settings.content.target&&(this.settings.content.target=this.settings.url_target),this.animations={start:"webkitAnimationStart oanimationstart MSAnimationStart animationstart",end:"webkitAnimationEnd oanimationend MSAnimationEnd animationend"},"number"==typeof this.settings.offset&&(this.settings.offset={x:this.settings.offset,y:this.settings.offset}),(this.settings.allow_duplicates||!this.settings.allow_duplicates&&!e(this))&&this.init()}var n={element:"body",position:null,type:"info",allow_dismiss:!0,allow_duplicates:!0,newest_on_top:!1,showProgressbar:!1,placement:{from:"top",align:"right"},offset:20,spacing:10,z_index:1031,delay:5e3,timer:1e3,url_target:"_blank",mouse_over:null,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},onShow:null,onShown:null,onClose:null,onClosed:null,icon_type:"class",template:'<div data-notify="container" class="col-xs-11 col-sm-4 alert alert-{0}" role="alert"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">&times;</button><span data-notify="icon"></span> <span data-notify="title">{1}</span> <span data-notify="message">{2}</span><div class="progress" data-notify="progressbar"><div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div></div><a href="{3}" target="{4}" data-notify="url"></a></div>'};String.format=function(){for(var t=arguments[0],e=1;e<arguments.length;e++)t=t.replace(RegExp("\\{"+(e-1)+"\\}","gm"),arguments[e]);return t},t.extend(i.prototype,{init:function(){var t=this;this.buildNotify(),this.settings.content.icon&&this.setIcon(),"#"!=this.settings.content.url&&this.styleURL(),this.styleDismiss(),this.placement(),this.bind(),this.notify={$ele:this.$ele,update:function(e,i){var n={};"string"==typeof e?n[e]=i:n=e;for(var o in n)switch(o){case"type":this.$ele.removeClass("alert-"+t.settings.type),this.$ele.find('[data-notify="progressbar"] > .progress-bar').removeClass("progress-bar-"+t.settings.type),t.settings.type=n[o],this.$ele.addClass("alert-"+n[o]).find('[data-notify="progressbar"] > .progress-bar').addClass("progress-bar-"+n[o]);break;case"icon":var r=this.$ele.find('[data-notify="icon"]');"class"===t.settings.icon_type.toLowerCase()?r.removeClass(t.settings.content.icon).addClass(n[o]):(r.is("img")||r.find("img"),r.attr("src",n[o]));break;case"progress":var s=t.settings.delay-t.settings.delay*(n[o]/100);this.$ele.data("notify-delay",s),this.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",n[o]).css("width",n[o]+"%");break;case"url":this.$ele.find('[data-notify="url"]').attr("href",n[o]);break;case"target":this.$ele.find('[data-notify="url"]').attr("target",n[o]);break;default:this.$ele.find('[data-notify="'+o+'"]').html(n[o])}var a=this.$ele.outerHeight()+parseInt(t.settings.spacing)+parseInt(t.settings.offset.y);t.reposition(a)},close:function(){t.close()}}},buildNotify:function(){var e=this.settings.content;this.$ele=t(String.format(this.settings.template,this.settings.type,e.title,e.message,e.url,e.target)),this.$ele.attr("data-notify-position",this.settings.placement.from+"-"+this.settings.placement.align),this.settings.allow_dismiss||this.$ele.find('[data-notify="dismiss"]').css("display","none"),(this.settings.delay<=0&&!this.settings.showProgressbar||!this.settings.showProgressbar)&&this.$ele.find('[data-notify="progressbar"]').remove()},setIcon:function(){"class"===this.settings.icon_type.toLowerCase()?this.$ele.find('[data-notify="icon"]').addClass(this.settings.content.icon):this.$ele.find('[data-notify="icon"]').is("img")?this.$ele.find('[data-notify="icon"]').attr("src",this.settings.content.icon):this.$ele.find('[data-notify="icon"]').append('<img src="'+this.settings.content.icon+'" alt="Notify Icon" />')},styleDismiss:function(){this.$ele.find('[data-notify="dismiss"]').css({position:"absolute",right:"10px",top:"5px",zIndex:this.settings.z_index+2})},styleURL:function(){this.$ele.find('[data-notify="url"]').css({backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)",height:"100%",left:0,position:"absolute",top:0,width:"100%",zIndex:this.settings.z_index+1})},placement:function(){var e=this,i=this.settings.offset.y,n={display:"inline-block",margin:"0px auto",position:this.settings.position?this.settings.position:"body"===this.settings.element?"fixed":"absolute",transition:"all .5s ease-in-out",zIndex:this.settings.z_index},o=!1,r=this.settings;switch(t('[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])').each(function(){i=Math.max(i,parseInt(t(this).css(r.placement.from))+parseInt(t(this).outerHeight())+parseInt(r.spacing))}),this.settings.newest_on_top===!0&&(i=this.settings.offset.y),n[this.settings.placement.from]=i+"px",this.settings.placement.align){case"left":case"right":n[this.settings.placement.align]=this.settings.offset.x+"px";break;case"center":n.left=0,n.right=0}this.$ele.css(n).addClass(this.settings.animate.enter),t.each(Array("webkit-","moz-","o-","ms-",""),function(t,i){e.$ele[0].style[i+"AnimationIterationCount"]=1}),t(this.settings.element).append(this.$ele),this.settings.newest_on_top===!0&&(i=parseInt(i)+parseInt(this.settings.spacing)+this.$ele.outerHeight(),this.reposition(i)),t.isFunction(e.settings.onShow)&&e.settings.onShow.call(this.$ele),this.$ele.one(this.animations.start,function(){o=!0}).one(this.animations.end,function(){t.isFunction(e.settings.onShown)&&e.settings.onShown.call(this)}),setTimeout(function(){o||t.isFunction(e.settings.onShown)&&e.settings.onShown.call(this)},600)},bind:function(){var e=this;if(this.$ele.find('[data-notify="dismiss"]').on("click",function(){e.close()}),this.$ele.mouseover(function(){t(this).data("data-hover","true")}).mouseout(function(){t(this).data("data-hover","false")}),this.$ele.data("data-hover","false"),this.settings.delay>0){e.$ele.data("notify-delay",e.settings.delay);var i=setInterval(function(){var t=parseInt(e.$ele.data("notify-delay"))-e.settings.timer;if("false"===e.$ele.data("data-hover")&&"pause"===e.settings.mouse_over||"pause"!=e.settings.mouse_over){var n=(e.settings.delay-t)/e.settings.delay*100;e.$ele.data("notify-delay",t),e.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",n).css("width",n+"%")}t<=-e.settings.timer&&(clearInterval(i),e.close())},e.settings.timer)}},close:function(){var e=this,i=parseInt(this.$ele.css(this.settings.placement.from)),n=!1;this.$ele.attr("data-closing","true").addClass(this.settings.animate.exit),e.reposition(i),t.isFunction(e.settings.onClose)&&e.settings.onClose.call(this.$ele),this.$ele.one(this.animations.start,function(){n=!0}).one(this.animations.end,function(){t(this).remove(),t.isFunction(e.settings.onClosed)&&e.settings.onClosed.call(this)}),setTimeout(function(){n||(e.$ele.remove(),e.settings.onClosed&&e.settings.onClosed(e.$ele))},600)},reposition:function(e){var i=this,n='[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])',o=this.$ele.nextAll(n);this.settings.newest_on_top===!0&&(o=this.$ele.prevAll(n)),o.each(function(){t(this).css(i.settings.placement.from,e),e=parseInt(e)+parseInt(i.settings.spacing)+t(this).outerHeight()})}}),t.notify=function(t,e){var n=new i(this,t,e);return n.notify},t.notifyDefaults=function(e){return n=t.extend(!0,{},n,e)},t.notifyClose=function(e){"undefined"==typeof e||"all"===e?t("[data-notify]").find('[data-notify="dismiss"]').trigger("click"):t('[data-notify-position="'+e+'"]').find('[data-notify="dismiss"]').trigger("click")}})}).call(n,e,void 0,void 0)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{jquery:117}],3:[function(t,e,i){e.exports=function(t){return function(e,i){var n,o=function(e,i,n){var l,u=a(i);switch(e.type){case"Point":u.position=new t.maps.LatLng(e.coordinates[1],e.coordinates[0]),l=new t.maps.Marker(u),n&&l.set("geojsonProperties",n);break;case"MultiPoint":l=[];for(var c=0;c<e.coordinates.length;c++)u.position=new t.maps.LatLng(e.coordinates[c][1],e.coordinates[c][0]),l.push(new t.maps.Marker(u));if(n)for(var h=0;h<l.length;h++)l[h].set("geojsonProperties",n);break;case"LineString":for(var p=[],c=0;c<e.coordinates.length;c++){var d=e.coordinates[c],f=new t.maps.LatLng(d[1],d[0]);p.push(f)}u.path=p,l=new t.maps.Polyline(u),n&&l.set("geojsonProperties",n);break;case"MultiLineString":l=[];for(var c=0;c<e.coordinates.length;c++){for(var p=[],m=0;m<e.coordinates[c].length;m++){var d=e.coordinates[c][m],f=new t.maps.LatLng(d[1],d[0]);p.push(f)}u.path=p,l.push(new t.maps.Polyline(u))}if(n)for(var h=0;h<l.length;h++)l[h].set("geojsonProperties",n);break;case"Polygon":for(var g,y,v=[],c=0;c<e.coordinates.length;c++){for(var p=[],m=0;m<e.coordinates[c].length;m++){var f=new t.maps.LatLng(e.coordinates[c][m][1],e.coordinates[c][m][0]);p.push(f)}c?1==c?(y=s(p),g==y?v.push(p.reverse()):v.push(p)):g==y?v.push(p.reverse()):v.push(p):(g=s(p),v.push(p))}u.paths=v,l=new t.maps.Polygon(u),n&&l.set("geojsonProperties",n);break;case"MultiPolygon":l=[];for(var c=0;c<e.coordinates.length;c++){for(var g,y,v=[],m=0;m<e.coordinates[c].length;m++){for(var p=[],h=0;h<e.coordinates[c][m].length;h++){var f=new t.maps.LatLng(e.coordinates[c][m][h][1],e.coordinates[c][m][h][0]);p.push(f)}m?1==m?(y=s(p),g==y?v.push(p.reverse()):v.push(p)):g==y?v.push(p.reverse()):v.push(p):(g=s(p),v.push(p))}u.paths=v,l.push(new t.maps.Polygon(u))}if(n)for(var h=0;h<l.length;h++)l[h].set("geojsonProperties",n);break;case"GeometryCollection":if(l=[],e.geometries)for(var c=0;c<e.geometries.length;c++)l.push(o(e.geometries[c],u,n||null));else l=r('Invalid GeoJSON object: GeometryCollection object missing "geometries" member.');break;default:l=r('Invalid GeoJSON object: Geometry object must be one of "Point", "LineString", "Polygon" or "MultiPolygon".')}return l},r=function(t){return{type:"Error",message:t}},s=function(t){for(var e,i=0,n=0;n<t.length-2;n++)i+=(t[n+1].lat()-t[n].lat())*(t[n+2].lng()-t[n].lng())-(t[n+2].lat()-t[n].lat())*(t[n+1].lng()-t[n].lng());return e=i>0?!0:!1},a=function(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},l=i||{};switch(e.type){case"FeatureCollection":if(e.features){n=[];for(var u=0;u<e.features.length;u++)n.push(o(e.features[u].geometry,l,e.features[u].properties))}else n=r('Invalid GeoJSON object: FeatureCollection object missing "features" member.');break;case"GeometryCollection":if(e.geometries){n=[];for(var u=0;u<e.geometries.length;u++)n.push(o(e.geometries[u],l))}else n=r('Invalid GeoJSON object: GeometryCollection object missing "geometries" member.');break;case"Feature":n=e.properties&&e.geometry?o(e.geometry,l,e.properties):r('Invalid GeoJSON object: Feature object missing "properties" or "geometry" member.');break;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":n=e.coordinates?n=o(e,l):r('Invalid GeoJSON object: Geometry object missing "coordinates" member.');break;default:n=r('Invalid GeoJSON object: GeoJSON object must be one of "Point", "LineString", "Polygon", "MultiPolygon", "Feature", "FeatureCollection" or "GeometryCollection".')}return n}}},{}],4:[function(t,e,i){(function(i){jQuery=i.jQuery=t("jquery");(function(t,e,i){!function(t,e){function i(t,e,i){var n=h[e.type]||{};return null==t?i||!e.def?null:e.def:(t=n.floor?~~t:parseFloat(t),isNaN(t)?e.def:n.mod?(t+n.mod)%n.mod:0>t?0:n.max<t?n.max:t)}function n(e){var i=u(),n=i._rgba=[];return e=e.toLowerCase(),f(l,function(t,o){var r,s=o.re.exec(e),a=s&&o.parse(s),l=o.space||"rgba";return a?(r=i[l](a),i[c[l].cache]=r[c[l].cache],n=i._rgba=r._rgba,!1):void 0}),n.length?("0,0,0,0"===n.join()&&t.extend(n,r.transparent),i):r[e]}function o(t,e,i){return i=(i+1)%1,1>6*i?t+(e-t)*i*6:1>2*i?e:2>3*i?t+(e-t)*(2/3-i)*6:t}var r,s="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",a=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],u=t.Color=function(e,i,n,o){return new t.Color.fn.parse(e,i,n,o)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},h={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},p=u.support={},d=t("<p>")[0],f=t.each;d.style.cssText="background-color:rgba(1,1,1,.5)",p.rgba=d.style.backgroundColor.indexOf("rgba")>-1,f(c,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),u.fn=t.extend(u.prototype,{parse:function(o,s,a,l){if(o===e)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=t(o).css(s),s=e);var h=this,p=t.type(o),d=this._rgba=[];return s!==e&&(o=[o,s,a,l],p="array"),"string"===p?this.parse(n(o)||r._default):"array"===p?(f(c.rgba.props,function(t,e){d[e.idx]=i(o[e.idx],e)}),this):"object"===p?(o instanceof u?f(c,function(t,e){o[e.cache]&&(h[e.cache]=o[e.cache].slice())}):f(c,function(e,n){var r=n.cache;f(n.props,function(t,e){if(!h[r]&&n.to){if("alpha"===t||null==o[t])return;h[r]=n.to(h._rgba)}h[r][e.idx]=i(o[t],e,!0)}),h[r]&&t.inArray(null,h[r].slice(0,3))<0&&(h[r][3]=1,n.from&&(h._rgba=n.from(h[r])))}),this):void 0},is:function(t){var e=u(t),i=!0,n=this;return f(c,function(t,o){var r,s=e[o.cache];return s&&(r=n[o.cache]||o.to&&o.to(n._rgba)||[],f(o.props,function(t,e){return null!=s[e.idx]?i=s[e.idx]===r[e.idx]:void 0})),i}),i},_space:function(){var t=[],e=this;return f(c,function(i,n){e[n.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var n=u(t),o=n._space(),r=c[o],s=0===this.alpha()?u("transparent"):this,a=s[r.cache]||r.to(s._rgba),l=a.slice();return n=n[r.cache],f(r.props,function(t,o){var r=o.idx,s=a[r],u=n[r],c=h[o.type]||{};null!==u&&(null===s?l[r]=u:(c.mod&&(u-s>c.mod/2?s+=c.mod:s-u>c.mod/2&&(s-=c.mod)),l[r]=i((u-s)*e+s,o)))}),this[o](l)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),o=u(e)._rgba;return u(t.map(i,function(t,e){return(1-n)*o[e]+n*t}))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&3>e&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),n=i.pop();return e&&i.push(~~(255*n)),"#"+t.map(i,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),u.fn.parse.prototype=u.fn,c.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,n=t[0]/255,o=t[1]/255,r=t[2]/255,s=t[3],a=Math.max(n,o,r),l=Math.min(n,o,r),u=a-l,c=a+l,h=.5*c;return e=l===a?0:n===a?60*(o-r)/u+360:o===a?60*(r-n)/u+120:60*(n-o)/u+240,i=0===u?0:.5>=h?u/c:u/(2-c),[Math.round(e)%360,i,h,null==s?1:s]},c.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],n=t[2],r=t[3],s=.5>=n?n*(1+i):n+i-n*i,a=2*n-s;return[Math.round(255*o(a,s,e+1/3)),Math.round(255*o(a,s,e)),Math.round(255*o(a,s,e-1/3)),r]},f(c,function(n,o){var r=o.props,s=o.cache,l=o.to,c=o.from;u.fn[n]=function(n){if(l&&!this[s]&&(this[s]=l(this._rgba)),n===e)return this[s].slice();var o,a=t.type(n),h="array"===a||"object"===a?n:arguments,p=this[s].slice();return f(r,function(t,e){var n=h["object"===a?t:e.idx];null==n&&(n=p[e.idx]),p[e.idx]=i(n,e)}),c?(o=u(c(p)),o[s]=p,o):u(p)},f(r,function(e,i){u.fn[e]||(u.fn[e]=function(o){var r,s=t.type(o),l="alpha"===e?this._hsla?"hsla":"rgba":n,u=this[l](),c=u[i.idx];return"undefined"===s?c:("function"===s&&(o=o.call(this,c),s=t.type(o)),null==o&&i.empty?this:("string"===s&&(r=a.exec(o),r&&(o=c+parseFloat(r[2])*("+"===r[1]?1:-1))),u[i.idx]=o,this[l](u)))})})}),u.hook=function(e){var i=e.split(" ");f(i,function(e,i){t.cssHooks[i]={set:function(e,o){var r,s,a="";if("transparent"!==o&&("string"!==t.type(o)||(r=n(o)))){if(o=u(r||o),!p.rgba&&1!==o._rgba[3]){for(s="backgroundColor"===i?e.parentNode:e;(""===a||"transparent"===a)&&s&&s.style;)try{a=t.css(s,"backgroundColor"),s=s.parentNode}catch(l){}o=o.blend(a&&"transparent"!==a?a:"_default")}o=o.toRgbaString()}try{e.style[i]=o}catch(l){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=u(e.elem,i),e.end=u(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}})},u.hook(s),t.cssHooks.borderColor={expand:function(t){var e={};return f(["Top","Right","Bottom","Left"],function(i,n){e["border"+n+"Color"]=t}),e}},r=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery)}).call(i,e,void 0,void 0)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{jquery:117}],5:[function(t,e,i){"use strict";var n=t("../lib/platform"),o=(t("../config").server,t("jquery")),r=t("underscore"),s=t("backbone"),a=t("moment"),l=t("../map/map"),u={today:"rgba(255,0,0,0.4)",thisweek:"rgba(0,222,0,0.3)",lastweek:"rgba(0,0,255, 0.2)"},c=function(t){this.app=t.app,this.layer={},this.requests={},this.listenTo(this.app,"reception:layer",this.process)};r.extend(c.prototype,s.Events,{process:function(t){if(this.removeFromMap(t.name),this.requests[t.name]&&this.requests[t.name].abort(),t.state!==!1){var e={};if("thisweek"===t.name||"lastweek"===t.name){e={datetime__greater_than:null,datetime__lesser_than:null};var i=a().utc();i.utc().startOf("day"),"lastweek"===t.name&&i.utc().subtract(7,"days"),i.utc().startOf("week"),e.datetime__greater_than=i.utc().format(),i.utc().endOf("week"),e.datetime__lesser_than=i.utc().format()}var s=n.setPrefix("/api/reception");this.requests[t.name]=o.getJSON(s,e,r.bind(function(t,e){return e?void this.scope.addToMap(this.name,t):void this.app.trigger("reception:failed",{name:name})},{name:t.name,scope:this}))}},addToMap:function(t,e){l.addToMap({name:"reception-"+t,data:e,layer:[{name:"reception-"+t,behind:"markers",json:{type:"fill",paint:{"fill-color":u[t],"fill-outline-color":"rgba(0,0,0,0)"}}}]})},removeFromMap:function(t){l.removeFromMap({name:"reception-"+t,layer:["reception-"+t]})}}),e.exports=c},{"../config":1,"../lib/platform":14,"../map/map":28,backbone:84,jquery:117,moment:252,underscore:371}],6:[function(t,e,i){"use strict";var n=(t("jquery"),t("underscore")),o=t("backbone"),r=t("../map/map"),s=function(t){this.ships=t.ships,this.app=t.app};n.extend(s.prototype,o.Events,{onClick:function(t){var e=r.calculatePerimeter(),i=n.first(this.ships.getShipsForLngLat(t.lngLat,e));(!i||i&&i.get("id")!==this.clickid)&&(this.ships.invoke("set","selected",!1),this.clickid=0),i?(i.set("selected",!0),this.clickid=i.get("id")):this.app.trigger("clickout")},onMousemove:function(t){r.resetCursor();var e=r.calculatePerimeter(),i=n.first(this.ships.getShipsForLngLat(t.lngLat,e));(!i||i&&i.get("id")!==this.mouseoverid)&&(this.ships.invoke("set","mouseover",!1),this.mouseoverid=0),i&&(r.setCursor("pointer"),i.set("mouseover",!0),this.mouseoverid=i.get("id"))},updateLayer:function(){r.addToMap({name:"markers",data:this.ships.toGeoJSON(),layer:[{name:"markers",json:{type:"symbol",interactive:!0,layout:{"symbol-spacing":0,"symbol-placement":"point","icon-image":"{marker-symbol}","icon-allow-overlap":!0,"icon-ignore-placement":!0,visibility:"visible"}}},{name:"labels",json:{type:"symbol",layout:{"text-field":"{title}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-offset":[0,1.5],"text-anchor":"center","text-size":{base:1,stops:[[13,12],[18,16]]},"text-allow-overlap":!0,visibility:"visible"},maxzoom:22,minzoom:14,paint:{"text-color":"#000000","text-halo-blur":.5,"text-halo-color":"#ffffff","text-halo-width":.5}}}]}),this.app.trigger("shipslayer:update")},onRemoveShip:function(t){var e=t.get("id");this.mouseoverid===e&&(this.mouseoverid=0),this.clickid===e&&(this.clickid=0),n.delay(n.bind(this.updateLayer,this),1)},onLoad:function(){this.updateLayer(),this.listenTo(this.app,"clickout",this.updateLayer),this.listenTo(this.ships,"add",this.updateLayer),this.listenTo(this.ships,"change:selected",this.updateLayer),this.listenTo(this.ships,"moved",this.updateLayer),this.listenTo(this.ships,"remove",this.onRemoveShip)},addToMap:function(){this.mouseoverid=0,this.clickid=0,this.listenTo(r,"mousemove",this.onMousemove),this.listenTo(r,"click",this.onClick),r.onReady().done(n.bind(function(){this.onLoad()},this))},removeFromMap:function(){this.stopListening(this.app,"clickout",this.updateLayer),this.stopListening(this.ships,"add",this.updateLayer),this.stopListening(this.ships,"change:selected",this.updateLayer),this.stopListening(this.ships,"moved",this.updateLayer),this.stopListening(this.ships,"remove",this.onRemoveShip),this.stopListening(r,"mousemove",this.onMousemove),this.stopListening(r,"click",this.onClick),r.removeFromMap({name:"markers",layer:["markers","labels"]})}}),e.exports=s},{"../map/map":28,backbone:84,jquery:117,underscore:371}],7:[function(t,e,i){"use strict";var n=(t("jquery"),t("underscore")),o=t("backbone"),r=t("../map/map"),s=function(t){this.ships=t.ships,this.app=t.app,this.mouseoverid=0,this.track=null,this.ship=null};n.extend(s.prototype,o.Events,{onMousemove:function(t){var e=r.calculatePerimeter();if(this.track&&this.track.length>2){var i=n.first(this.track.getPositionsForLngLat(t.lngLat,e));(!i||i&&i.get("id")!==this.mouseoverid)&&(this.track.invoke("set","mouseover",!1),this.mouseoverid=0),i&&this.ship.get("mouseover")!==!0&&(r.setCursor("pointer"),i.set("mouseover",!0),this.mouseoverid=i.get("id"))}},onMouseout:function(){this.mouseoverid&&(this.track.get(this.mouseoverid).set("mouseover",!1),this.mouseoverid=0)},onAddPosition:function(t){t.getLabel(),this.updateLayer()},onRemovePosition:function(t){var e=t.get("id");this.mouseoverid===e&&(this.mouseoverid=0),this.updateLayer()},updateLayer:function(){var t=n(this.track.slice(this.track.from,this.track.length-1)).map(function(t,e){return{coordinate:t.getCoordinate(),marker:t.getMarker().toMarker()}}),e=this.ship.getMarker(),i=e.hasShape()&&e.getMapId("shape")||"markers",o=n.pluck(t,"coordinate");o.push(this.ship.get("position").getCoordinate()),r.addToMap({name:"track",data:{type:"LineString",coordinates:o},layer:[{name:"track",behind:i,json:{type:"line",paint:{"line-color":"#888","line-width":2}}}]});var s=n.pluck(t,"marker");s.push(this.ship.get("position").getMarker().toMarker()),r.addToMap({name:"positions",data:{type:"FeatureCollection",features:s},layer:[{name:"positions",behind:i,json:{type:"circle",interactive:!0,paint:{"circle-color":"#444"}}}]})},addToMap:function(){this.track.length>2&&(this.track.invoke("getLabel"),this.updateLayer()),this.listenTo(this.ship,"moved",this.onAddPosition),this.listenTo(this.track,"add",this.onAddPosition),this.listenTo(this.track,"remove",this.onRemovePosition),this.listenTo(this.track,"setrange",this.updateLayer),this.listenTo(r,"mousemove",this.onMousemove)},removeFromMap:function(){this.stopListening(this.ship,"moved",this.onAddPosition),this.stopListening(this.track,"add",this.onAddPosition),this.stopListening(this.track,"remove",this.onRemovePosition),this.stopListening(this.track,"setrange",this.updateLayer),this.stopListening(this.track,"sync",this.addToMap),this.stopListening(r,"mousemove",this.onMousemove),r.removeFromMap({name:"track",layer:["track"]}),r.removeFromMap({name:"positions",layer:["positions"]}),this.track&&(this.track.invoke("set","mouseover",!1),this.track.reset()),this.track=null,this.ship=null,this.mouseoverid=0},execute:function(t,e){e&&(this.ship=t,this.track=t.get("track"),window.track=this.track,this.listenToOnce(t,"remove",this.removeFromMap),this.listenToOnce(this.track,"sync",this.addToMap),t.fetchTrack())},process:function(t,e){e?n.delay(n.bind(this.execute,this),1e3,t,e):this.removeFromMap()},start:function(){this.listenTo(this.ships,"change:selected",this.process)},stop:function(){this.stopListening(),this.removeFromMap()}}),e.exports=s},{"../map/map":28,backbone:84,jquery:117,underscore:371}],8:[function(t,e,i){"use strict";var n=t("jquery"),o=t("underscore"),r=t("backbone"),s=t("./platform"),a=t("../models/ship/collection"),l=t("./router"),u=t("../layer/reception-layer"),c=t("../layer/ships-layer"),h=t("../layer/track-layer"),p=(t("../views/desktop-view"),t("./notifications")),d=t("../lib/socket"),f=function(){this.platform=s,this.showSplash(),this.loading=null,this.counter=0};o.extend(f.prototype,r.Events,{start:function(){this.trigger("startListening"),this.shipsLayer.addToMap(),this.trackLayer.start(),this.notifications.start(),this.ships.start(),d.reconnect(),this.listenToOnce(s,"hidden",this.stop)},stop:function(){this.trigger("shopListening"),d.disconnect(),this.shipsLayer.removeFromMap(),this.trackLayer.stop(),this.notifications.stop(),this.ships.stop(),this.listenToOnce(s,"visible",this.start)},showSplash:function(){n("#splash").show(),n(".loading-progress").carousel({interval:500})},hideSplash:function(){n(".loading-progress").carousel("pause"),n("#splash").hide()},showLoading:function(){this.counter++,this.loading||(this.loading=n.notify("loading",{offset:s.isCordova?30:20,allow_dismiss:!1,delay:0,template:'<div class="loading"></div>',placement:{from:"top",align:"center"}}))},hideLoading:function(){this.counter--,this.counter>0||(this.loading.close(),this.loading=null)},run:function(){n.ajaxSetup({beforeSend:o.bind(this.showLoading,this),complete:o.bind(this.hideLoading,this)}),this.ships=new a({app:this.app}),this.notifications=new p({ships:this.ships}),this.router=new l({ships:this.ships}),this.receptionLayer=new u({app:this}),this.shipsLayer=new c({ships:this.ships,app:this}),this.trackLayer=new h({ships:this.ships,app:this}),this.contentView=this.render();var t=o.debounce(o.bind(function(){this.hideSplash(),this.stopListening(this,"shipslayer:update",t)},this),1e3);this.listenTo(this,"splash:hide",this.hideSplash),this.listenTo(this,"splash:show",this.showSplash),this.listenTo(this,"shipslayer:update",t),this.start()}}),e.exports=f},{"../layer/reception-layer":5,"../layer/ships-layer":6,"../layer/track-layer":7,"../lib/socket":20,"../models/ship/collection":41,"../views/desktop-view":55,"./notifications":12,"./platform":14,"./router":19,backbone:84,jquery:117,underscore:371}],9:[function(t,e,i){"use strict";var n=t("underscore"),o=t("backbone"),r=o.Collection.extend({fromJSON:function(t){n.each(t,function(t){t.name=t.name.toLowerCase(),this.add(t)},this)},lookup:function(t,e){var i=this.findWhere({name:t});if(!i)return e;var o=i.get("lookuptable"),r=n.findWhere(o,{value:e});return r&&r.desc||e}});e.exports=r},{backbone:84,underscore:371}],10:[function(t,e,i){"use strict";var n=t("jquery");t("underscore");e.exports=function(t){t.animate({backgroundColor:"#d9edf7"},{duration:500,complete:function(){n(this).animate({backgroundColor:"#fffff"},{duration:500,complete:function(){n(this).removeAttr("style")}})}})}},{jquery:117,underscore:371}],11:[function(t,e,i){"use strict";var n={distance:function(t,e,i,n){var o=.017453292519943295,r=Math.cos,s=.5-r((i-t)*o)/2+r(t*o)*r(i*o)*(1-r((n-e)*o))/2;return 12742e3*Math.asin(Math.sqrt(s))},roundToDecimal:function(t,e){var i=Math.pow(10,e);return Math.round(t*i)/i},dmsStringToDecimal:function(t){return n.dmsToDecimal.apply(n,t.split(" "))},formatDms:function(t,e,i,n){var o=n.toUpperCase().substring(0,1);return t+"° "+e+"' "+i+'" '+o},dmsToDecimal:function(t,e,i,o){t=parseFloat(t),e=parseFloat(e),i=parseFloat(i);var r=t+e/60+i/3600;return r="S"==o||"W"==o?-1*r:r,n.roundToDecimal(r,5)},decimalToDms:function(t,e){0>t&&(t*=-1);var i=Math.floor(t),o=60*(t-i),r=Math.floor(o),s=60*(o-r),a=n.roundToDecimal(s,2);return n.formatDms(i,r,a,e)},decimalLatToDms:function(t){var e=0>t?"S":"N";return n.decimalToDms(t,e)},decimalLngToDms:function(t){var e=0>t?"W":"E";return n.decimalToDms(t,e)},decimalToDmsList:function(t,e){0>t&&(t*=-1);var i=Math.floor(t),o=60*(t-i),r=Math.floor(o),s=60*(o-r),a=n.roundToDecimal(s,2);return{degrees:i,minutes:r,seconds:a,hemisphere:e}}};e.exports=n},{}],12:[function(t,e,i){"use strict";var n=t("moment"),o=t("jquery"),r=t("underscore"),s=t("backbone"),a=t("./socket"),l=t("../models/log/collection"),u=t("../models/ship/model"),c=(t("../models/position/model"),t("./notifications/notification-template.hbs")),h=function(t){this.ships=t.ships};r.extend(h.prototype,s.Events,{notify:function(t,e,i){o.notify(t,{type:e||"info",delay:void 0===i?2e3:i,newest_on_top:!0,spacing:5,url_target:"_self",template:c(),placement:{from:"bottom",align:"center"}})},onConnected:function(t){this.notify({title:"Socket",message:"connected"},"success"),l.add({type:"socket",title:"Socket connected",datetime:n().format("YYYY-MM-DD HH:mm:ss")})},onDisonnected:function(t){this.notify({title:"Socket",message:"disconnected"},"success"),l.add({type:"socket",title:"Socket disconnected",datetime:n().format("YYYY-MM-DD HH:mm:ss")})},onFailed:function(t){this.notify({title:"Socket",message:"connection failed"},"alert"),l.add({type:"socket",title:"Socket connection failed",datetime:n().format("YYYY-MM-DD HH:mm:ss")})},onShipUpdated:function(t){u.findOrCreate(t)},onShipCreated:function(t){u.findOrCreate(t)},onTrackAdded:function(t){l.add({type:"position-added",title:"Position added",userid:t.position.userid,message:"Ship: "+t.shipname+"<br/>Distance moved: "+Number(t.distancemoved).toFixed(2)+"m",datetime:n().format("YYYY-MM-DD HH:mm:ss")})},
onShipExpire:function(t){this.notify({title:"Expired",message:t.getHelper().toTitle()},"alert",5e3),l.add({type:"ship-expired",title:"Ship expired",userid:t.get("userid"),message:t.getHelper().toTitle(),datetime:n().format("YYYY-MM-DD HH:mm:ss")})},expireShips:function(t){r.each(t,function(t){this.onShipExpire(t)},this)},start:function(){this.listenTo(this.ships,"expired",this.expireShips),this.socket||a.connect().done(r.bind(function(t){this.socket=t,this.socket.on("connected",this.onConnected.bind(this)),this.socket.on("disconnect",this.onDisonnected.bind(this)),this.socket.on("connect_failed",this.onFailed.bind(this)),this.socket.on("ship:create",this.onShipCreated.bind(this)),this.socket.on("ship:update",this.onShipUpdated.bind(this)),this.socket.on("track:add",this.onTrackAdded.bind(this))},this))},stop:function(){this.stopListening(this.ships,"expired",this.expireShips),l.reset(),this.socket&&(this.socket.removeListener("connected",this.onConnected.bind(this)),this.socket.removeListener("disconnect",this.onDisonnected.bind(this)),this.socket.removeListener("connect_failed",this.onFailed.bind(this)),this.socket.removeListener("ship:create",this.onShipCreated.bind(this)),this.socket.removeListener("ship:update",this.onShipUpdated.bind(this)),this.socket.removeListener("track:add",this.onTrackAdded.bind(this)),this.socket=null)}}),e.exports=h},{"../models/log/collection":34,"../models/position/model":40,"../models/ship/model":45,"./notifications/notification-template.hbs":13,"./socket":20,backbone:84,jquery:117,moment:252,underscore:371}],13:[function(t,e,i){var n=t("hbsfy/runtime");e.exports=n.template({compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){return'<div data-notify="container" class="col-xs-11 col-sm-3 notification" role="alert">\n  <button type="button" aria-hidden="true" class="close" data-notify="dismiss">×</button>\n  <span data-notify="icon"></span>\n  <span data-notify="title">{1}</span>\n  <span data-notify="message">{2}</span>\n  <div class="progress" data-notify="progressbar">\n    <div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>\n  </div>\n  <a href="{3}" target="{4}" data-notify="url"></a>\n</div>'},useData:!0})},{"hbsfy/runtime":116}],14:[function(t,e,i){"use strict";var n=t("../config").server,o=t("jquery"),r=t("underscore"),s=t("backbone"),a={cordova:{"visibility-change":t("./platform/cordova/visibility-change"),overrides:t("./platform/cordova/overrides")},"default":{"visibility-change":t("./platform/default/visibility-change"),"prevent-overscroll":t("./platform/default/prevent-overscroll")}},l=function(){this.isTouchDevice=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||!1,this.fastclick=this.isTouchDevice?"touchend":"click",this.isMobile=void 0,this.isCordova="undefined"!=typeof cordova,this.type=this.isCordova?"cordova":"default",this.isReady=this.isCordova?!1:!0,this.initialize()};r.extend(l.prototype,s.Events,{initialize:function(){var t;t=this.isCordova?a.cordova:a["default"],this.onReady().done(function(e){r.each(t,function(t){t(e)})})},onReady:function(){var t=this,e=o.Deferred();return this.isReady&&e.resolve(this),document.addEventListener("deviceready",function(){t.isReady=!0,e.resolve(t)}),e.promise()},socketConfig:function(){return"https:"===location.protocol||this.isCordova?{protocol:"https:",hostname:n.hostname,port:n.https}:{protocol:"http:",hostname:n.hostname,port:n.http}},setPrefix:function(t){return"https:"===location.protocol||this.isCordova?"https://"+n.hostname+":"+n.https+t:"http://"+n.hostname+":"+n.http+t}}),e.exports=new l},{"../config":1,"./platform/cordova/overrides":15,"./platform/cordova/visibility-change":16,"./platform/default/prevent-overscroll":17,"./platform/default/visibility-change":18,backbone:84,jquery:117,underscore:371}],15:[function(t,e,i){"use strict";var n=t("jquery");e.exports=function(t){"iOS"===device.platform&&Number(device.version.substr(0,1))>=7&&n("html").addClass("ios7")}},{jquery:117}],16:[function(t,e,i){"use strict";e.exports=function(t){document.addEventListener("pause",function(){t.trigger("hidden")},!1),document.addEventListener("resume",function(){t.trigger("visible")},!1)}},{}],17:[function(t,e,i){"use strict";var n=t("jquery");e.exports=function(){var t=".scrollable";n(document).on("touchmove",function(t){t.preventDefault()}),n("body").on("touchstart",t,function(t){0===t.currentTarget.scrollTop?t.currentTarget.scrollTop=1:t.currentTarget.scrollHeight===t.currentTarget.scrollTop+t.currentTarget.offsetHeight&&(t.currentTarget.scrollTop-=1)}),n("body").on("touchmove",t,function(t){t.stopPropagation()})}},{jquery:117}],18:[function(t,e,i){"use strict";e.exports=function(t){!function(){function e(e){var n="visible",o="hidden",r={focus:n,focusin:n,pageshow:n,blur:o,focusout:o,pagehide:o};e=e||window.event,e.type in r?t.trigger(r[e.type]):t.trigger(this[i]?"hidden":"visible")}var i="hidden";i in document?document.addEventListener("visibilitychange",e):(i="mozHidden")in document?document.addEventListener("mozvisibilitychange",e):(i="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",e):(i="msHidden")in document?document.addEventListener("msvisibilitychange",e):"onfocusin"in document?document.onfocusin=document.onfocusout=e:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=e,void 0!==document[i]&&e({type:document[i]?"blur":"focus"})}()}},{}],19:[function(t,e,i){"use strict";var n=t("underscore"),o=t("backbone"),r=o.Router.extend({routes:{"mmsi/:mmsi":"search"},initialize:function(t){this.ships=t.ships,this.ships.once("sync",function(){o.history.start()}),this.listenTo(this.ships,"remove",function(t){o.history.fragment==="mmsi/"+t.get("userid")&&this.navigate("")},this);var e=n.debounce(n.bind(function(t){this.navigate(t)},this),300);this.listenTo(this.ships,"change:selected",function(t,i){e(i?"mmsi/"+t.get("userid"):"")})},search:function(t){var e=this.ships.findWhere({userid:Number(t)});e?this.ships.selectShip(e):this.navigate("")}});e.exports=r},{backbone:84,underscore:371}],20:[function(t,e,i){"use strict";var n,o=t("jquery"),r=t("socket.io-client"),s=(t("../config").server,t("./platform"));e.exports={disconnect:function(){n&&(n.removeAllListeners(),n.disconnect())},reconnect:function(){n&&n.connect()},connect:function(){var t=o.Deferred();return n?t.resolve(n):s.onReady().done(function(e){var i=s.socketConfig(),o=i.protocol+"//"+i.hostname+":"+i.port;n="https:"===location.protocol||s.isCordova?r.connect(o,{secure:!0}):r.connect(o),t.resolve(n)}),t.promise()}}},{"../config":1,"./platform":14,jquery:117,"socket.io-client":254}],21:[function(t,e,i){"use strict";var n=t("./platform"),o=t("backbone"),r=o.View.extend({delegateEvents:function(t){var e,i,r;this.events=this.events||t;for(e in this.events)0===e.indexOf("fastclick")&&(i=n.isTouchDevice?e.replace("fastclick","touchend"):e.replace("fastclick","click"),r=this.events[e],this.events[i]=r,delete this.events[e]);return o.View.prototype.delegateEvents.call(this,this.events)}});e.exports=r},{"./platform":14,backbone:84}],22:[function(t,e,i){var n=t("hbsfy/runtime");e.exports=n.template({compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){var r,s=null!=e?e:{},a=i.helperMissing,l="function",u=t.escapeExpression;return'<?xml version="1.0"?>\n<svg width="20"\n     height="20"\n     viewPort="0 0 20 20"\n     version="1.1"\n     xmlns="http://www.w3.org/2000/svg">\n\n  <g transform="rotate('+u((r=null!=(r=i.angle||(null!=e?e.angle:e))?r:a,typeof r===l?r.call(s,{name:"angle",hash:{},data:o}):r))+', 10, 10)">\n    <circle cx="10" cy="10" r="9" fill="#FFFFFF"/>\n    <circle cx="10" cy="10" r="8" fill="#999999"/>\n    <polygon\n      stroke="#FFFFFF"\n      fill="'+u((r=null!=(r=i.fill||(null!=e?e.fill:e))?r:a,typeof r===l?r.call(s,{name:"fill",hash:{},data:o}):r))+'"\n      stroke-width="1"\n      stroke-linecap="butt"\n      points="10,5 14,10, 12,10, 12,15, 8,15, 8,10 6,10"/>\n  </g>\n</svg>'},useData:!0})},{"hbsfy/runtime":116}],23:[function(t,e,i){"use strict";var n=t("underscore"),o=t("../../lib/view"),r=(t("../map"),o.extend({onClick:n.noop,showLabel:n.noop,hideLabel:n.noop}));e.exports=r},{"../../lib/view":21,"../map":28,underscore:371}],24:[function(t,e,i){"use strict";var n=t("../../config").frontend.googlemapjs,o=t("../../lib/platform"),r=t("jquery"),s=t("underscore"),a=t("backbone"),l=t("geographiclib"),u=t("js-base64").Base64,c=t("./arrow.hbs"),h=t("./triangle.hbs"),p=function(t){this.map=void 0,this.shapes={},this.reception={},this.markers={},this.track={},this.positions={},this.perimeter=-1,this.px={},window.initMap=s.bind(this.initMap,this),this.onReadyMap=r.Deferred();var e=document.getElementsByTagName("body")[0],i=document.createElement("script");i.type="text/javascript",i.src="https://maps.googleapis.com/maps/api/js?key="+n.apiKey+"&callback=initMap",e.appendChild(i)};s.extend(p.prototype,a.Events,{initMap:function(){t("./maplabel"),this.map=new google.maps.Map(document.getElementById("map"),{center:n.center,zoom:n.zoom,disableDefaultUI:!0}),google.maps.event.addListener(this.map,"zoom_changed",s.bind(this.onZoom,this)),google.maps.event.addListener(this.map,"mousemove",s.bind(this.propagateMousemove,this)),google.maps.event.addListener(this.map,"click",s.bind(this.propagateClick,this)),this.encode=t("../../contrib/geojson-google-maps.js")(google),this.onReadyMap.resolve()},getMap:function(){return this.map},resetCursor:function(){},setCursor:function(t){},propagateMousemove:function(t){t.lngLat={lng:t.latLng.lng(),lat:t.latLng.lat()},this.trigger("mousemove",t)},propagateClick:function(t){t.lngLat={lng:t.latLng.lng(),lat:t.latLng.lat()},this.trigger("click",t)},onReady:function(){return this.map&&this.onReadyMap.resolve(),this.onReadyMap.promise()},zoomIn:function(){var t=this.map.getZoom();this.map.setZoom(t+1)},zoomOut:function(){var t=this.map.getZoom();0!==t&&this.map.setZoom(t-1)},toHome:function(){this.map.panTo(n.center),this.map.setZoom(n.zoom)},onZoom:function(){this.perimeter=-1},inView:function(t){if(this.map){var e=this.map.getBounds();if(e){var i=e.getNorthEast(),n=e.getSouthWest();return this.map.getZoom()>=14&&(i.lat()>t.lat||i.lng()>t.lng||n.lat()<t.lat||n.lng()<t.lng)?!0:!1}}},calculatePerimeter:function(){if(this.perimeter>0)return this.perimeter;var t=this.map.getBounds(),e=t.getNorthEast(),i=t.getSouthWest(),n=l.Geodesic.WGS84,o=Math.round(n.Inverse(e.lat(),e.lng(),i.lat(),i.lng()).s12),s=r("body").width();return this.perimeter=15*(o/s),this.perimeter},_triggerMousemove:function(t){google.maps.event.trigger(this.map,"mousemove",t)},_triggerClick:function(t){google.maps.event.trigger(this.map,"click",t)},_registerEventPropagation:function(t){t.listeners={mousemove:google.maps.event.addListener(t,"mousemove",s.bind(this._triggerMousemove,this)),click:google.maps.event.addListener(t,"click",s.bind(this._triggerClick,this))}},_unregisterEventPropagation:function(t){s.each(t.listeners,function(t){google.maps.event.removeListener(t)},this)},addMarkerToMap:function(t,e){var i=[],n=s.map(e.features,function(t){i.push(t.properties.id);var e=c({angle:t.properties.angle,fill:t.properties.selected?"#FFFFFF":"none"});return{icon:{url:"data:image/svg+xml;base64,"+u.encode(e),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(10,10)},position:{lat:t.geometry.coordinates[1],lng:t.geometry.coordinates[0]},id:t.properties.id,_title:String(t.properties.title),zIndex:100}});s.each(n,function(t){this.markers.hasOwnProperty(t.id)?(this.markers[t.id].setPosition(t.position),this.markers[t.id].setIcon(t.icon),this.markers[t.id].maplabel.set("position",new google.maps.LatLng(t.position.lat,t.position.lng))):(this.markers[t.id]=new google.maps.Marker(s.extend(t,{map:this.map})),this._registerEventPropagation(this.markers[t.id]),this.markers[t.id].maplabel=new MapLabel({map:this.map,text:t._title,maxZoom:22,minZoom:14,zIndex:99,position:new google.maps.LatLng(t.position.lat,t.position.lng)}))},this),s.each(s.difference(Object.keys(this.markers),i),function(t){this._unregisterEventPropagation(this.markers[t]),this.markers[t].maplabel.setMap(null),delete this.markers[t].maplabel,this.markers[t].setMap(null),delete this.markers[t]},this)},addShapeToMap:function(t,e){var i=t.name;if(this.shapes.hasOwnProperty(i))this._unregisterEventPropagation(this.shapes[i]),this.shapes[i].setMap(null),delete this.shapes[i],this.addShapeToMap(t,e);else{var n={strokeOpacity:0,strokeWeight:0,fillColor:t.json.paint["fill-color"],fillOpacity:1,zIndex:90};this.shapes[i]=this.encode(e,n),this.shapes[i].error?console.error(this.shapes[i].error):(this.shapes[i].setMap(this.map),this._registerEventPropagation(this.shapes[i]))}},addReceptionLayerToMap:function(t,e){var i=t.name;if(this.reception.hasOwnProperty(i))this._unregisterEventPropagation(this.reception[i]),this.reception[i].setMap(null),delete this.reception[i],this.addReceptionLayerToMap(t,e);else{var n={strokeOpacity:0,strokeWeight:0,fillColor:t.json.paint["fill-color"],fillOpacity:1,zIndex:80};this.reception[i]=this.encode(e,n),this.reception[i].error?console.error(this.reception[i].error):(this.reception[i].setMap(this.map),this._registerEventPropagation(this.reception[i]))}},addTrackToMap:function(t,e){var i=t.name;this.track.hasOwnProperty(i)&&this.removeTrackFromMap();var n={strokeOpacity:1,strokeWeight:t.json.paint["line-width"],strokeColor:t.json.paint["line-color"],zIndex:94};this.track[i]=this.encode(e,n),this.track[i].error?console.error(this.track[i].error):(this.track[i].setMap(this.map),this._registerEventPropagation(this.track[i]))},addPositionsToMap:function(t,e){var i=[],n=s.map(e.features,function(t){i.push(t.properties.id);var e=h({angle:t.properties.angle});return{icon:{url:"data:image/svg+xml;base64,"+u.encode(e),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(10,10)},position:{lat:t.geometry.coordinates[1],lng:t.geometry.coordinates[0]},id:t.properties.id,zIndex:96}});s.each(n,function(t){this.positions.hasOwnProperty(t.id)||(this.positions[t.id]=new google.maps.Marker(s.extend(t,{map:this.map})),this._registerEventPropagation(this.positions[t.id]))},this),s.each(s.difference(Object.keys(this.positions),i),function(t){this._unregisterEventPropagation(this.positions[t]),this.positions[t].setMap(null),delete this.positions[t]},this)},addToMap:function(t){var e=t.name.indexOf("-"),i=e>0?t.name.substr(0,t.name.indexOf("-")):t.name,n={markers:this.addMarkerToMap,shape:this.addShapeToMap,reception:this.addReceptionLayerToMap,track:this.addTrackToMap,positions:this.addPositionsToMap},o=t.data;n.hasOwnProperty(i)&&s.each(t.layer,function(t){n[i].call(this,t,o)},this)},removeMarkerFromMap:function(t){s.each(Object.keys(this.markers),function(t){this._unregisterEventPropagation(this.markers[t]),this.markers[t].maplabel.setMap(null),delete this.markers[t].maplabel,this.markers[t].setMap(null),delete this.markers[t]},this)},removeShapeFromMap:function(t){this.shapes.hasOwnProperty(t)&&(this._unregisterEventPropagation(this.shapes[t]),this.shapes[t].setMap(null),delete this.shapes[t])},removeReceptionLayerToMap:function(t){this.reception.hasOwnProperty(t)&&(this._unregisterEventPropagation(this.reception[t]),this.reception[t].setMap(null),delete this.reception[t])},removeTrackFromMap:function(){s.each(Object.keys(this.track),function(t){this._unregisterEventPropagation(this.track[t]),this.track[t].setMap(null),delete this.track[t]},this)},removePositionsFromMap:function(t){s.each(Object.keys(this.positions),function(t){this._unregisterEventPropagation(this.positions[t]),this.positions[t].setMap(null),delete this.positions[t]},this)},removeFromMap:function(t){var e=t.name.indexOf("-"),i=e>0?t.name.substr(0,t.name.indexOf("-")):t.name,n={markers:this.removeMarkerFromMap,shape:this.removeShapeFromMap,reception:this.removeReceptionLayerToMap,track:this.removeTrackFromMap,positions:this.removePositionsFromMap};t.data;n.hasOwnProperty(i)&&s.each(t.layer,function(e){n[i].call(this,t.name)},this)},setPaintProperty:function(t,e,i){this.shapes.hasOwnProperty(t)&&"fill-color"===e&&this.shapes[t].setOptions({fillColor:i})},calculateOffsetBounds:function(t){var e=l.Geodesic.WGS84,i=500,n=e.Direct(t.lat,t.lng,0,i),o=e.Direct(t.lat,t.lng,90,i),s=e.Direct(t.lat,t.lng,180,i),a=e.Direct(t.lat,t.lng,270,i),u=r("body").width(),c=e.Inverse(n.lat2,o.lon2,s.lat2,a.lon2).s12,h=420*c/u,p=e.Direct(s.lat2,a.lon2,270,h),d={lat:p.lat2,lng:p.lon2},f={lat:n.lat2,lng:o.lon2};return new google.maps.LatLngBounds(d,f)},center:function(t){this.onReady().done(s.bind(function(){if(o.isMobile)this.map.panTo(t),this.map.setZoom(15);else{var e=this.calculateOffsetBounds(t);this.map.fitBounds(e)}},this))},getLngLat:function(t){return{lat:t.get("latitude"),lng:t.get("longitude")}},moveIntoView:function(t){var e=t.getLngLat(),i=this.map.getBounds();i.getNorthEast().lat()<e.lat&&this.map.panTo(e),i.getNorthEast().lng()<e.lng&&this.map.panTo(e),i.getSouthWest().lat()>e.lat&&this.map.panTo(e),i.getSouthWest().lng()>e.lng&&this.map.panTo(e)}}),e.exports=p},{"../../config":1,"../../contrib/geojson-google-maps.js":3,"../../lib/platform":14,"./arrow.hbs":22,"./maplabel":25,"./triangle.hbs":26,backbone:84,geographiclib:96,jquery:117,"js-base64":118,underscore:371}],25:[function(t,e,i){function n(t){this.set("fontFamily","sans-serif"),this.set("fontSize",12),this.set("fontColor","#000000"),this.set("strokeWeight",4),this.set("strokeColor","#ffffff"),this.set("align","center"),this.set("zIndex",1e3),this.setValues(t)}n.prototype=new google.maps.OverlayView,window.MapLabel=n,n.prototype.changed=function(t){switch(t){case"fontFamily":case"fontSize":case"fontColor":case"strokeWeight":case"strokeColor":case"align":case"text":return this.drawCanvas_();case"maxZoom":case"minZoom":case"position":return this.draw()}},n.prototype.drawCanvas_=function(){var t=this.canvas_;if(t){var e=t.style;e.zIndex=this.get("zIndex");var i=t.getContext("2d");i.clearRect(0,0,t.width,t.height),i.strokeStyle=this.get("strokeColor"),i.fillStyle=this.get("fontColor"),i.font=this.get("fontSize")+"px "+this.get("fontFamily");var n=Number(this.get("strokeWeight")),o=this.get("text");if(o){n&&(i.lineWidth=n,i.strokeText(o,n,n)),i.fillText(o,n,n);var r=i.measureText(o),s=r.width+n;e.marginLeft=this.getMarginLeft_(s)+"px",e.marginTop="-0.4em"}}},n.prototype.onAdd=function(){var t=this.canvas_=document.createElement("canvas"),e=t.style;e.position="absolute";var i=t.getContext("2d");i.lineJoin="round",i.textBaseline="top",this.drawCanvas_();var n=this.getPanes();n&&n.mapPane.appendChild(t)},n.prototype.onAdd=n.prototype.onAdd,n.prototype.getMarginLeft_=function(t){switch(this.get("align")){case"left":return 0;case"right":return-t}return t/-2},n.prototype.draw=function(){var t=this.getProjection();if(t&&this.canvas_){var e=this.get("position");if(e){var i=t.fromLatLngToDivPixel(e),n=this.canvas_.style;n.top=i.y+15+"px",n.left=i.x+"px",n.visibility=this.getVisible_()}}},n.prototype.draw=n.prototype.draw,n.prototype.getVisible_=function(){var t=this.get("minZoom"),e=this.get("maxZoom");if(void 0===t&&void 0===e)return"";var i=this.getMap();if(!i)return"";var n=i.getZoom();return t>n||n>e?"hidden":""},n.prototype.onRemove=function(){var t=this.canvas_;t&&t.parentNode&&t.parentNode.removeChild(t)},n.prototype.onRemove=n.prototype.onRemove},{}],26:[function(t,e,i){var n=t("hbsfy/runtime");e.exports=n.template({compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){var r;return'<?xml version="1.0"?>\n<svg width="20"\n     height="20"\n     viewPort="0 0 20 20"\n     version="1.1"\n     xmlns="http://www.w3.org/2000/svg">\n\n  <g transform="rotate('+t.escapeExpression((r=null!=(r=i.angle||(null!=e?e.angle:e))?r:i.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"angle",hash:{},data:o}):r))+', 10, 10)">\n    <polygon\n      stroke="none"\n      fill="#555"\n      stroke-width="1"\n      stroke-linecap="butt"\n      points="10,5 14,10, 12,10, 12,15, 8,15, 8,10 6,10"/>\n  </g>\n</svg>'},useData:!0})},{"hbsfy/runtime":116}],27:[function(t,e,i){"use strict";var n=(t("../config").frontend,{"default":t("./mapboxgljs/label"),googlemapjs:t("./googlejs/label")}),o="googlemapjs";e.exports=n.hasOwnProperty(o)?n[o]:n["default"]},{"../config":1,"./googlejs/label":23,"./mapboxgljs/label":29}],28:[function(t,e,i){"use strict";var n=(t("../config").frontend,{"default":t("./mapboxgljs/map"),googlemapjs:t("./googlejs/map")}),o="googlemapjs",r=n.hasOwnProperty(o)?new n[o]:new n["default"];e.exports=r},{"../config":1,"./googlejs/map":24,"./mapboxgljs/map":30}],29:[function(t,e,i){"use strict";var n=t("../../lib/platform"),o=t("jquery"),r=t("underscore"),s=t("../../lib/view"),a=t("../map"),l=t("./popup"),u=s.extend({onClick:r.noop,initialize:function(){this.label=null,this.listenTo(this.model,"change:mouseover",this.process),this.listenTo(this.model,"remove",this.hideLabel)},process:function(){a.onReady().done(r.bind(function(){this.model.get("mouseover")===!0?this.showLabel():this.hideLabel()},this))},_click:function(t){this.onClick(t),this.hideLabel()},showLabel:function(){this.label&&this.hideLabel(),this.label=(new l).setLngLat(this.getCoordinates()).setHTML(this.toTitle()).addClass(this.classname).addTo(a.getMap()),o(this.label._container).find(".mapboxgl-popup-content").on(n.fastclick,r.bind(this._click,this)),this.label.once("remove",r.bind(function(t){delete this.label},this))},hideLabel:function(){this.label&&(o(this.label._container).find(".mapboxgl-popup-content").off(n.fastclick,r.bind(this._click,this)),this.label.remove(),delete this.label)}});e.exports=u},{"../../lib/platform":14,"../../lib/view":21,"../map":28,"./popup":31,jquery:117,underscore:371}],30:[function(t,e,i){"use strict";var n=t("../../config").frontend.mapboxgljs,o=t("../../lib/platform"),r=t("mapbox-gl");r.accessToken=n.accessToken;var s=t("jquery"),a=t("underscore"),l=t("backbone"),u=t("geographiclib"),c=function(e){this.map=new r.Map({container:"map",style:t("./style.json"),center:n.center,zoom:n.zoom}),this.perimeter=-1,this.map.on("zoom",a.bind(this.onZoom,this)),this.map.on("mousemove",a.bind(this.propagateMousemove,this)),this.map.on("click",a.bind(this.propagateClick,this))};a.extend(c.prototype,l.Events,{resetCursor:function(){this.map.getCanvas().style.cursor=""},setCursor:function(t){this.map.getCanvas().style.cursor=t},propagateMousemove:function(t){this.trigger("mousemove",t)},propagateClick:function(t){this.trigger("click",t)},onReady:function(){var t=s.Deferred();return this.map._loaded&&t.resolve(),this.map.on("load",t.resolve),t.promise()},getMap:function(){return this.map},zoomIn:function(){this.map.zoomIn()},zoomOut:function(){this.map.zoomOut()},toHome:function(){this.map.flyTo({center:n.center,zoom:n.zoom})},toNorth:function(){this.map.resetNorth()},onZoom:function(){this.perimeter=-1},inView:function(t){var e=this.map.getBounds();return this.map.getZoom()>=14&&(e.getNorth()>t.lat||e.getEast()>t.lng||e.getSouth()<t.lat||e.getWest()<t.lng)?!0:!1},calculatePerimeter:function(){if(this.perimeter>0)return this.perimeter;var t=this.map.getBounds(),e=t.getNorthWest(),i=t.getNorthEast(),n=u.Geodesic.WGS84,o=Math.round(n.Inverse(e.lat,e.lng,i.lat,i.lng).s12),r=s("body").width();return this.perimeter=10*(o/r),this.perimeter},addToMap:function(t){this.map.getSource(t.name)?this.map.getSource(t.name).setData(t.data):this.map.addSource(t.name,{type:"geojson",data:t.data}),a.each(t.layer,function(e){if(this.map.style._layers[e.name]&&e.force===!0)this.map.removeLayer(e.name);else if(!this.map.style._layers[e.name]){var i=e.json;i.id=e.name,i.source=t.name,e.behind?this.map.addLayer(i,e.behind):this.map.addLayer(i)}},this)},removeFromMap:function(t){a.each(t.layer,function(t){this.map.style._layers[t]&&this.map.removeLayer(t)},this),this.map.getSource(t.name)&&this.map.removeSource(t.name)},setPaintProperty:function(t,e,i){var n=this;this.onReady().done(function(){n.map.setPaintProperty(t,e,i)})},calculateOffsetBounds:function(t){var e=u.Geodesic.WGS84,i=500,n=e.Direct(t.lat,t.lng,0,i),o=e.Direct(t.lat,t.lng,90,i),a=e.Direct(t.lat,t.lng,180,i),l=e.Direct(t.lat,t.lng,270,i),c=s("body").width(),h=e.Inverse(n.lat2,o.lon2,a.lat2,l.lon2).s12,p=420*h/c,d=e.Direct(a.lat2,l.lon2,270,p),f=new r.LngLat(d.lon2,d.lat2),m=new r.LngLat(o.lon2,n.lat2);return new r.LngLatBounds(f,m)},center:function(t){if(o.isMobile)this.map.flyTo({center:t,zoom:15});else{var e=this.calculateOffsetBounds(t);this.map.fitBounds(e)}},getLngLat:function(t){return new r.LngLat(t.get("longitude"),t.get("latitude"))},moveIntoView:function(t){var e=t.getLngLat(),i=t.getCoordinate(),n=this.map.getBounds();n.getNorth()<e.lat&&this.map.flyTo({center:i}),n.getEast()<e.lng&&this.map.flyTo({center:i}),n.getSouth()>e.lat&&this.map.flyTo({center:i}),n.getWest()>e.lng&&this.map.flyTo({center:i})}}),e.exports=c},{"../../config":1,"../../lib/platform":14,"./style.json":32,backbone:84,geographiclib:96,jquery:117,"mapbox-gl":133,underscore:371}],31:[function(t,e,i){"use strict";var n=t("underscore"),o=t("jquery"),r=t("mapbox-gl"),s=r.Popup.prototype._onClickClose;r.Popup.prototype._onClickClose=function(){this.fire("remove",this);try{s.apply(this,arguments)}catch(t){}},r.Popup.prototype.addClass=function(t){return this.classNames||(this.classNames=[]),this.classNames.indexOf(t)<0&&this.classNames.push(t),this};var a=r.Popup.prototype._update;r.Popup.prototype._update=function(){var t=a.call(this);if(this._container){var e=o(this._container);n.each(this.classNames,function(t){e.hasClass(t)||e.addClass(t)})}return t},e.exports=r.Popup},{jquery:117,"mapbox-gl":133,underscore:371}],32:[function(t,e,i){e.exports={created:0,draft:!1,glyphs:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",id:"streets-v8",modified:0,name:"Mapbox Streets",owner:"mapbox",sources:{composite:{type:"vector",url:"mapbox://mapbox.mapbox-terrain-v2,mapbox.mapbox-streets-v6"}},sprite:"ship-marker",version:8,layers:[{id:"background",layout:{visibility:"visible"},maxzoom:22,minzoom:0,paint:{"background-color":"#ede9d9"},type:"background"},{filter:["==","class","crop"],id:"landcover_crop",layout:{visibility:"visible"},maxzoom:14,minzoom:0,paint:{"fill-antialias":!1,"fill-color":"#ddecb1","fill-opacity":{base:1.5,stops:[[2,.3],[14,0]]}},source:"composite","source-layer":"landcover",type:"fill"},{filter:["==","class","grass"],id:"landcover_grass",layout:{visibility:"visible"},maxzoom:14,minzoom:0,paint:{"fill-antialias":!1,"fill-color":"#ddecb1","fill-opacity":{base:1.5,stops:[[2,.3],[14,0]]}},source:"composite","source-layer":"landcover",type:"fill"},{filter:["==","class","scrub"],id:"landcover_scrub",layout:{visibility:"visible"},maxzoom:14,minzoom:0,paint:{"fill-antialias":!1,"fill-color":"#ddecb1","fill-opacity":{base:1.5,stops:[[2,.3],[14,0]]}},source:"composite","source-layer":"landcover",type:"fill"},{filter:["==","class","wood"],id:"landcover_wood",layout:{visibility:"visible"},maxzoom:14,minzoom:0,paint:{"fill-antialias":!1,"fill-color":"#ddecb1","fill-opacity":{base:1.5,stops:[[2,.3],[14,0]]}},source:"composite","source-layer":"landcover",type:"fill"},{filter:["==","class","snow"],id:"landcover_snow",layout:{visibility:"visible"},maxzoom:22,minzoom:0,paint:{"fill-antialias":!1,"fill-color":"#fff","fill-opacity":.2},source:"composite","source-layer":"landcover",type:"fill"},{filter:["==","class","scrub"],id:"scrub",layout:{visibility:"visible"},maxzoom:22,minzoom:9,paint:{"fill-color":"#ddecb1","fill-opacity":{base:1,stops:[[9,0],[16,.2]]}},source:"composite","source-layer":"landuse",type:"fill"},{filter:["==","class","grass"],id:"grass",layout:{visibility:"visible"},maxzoom:22,minzoom:9,paint:{"fill-color":"#ddecb1","fill-opacity":{base:1,stops:[[9,0],[16,.4]]}},source:"composite","source-layer":"landuse",type:"fill"},{filter:["==","class","wood"],id:"wood",layout:{visibility:"visible"},maxzoom:22,minzoom:6,paint:{"fill-color":"#ddecb1","fill-opacity":{base:1,stops:[[6,0],[16,.5]]}},source:"composite","source-layer":"landuse",type:"fill"},{filter:["==","class","hospital"],id:"hospital",layout:{visibility:"visible"},maxzoom:22,minzoom:0,paint:{"fill-color":"#f4dcdc"},source:"composite","source-layer":"landuse",type:"fill"},{filter:["==","class","school"],id:"school",layout:{visibility:"visible"},maxzoom:22,minzoom:0,paint:{"fill-color":"#f3ebb4"},source:"composite","source-layer":"landuse",type:"fill"},{filter:["==","class","park"],id:"parks",layout:{visibility:"visible"},maxzoom:22,minzoom:0,paint:{"fill-color":"#cde8a2","fill-opacity":{base:1,stops:[[5,0],[6,1]]}},source:"composite","source-layer":"landuse",type:"fill"},{filter:["==","class","glacier"],id:"glaciers",layout:{visibility:"visible"},maxzoom:22,minzoom:9,paint:{"fill-color":"#dcedf9","fill-opacity":{base:1,stops:[[9,0],[10,.25]]}},source:"composite","source-layer":"landuse",type:"fill"},{filter:["==","class","pitch"],id:"pitch",layout:{visibility:"visible"},maxzoom:22,minzoom:0,paint:{"fill-color":"#c3e194"},source:"composite","source-layer":"landuse",type:"fill"},{filter:["==","class","pitch"],id:"pitch-line",layout:{},maxzoom:22,minzoom:15,paint:{"line-color":"#e1f2c6"},source:"composite","source-layer":"landuse",type:"line"},{filter:["==","class","cemetery"],id:"cemetery",layout:{visibility:"visible"},maxzoom:22,minzoom:0,paint:{"fill-color":"#dde6c2"},source:"composite","source-layer":"landuse",type:"fill"},{filter:["==","class","industrial"],id:"industrial",layout:{visibility:"visible"},maxzoom:22,minzoom:0,paint:{"fill-color":"#e0dae0"},source:"composite","source-layer":"landuse",type:"fill"},{filter:["==","class","sand"],id:"sand",layout:{visibility:"visible"},maxzoom:22,minzoom:0,paint:{"fill-color":"#ededcf"},source:"composite","source-layer":"landuse",type:"fill"},{filter:["==","level",94],id:"hillshade_highlight_bright",layout:{visibility:"visible"},maxzoom:18,paint:{"fill-antialias":!1,"fill-color":"#fff","fill-opacity":{stops:[[15,.12],[18,0]]}},source:"composite","source-layer":"hillshade",type:"fill"},{filter:["==","level",90],id:"hillshade_highlight_med",layout:{visibility:"visible"},maxzoom:22,paint:{"fill-antialias":!1,"fill-color":"#fff","fill-opacity":{stops:[[15,.12],[18,0]]}},source:"composite","source-layer":"hillshade",type:"fill"},{filter:["==","level",89],id:"hillshade_shadow_faint",layout:{visibility:"visible"},maxzoom:17,paint:{"fill-antialias":!1,"fill-color":"#5a5517","fill-opacity":{stops:[[15,.05],[17,0]]}},source:"composite","source-layer":"hillshade",type:"fill"},{filter:["==","level",78],id:"hillshade_shadow_med",layout:{visibility:"visible"},maxzoom:22,paint:{"fill-antialias":!1,"fill-color":"#5a5517","fill-opacity":{stops:[[15,.05],[17,0]]}},source:"composite","source-layer":"hillshade",type:"fill"},{filter:["==","level",67],id:"hillshade_shadow_dark",layout:{visibility:"visible"},maxzoom:22,paint:{"fill-antialias":!1,"fill-color":"#5a5517","fill-opacity":{stops:[[15,.06],[17,0]]}},source:"composite","source-layer":"hillshade",type:"fill"},{filter:["==","level",56],id:"hillshade_shadow_extreme",layout:{visibility:"visible"},maxzoom:17,paint:{"fill-antialias":!1,"fill-color":"#5a5517","fill-opacity":{stops:[[15,.06],[17,0]]}},source:"composite","source-layer":"hillshade",type:"fill"},{filter:["any",["==","class","river"],["==","class","canal"]],id:"waterway-river",layout:{"line-cap":{base:1,stops:[[0,"butt"],[11,"round"]]},"line-join":"round",visibility:"visible"},maxzoom:22,minzoom:8,paint:{"line-color":"#8ccbf7","line-opacity":{base:1,stops:[[8,0],[8.5,1]]},"line-width":{base:1.3,stops:[[8.5,.1],[20,8]]}},source:"composite","source-layer":"waterway",type:"line"},{filter:["all",["!=","class","river"],["!=","class","canal"]],id:"waterway-other",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:13,paint:{"line-color":"#8ccbf7","line-opacity":{base:1,stops:[[13,0],[13.5,1]]},"line-width":{base:1.35,stops:[[13.5,.1],[20,3]]}},source:"composite","source-layer":"waterway",type:"line"},{
id:"water",layout:{visibility:"visible"},maxzoom:22,minzoom:0,paint:{"fill-color":"#8ccbf7"},source:"composite","source-layer":"water",type:"fill"},{filter:["in","$type","Polygon","LineString","Point"],id:"landuse-overlay",layout:{visibility:"visible"},maxzoom:22,minzoom:0,paint:{"fill-color":"#9DD3D8","fill-opacity":{base:1,stops:[[10,.25],[10.5,.15]]}},source:"composite","source-layer":"landuse_overlay",type:"fill"},{id:"landuse-overlay-pattern",paint:{"fill-color":"#9DD3D8","fill-opacity":{base:1,stops:[[10,0],[10.5,1]]},"fill-pattern":{base:1,stops:[[13,"marsh-16"],[14,"marsh-32"]]}},ref:"landuse-overlay"},{filter:["all",["==","$type","Polygon"],["==","class","land"]],id:"barrier_line-land-polygon",layout:{},maxzoom:22,minzoom:0,paint:{"fill-color":"#ede9d9"},source:"composite","source-layer":"barrier_line",type:"fill"},{filter:["all",["==","$type","LineString"],["==","class","land"]],id:"barrier_line-land-line",layout:{"line-cap":"round"},maxzoom:22,minzoom:0,paint:{"line-color":"#ede9d9","line-width":{base:1.99,stops:[[14,.75],[20,40]]}},source:"composite","source-layer":"barrier_line",type:"line"},{id:"building-bottom",layout:{visibility:"visible"},maxzoom:22,minzoom:15,paint:{"fill-color":"#cbc6b7","fill-opacity":{base:1,stops:[[15.5,0],[16,1]]}},source:"composite","source-layer":"building",type:"fill"},{id:"building-top",paint:{"fill-color":{base:1,stops:[[15,"#ede9d9"],[16,"#e8e0cc"]]},"fill-opacity":{base:1,stops:[[15,0],[15.5,1]]},"fill-outline-color":"#d0cbbb","fill-translate":{base:1,stops:[[15,[0,0]],[20,[-5,-5]]]}},ref:"building-bottom"},{filter:["all",["==","$type","Polygon"],["!=","type","apron"]],id:"aeroway-polygon",layout:{},maxzoom:22,minzoom:11,paint:{"fill-color":"#dbcedb","fill-opacity":{base:1,stops:[[11,0],[11.5,1]]}},source:"composite","source-layer":"aeroway",type:"fill"},{filter:["all",["==","$type","LineString"],["==","type","runway"]],id:"aeroway-runway",layout:{"line-cap":"butt",visibility:"visible"},maxzoom:22,minzoom:9,paint:{"line-color":"#dbcedb","line-width":{base:1.5,stops:[[9,1],[18,80]]}},source:"composite","source-layer":"aeroway",type:"line"},{filter:["all",["==","$type","LineString"],["==","type","taxiway"]],id:"aeroway-taxiway",layout:{"line-cap":"butt",visibility:"visible"},maxzoom:22,minzoom:9,paint:{"line-color":"#dbcedb","line-width":{base:1.5,stops:[[10,.5],[18,20]]}},source:"composite","source-layer":"aeroway",type:"line"},{filter:["all",[">=","admin_level",3],["==","maritime",0]],id:"admin-3-4-boundaries-bg",layout:{"line-join":"bevel",visibility:"visible"},maxzoom:22,minzoom:0,paint:{"line-blur":{base:1,stops:[[3,0],[8,3]]},"line-color":{base:1,stops:[[8,"#ede9d9"],[16,"#f6e8e1"]]},"line-dasharray":[1,0],"line-opacity":{base:1,stops:[[7,0],[8,.75]]},"line-translate":[0,0],"line-width":{base:1,stops:[[3,3.5],[10,8]]}},source:"composite","source-layer":"admin",type:"line"},{filter:["all",["==","$type","Polygon"],["==","class","street_limited"]],id:"tunnel-street_limited-polygon",layout:{visibility:"visible"},maxzoom:22,minzoom:0,paint:{"fill-color":"#EEE8E3","fill-opacity":.75},source:"composite","source-layer":"tunnel",type:"fill"},{filter:["==","class","path"],id:"tunnel-path",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:0,paint:{"line-color":"#f5f2ee","line-dasharray":{base:1,stops:[[15,[.1,1.25]],[16,[.1,1.6]],[17,[.1,1.45]],[18,[.1,1.3]]]},"line-opacity":{base:1,stops:[[15,0],[15.25,1]]},"line-width":{base:1.5,stops:[[15,1],[18,4]]}},source:"composite","source-layer":"tunnel",type:"line"},{filter:["all",["==","$type","LineString"],["==","class","street"]],id:"tunnel-street-low",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:11,paint:{"line-color":"#fff","line-opacity":{stops:[[11.5,0],[12,1],[14,1],[14.01,0]]},"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]}},source:"composite","source-layer":"tunnel",type:"line"},{filter:["all",["==","$type","LineString"],["==","class","street_limited"]],id:"tunnel-street_limited-low",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:11,paint:{"line-color":"#fff","line-opacity":{stops:[[11.5,0],[12,1],[14,1],[14.01,0]]},"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]}},source:"composite","source-layer":"tunnel",type:"line"},{filter:["==","class","motorway_link"],id:"tunnel-motorway_link-case",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:11,paint:{"line-color":"#fff","line-dasharray":[3,3],"line-gap-width":{base:1.5,stops:[[12,.5],[14,2],[18,18]]},"line-width":{base:1.5,stops:[[12,.75],[20,2]]}},source:"composite","source-layer":"tunnel",type:"line"},{filter:["in","class","service","driveway"],id:"tunnel-service-driveway-case",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:15,paint:{"line-color":"#c4beb7","line-dasharray":[3,3],"line-gap-width":{base:1.5,stops:[[14,.5],[18,12]]},"line-width":{base:1.5,stops:[[12,.75],[20,2]]}},source:"composite","source-layer":"tunnel",type:"line"},{filter:["all",["==","$type","LineString"],["all",["==","class","street_limited"],["!=","type","construction"]]],id:"tunnel-street_limited-case",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:11,paint:{"line-color":"#c4beb7","line-dasharray":[3,3],"line-gap-width":{base:1.5,stops:[[13,0],[14,2],[18,12]]},"line-opacity":{base:1,stops:[[13.99,0],[14,1]]},"line-width":{base:1.5,stops:[[12,.75],[20,2]]}},source:"composite","source-layer":"tunnel",type:"line"},{filter:["==","class","street"],id:"tunnel-street-case",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:11,paint:{"line-color":"#c4beb7","line-dasharray":[3,3],"line-gap-width":{base:1.5,stops:[[13,0],[14,2],[18,18]]},"line-opacity":{base:1,stops:[[13.99,0],[14,1]]},"line-width":{base:1.5,stops:[[12,.75],[20,2]]}},source:"composite","source-layer":"tunnel",type:"line"},{filter:["all",["==","class","main"],["!=","type","trunk"]],id:"tunnel-main-case",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:0,paint:{"line-color":"#c4beb7","line-dasharray":[3,3],"line-gap-width":{base:1.5,stops:[[8.5,.5],[10,.75],[18,26]]},"line-width":{base:1.2,stops:[[10,.75],[18,2]]}},source:"composite","source-layer":"tunnel",type:"line"},{filter:["all",["==","class","main"],["==","type","trunk"]],id:"tunnel-trunk-case",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:0,paint:{"line-color":"#fff","line-dasharray":[3,3],"line-gap-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-opacity":1,"line-width":{base:1.5,stops:[[5,.75],[16,2]]}},source:"composite","source-layer":"tunnel",type:"line"},{filter:["==","class","motorway"],id:"tunnel-motorway-case",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:0,paint:{"line-color":"#fff","line-dasharray":[3,3],"line-gap-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-opacity":1,"line-width":{base:1.5,stops:[[5,.75],[16,2]]}},source:"composite","source-layer":"tunnel",type:"line"},{id:"tunnel-motorway_link",paint:{"line-color":"#ffbe8c","line-dasharray":[1,0],"line-opacity":1,"line-width":{base:1.5,stops:[[12,.5],[14,2],[18,18]]}},ref:"tunnel-motorway_link-case"},{id:"tunnel-service-driveway",paint:{"line-color":"#fff","line-dasharray":[1,0],"line-width":{base:1.5,stops:[[14,.5],[18,12]]}},ref:"tunnel-service-driveway-case"},{filter:["all",["==","$type","LineString"],["all",["==","class","street_limited"],["==","type","construction"]]],id:"tunnel-construction",layout:{"line-cap":"butt","line-join":"miter",visibility:"visible"},maxzoom:22,minzoom:14,paint:{"line-color":"#d9d3c9","line-dasharray":{base:1,stops:[[14,[.4,.8]],[15,[.3,.6]],[16,[.2,.3]],[17,[.2,.25]],[18,[.15,.15]]]},"line-opacity":{base:1,stops:[[13.99,0],[14,1]]},"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,12]]}},source:"composite","source-layer":"tunnel",type:"line"},{id:"tunnel-street_limited",paint:{"line-color":"#EFEDEB","line-opacity":{base:1,stops:[[13.99,0],[14,1]]},"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,12]]}},ref:"tunnel-street_limited-case"},{id:"tunnel-street",paint:{"line-color":"#fff","line-opacity":{base:1,stops:[[13.99,0],[14,1]]},"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]}},ref:"tunnel-street-case"},{id:"tunnel-main",paint:{"line-blur":0,"line-color":"#fff","line-dasharray":[1,0],"line-opacity":1,"line-width":{base:1.5,stops:[[8.5,.5],[10,.75],[18,26]]}},ref:"tunnel-main-case"},{filter:["all",["==","oneway",1],["in","class","main","street","street_limited"],["!=","type","trunk"]],id:"tunnel-oneway-arrows-other",layout:{"icon-allow-overlap":!1,"icon-ignore-placement":!1,"icon-image":{base:1,stops:[[16,"oneway-spaced-small"],[17,"oneway-spaced-large"]]},"icon-padding":2,"symbol-placement":"line","symbol-spacing":250},maxzoom:22,minzoom:15,paint:{},source:"composite","source-layer":"tunnel",type:"symbol"},{id:"tunnel-trunk",paint:{"line-color":"#f2de9e","line-width":{base:1.5,stops:[[5,.75],[18,32]]}},ref:"tunnel-trunk-case"},{filter:["all",["==","oneway",1],["==","type","trunk"]],id:"tunnel-oneway-arrows-trunk",layout:{"icon-allow-overlap":!1,"icon-ignore-placement":!1,"icon-image":{base:1,stops:[[16,"oneway-spaced-white-small"],[17,"oneway-spaced-white-large"]]},"icon-padding":2,"symbol-placement":"line","symbol-spacing":250},maxzoom:22,minzoom:15,paint:{},source:"composite","source-layer":"tunnel",type:"symbol"},{id:"tunnel-motorway",paint:{"line-blur":0,"line-color":"#ffbe8c","line-dasharray":[1,0],"line-opacity":1,"line-width":{base:1.5,stops:[[5,.75],[18,32]]}},ref:"tunnel-motorway-case"},{filter:["in","class","major_rail","minor_rail"],id:"tunnel-rail",layout:{"line-cap":"butt",visibility:"visible"},maxzoom:22,minzoom:13,paint:{"line-color":{stops:[[13,"#d8d5c8"],[16,"#c0beb2"]]},"line-width":{base:1.5,stops:[[14,.5],[20,1]]}},source:"composite","source-layer":"tunnel",type:"line"},{id:"tunnel-rail-tracks",paint:{"line-color":{stops:[[13,"#d8d5c8"],[16,"#c0beb2"]]},"line-dasharray":[.1,15],"line-opacity":{base:1,stops:[[13.75,0],[20,1]]},"line-width":{base:1.5,stops:[[14,4],[20,8]]}},ref:"tunnel-rail"},{filter:["all",["==","oneway",1],["in","class","motorway","motorway_link"]],id:"tunnel-oneway-arrows-motorway",layout:{"icon-allow-overlap":!1,"icon-ignore-placement":!1,"icon-image":{base:1,stops:[[16,"oneway-spaced-white-small"],[17,"oneway-spaced-white-large"]]},"icon-padding":2,"symbol-placement":"line","symbol-spacing":250},maxzoom:22,minzoom:15,paint:{},source:"composite","source-layer":"tunnel",type:"symbol"},{filter:["==","class","path"],id:"road-path-bg",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:0,paint:{"line-blur":0,"line-color":"#d9d3c9","line-dasharray":[1,0],"line-opacity":{base:1,stops:[[15,0],[15.25,.5]]},"line-width":{base:1.5,stops:[[15,2],[18,7]]}},source:"composite","source-layer":"road",type:"line"},{id:"road-path",paint:{"line-color":"#fff","line-dasharray":{base:1,stops:[[15,[.1,1.25]],[16,[.1,1.6]],[17,[.1,1.45]],[18,[.1,1.3]]]},"line-opacity":{base:1,stops:[[15,0],[15.25,1]]},"line-width":{base:1.5,stops:[[15,1],[18,4]]}},ref:"road-path-bg"},{filter:["all",["==","$type","LineString"],["==","class","street"]],id:"road-street-low",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:11,paint:{"line-color":"#fff","line-opacity":{stops:[[11,0],[11.25,1],[14,1],[14.01,0]]},"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]}},source:"composite","source-layer":"road",type:"line"},{filter:["all",["==","$type","LineString"],["==","class","street_limited"]],id:"road-street_limited-low",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:11,paint:{"line-color":"#fff","line-opacity":{stops:[[11,0],[11.25,1],[14,1],[14.01,0]]},"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]}},source:"composite","source-layer":"road",type:"line"},{filter:["==","class","motorway_link"],id:"road-motorway_link-case",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:10,paint:{"line-color":"#fff","line-gap-width":{base:1.5,stops:[[12,.5],[14,2],[18,18]]},"line-opacity":{base:1,stops:[[10.99,0],[11,1]]},"line-width":{base:1.5,stops:[[12,.75],[20,2]]}},source:"composite","source-layer":"road",type:"line"},{filter:["in","class","service","driveway"],id:"road-service-driveway-case",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:15,paint:{"line-color":"#d9d3c9","line-gap-width":{base:1.5,stops:[[14,.5],[18,12]]},"line-width":{base:1.5,stops:[[12,.75],[20,2]]}},source:"composite","source-layer":"road",type:"line"},{filter:["all",["==","$type","LineString"],["all",["==","class","street_limited"],["!=","type","construction"]]],id:"road-street_limited-case",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:11,paint:{"line-color":"#d9d3c9","line-gap-width":{base:1.5,stops:[[13,0],[14,2],[18,12]]},"line-opacity":{base:1,stops:[[13.99,0],[14,1]]},"line-width":{base:1.5,stops:[[12,.75],[20,2]]}},source:"composite","source-layer":"road",type:"line"},{filter:["==","class","street"],id:"road-street-case",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:11,paint:{"line-color":"#d9d3c9","line-gap-width":{base:1.5,stops:[[13,0],[14,2],[18,18]]},"line-opacity":{base:1,stops:[[13.99,0],[14,1]]},"line-width":{base:1.5,stops:[[12,.75],[20,2]]}},source:"composite","source-layer":"road",type:"line"},{filter:["all",["==","class","main"],["!=","type","trunk"]],id:"road-main-case",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:0,paint:{"line-color":"#d9d3c9","line-gap-width":{base:1.5,stops:[[8.5,.5],[10,.75],[18,26]]},"line-opacity":{base:1,stops:[[9.99,0],[10,1]]},"line-width":{base:1.2,stops:[[10,.75],[18,2]]}},source:"composite","source-layer":"road",type:"line"},{filter:["all",["==","class","main"],["==","type","trunk"]],id:"road-trunk-case",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:5,paint:{"line-color":"#fff","line-gap-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-opacity":{base:1,stops:[[5.9,0],[6,1]]},"line-width":{base:1.5,stops:[[5,.75],[16,2]]}},source:"composite","source-layer":"road",type:"line"},{filter:["==","class","motorway"],id:"road-motorway-case",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:0,paint:{"line-color":"#fff","line-gap-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-opacity":{base:1.2,stops:[[5.9,0],[6,1]]},"line-width":{base:1.5,stops:[[5,.75],[16,2]]}},source:"composite","source-layer":"road",type:"line"},{id:"road-service-driveway",paint:{"line-color":"#fff","line-width":{base:1.5,stops:[[14,.5],[18,12]]}},ref:"road-service-driveway-case"},{id:"road-motorway_link",paint:{"line-color":"#ffa159","line-opacity":1,"line-width":{base:1.5,stops:[[12,.5],[14,2],[18,18]]}},ref:"road-motorway_link-case"},{id:"road-street_limited",paint:{"line-color":"#EFEDEB","line-opacity":{base:1,stops:[[13.99,0],[14,1]]},"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,12]]}},ref:"road-street_limited-case"},{id:"road-street",paint:{"line-color":"#fff","line-opacity":{base:1,stops:[[13.99,0],[14,1]]},"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]}},ref:"road-street-case"},{id:"road-main",paint:{"line-color":{base:1,stops:[[5,"#ede9d9"],[8,"#fff"]]},"line-opacity":{base:1.2,stops:[[5,0],[5.5,1]]},"line-width":{base:1.5,stops:[[8.5,.5],[10,.75],[18,26]]}},ref:"road-main-case"},{filter:["all",["==","oneway",1],["in","class","main","street","street_limited"],["!=","type","trunk"]],id:"road-oneway-arrows-other",layout:{"icon-allow-overlap":!1,"icon-ignore-placement":!1,"icon-image":{base:1,stops:[[16,"oneway-spaced-small"],[17,"oneway-spaced-large"]]},"icon-padding":2,"icon-rotation-alignment":"map","symbol-placement":"line","symbol-spacing":250},maxzoom:22,minzoom:15,paint:{},source:"composite","source-layer":"road",type:"symbol"},{id:"road-trunk",paint:{"line-color":"#f2cf60","line-width":{base:1.5,stops:[[5,.75],[18,32]]}},ref:"road-trunk-case"},{filter:["all",["==","oneway",1],["==","type","trunk"]],id:"road-oneway-arrows-trunk",layout:{"icon-allow-overlap":!1,"icon-ignore-placement":!1,"icon-image":{base:1,stops:[[16,"oneway-spaced-white-small"],[17,"oneway-spaced-white-large"]]},"icon-padding":2,"symbol-placement":"line","symbol-spacing":250},maxzoom:22,minzoom:15,paint:{},source:"composite","source-layer":"road",type:"symbol"},{id:"road-motorway",paint:{"line-color":{base:1,stops:[[5.9,"#fff"],[6,"#ffa159"]]},"line-opacity":{base:1.2,stops:[[5,0],[5.5,1]]},"line-width":{base:1.5,stops:[[5,.75],[18,32]]}},ref:"road-motorway-case"},{filter:["in","class","major_rail","minor_rail"],id:"road-rail",layout:{"line-cap":"butt",visibility:"visible"},maxzoom:22,minzoom:13,paint:{"line-color":{stops:[[13,"#d8d5c8"],[16,"#b3b1a6"]]},"line-width":{base:1.5,stops:[[14,.5],[20,1]]}},source:"composite","source-layer":"road",type:"line"},{id:"road-rail-tracks",paint:{"line-color":{stops:[[13,"#d8d5c8"],[16,"#b3b1a6"]]},"line-dasharray":[.1,15],"line-opacity":{base:1,stops:[[13.75,0],[14,1]]},"line-width":{base:1.5,stops:[[14,4],[20,8]]}},ref:"road-rail"},{filter:["all",["==","$type","LineString"],["all",["==","class","street_limited"],["==","type","construction"]]],id:"road-construction",layout:{"line-cap":"butt","line-join":"miter",visibility:"visible"},maxzoom:22,minzoom:14,paint:{"line-color":"#d9d3c9","line-dasharray":{base:1,stops:[[14,[.4,.8]],[15,[.3,.6]],[16,[.2,.3]],[17,[.2,.25]],[18,[.15,.15]]]},"line-opacity":{base:1,stops:[[13.99,0],[14,1]]},"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,12]]}},source:"composite","source-layer":"road",type:"line"},{filter:["all",["==","oneway",1],["in","class","motorway","motorway_link"]],id:"road-oneway-arrows-motorway",layout:{"icon-allow-overlap":!1,"icon-ignore-placement":!1,"icon-image":{base:1,stops:[[16,"oneway-spaced-white-small"],[17,"oneway-spaced-white-large"]]},"icon-padding":2,"symbol-placement":"line","symbol-spacing":250},maxzoom:22,minzoom:15,paint:{},source:"composite","source-layer":"road",type:"symbol"},{filter:["all",["==","$type","Polygon"],["==","class","street_limited"]],id:"bridge-street_limited-polygon",layout:{visibility:"visible"},maxzoom:22,minzoom:0,paint:{"fill-color":"#EEE8E3","fill-opacity":.75},source:"composite","source-layer":"bridge",type:"fill"},{filter:["==","class","path"],id:"bridge-path-bg",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:0,paint:{"line-blur":0,"line-color":"#d9d3c9","line-dasharray":[1,0],"line-opacity":{base:1,stops:[[15,0],[15.25,.75]]},"line-width":{base:1.5,stops:[[15,2],[18,7]]}},source:"composite","source-layer":"bridge",type:"line"},{id:"bridge-path",paint:{"line-color":"#fff","line-dasharray":{base:1,stops:[[14,[.1,1.25]],[16,[.1,1.6]],[17,[.1,1.45]],[18,[.1,1.3]]]},"line-opacity":{base:1,stops:[[15,0],[15.25,1]]},"line-width":{base:1.5,stops:[[15,1],[18,4]]}},ref:"bridge-path-bg"},{filter:["all",["==","$type","LineString"],["==","class","street"]],id:"bridge-street-low",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:11,paint:{"line-color":"#fff","line-opacity":{stops:[[11.5,0],[12,1],[14,1],[14.01,0]]},"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]}},source:"composite","source-layer":"bridge",type:"line"},{filter:["all",["==","$type","LineString"],["==","class","street_limited"]],id:"bridge-street_limited-low",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:11,paint:{"line-color":"#fff","line-opacity":{stops:[[11.5,0],[12,1],[14,1],[14.01,0]]},"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]}},source:"composite","source-layer":"bridge",type:"line"},{filter:["==","class","motorway_link"],id:"bridge-motorway_link-case",layout:{"line-cap":"butt","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:12,paint:{"line-color":"#fff","line-gap-width":{base:1.5,stops:[[12,.5],[14,2],[18,18]]},"line-opacity":1,"line-width":{base:1.5,stops:[[12,.75],[20,2]]}},source:"composite","source-layer":"bridge",type:"line"},{filter:["in","class","service","driveway"],id:"bridge-service-driveway-case",layout:{"line-cap":"butt","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:15,paint:{"line-color":"#d9d3c9","line-gap-width":{base:1.5,stops:[[14,.5],[18,12]]},"line-width":{base:1.5,stops:[[12,.75],[20,2]]}},source:"composite","source-layer":"bridge",type:"line"},{filter:["all",["==","$type","LineString"],["all",["==","class","street_limited"],["!=","type","construction"]]],id:"bridge-street_limited-case",layout:{"line-cap":"butt","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:14,paint:{"line-color":"#d9d3c9","line-gap-width":{base:1.5,stops:[[13,0],[14,2],[18,12]]},"line-width":{base:1.5,stops:[[12,.75],[20,2]]}},source:"composite","source-layer":"bridge",type:"line"},{filter:["==","class","street"],id:"bridge-street-case",layout:{"line-cap":"butt","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:14,paint:{"line-color":"#d9d3c9","line-gap-width":{base:1.5,stops:[[13,0],[14,2],[18,18]]},"line-width":{base:1.5,stops:[[12,.75],[20,2]]}},source:"composite","source-layer":"bridge",type:"line"},{filter:["all",["==","class","main"],["!=","type","trunk"]],id:"bridge-main-case",layout:{"line-cap":"butt","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:8,paint:{"line-color":"#d9d3c9","line-gap-width":{base:1.5,stops:[[8.5,.5],[10,.75],[18,26]]},"line-translate":[0,0],"line-width":{base:1.2,stops:[[10,.75],[18,2]]}},source:"composite","source-layer":"bridge",type:"line"},{filter:["all",["==","oneway",1],["in","class","main","street","street_limited"],["!=","type","trunk"]],id:"bridge-oneway-arrows-other",layout:{"icon-allow-overlap":!1,"icon-ignore-placement":!1,"icon-image":{base:1,stops:[[16,"oneway-spaced-small"],[17,"oneway-spaced-large"]]},"icon-padding":2,"icon-rotation-alignment":"map","symbol-placement":"line","symbol-spacing":250},maxzoom:22,minzoom:15,paint:{},source:"composite","source-layer":"bridge",type:"symbol"},{filter:["any",["==","class","motorway"],["==","type","trunk"]],id:"bridge-motorway-trunk-case",layout:{"line-cap":"butt","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:0,paint:{"line-color":"#fff","line-gap-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-width":{base:1.5,stops:[[5,.75],[16,2]]}},source:"composite","source-layer":"bridge",type:"line"},{filter:["==","class","motorway_link"],id:"bridge-motorway_link",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:10,paint:{"line-color":"#ffa159","line-width":{base:1.5,stops:[[12,.5],[14,2],[18,18]]}},source:"composite","source-layer":"bridge",type:"line"},{filter:["in","class","service","driveway"],id:"bridge-service-driveway",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:15,paint:{"line-color":"#fff","line-width":{base:1.5,stops:[[14,.5],[18,12]]}},source:"composite","source-layer":"bridge",type:"line"},{filter:["all",["==","$type","LineString"],["all",["==","class","street_limited"],["==","type","construction"]]],id:"bridge-construction",layout:{"line-cap":"butt","line-join":"miter",visibility:"visible"},maxzoom:22,minzoom:14,paint:{"line-color":"#d9d3c9","line-dasharray":{base:1,stops:[[14,[.4,.8]],[15,[.3,.6]],[16,[.2,.3]],[17,[.2,.25]],[18,[.15,.15]]]},"line-opacity":{base:1,stops:[[13.99,0],[14,1]]},"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,12]]}},source:"composite","source-layer":"bridge",type:"line"},{filter:["all",["==","$type","LineString"],["all",["==","class","street_limited"],["!=","type","construction"]]],id:"bridge-street_limited",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:11,paint:{"line-color":"#EFEDEB","line-opacity":{base:1,stops:[[13.99,0],[14,1]]},"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,12]]}},source:"composite","source-layer":"bridge",type:"line"},{filter:["==","class","street"],id:"bridge-street",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:11,paint:{"line-color":"#fff","line-opacity":{base:1,stops:[[13.99,0],[14,1]]},"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]}},source:"composite","source-layer":"bridge",type:"line"},{filter:["all",["==","class","main"],["!=","type","trunk"]],id:"bridge-main",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:0,paint:{"line-color":"#fff","line-opacity":{base:1.2,stops:[[5,0],[5.5,1]]},"line-width":{base:1.5,stops:[[8.5,.5],[10,.75],[18,26]]}},source:"composite","source-layer":"bridge",type:"line"},{filter:["all",["==","class","main"],["==","type","trunk"]],id:"bridge-trunk",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:0,paint:{"line-color":"#f2cf60","line-width":{base:1.5,stops:[[5,.75],[18,32]]}},source:"composite","source-layer":"bridge",type:"line"},{filter:["all",["==","oneway",1],["==","type","trunk"]],id:"bridge-oneway-arrows-trunk",layout:{"icon-allow-overlap":!1,"icon-ignore-placement":!1,"icon-image":{base:1,stops:[[16,"oneway-spaced-white-small"],[17,"oneway-spaced-white-large"]]},"icon-padding":2,"symbol-placement":"line","symbol-spacing":250},maxzoom:22,minzoom:15,paint:{},source:"composite","source-layer":"bridge",type:"symbol"},{filter:["==","class","motorway"],id:"bridge-motorway",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:0,paint:{"line-color":"#ffa159","line-width":{base:1.5,stops:[[5,.75],[18,32]]}},source:"composite","source-layer":"bridge",type:"line"},{filter:["in","class","major_rail","minor_rail"],id:"bridge-rail",layout:{"line-cap":"butt",visibility:"visible"},maxzoom:22,minzoom:13,paint:{"line-color":{stops:[[13,"#d8d5c8"],[16,"#b3b1a6"]]},"line-width":{base:1.5,stops:[[14,.5],[20,1]]}},source:"composite","source-layer":"bridge",type:"line"},{id:"bridge-rail-tracks",paint:{"line-color":{stops:[[13,"#d8d5c8"],[16,"#b3b1a6"]]},"line-dasharray":[.1,15],"line-opacity":{base:1,stops:[[13.75,0],[20,1]]},"line-width":{base:1.5,stops:[[14,4],[20,8]]}},ref:"bridge-rail"},{filter:["==","class","aerialway"],id:"bridge-aerialway",layout:{"line-cap":"butt",visibility:"visible"},maxzoom:22,minzoom:13,paint:{"line-color":"#b3ada6","line-width":{base:1.5,stops:[[14,.5],[20,1]]}},source:"composite","source-layer":"bridge",type:"line"},{filter:["all",["==","oneway",1],["in","class","motorway","motorway_link"]],id:"bridge-oneway-arrows-motorway",layout:{"icon-allow-overlap":!1,"icon-ignore-placement":!1,"icon-image":{base:1,stops:[[16,"oneway-spaced-white-small"],[17,"oneway-spaced-white-large"]]},"icon-padding":2,"symbol-placement":"line","symbol-spacing":250},maxzoom:22,minzoom:15,paint:{},source:"composite","source-layer":"bridge",type:"symbol"},{filter:["==","class","hedge"],id:"hedges",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:16,paint:{"line-color":"#e2f4c2","line-dasharray":[1,2,5,2,1,2],"line-opacity":1,"line-width":{base:1,stops:[[16,1],[20,3]]}},source:"composite","source-layer":"barrier_line",type:"line"},{filter:["==","class","fence"],id:"fences",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:16,paint:{"line-color":"#cbc6b7","line-dasharray":[1,2,5,2,1,2],"line-opacity":1,"line-width":{base:1,stops:[[16,1],[20,3]]}},source:"composite","source-layer":"barrier_line",type:"line"},{filter:["==","class","gate"],id:"gates",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:17,paint:{"line-color":"#cbc6b7","line-dasharray":[1,2,5,2,1,2],"line-opacity":.5,"line-width":{base:1,stops:[[16,1],[20,3]]}},source:"composite","source-layer":"barrier_line",type:"line"},{filter:["all",["==","admin_level",2],["==","maritime",0]],id:"admin-2-boundaries-bg",layout:{"line-cap":"butt","line-join":"miter",visibility:"visible"},maxzoom:22,minzoom:1,paint:{"line-blur":{base:1,stops:[[3,0],[10,2]]},"line-color":{base:1,stops:[[6,"#ede9d9"],[8,"#f6e8e1"]]},"line-opacity":{base:1,stops:[[3,0],[4,.5]]},"line-translate":[0,0],"line-width":{base:1,stops:[[3,3.5],[10,10]]}},source:"composite","source-layer":"admin",type:"line"},{filter:["all",[">=","admin_level",3],["==","maritime",0]],id:"admin-3-4-boundaries",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:0,paint:{"line-color":{base:1,stops:[[3,"#c3bfcc"],[7,"#aba8b3"]]},"line-dasharray":{base:1,stops:[[6,[2,0]],[7,[2,2,6,2]]]},"line-opacity":{base:1,stops:[[2,0],[3,1]]},"line-width":{base:1,stops:[[7,.75],[12,1.5]]}},source:"composite","source-layer":"admin",type:"line"},{filter:["all",["==","admin_level",2],["==","maritime",0],["==","disputed",0]],id:"admin-2-boundaries",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:1,paint:{"line-color":"#787680","line-width":{base:1,stops:[[3,.5],[10,2]]}},source:"composite","source-layer":"admin",type:"line"},{filter:["all",["==","admin_level",2],["==","maritime",0],["==","disputed",1]],id:"admin-2-boundaries-dispute",layout:{"line-cap":"butt","line-join":"round",visibility:"visible"},maxzoom:22,minzoom:1,paint:{"line-color":"#787680","line-dasharray":[1.5,1.5],"line-width":{base:1,stops:[[3,.5],[10,2]]}},source:"composite","source-layer":"admin",type:"line"},{filter:["!=","index",5],id:"contour",layout:{visibility:"visible"},maxzoom:22,minzoom:14,paint:{"line-color":"#66601a","line-opacity":.07},source:"composite","source-layer":"contour",type:"line"},{filter:["==","index",5],id:"contour-index",layout:{visibility:"visible"},maxzoom:22,minzoom:14,paint:{"line-color":"#66601a","line-opacity":.12},source:"composite","source-layer":"contour",type:"line"},{id:"housenum-label",layout:{"symbol-placement":"point","text-field":"{house_num}","text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-max-width":7,"text-padding":4,"text-size":9.5,visibility:"visible"},maxzoom:22,minzoom:17,paint:{"text-color":"#b2aca5","text-halo-blur":0,"text-halo-color":"#e8e0cc","text-halo-width":1.5},source:"composite","source-layer":"housenum_label",type:"symbol"},{filter:["==","index",5],id:"contour-index-label",layout:{"symbol-placement":"line","text-field":"{ele} m","text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-max-angle":25,"text-padding":5,"text-size":9.5,visibility:"visible"},maxzoom:22,minzoom:14,paint:{"text-color":"#a7a696","text-halo-blur":1,"text-halo-color":"rgba(237,233,217, 0.25)","text-halo-width":1},source:"composite","source-layer":"contour",type:"symbol"},{filter:["==","class","river"],id:"waterway-label",layout:{"symbol-placement":"line","text-field":"{name_en}","text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-max-angle":30,"text-size":{base:1,stops:[[13,12],[18,16]]},visibility:"visible"},maxzoom:22,minzoom:12,paint:{"text-color":"#004087","text-halo-blur":.5,"text-halo-color":"#ffffff","text-halo-width":.5},source:"composite","source-layer":"waterway_label",type:"symbol"},{filter:["all",["!in","maki","rail-light","rail-metro","rail","airport","airfield","heliport","rocket","park","golf","cemetery","zoo","campsite","swimming","dog-park"],["==","scalerank",4],[">=","localrank",15]],id:"poi-scalerank4-l15",layout:{"icon-image":"{maki}-11","icon-optional":!1,"symbol-placement":"point","symbol-spacing":250,"text-allow-overlap":!1,"text-anchor":"top","text-field":"{name_en}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-ignore-placement":!1,"text-letter-spacing":.02,"text-line-height":1.2,"text-max-angle":38,"text-max-width":8,"text-offset":[0,1],"text-padding":2,"text-rotation-alignment":"viewport",
"text-size":{base:1,stops:[[16,11],[20,13]]},visibility:"visible"},maxzoom:22,minzoom:17,paint:{"text-color":"#65513d","text-halo-color":"#ffffff","text-halo-width":1},source:"composite","source-layer":"poi_label",type:"symbol"},{filter:["all",["!in","maki","rail-light","rail-metro","rail","airport","airfield","heliport","rocket","park","golf","cemetery","zoo","campsite","swimming","dog-park"],["==","scalerank",4],["<=","localrank",14]],id:"poi-scalerank4-l1",layout:{"icon-image":"{maki}-11","icon-optional":!1,"symbol-placement":"point","symbol-spacing":250,"text-allow-overlap":!1,"text-anchor":"top","text-field":"{name_en}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-ignore-placement":!1,"text-letter-spacing":.02,"text-line-height":1.2,"text-max-angle":38,"text-max-width":8,"text-offset":[0,1],"text-padding":1,"text-rotation-alignment":"viewport","text-size":{base:1,stops:[[16,11],[20,13]]},visibility:"visible"},maxzoom:22,minzoom:16,paint:{"text-color":"#65513d","text-halo-color":"#ffffff","text-halo-width":1},source:"composite","source-layer":"poi_label",type:"symbol"},{filter:["all",["in","maki","park","cemetery","golf","zoo","playground"],["==","scalerank",4]],id:"poi-parks_scalerank4",layout:{"icon-image":"{maki}-11","icon-optional":!1,"symbol-placement":"point","symbol-spacing":250,"text-allow-overlap":!1,"text-anchor":"top","text-field":"{name_en}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-ignore-placement":!1,"text-letter-spacing":.02,"text-line-height":1.2,"text-max-angle":38,"text-max-width":8,"text-offset":[0,1],"text-padding":1,"text-rotation-alignment":"viewport","text-size":{base:1,stops:[[16,11],[20,13]]},visibility:"visible"},maxzoom:22,minzoom:16,paint:{"text-color":"#4c661f","text-halo-color":"#ffffff","text-halo-width":1},source:"composite","source-layer":"poi_label",type:"symbol"},{filter:["all",["!in","maki","rail-light","rail-metro","rail","airport","airfield","heliport","rocket","park","golf","cemetery","zoo","campsite","swimming","dog-park"],["==","scalerank",3]],id:"poi-scalerank3",layout:{"icon-image":"{maki}-11","icon-optional":!1,"symbol-placement":"point","symbol-spacing":250,"text-allow-overlap":!1,"text-anchor":"top","text-field":"{name_en}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-ignore-placement":!1,"text-letter-spacing":.02,"text-line-height":1.2,"text-max-angle":38,"text-max-width":8,"text-offset":[0,1],"text-padding":1,"text-rotation-alignment":"viewport","text-size":{base:1,stops:[[16,11],[20,13]]},visibility:"visible"},maxzoom:22,minzoom:15,paint:{"text-color":"#65513d","text-halo-color":"#ffffff","text-halo-width":1},source:"composite","source-layer":"poi_label",type:"symbol"},{filter:["all",["in","maki","park","cemetery","golf","zoo"],["==","scalerank",3]],id:"poi-parks-scalerank3",layout:{"icon-image":"{maki}-11","icon-optional":!1,"symbol-placement":"point","symbol-spacing":250,"text-allow-overlap":!1,"text-anchor":"top","text-field":"{name_en}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-ignore-placement":!1,"text-letter-spacing":.02,"text-line-height":1.2,"text-max-angle":38,"text-max-width":8,"text-offset":[0,1],"text-padding":2,"text-rotation-alignment":"viewport","text-size":{base:1,stops:[[16,11],[20,13]]},visibility:"visible"},maxzoom:22,minzoom:15,paint:{"text-color":"#4c661f","text-halo-color":"#ffffff","text-halo-width":1},source:"composite","source-layer":"poi_label",type:"symbol"},{filter:["all",["==","$type","LineString"],["!in","class","motorway","main","street_limited","street"]],id:"road-label-small",layout:{"symbol-placement":"line","symbol-spacing":250,"text-field":"{name_en}","text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-ignore-placement":!1,"text-letter-spacing":.01,"text-max-angle":30,"text-padding":1,"text-rotation-alignment":"map","text-size":{base:1,stops:[[15,10],[20,13]]},visibility:"visible"},maxzoom:22,minzoom:15,paint:{"text-color":"#3a3836","text-halo-blur":1,"text-halo-color":"#ffffff","text-halo-width":1.25},source:"composite","source-layer":"road_label",type:"symbol"},{filter:["all",["==","$type","LineString"],["in","class","street","street_limited"]],id:"road-label-medium",layout:{"symbol-placement":"line","symbol-spacing":250,"text-field":"{name_en}","text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-letter-spacing":.01,"text-max-angle":30,"text-padding":1,"text-rotation-alignment":"map","text-size":{base:1,stops:[[11,10],[20,14]]},visibility:"visible"},maxzoom:22,minzoom:11,paint:{"text-color":"#3a3836","text-halo-color":"#ffffff","text-halo-width":1},source:"composite","source-layer":"road_label",type:"symbol"},{filter:["in","class","main","motorway"],id:"road-label-large",layout:{"symbol-placement":"line","symbol-spacing":250,"text-allow-overlap":!1,"text-field":"{name_en}","text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-ignore-placement":!1,"text-letter-spacing":.01,"text-max-angle":30,"text-padding":1,"text-rotation-alignment":"map","text-size":{base:1,stops:[[9,10],[20,16]]},visibility:"visible"},maxzoom:22,minzoom:0,paint:{"text-color":"#3a3836","text-halo-blur":1,"text-halo-color":"rgba(255,255,255, 0.75)","text-halo-width":1},source:"composite","source-layer":"road_label",type:"symbol"},{filter:["all",["!in","shield","us-interstate","us-interstate-business","us-interstate-duplex"],["<=","reflen",6]],id:"other-motorway-shields",layout:{"icon-image":{base:1,stops:[[0,"{shield}-{reflen}-small"],[16,"{shield}-{reflen}-large"]]},"icon-padding":2,"icon-rotation-alignment":"viewport","symbol-avoid-edges":!1,"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"symbol-spacing":{base:1,stops:[[11,100],[14,200]]},"text-allow-overlap":!1,"text-field":"{ref}","text-font":["DIN Offc Pro Bold","Arial Unicode MS Bold"],"text-ignore-placement":!1,"text-letter-spacing":.05,"text-max-angle":38,"text-padding":2,"text-rotation-alignment":"viewport","text-size":{base:1,stops:[[16,9],[16.01,11]]},visibility:"visible"},maxzoom:22,minzoom:0,paint:{"icon-color":"white","icon-halo-color":"rgba(0, 0, 0, 1)","icon-halo-width":1,"text-color":"#3a3836","text-halo-color":"#ffffff","text-halo-width":0,"text-opacity":1},source:"composite","source-layer":"road_label",type:"symbol"},{filter:["all",["in","shield","us-interstate","us-interstate-business","us-interstate-duplex"],["<=","reflen",6]],id:"interstate_motorway_shields",layout:{"icon-image":{base:1,stops:[[0,"{shield}-{reflen}-small"],[16,"{shield}-{reflen}-large"]]},"icon-padding":2,"icon-rotation-alignment":"viewport","symbol-avoid-edges":!1,"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"symbol-spacing":{base:1,stops:[[11,100],[14,200]]},"text-allow-overlap":!1,"text-field":"{ref}","text-font":["DIN Offc Pro Bold","Arial Unicode MS Bold"],"text-ignore-placement":!1,"text-letter-spacing":.05,"text-max-angle":38,"text-padding":2,"text-rotation-alignment":"viewport","text-size":{base:1,stops:[[16,9],[16.01,11]]},visibility:"visible"},maxzoom:22,minzoom:0,paint:{"icon-color":"white","icon-halo-color":"rgba(0, 0, 0, 1)","icon-halo-width":1,"text-color":"#fff","text-halo-color":"#ffffff","text-halo-width":0,"text-opacity":1},source:"composite","source-layer":"road_label",type:"symbol"},{filter:["all",["!in","maki","rail-light","rail-metro","rail","airport","airfield","heliport","rocket","park","golf","cemetery","zoo","campsite","swimming","dog-park"],["==","scalerank",2]],id:"poi-scalerank2",layout:{"icon-image":{stops:[[14,"{maki}-11"],[15,"{maki}-15"]]},"icon-optional":!1,"symbol-placement":"point","symbol-spacing":250,"text-allow-overlap":!1,"text-anchor":"top","text-field":"{name_en}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-ignore-placement":!1,"text-letter-spacing":.02,"text-line-height":1.2,"text-max-angle":38,"text-max-width":8,"text-offset":[0,1.25],"text-padding":2,"text-rotation-alignment":"viewport","text-size":{base:1,stops:[[14,11],[20,14]]},visibility:"visible"},maxzoom:22,minzoom:13,paint:{"text-color":"#65513d","text-halo-color":"#ffffff","text-halo-width":1.25},source:"composite","source-layer":"poi_label",type:"symbol"},{filter:["all",["in","maki","park","golf","cemetery","zoo","campsite","swimming","dog-park"],["==","scalerank",2]],id:"poi-parks-scalerank2",layout:{"icon-image":{stops:[[14,"{maki}-11"],[15,"{maki}-15"]]},"icon-optional":!1,"symbol-placement":"point","symbol-spacing":250,"text-allow-overlap":!1,"text-anchor":"top","text-field":"{name_en}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-ignore-placement":!1,"text-letter-spacing":.02,"text-line-height":1.2,"text-max-angle":38,"text-max-width":8,"text-offset":[0,1.25],"text-padding":2,"text-rotation-alignment":"viewport","text-size":{base:1,stops:[[14,11],[20,14]]},visibility:"visible"},maxzoom:22,minzoom:13,paint:{"text-color":"#4c661f","text-halo-color":"#ffffff","text-halo-width":1.25},source:"composite","source-layer":"poi_label",type:"symbol"},{filter:["==","type","Rail Station"],id:"rail-label",layout:{"icon-allow-overlap":!1,"icon-image":"{network}-11","icon-padding":0,"symbol-avoid-edges":!0,"symbol-placement":"point","symbol-spacing":250,"text-anchor":"top","text-field":{base:1,stops:[[0,""],[13,"{name_en}"]]},"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-justify":"center","text-letter-spacing":.02,"text-max-width":7,"text-offset":[0,1],"text-rotation-alignment":"viewport","text-size":{base:1,stops:[[16,11],[20,13]]},visibility:"visible"},maxzoom:22,minzoom:12,paint:{"icon-halo-color":"#fff","icon-halo-width":4,"text-color":"#65513d","text-halo-color":"#ffffff","text-halo-width":1.5,"text-opacity":{base:1,stops:[[13.99,0],[14,1]]}},source:"composite","source-layer":"poi_label",type:"symbol"},{filter:["<=","area",1e4],id:"water-label-sm",layout:{"text-field":"{name_en}","text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-max-width":7,"text-size":{base:1,stops:[[16,13],[20,16]]},visibility:"visible"},maxzoom:22,minzoom:15,paint:{"text-color":"#004087","text-halo-blur":1.5,"text-halo-color":"#ffffff","text-halo-width":0},source:"composite","source-layer":"water_label",type:"symbol"},{filter:[">","area",1e4],id:"water-label",layout:{"text-field":"{name_en}","text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-max-width":7,"text-size":{base:1,stops:[[13,13],[18,18]]},visibility:"visible"},maxzoom:22,minzoom:5,paint:{"text-color":"#004087","text-halo-blur":1.5,"text-halo-color":"#ffffff","text-halo-width":0},source:"composite","source-layer":"water_label",type:"symbol"},{filter:["all",["in","maki","park","golf","cemetery","zoo","campsite","swimming","dog-park"],["<=","scalerank",1]],id:"poi-parks-scalerank1",layout:{"icon-image":{stops:[[13,"{maki}-11"],[14,"{maki}-15"]]},"icon-optional":!1,"symbol-placement":"point","symbol-spacing":250,"text-allow-overlap":!1,"text-anchor":"top","text-field":"{name_en}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-ignore-placement":!1,"text-letter-spacing":.02,"text-line-height":1.2,"text-max-angle":38,"text-max-width":8,"text-offset":[0,1],"text-padding":2,"text-rotation-alignment":"viewport","text-size":{base:1,stops:[[10,11],[18,14]]},visibility:"visible"},maxzoom:22,minzoom:0,paint:{"text-color":"#4c661f","text-halo-blur":0,"text-halo-color":"#ffffff","text-halo-width":1},source:"composite","source-layer":"poi_label",type:"symbol"},{filter:["all",["!in","maki","rail-light","rail-metro","rail","airport","airfield","heliport","rocket","park","golf","cemetery","zoo","campsite","swimming","dog-park"],["<=","scalerank",1],["!=","type","Island"]],id:"poi-scalerank1",layout:{"icon-image":{stops:[[13,"{maki}-11"],[14,"{maki}-15"]]},"icon-optional":!1,"symbol-placement":"point","symbol-spacing":250,"text-allow-overlap":!1,"text-anchor":"top","text-field":"{name_en}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-ignore-placement":!1,"text-letter-spacing":.02,"text-line-height":1.2,"text-max-angle":38,"text-max-width":8,"text-offset":[0,1],"text-padding":2,"text-rotation-alignment":"viewport","text-size":{base:1,stops:[[10,11],[18,14]]},visibility:"visible"},maxzoom:22,minzoom:0,paint:{"text-color":"#65513d","text-halo-color":"#ffffff","text-halo-width":1},source:"composite","source-layer":"poi_label",type:"symbol"},{filter:["all",["in","maki","airport","heliport","rocket"],["<=","scalerank",2]],id:"airport-label",layout:{"icon-image":{stops:[[12,"{maki}-11"],[13,"{maki}-15"]]},"icon-optional":!1,"symbol-placement":"point","symbol-spacing":250,"text-allow-overlap":!1,"text-anchor":"top","text-field":{stops:[[12,"{ref}"],[13,"{name_en}"]]},"text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-ignore-placement":!1,"text-letter-spacing":.02,"text-max-width":9,"text-offset":{base:1,stops:[[12,[0,1]],[13,[0,1.25]]]},"text-padding":2,"text-rotation-alignment":"viewport","text-size":{base:1,stops:[[10,12],[18,18]]},visibility:"visible"},maxzoom:22,minzoom:9,paint:{"text-color":"#000000","text-halo-color":"#ffffff","text-halo-width":1.25},source:"composite","source-layer":"poi_label",type:"symbol"},{filter:["==","type","Islet"],id:"poi-islets",layout:{"icon-optional":!1,"symbol-placement":"point","symbol-spacing":250,"text-allow-overlap":!1,"text-anchor":"center","text-field":"{name_en}","text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-ignore-placement":!1,"text-letter-spacing":.02,"text-line-height":1.2,"text-max-angle":38,"text-max-width":8,"text-offset":[0,0],"text-padding":2,"text-rotation-alignment":"viewport","text-size":{base:1,stops:[[10,11],[14,16]]},visibility:"visible"},maxzoom:22,minzoom:0,paint:{"text-color":"#65513d","text-halo-color":"#ffffff","text-halo-width":1},source:"composite","source-layer":"poi_label",type:"symbol"},{filter:["==","type","neighbourhood"],id:"place-neighbourhood",layout:{"text-field":"{name_en}","text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-letter-spacing":.1,"text-max-width":7,"text-padding":3,"text-size":{base:1,stops:[[12,11],[16,16]]},"text-transform":"uppercase",visibility:"visible"},maxzoom:16,minzoom:10,paint:{"text-color":"#805540","text-halo-blur":0,"text-halo-color":"rgba(255,255,255, 0.5)","text-halo-width":1.75},source:"composite","source-layer":"place_label",type:"symbol"},{filter:["==","type","suburb"],id:"place-suburb",layout:{"text-field":"{name_en}","text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-letter-spacing":.15,"text-max-width":7,"text-padding":3,"text-size":{base:1,stops:[[11,11],[15,18]]},"text-transform":"uppercase",visibility:"visible"},maxzoom:16,minzoom:10,paint:{"text-color":"#805540","text-halo-color":"rgba(255,255,255, 0.5)","text-halo-width":1.75},source:"composite","source-layer":"place_label",type:"symbol"},{filter:["==","type","hamlet"],id:"place-hamlet",layout:{"text-field":"{name_en}","text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-size":{base:1,stops:[[12,11.5],[15,16]]},visibility:"visible"},maxzoom:16,minzoom:10,paint:{"text-color":"#000000","text-halo-color":"#ffffff","text-halo-width":1.25},source:"composite","source-layer":"place_label",type:"symbol"},{filter:["==","type","village"],id:"place-village",layout:{"text-field":"{name_en}","text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-max-width":7,"text-size":{base:1,stops:[[10,11.5],[16,18]]},visibility:"visible"},maxzoom:15,minzoom:8,paint:{"text-color":"#000000","text-halo-color":"#ffffff","text-halo-width":1.25},source:"composite","source-layer":"place_label",type:"symbol"},{filter:["==","type","town"],id:"place-town",layout:{"icon-image":"dot-9","text-anchor":{base:1,stops:[[7,"bottom"],[8,"center"]]},"text-field":"{name_en}","text-font":{base:1,stops:[[11,["DIN Offc Pro Regular","Arial Unicode MS Regular"]],[12,["DIN Offc Pro Medium","Arial Unicode MS Regular"]]]},"text-max-width":7,"text-offset":{base:1,stops:[[7,[0,-.15]],[8,[0,0]]]},"text-size":{base:1,stops:[[7,11.5],[15,20]]},visibility:"visible"},maxzoom:15,minzoom:6,paint:{"icon-opacity":{base:1,stops:[[7.99,1],[8,0]]},"text-color":"#000000","text-halo-color":"#ffffff","text-halo-width":1.25},source:"composite","source-layer":"place_label",type:"symbol"},{filter:["==","type","Island"],id:"poi-islands",layout:{"icon-optional":!1,"symbol-placement":"point","symbol-spacing":250,"text-allow-overlap":!1,"text-anchor":"center","text-field":"{name_en}","text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-ignore-placement":!1,"text-letter-spacing":.02,"text-line-height":1.2,"text-max-angle":38,"text-max-width":7,"text-offset":[0,0],"text-padding":2,"text-rotation-alignment":"viewport","text-size":{base:1,stops:[[10,11],[18,16]]},visibility:"visible"},maxzoom:22,minzoom:0,paint:{"text-color":"#65513d","text-halo-color":"#ffffff","text-halo-width":1},source:"composite","source-layer":"poi_label",type:"symbol"},{filter:["all",["!in","scalerank",0,1,2,3,4,5],["==","type","city"]],id:"place-city-sm",layout:{"icon-image":"dot-9","text-anchor":{base:1,stops:[[7,"bottom"],[8,"center"]]},"text-field":"{name_en}","text-font":{base:1,stops:[[7,["DIN Offc Pro Regular","Arial Unicode MS Regular"]],[8,["DIN Offc Pro Medium","Arial Unicode MS Regular"]]]},"text-max-width":7,"text-offset":{base:1,stops:[[7.99,[0,-.2]],[8,[0,0]]]},"text-size":{base:1,stops:[[6,12],[14,22]]},"text-transform":"none",visibility:"visible"},maxzoom:14,minzoom:0,paint:{"icon-opacity":{base:1,stops:[[7.99,1],[8,0]]},"text-color":"#000000","text-halo-color":"#ffffff","text-halo-width":1.25},source:"composite","source-layer":"place_label",type:"symbol"},{filter:["all",["in","scalerank",3,4,5],["==","type","city"],["in","ldir","S","SE","SW","E"]],id:"place-city-md-s",layout:{"icon-image":"dot-10","text-anchor":{base:1,stops:[[7,"top"],[8,"center"]]},"text-field":"{name_en}","text-font":{base:1,stops:[[7,["DIN Offc Pro Regular","Arial Unicode MS Regular"]],[8,["DIN Offc Pro Medium","Arial Unicode MS Regular"]]]},"text-offset":{base:1,stops:[[7.99,[0,.1]],[8,[0,0]]]},"text-size":{base:.9,stops:[[5,12],[12,22]]},visibility:"visible"},maxzoom:14,minzoom:0,paint:{"icon-opacity":{base:1,stops:[[7.99,1],[8,0]]},"text-color":"#000000","text-halo-blur":1,"text-halo-color":"#ffffff","text-halo-width":1},source:"composite","source-layer":"place_label",type:"symbol"},{filter:["all",["in","scalerank",3,4,5],["==","type","city"],["in","ldir","N","NE","NW","W"]],id:"place-city-md-n",layout:{"icon-image":"dot-10","text-anchor":{base:1,stops:[[7,"bottom"],[8,"center"]]},"text-field":"{name_en}","text-font":{base:1,stops:[[7,["DIN Offc Pro Regular","Arial Unicode MS Regular"]],[8,["DIN Offc Pro Medium","Arial Unicode MS Regular"]]]},"text-max-width":7,"text-offset":{base:1,stops:[[7.99,[0,-.25]],[8,[0,0]]]},"text-size":{base:.9,stops:[[5,12],[12,22]]},visibility:"visible"},maxzoom:14,minzoom:0,paint:{"icon-opacity":{base:1,stops:[[7.99,1],[8,0]]},"text-color":"#000000","text-halo-blur":1,"text-halo-color":"#ffffff","text-halo-width":1},source:"composite","source-layer":"place_label",type:"symbol"},{filter:["all",["<=","scalerank",2],["==","type","city"],["in","ldir","S","SE","SW","E"]],id:"place-city-lg-s",layout:{"icon-image":"dot-11","text-anchor":{base:1,stops:[[7,"top"],[8,"center"]]},"text-field":"{name_en}","text-font":{base:1,stops:[[7,["DIN Offc Pro Regular","Arial Unicode MS Regular"]],[8,["DIN Offc Pro Medium","Arial Unicode MS Regular"]]]},"text-max-width":7,"text-offset":{base:1,stops:[[7.99,[0,.15]],[8,[0,0]]]},"text-size":{base:.9,stops:[[4,12],[10,22]]},visibility:"visible"},maxzoom:14,minzoom:1,paint:{"icon-opacity":{base:1,stops:[[7.99,1],[8,0]]},"text-color":"#000000","text-halo-blur":1,"text-halo-color":"#ffffff","text-halo-width":1},source:"composite","source-layer":"place_label",type:"symbol"},{filter:["all",["<=","scalerank",2],["==","type","city"],["in","ldir","N","NE","NW","W"]],id:"place-city-lg-n",layout:{"icon-image":"dot-11","text-anchor":{base:1,stops:[[7,"bottom"],[8,"center"]]},"text-field":"{name_en}","text-font":{base:1,stops:[[7,["DIN Offc Pro Regular","Arial Unicode MS Regular"]],[8,["DIN Offc Pro Medium","Arial Unicode MS Regular"]]]},"text-max-width":7,"text-offset":{base:1,stops:[[7.99,[0,-.25]],[8,[0,0]]]},"text-size":{base:.9,stops:[[4,12],[10,22]]},visibility:"visible"},maxzoom:14,minzoom:1,paint:{"icon-opacity":{base:1,stops:[[7.99,1],[8,0]]},"text-color":"#000000","text-halo-blur":1,"text-halo-color":"#ffffff","text-halo-width":1,"text-opacity":1},source:"composite","source-layer":"place_label",type:"symbol"},{filter:["all",["==","$type","LineString"],[">=","labelrank",4]],id:"marine-label-sm-ln",layout:{"symbol-placement":"line","symbol-spacing":{base:1,stops:[[4,100],[6,400]]},"text-field":"{name_en}","text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-letter-spacing":.1,"text-line-height":1.1,"text-max-width":5,"text-size":{base:1,stops:[[3,12],[6,16]]},visibility:"visible"},maxzoom:10,minzoom:3,paint:{"text-color":"#c8e5f9"},source:"composite","source-layer":"marine_label",type:"symbol"},{filter:["all",["==","$type","Point"],[">=","labelrank",4]],id:"marine-label-sm-pt",layout:{"symbol-placement":"point","text-field":"{name_en}","text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-letter-spacing":.1,"text-line-height":1.5,"text-max-width":5,"text-size":{base:1,stops:[[3,12],[6,16]]},visibility:"visible"},maxzoom:10,minzoom:3,paint:{"text-color":"#c8e5f9"},source:"composite","source-layer":"marine_label",type:"symbol"},{filter:["all",["==","$type","LineString"],["in","labelrank",2,3]],id:"marine-label-md-ln",layout:{"symbol-placement":"line","symbol-spacing":250,"text-field":"{name_en}","text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-letter-spacing":.15,"text-line-height":1.1,"text-max-width":5,"text-size":{base:1.1,stops:[[2,12],[5,20]]},visibility:"visible"},maxzoom:8,minzoom:2,paint:{"text-color":"#c8e5f9"},source:"composite","source-layer":"marine_label",type:"symbol"},{filter:["all",["==","$type","Point"],["in","labelrank",2,3]],id:"marine-label-md-pt",layout:{"text-field":"{name_en}","text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-letter-spacing":.15,"text-line-height":1.5,"text-max-width":5,"text-size":{base:1.1,stops:[[2,14],[5,20]]},visibility:"visible"},maxzoom:8,minzoom:2,paint:{"text-color":"#c8e5f9"},source:"composite","source-layer":"marine_label",type:"symbol"},{filter:["all",["==","$type","LineString"],["==","labelrank",1]],id:"marine-label-lg-ln",layout:{"symbol-placement":"line","text-field":"{name_en}","text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-letter-spacing":.25,"text-line-height":1.1,"text-max-width":4,"text-size":{base:1,stops:[[1,14],[4,30]]},visibility:"visible"},maxzoom:4,minzoom:1,paint:{"text-color":"#c8e5f9"},source:"composite","source-layer":"marine_label",type:"symbol"},{filter:["all",["==","$type","Point"],["==","labelrank",1]],id:"marine-label-lg-pt",layout:{"text-field":"{name_en}","text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-letter-spacing":.25,"text-line-height":1.5,"text-max-width":4,"text-size":{base:1,stops:[[1,14],[4,30]]},visibility:"visible"},maxzoom:4,minzoom:1,paint:{"text-color":"#c8e5f9"},source:"composite","source-layer":"marine_label",type:"symbol"},{filter:["<","area",2e4],id:"state-label-sm",layout:{"text-allow-overlap":!1,"text-field":{base:1,stops:[[0,"{abbr}"],[6,"{name_en}"]]},"text-font":["DIN Offc Pro Bold","Arial Unicode MS Bold"],"text-ignore-placement":!1,"text-letter-spacing":.15,"text-max-width":5,"text-size":{base:1,stops:[[6,10],[9,14]]},"text-transform":"uppercase",visibility:"visible"},maxzoom:9,minzoom:3,paint:{"text-color":"#242424","text-halo-color":"#ffffff","text-halo-width":1,"text-opacity":1},source:"composite","source-layer":"state_label",type:"symbol"},{filter:["all",["<","area",8e4],[">=","area",2e4]],id:"state-label-md",layout:{"text-allow-overlap":!1,"text-field":{base:1,stops:[[0,"{abbr}"],[5,"{name_en}"]]},"text-font":["DIN Offc Pro Bold","Arial Unicode MS Bold"],"text-ignore-placement":!1,"text-letter-spacing":.15,"text-max-width":6,"text-size":{base:1,stops:[[5,10],[8,16]]},"text-transform":"uppercase",visibility:"visible"},maxzoom:8,minzoom:3,paint:{"text-color":"#242424","text-halo-color":"#ffffff","text-halo-width":1,"text-opacity":1},source:"composite","source-layer":"state_label",type:"symbol"},{filter:[">=","area",8e4],id:"state-label-lg",layout:{"text-allow-overlap":!1,"text-field":{base:1,stops:[[0,"{abbr}"],[4,"{name_en}"]]},"text-font":["DIN Offc Pro Bold","Arial Unicode MS Bold"],"text-ignore-placement":!1,"text-letter-spacing":.15,"text-max-width":6,"text-padding":1,"text-size":{base:1,stops:[[4,10],[7,18]]},"text-transform":"uppercase",visibility:"visible"},maxzoom:7,minzoom:3,paint:{"text-color":"#242424","text-halo-color":"#ffffff","text-halo-width":1,"text-opacity":1},source:"composite","source-layer":"state_label",type:"symbol"},{filter:[">=","scalerank",5],id:"country-label-sm",layout:{"text-field":"{name_en}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-max-width":6,"text-size":{base:.9,stops:[[5,14],[9,22]]},visibility:"visible"},maxzoom:10,minzoom:1,paint:{"text-color":"#000000","text-halo-color":{base:1,stops:[[2,"rgba(255,255,255,0.75)"],[3,"#ffffff"]]},"text-halo-width":1.25},source:"composite","source-layer":"country_label",type:"symbol"},{filter:["in","scalerank",3,4],id:"country-label-md",layout:{"text-field":{base:1,stops:[[0,"{code}"],[2,"{name_en}"]]},"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-max-width":6,"text-size":{base:1,stops:[[3,10],[8,24]]},visibility:"visible"},maxzoom:8,minzoom:1,paint:{"text-color":"#000000","text-halo-color":{base:1,stops:[[2,"rgba(255,255,255,0.75)"],[3,"#ffffff"]]},"text-halo-width":1.25},source:"composite","source-layer":"country_label",type:"symbol"},{filter:["all",["==","oneway",1],["==","type","trunk"]],id:"country-label-lg",layout:{"text-field":"{name_en}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-max-width":{base:1,stops:[[0,5],[3,6]]},"text-size":{base:1,stops:[[1,10],[6,24]]},visibility:"visible"},maxzoom:7,minzoom:1,paint:{"text-color":"#000000","text-halo-color":{base:1,stops:[[2,"rgba(255,255,255,0.75)"],[3,"#ffffff"]]},"text-halo-width":1.25},source:"composite","source-layer":"country_label",type:"symbol"}]}},{}],33:[function(t,e,i){"use strict";t("./plugins");var n=(t("./config").frontend,t("jquery")),o=t("underscore"),r=t("./lib/platform"),s=t("./map/mapboxgljs/map"),a=t("./map/map"),l=t("./views/mobile-view"),u=t("./views/map-nav"),c=t("./lib/app"),h=function(){c.call(this),this.map=a};o.extend(h.prototype,c.prototype,{render:function(){return new l({el:n("#content"),collection:this.ships,app:this})},run:function(){c.prototype.run.call(this),this.listenTo(this,"reception:layer",this.contentView.slideIn),n("html").addClass("mobile");var t=this;a.onReady().done(function(){var e={before:[{cls:"menu-hamburger",trigger:"openMenu"}]};r.isTouchDevice&&a instanceof s&&(e.after=[{cls:"screenshot",trigger:"toNorth"}]);var i=new u({buttons:e});a.listenTo(i,"zoomIn",a.zoomIn),a.listenTo(i,"zoomOut",a.zoomOut),a.listenTo(i,"toHome",a.toHome),r.isTouchDevice&&a instanceof s&&a.listenTo(i,"toNorth",a.toNorth),t.contentView.listenTo(i,"openMenu",t.contentView.slideOut)})}});var p=new h;r.isMobile=!0,r.onReady().done(function(){p.run()}),window.app=p},{"./config":1,"./lib/app":8,"./lib/platform":14,"./map/map":28,"./map/mapboxgljs/map":30,"./plugins":50,"./views/map-nav":67,"./views/mobile-view":69,jquery:117,underscore:371}],34:[function(t,e,i){"use strict";var n=t("underscore"),o=t("backbone"),r=t("./model"),s=o.Collection.extend({model:r,initialize:function(){this.listenTo(this,"add",this.cleanup)},cleanup:function(){this.length>99&&this.remove(this.shift())},reset:function(t,e){t||(t=[]),e||(e={});for(var i=0,o=this.models.length;o>i;i++)this._removeReference(this.models[i]),this.trigger("remove",this.models[i],this),this.models[i].trigger("remove",this.models[i],this);return this._reset(),this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),this}}),a=new s;window.logCollection=a,e.exports=a},{"./model":35,backbone:84,underscore:371}],35:[function(t,e,i){"use strict";var n=(t("underscore"),t("backbone")),o=n.RelationalModel.extend({});e.exports=o},{backbone:84,underscore:371}],36:[function(t,e,i){"use strict";var n=t("backbone"),o=t("./model"),r=n.Collection.extend({model:o});e.exports=r},{"./model":40,backbone:84}],37:[function(t,e,i){"use strict";var n=t("../../lib/helper/map-util"),o=t("moment"),r=t("underscore");r.str=t("underscore.string");var s=t("../../lib/helper/ais-message"),a=t("ais-receiver/ais-messages/json/ais_msg_1.json"),l=function(t){this.position=t,this.aismessage=new s,this.aismessage.fromJSON(a.fields)};r.extend(l.prototype,{getCOG:function(){return this.position.has("cog")?r.str.sprintf("%03d&deg;",this.position.get("cog")):void 0},getSOG:function(){return this.position.has("sog")?r.str.sprintf("%0.1f kts",this.position.get("sog")):void 0},getNav:function(){var t=this.getCOG(),e=this.getSOG();return t&&e?t+" at "+e:t?t+" at n/a":e?"n/a at "+e:"n/a"},toTitle:function(){var t=["Lat: "+this.format("Latitude").value,"Lon: "+this.format("Longitude").value,"Course/speed: "+this.getNav(),"",this.format("Timestamp").value];return t.join("<br>")},fieldList:{"Navigation status":function(t){return{cls:"navigationstatus",value:this.aismessage.lookup("navigationstatus",t.get("navigationstatus"))}},"Rate of turning":function(t){if(t.has("rot")){var e=t.get("rot");return e>126||-126>e?{cls:"rot",value:this.aismessage.lookup("rot",e)}:{cls:"rot",value:e+"&deg;/min"||!1}}},"Speed over ground":function(t){return{cls:"sog",value:this.getSOG()}},"Course over ground":function(t){return{cls:"cog",value:this.getCOG()}},"True Heading":function(t){return{cls:"trueheading",value:t.has("trueheading")&&t.get("trueheading")+"&deg;"||!1}},Longitude:function(t){return{cls:"longitude",value:n.decimalLatToDms(t.get("longitude"))}},Latitude:function(t){return{cls:"latitude",value:n.decimalLatToDms(t.get("latitude"))}},Timestamp:function(t){if(t.get("timestamp")>59)return{cls:"timestamp",value:this.aismessage.lookup("timestamp",t.get("timestamp"))};var e=o.utc(t.get("datetime"));return e.seconds(t.get("timestamp")),{cls:"timestamp",value:e.format("YYYY-MM-DD HH:mm:ss UTC")}},"Position accuracy":function(t){return{cls:"positionaccuracy",value:this.aismessage.lookup("positionaccuracy",t.get("positionaccuracy"))}}},format:function(t){return this.fieldList[t](this.position)},toPropertyList:function(){var t=[];return r.each(this.fieldList,function(e,i){var n=e.call(this,this.position);n&&n.value&&t.push({cls:n.cls,name:i,value:n.value})},this),t}}),e.exports=l},{"../../lib/helper/ais-message":9,"../../lib/helper/map-util":11,"ais-receiver/ais-messages/json/ais_msg_1.json":81,moment:252,underscore:371,"underscore.string":326}],38:[function(t,e,i){"use strict";var n=(t("underscore"),t("backbone"),t("../../map/label")),o=n.extend({classname:"position-label",getCoordinates:function(){return this.model.getCoordinate()},toTitle:function(){return this.model.getHelper().toTitle()}});e.exports=o},{"../../map/label":27,backbone:84,underscore:371}],39:[function(t,e,i){"use strict";var n=t("underscore"),o=t("backbone"),r=function(t){this.position=t};n.extend(r.prototype,o.Events,{toMarker:function(){var t=Math.round(this.position.has("cog")&&this.position.get("cog")||0);return{type:"Feature",geometry:{type:"Point",coordinates:this.position.getCoordinate()},properties:{title:this.position.getHelper().toTitle(),id:"p"+this.position.get("id"),angle:t}}}}),e.exports=r},{backbone:84,underscore:371}],40:[function(t,e,i){"use strict";var n=t("underscore");n.str=t("underscore.string");var o=t("backbone"),r=(t("moment"),
t("geographiclib")),s=t("../../map/map"),a=t("./helper"),l=t("./marker"),u=t("./label"),c=o.RelationalModel.extend({positionHelper:null,positionLabel:null,positionMarker:null,defaults:{mouseover:!1,selected:!1},getHelper:function(){return this.positionHelper||(this.positionHelper=new a(this)),this.positionHelper},getMarker:function(){return this.positionMarker||(this.positionMarker=new l(this)),this.positionMarker},getLabel:function(){return this.positionLabel||(this.positionLabel=new u({model:this})),this.positionLabel},parse:function(t,e){return t.raw=t.raw&&JSON.parse(t.raw)||t.raw,o.RelationalModel.prototype.parse.call(this,t,e)},getCoordinate:function(){return[this.get("longitude"),this.get("latitude")]},getLngLat:function(){return s.getLngLat(this)},distanceTo:function(t){var e=this.getLngLat(),i=r.Geodesic.WGS84;return Math.round(i.Inverse(t.lat,t.lng,e.lat,e.lng).s12)},diff:function(t){t instanceof o.RelationalModel&&(t=t.toJSON());var e=n.clone(this.attributes);delete e.id,delete e.timestamp,delete e.datetime,delete e.raw,delete e.selected,delete e.mouseover;var i=n.clone(t);return i&&(delete i.id,delete i.timestamp,delete i.datetime,delete i.raw),n.omit(e,function(t,e){return i[e]===t})}});e.exports=c},{"../../map/map":28,"./helper":37,"./label":38,"./marker":39,backbone:84,geographiclib:96,moment:252,underscore:371,"underscore.string":326}],41:[function(t,e,i){"use strict";var n=t("../../config").setup.ship,o=(t("../../config").server,t("underscore")),r=t("backbone"),s=t("moment"),a=t("../../lib/platform"),l=t("../../lib/socket"),u=t("./model"),c=(t("../shipdata/model"),r.Collection.extend({model:u,url:function(){return a.setPrefix("/api/ships")},currentSort:{strategy:"name",direction:"asc"},selectedStrategy:null,comparator:function(t,e){return this.selectedStrategy.apply(this,arguments)},strategies:{asc:{name:function(t,e){return t.has("shipdata")&&!e.has("shipdata")?-1:!t.has("shipdata")&&e.has("shipdata")?1:t.has("shipdata")||e.has("shipdata")?t.get("shipdata").get("name")<e.get("shipdata").get("name")?-1:t.get("shipdata").get("name")>e.get("shipdata").get("name")?1:0:t.get("userid")-e.get("userid")},userid:function(t,e){return t.get("userid")-e.get("userid")},datetime:function(t,e){return new Date(t.get("datetime"))-new Date(e.get("datetime"))}},desc:{name:function(t,e){return t.has("shipdata")&&!e.has("shipdata")?1:!t.has("shipdata")&&e.has("shipdata")?-1:t.has("shipdata")||e.has("shipdata")?t.get("shipdata").get("name")<e.get("shipdata").get("name")?1:t.get("shipdata").get("name")>e.get("shipdata").get("name")?-1:0:e.get("userid")-t.get("userid")},userid:function(t,e){return e.get("userid")-t.get("userid")},datetime:function(t,e){return new Date(e.get("datetime"))-new Date(t.get("datetime"))}}},initialize:function(t){this.options=t,this.selectedId=0,this.initSort(this.currentSort.strategy,this.currentSort.direction),this.on("remove",function(t){t.get("id")===this.selectedId&&(this.selectedId=0)},this),this.on("change:selected",function(t,e){e&&this.each(function(e){e.get("id")!==t.get("id")&&e.set("selected",!1)}),t.get("id")===this.selectedId&&(this.selectedId=0)}),this.listenTo(this.options.app,"shopListening",function(){console.log("abort"),this.xhr.abort&&this.xhr.abort()})},start:function(){this.fetch(),this.socket||(l.connect().done(o.bind(function(t){this.socket=t,this.socket.on("ship:create",this.onShipCreated.bind(this)),this.socket.on("ship:update",this.onShipUpdated.bind(this))},this)),this.timer=setInterval(o.bind(function(){this.removeExpiredModels()},this),9e4))},stop:function(){clearInterval(this.timer),this.invoke("stop"),this.socket&&(this.socket.removeListener("ship:create",this.onShipCreated.bind(this)),this.socket.removeListener("ship:update",this.onShipUpdated.bind(this)),this.socket=null),this.reset()},removeExpiredModels:function(){var t=this.filter(function(t){var e=s.utc(),i=s.utc(t.get("datetime")),o=e.diff(i,"minutes");return o>n.minutes});this.trigger("expired",t,this),this.remove(t)},reset:function(t,e){t||(t=[]),e||(e={});for(var i=0,n=this.models.length;n>i;i++)this._removeReference(this.models[i]),this.trigger("remove",this.models[i],this),this.models[i].trigger("remove",this.models[i],this);return this._reset(),this.add(t,o.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),this},onShipCreated:function(t){this.add(u.findOrCreate(t))},onShipUpdated:function(t){if(!this.get(t.id)){var e=u.findOrCreate(t);this.add(e)}},selectShip:function(t){var e;if(e=t instanceof u?t.get("id"):t,this.selectedId){var i=this.get(this.selectedId),n=i.get("track").findWhere({selected:!0});if(e===this.selectedId||n)return!0;i.set("selected",!1),this.selectedId=0}return e?(this.get(e).set("selected",!0),this.selectedId=e,!0):!1},initSort:function(t,e){this.currentSort={strategy:t,direction:e},this.comparator=this.strategies[e||"asc"][t]},changeSort:function(t,e){this.initSort(t,e),this.sort()},getShipsForLngLat:function(t,e){return this.filter(function(i){return i.affectedByLngLat(t,e)})},toGeoJSON:function(){var t={type:"FeatureCollection",features:[]};return this.length<1?t:(this.each(function(e){var i=e.getMarker().toMarker();i&&(e.getMarker().chkUpdate(),t.features.push(i))}),t)},fetch:function(){return this.xhr=r.Collection.prototype.fetch.apply(this,arguments),this.xhr}}));e.exports=c},{"../../config":1,"../../lib/platform":14,"../../lib/socket":20,"../shipdata/model":48,"./model":45,backbone:84,moment:252,underscore:371}],42:[function(t,e,i){"use strict";var n=t("underscore"),o=function(t){this.ship=t};n.extend(o.prototype,{toTitle:function(){return this.ship.has("shipdata")&&this.ship.get("shipdata").get("name")||this.ship.get("userid")}}),e.exports=o},{underscore:371}],43:[function(t,e,i){"use strict";var n=(t("underscore"),t("backbone"),t("../../map/label")),o=n.extend({classname:"ship-label",getCoordinates:function(){return this.model.get("position").getCoordinate()},onClick:function(){this.model.set("selected",!0)},toTitle:function(){var t=this.model.getHelper().toTitle();return t+='<hr noshade size="1">',t+=this.model.get("position").getHelper().toTitle()}});e.exports=o},{"../../map/label":27,backbone:84,underscore:371}],44:[function(t,e,i){"use strict";var n=(t("jquery"),t("underscore")),o=t("backbone"),r=t("geographiclib"),s=t("../../lib/platform"),a=(t("../position/model"),t("../../map/map")),l=function(t){this.ship=t,this.shapeCoordinates=[],this.positionCoordinate=[],this.dimension={},this.listenTo(this.ship,"moved",this.chkUpdate),this.listenTo(this.ship,"change:shipdata",this.chkUpdate),this.listenTo(this.ship,"change:mouseover",this.highlite),this.listenTo(this.ship,"change:selected",this.onSelected),this.addToMap()};n.extend(l.prototype,o.Events,{chkUpdate:function(){var t=this.ship.has("position")&&this.ship.get("position").getCoordinate()||[];(n.isEmpty(this.dimension)||!n.isEmpty(n.difference(this.positionCoordinate,t)))&&this.addToMap()},center:function(){this.ship.has("position")&&a.center(this.ship.get("position").getLngLat())},onPositionChange:function(){a.moveIntoView(this.ship.get("position"))},onSelected:function(t,e){e?(this.center(),this.listenTo(this.ship,"moved",this.onPositionChange)):this.stopListening(this.ship,"moved",this.onPositionChange)},hasShape:function(){if(!n.isEmpty(this.dimension))return this.dimension;if(this.ship.has("shipdata")){var t=this.ship.get("shipdata"),e=t.get("dima")||0,i=t.get("dimb")||0,o=t.get("dimc")||0,r=t.get("dimd")||0;if((e||i)&&(o||r))return this.dimension={a:e,b:i,c:o,d:r},this.dimension}},latLngInPolygon:function(t){if(!n.isEmpty(this.shapeCoordinates)){var e=[],i=[];n.each(this.shapeCoordinates,function(t){e.push(t[0]),i.push(t[1])});for(var o=t.lng,r=t.lat,s=6,a=s-1,l=!1,u=0;s>u;u++)(i[u]<r&&i[a]>=r||i[a]<r&&i[u]>=r)&&e[u]+(r-i[u])/(i[a]-i[u])*(e[a]-e[u])<o&&(l=!l),a=u;return l}},getMapId:function(t){return t+"-"+this.ship.get("id")},toShape:function(){var t=this.hasShape();if(t){var e=this.ship,i=e.get("position");this.positionCoordinate=i.getCoordinate();var n,o=t.a,s=t.b,a=t.c,l=t.d,u=r.Geodesic.WGS84,c=i.has("trueheading")&&i.get("trueheading")||i.get("cog"),h=a+l,p=h/2,d=Math.sqrt(2*Math.pow(p,2)),f=i.get("longitude"),m=i.get("latitude"),g=f,y=m;l>a&&(n=u.Direct(m,f,c+90,(l-a)/2),g=n.lon2,y=n.lat2),a>l&&(n=u.Direct(m,f,c-90,(a-l)/2),g=n.lon2,y=n.lat2),a=l=p;var v=o-p,b=u.Direct(y,g,c,o),x=u.Direct(b.lat2,b.lon2,c-135,d),_=u.Direct(x.lat2,x.lon2,c-180,v),w=u.Direct(b.lat2,b.lon2,c+135,d),S=u.Direct(w.lat2,w.lon2,c+180,v),k=u.Direct(_.lat2,_.lon2,c+180,s),T=(u.Direct(k.lat2,k.lon2,c+90,a),u.Direct(S.lat2,S.lon2,c+180,s));return this.shapeCoordinates=[[b.lon2,b.lat2],[x.lon2,x.lat2],[k.lon2,k.lat2],[T.lon2,T.lat2],[w.lon2,w.lat2],[b.lon2,b.lat2]],{type:"Feature",geometry:{type:"Polygon",coordinates:[this.shapeCoordinates]},properties:{id:this.getMapId("shape")}}}},toMarker:function(){var t=this.ship,e=t.get("position");if(e){var i=e.has("trueheading")&&e.get("trueheading")||e.has("cog")&&e.get("cog")||0;i=Math.round(i);var n=t.get("selected")&&"triangle-"+i||"triangle-"+i+"-stroked";return{type:"Feature",geometry:{type:"Point",coordinates:e.getCoordinate()},properties:{title:t.getHelper().toTitle(),"marker-symbol":n,angle:i,selected:t.get("selected"),id:this.getMapId("marker")}}}},onLoad:function(){a.addToMap({name:this.getMapId("shape"),data:this.toShape(),layer:[{name:this.getMapId("shape"),behind:"markers",json:{type:"fill",minzoom:14,paint:{"fill-color":"rgba(63,63,191,0.5)","fill-outline-color":"rgba(0,0,0,0)"}}}]})},addToMap:function(){this.ship.has("position")&&this.hasShape()&&a.onReady().done(n.bind(function(){this.onLoad()},this))},removeFromMap:function(){this.stopListening(this.ship,"moved",this.chkUpdate),this.stopListening(this.ship,"change:shipdata",this.chkUpdate),this.stopListening(this.ship,"change:mouseover",this.highlite),this.stopListening(this.ship,"change:selected",this.onSelected),this.stopListening(this.ship,"moved",this.onPositionChange),this.ship.get("id")&&a.removeFromMap({name:this.getMapId("shape"),layer:[this.getMapId("shape")]})},highlite:function(t,e){this.hasShape()&&!s.isTouchDevice&&(e?a.setPaintProperty(this.getMapId("shape"),"fill-color","rgba(63,191,63,0.5)"):a.setPaintProperty(this.getMapId("shape"),"fill-color","rgba(63,63,191,0.5)"))}}),e.exports=l},{"../../lib/platform":14,"../../map/map":28,"../position/model":40,backbone:84,geographiclib:96,jquery:117,underscore:371}],45:[function(t,e,i){"use strict";var n=t("../../lib/socket"),o=t("../../map/map"),r=t("underscore"),s=t("backbone"),a=t("geographiclib"),l=t("../position/collection"),u=t("../position/model"),c=t("../shipdata/collection"),h=t("../shipdata/model"),p=t("../track/collection"),d=t("./helper"),f=t("./marker"),m=t("./label"),g=s.RelationalModel.extend({shipHelper:null,shipLabel:null,shipMarker:null,defaults:{mouseover:!1,selected:!1},url:function(){return"/api/ship/"+this.get("id")},relations:[{type:s.HasOne,key:"position",relatedModel:u,collectionType:l},{type:s.HasOne,key:"shipdata",relatedModel:h,collectionType:c},{type:s.HasMany,key:"track",relatedModel:u,collectionType:p}],initialize:function(){this.listenTo(this,"add",this.onAdd),this.listenTo(this,"remove",this.onRemove),this.listenTo(this,"change:position",this.onPositionChange),this.listenTo(this,"change:selected",this.onSelect)},toTitle:function(){return this.getHelper().toTitle()},getHelper:function(){return this.shipHelper||(this.shipHelper=new d(this)),this.shipHelper},getMarker:function(){return this.shipMarker||(this.shipMarker=new f(this)),this.shipMarker},getLabel:function(){return this.shipLabel||(this.shipLabel=new m({model:this})),this.shipLabel},fetchTrack:function(){var t=this.get("track");return t.reset(),this.xhr=t.fetch(this),this.xhr.done(r.bind(t.startListening,t)),this.xhr},distanceTo:function(t){var e=this.get("position").getLngLat(),i=a.Geodesic.WGS84;return i.Inverse(t.lat,t.lng,e.lat,e.lng).s12},affectedByFilter:function(t){if(t.length<1)return!0;var e=this.has("shipdata")&&this.get("shipdata").has("name")&&this.get("shipdata").get("name").toLowerCase()||"",i=this.get("userid");return e.indexOf(t)>-1||0===String(i).indexOf(t,0)?!0:!1},affectedByLngLat:function(t,e){if(!this.has("position"))return!1;var i=this.distanceTo(t),n=this.getMarker().latLngInPolygon(t);return e>i||n},onSocketHelper:function(t,e,i){var n=!1;return this.has(e)?(n=this.get(e).diff(t[e]),n&&this.set(e,i.findOrCreate(t[e]))):(n=!0,this.set(e,new i(t[e]))),n},onSocket:function(t){(this.onSocketHelper(t,"shipdata",h)||this.onSocketHelper(t,"position",u))&&this.set("datetime",t.datetime)},inView:function(){if(!this.has("position"))return!1;var t=this.get("position").getLngLat();return o.inView(t)},onPositionChange:function(t,e){var i=e&&e.getLngLat()||null;if(i&&!this.coordinate)this.coordinate=i,this.trigger("moved",e);else if(this.get("selected"))this.coordinate=i,this.trigger("moved",e);else if(this.inView())this.coordinate=i,this.trigger("moved",e);else{var n=a.Geodesic.WGS84,o=n.Inverse(this.coordinate.lat,this.coordinate.lng,i.lat,i.lng).s12;o>50&&(this.coordinate=i,this.trigger("moved",e))}},onAdd:function(){this.coordinate=this.has("position")&&this.get("position").getLngLat()||null,this.start(),this.getMarker(),this.getLabel()},onRemove:function(){this.stop(),this.set("selected",!1),this.set("mouseover",!1),this.shipHelper&&delete this.shipHelper,this.shipMarker&&(this.shipMarker.removeFromMap(),delete this.shipMarker),this.shipLabel&&(this.shipLabel.hideLabel(),delete this.shipLabel)},onSelect:function(t,e){!e&&this.xhr?this.xhr.abort():this.set("mouseover",!1)},start:function(){this.socket||n.connect().done(r.bind(function(t){this.socket=t,this.socket.on("ship:update:"+this.get("userid"),r.bind(this.onSocket,this))},this))},stop:function(){this.get("id")&&(this.set("selected",!1),this.getMarker().removeFromMap(),this.xhr&&this.xhr.abort(),this.socket&&(this.socket.removeListener("ship:update:"+this.get("userid"),r.bind(this.onSocket,this)),this.socket=null))}});e.exports=g},{"../../lib/socket":20,"../../map/map":28,"../position/collection":36,"../position/model":40,"../shipdata/collection":46,"../shipdata/model":48,"../track/collection":49,"./helper":42,"./label":43,"./marker":44,backbone:84,geographiclib:96,underscore:371}],46:[function(t,e,i){"use strict";var n=t("backbone"),o=t("./model"),r=n.Collection.extend({model:o});e.exports=r},{"./model":48,backbone:84}],47:[function(t,e,i){"use strict";var n=t("moment"),o=t("underscore");o.str=t("underscore.string");var r=t("../../lib/helper/ais-message"),s=t("ais-receiver/ais-messages/json/ais_msg_5.json"),a=function(t){this.shipdata=t,this.aismessage=new r,this.aismessage.fromJSON(s.fields)};o.extend(a.prototype,{fieldList:{MMSI:function(t){return{cls:"userid",value:t.get("userid")}},"IMO number":function(t){return{cls:"imonumber",value:t.get("imonumber")}},Callsign:function(t){return{cls:"callsign",value:t.get("callsign")}},"Ship type":function(t){return{cls:"shiptype",value:this.aismessage.lookup("shiptype",t.get("shiptype"))}},Width:function(t){return t.has("dimc")||t.has("dimd")?{cls:"dima dimc",value:t.get("dimc")+t.get("dimd")+" m"}:void 0},Lenght:function(t){return t.has("dima")||t.has("dimb")?{cls:"dima dimb",value:t.get("dima")+t.get("dimb")+" m"}:void 0},Draught:function(t){return{cls:"draught",value:t.has("draught")&&t.get("draught")+" m"||!1}},Destination:function(t){return{cls:"destination",value:t.get("destination")}},ETA:function(t){var e=t.get("etamonth"),i=t.get("etaday"),o=t.get("etahour"),r=t.get("etaminute");if(e||i||o||r){var s=n.utc(t.get("datetime"));return e&&s.month(e),i&&s.date(i),o&&s.hour(o),r&&s.minute(r),{cls:"etamonth etaday etahour etaminute",value:s.format("YYYY-MM-DD HH:mm:ss UTC")}}},"AIS version":function(t){return{cls:"aisversion",value:this.aismessage.lookup("aisversion",t.get("aisversion"))}},"Position type":function(t){return{cls:"positiontype",value:this.aismessage.lookup("positiontype",t.get("positiontype"))}},Datetime:function(t){var e=n.utc(t.get("datetime"));return{cls:"datetime",value:e.format("YYYY-MM-DD HH:mm:ss UTC")}}},format:function(t){return this.fieldList[t](this.position)},toPropertyList:function(){var t=[];return o.each(this.fieldList,function(e,i){var n=e.call(this,this.shipdata);n&&n.value&&t.push({cls:n.cls,name:i,value:n.value})},this),t}}),e.exports=a},{"../../lib/helper/ais-message":9,"ais-receiver/ais-messages/json/ais_msg_5.json":82,moment:252,underscore:371,"underscore.string":326}],48:[function(t,e,i){"use strict";var n=t("underscore"),o=t("backbone"),r=t("./helper"),s=o.RelationalModel.extend({url:"/api/shipdata",parse:function(t,e){return t.raw=t.raw&&JSON.parse(t.raw)||t.raw,o.RelationalModel.prototype.parse.call(this,t,e)},getHelper:function(){return new r(this)},diff:function(t){t instanceof o.RelationalModel&&(t=t.toJSON());var e=n.clone(this.attributes);delete e.raw;var i=n.clone(t);return i&&delete i.raw,n.omit(e,function(t,e){return i[e]===t})}});e.exports=s},{"./helper":47,backbone:84,underscore:371}],49:[function(t,e,i){"use strict";var n=(t("../../config").server,t("underscore")),o=t("../../lib/platform"),r=t("../../lib/socket"),s=t("../position/model"),a=t("../position/collection"),l=a.extend({comparator:function(t,e){return new Date(t.get("datetime"))-new Date(e.get("datetime"))},url:function(){if(!this.ship)throw"Track: No Id specified";return o.setPrefix("/api/track/"+this.ship.get("id"))},fetch:function(t){return this.ship=t,a.prototype.fetch.call(this)},startListening:function(){this.socket=null,r.connect().done(n.bind(function(t){this.socket=t,this.socket.on("track:add:"+this.ship.get("userid"),this.onPositionAdded.bind(this))},this))},stopListening:function(){this.socket&&(this.socket.removeListener("track:add:"+this.ship.get("userid"),this.onPositionAdded.bind(this)),this.socket=null)},getPositionsForLngLat:function(t,e){return this.filter(function(i){return i.distanceTo(t)<e})},initialize:function(){this.ship=null,this.from=0},setRange:function(t){this.from=t,this.trigger("setrange",this,t)},onPositionAdded:function(t){this.add(s.findOrCreate(t.position))},reset:function(){this.stopListening(),a.prototype.reset.call(this)}});e.exports=l},{"../../config":1,"../../lib/platform":14,"../../lib/socket":20,"../position/collection":36,"../position/model":40,underscore:371}],50:[function(t,e,i){"use strict";var n=(t("underscore"),t("jquery")),o=t("backbone");t("backbone-relational"),o.$=n,t("bootstrap"),t("bootstrap-notify"),t("bootstrap-switch"),t("jquery-color")},{backbone:84,"backbone-relational":83,bootstrap:86,"bootstrap-notify":2,"bootstrap-switch":85,jquery:117,"jquery-color":4,underscore:371}],51:[function(t,e,i){var n=t("hbsfy/runtime");e.exports=n.template({compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){return'<div class="inner">\n  <div class="center-block">\n    <h3>AIS Tracker</h3>\n    <form class="form-horizontal">\n      <br><h4>Antenna profile</h4>\n      <p>\n        <div class="pull-left"><label for="today">Today</label></div>\n        <div class="pull-right"><input type="checkbox" class="form-control" id="today"></div>\n      </p>\n      <p class="clearfix">\n        <div class="pull-left"><label for="thisweek">This week</label></div>\n        <div class="pull-right"><input type="checkbox" class="form-control" id="thisweek"></div>\n      </p>\n      <p class="clearfix">\n        <div class="pull-left"><label for="lastweek">Last week</label></div>\n        <div class="pull-right"><input type="checkbox" class="form-control" id="lastweek"></div>\n      </p>\n    </form>\n  </div>\n</div>'},useData:!0})},{"hbsfy/runtime":116}],52:[function(t,e,i){"use strict";var n=t("jquery"),o=(t("underscore"),t("../lib/view")),r=t("./about-view.hbs"),s=o.extend({tagName:"div",className:"item aboutview",template:r,events:{"switchChange.bootstrapSwitch input[type='checkbox']":"changereceptionlayer"},initialize:function(t){this.app=t.app,this.render()},changereceptionlayer:function(t,e){this.app.trigger("reception:layer",{name:n(t.target).attr("id"),state:e})},onFailure:function(t){n("#"+t).bootstrapSwitch("state",!1)},render:function(){this.$el.html(this.template({})),this.$el.find("input[type='checkbox']").bootstrapSwitch(),this.listenTo(this.app,"reception:failed",this.onFailure)}});e.exports=s},{"../lib/view":21,"./about-view.hbs":51,jquery:117,underscore:371}],53:[function(t,e,i){"use strict";var n=t("jquery"),o=t("underscore"),r=t("./ship-view"),s=t("./list-view"),a=t("./about-view"),l=t("./log-view"),u=t("../lib/view"),c=t("./desktop-view.hbs"),h=u.extend({template:c,closeview:o.noop,openview:o.noop,onStart:function(){this.listenTo(this.collection,"remove",this.chkShipview)},onStop:function(){this.$el.find("input[type='text']").val(""),this.listView.unsetFilter(),this.stopListening(this.collection,"remove",this.chkShipview)},chkShipview:function(t){this.shipview&&this.shipview.model.get("id")===t.get("id")&&(this.isOpen&&this.openlistview(),this.destroyShipview()),this.updateFooter()},findCarouselIndexByClass:function(t){var e=0;return this.$el.find(".item").each(function(i){n(this).hasClass(t)&&(e=i)}),e},updateFooter:function(t){this.shipview?this.$el.find(".footer li.toship").removeClass("disabled"):this.$el.find(".footer li.toship").addClass("disabled"),this.$el.find(".footer li").each(function(){t&&n(this).hasClass(t)?n(this).addClass("active"):n(this).removeClass("active")})},openviewhelper:function(t,e){this.$el.find(".item.active").length||this.$el.find(".item."+t).addClass("active");var i=this.findCarouselIndexByClass(t);this.$el.find(".carousel").carousel(i),this.openview(),"listview"===t?(this.logView.isShown=!1,this.listView.isShown=!0):"logview"===t?(this.logView.isShown=!0,this.listView.isShown=!1):(this.logView.isShown=!1,this.listView.isShown=!1),this.updateFooter(e)},openlistview:function(){this.openviewhelper("listview","tolist")},openshipview:function(){this.shipview&&this.openviewhelper("shipview","toship")},openaboutview:function(){this.openviewhelper("aboutview","toabout")},openlogview:function(){this.openviewhelper("logview","tolog")},filter:function(t){this.listView.filter(t)},selectShip:function(t,e){if(e){if(this.destroyShipview(),this.shipview=new r({model:t}),this.shipview.render(),this.$el.find(".carousel-inner").append(this.shipview.$el),this.openview(),this.$el.find(".item.active").length){var i=this.findCarouselIndexByClass("shipview");this.$el.find(".carousel").carousel(i)}else this.$el.find(".item.shipview").addClass("active");this.logView.isShown=!1,this.listView.isShown=!1,this.updateFooter("toship")}},render:function(){this.$el.html(this.template()),this.$el.find(".carousel").carousel({interval:!1,pause:!1}),this.listView=new s({collection:this.collection}),this.$el.find(".carousel-inner").append(this.listView.$el),this.logView=new l,this.$el.find(".carousel-inner").append(this.logView.$el),this.aboutView=new a({app:this.app}),this.$el.find(".carousel-inner").append(this.aboutView.$el),this.listenTo(this.collection,"change:selected",this.selectShip)},destroyShipview:function(){this.shipview&&(this.shipview.remove(),delete this.shipview),this.isOpen&&this.openlistview(),this.updateFooter()}});e.exports=h},{"../lib/view":21,"./about-view":52,"./desktop-view.hbs":54,"./list-view":61,"./log-view":65,"./ship-view":79,jquery:117,underscore:371}],54:[function(t,e,i){var n=t("hbsfy/runtime");e.exports=n.template({compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){var r;return'<div class="header clearfix">\n  <form class="form-horizontal">\n    <input class="form-control" type="text" placeholder="Filter by Name or MMSI" value="'+t.escapeExpression((r=null!=(r=i.filter||(null!=e?e.filter:e))?r:i.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"filter",hash:{},data:o}):r))+'">\n  </form>\n</div>\n<div class="collapse">\n  <div id="carousel" class="carousel slide">\n    <div class="carousel-inner" role="listbox">\n    </div>\n  </div>\n</div>\n<div class="footer">\n  <ul class="nav nav-pills">\n    <li role="presentation" class="tolist"><a href="#">List</a></li>\n    <li role="presentation" class="toship disabled"><a href="#">Details</a></li>\n    <li role="presentation" class="tolog"><a href="#">Log</a></li>\n    <li role="presentation" class="toabout"><a href="#">About</a></li>\n    <li role="presentation" class="toclose pull-right" style="display:none"><a href="#">Close</a></li>\n  </ul>\n</div>'},useData:!0})},{"hbsfy/runtime":116}],55:[function(t,e,i){"use strict";var n=(t("underscore"),t("jquery"),t("./base-view")),o=t("./desktop-view.hbs"),r=n.extend({template:o,events:{"keyup input[type='text']":"filter","focus input[type='text']":"openlistview","fastclick .footer .tolist a":"openlistview","fastclick .footer .toship a":"openshipview","fastclick .footer .toabout a":"openaboutview","fastclick .footer .tolog a":"openlogview","click .footer .toclose a":"closeview"},initialize:function(t){this.app=t.app,this.isOpen=!1,this.render(),this.listenTo(this.app,"clickout",this.destroyShipview),this.listenTo(this.app,"startListening",this.onStart),this.listenTo(this.app,"shopListening",this.onStop)},onStop:function(){n.prototype.onStop.call(this),this.destroyShipview(),this.closeview()},closeview:function(){this.isOpen===!0&&(this.$el.find(".collapse").collapse("hide"),this.$el.find(".toclose").hide(),this.$el.find(".footer li").removeClass("active")),this.isOpen=!1,this.listView.isShown=!1,this.logView.isShown=!1},openview:function(){this.isOpen===!1&&(this.$el.find(".collapse").collapse("show"),this.$el.find(".toclose").show()),this.isOpen=!0}});e.exports=r},{"./base-view":53,"./desktop-view.hbs":54,jquery:117,underscore:371}],56:[function(t,e,i){var n=t("hbsfy/runtime");e.exports=n.template({compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){var r,s=null!=e?e:{},a=i.helperMissing,l="function",u=t.escapeExpression;return'<tr>\n  <th>\n    <div class="dropdown">\n      <a data-toggle="dropdown" role="button">\n        Vessel name\n        <span class="caret"></span>\n      </a>\n      <ul class="dropdown-menu">\n        <li><a href="#" class="name_asc">Sort ascending</a></li>\n        <li><a href="#" class="name_desc">Sort descending</a></li>\n      </ul>\n    </div>\n  </th>\n  <th>\n    <div class="dropdown">\n      <a data-toggle="dropdown" role="button">\n        '+u((r=null!=(r=i.secondColumn||(null!=e?e.secondColumn:e))?r:a,typeof r===l?r.call(s,{name:"secondColumn",hash:{},data:o}):r))+'\n        <span class="caret"></span>\n      </a>\n      <ul class="dropdown-menu dropdown-menu-right">\n        <li><a href="#" class="column_asc">Sort ascending</a></li>\n        <li><a href="#" class="column_desc">Sort descending</a></li>\n        <li role="separator" class="divider"></li>\n        <li><a href="#" class="column_change">'+u((r=null!=(r=i.changelabel||(null!=e?e.changelabel:e))?r:a,typeof r===l?r.call(s,{name:"changelabel",hash:{},data:o}):r))+"</a></li>\n      </ul>\n    </div>\n  </th>\n</tr>"},useData:!0})},{"hbsfy/runtime":116}],57:[function(t,e,i){"use strict";var n=t("underscore"),o=t("moment"),r=t("../lib/view"),s=t("./list-header.hbs"),a=r.extend({template:s,column:[{label:"MMSI",getter:"userid",initsort:"asc",changelabel:"Switch to MMSI",selected:!0},{label:"Datetime",changelabel:"Switch to last position datetime",getter:"datetime",initsort:"desc",selected:!1,format:function(t){return o.utc(t).format("YYYY-MM-DD HH:mm:ss UTC")}}],events:{"fastclick .name_asc":"sortnameasc","fastclick .name_desc":"sortnamedesc","fastclick .column_asc":"sortcolumnasc","fastclick .column_desc":"sortcolumndesc","fastclick .column_change":"change"},sortnameasc:function(t){t.stopPropagation(),t.preventDefault(),this.collection.changeSort("name","asc"),this.render()},sortnamedesc:function(t){t.stopPropagation(),t.preventDefault(),this.collection.changeSort("name","desc"),this.render()},sortcolumnasc:function(t){t.stopPropagation(),t.preventDefault(),this.collection.changeSort(n.findWhere(this.column,{selected:!0}).getter,"asc"),this.render()},sortcolumndesc:function(t){t.stopPropagation(),t.preventDefault(),this.collection.changeSort(n.findWhere(this.column,{selected:!0}).getter,"desc"),this.render()},change:function(t){t.stopPropagation(),t.preventDefault(),n.each(this.column,function(t,e){this.column[e].selected=!this.column[e].selected,this.column[e].selected&&(this.collection.changeSort(this.column[e].getter,this.column[e].initsort),this.collection.sort())},this),this.trigger("column:change",this.selectedColumn()),this.render()},selectedColumn:function(){return n.findWhere(this.column,{selected:!0})},render:function(){var t=this.selectedColumn(),e=n.findWhere(this.column,{selected:!1});this.$el.html(this.template({filter:this.search,secondColumn:t.label,changelabel:e.changelabel})),this.trigger("hide.bs.dropdown")}});e.exports=a},{"../lib/view":21,"./list-header.hbs":56,moment:252,underscore:371}],58:[function(t,e,i){var n=t("hbsfy/runtime");e.exports=n.template({compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){var r,s=null!=e?e:{},a=i.helperMissing,l="function",u=t.escapeExpression;return"<td>"+u((r=null!=(r=i.name||(null!=e?e.name:e))?r:a,typeof r===l?r.call(s,{name:"name",hash:{},data:o}):r))+"</td>\n<td>"+u((r=null!=(r=i.value||(null!=e?e.value:e))?r:a,typeof r===l?r.call(s,{name:"value",hash:{},data:o}):r))+"</td>\n"},useData:!0})},{"hbsfy/runtime":116}],59:[function(t,e,i){"use strict";var n=(t("underscore"),t("../lib/helper/background-animate")),o=t("../lib/view"),r=t("./list-item.hbs"),s=o.extend({tagName:"tr",template:r,className:"list-item",events:{"click *":"select"},attributes:function(){return{id:"ship-item-"+this.model.get("id")}},select:function(){this.collection.selectShip(this.model)},initialize:function(t){this.isRendered=!1,this.listview=t.listview,this.container=this.listview.container,this.listenTo(this.model,"change:datetime",this.updateFlash)},updateFlash:function(){this.listview.isShown&&this.isRendered&&this.model.affectedByFilter(this.listview.search)&&n(this.$el)},render:function(){var t=this.listview.selectedColumn;this.$el.html(this.template({name:this.model.getHelper().toTitle(),value:t.format&&t.format(this.model.get(t.getter))||this.model.get(t.getter)})),this.isRendered=!0},filter:function(){this.model.affectedByFilter(this.listview.search)?this.$el.show():this.$el.hide()},prepend:function(){this.model.affectedByFilter(this.listview.search)&&this.container.prepend(this.$el)},after:function(t){this.model.affectedByFilter(this.listview.search)&&t.after(this.$el)}});e.exports=s},{"../lib/helper/background-animate":10,"../lib/view":21,"./list-item.hbs":58,underscore:371}],60:[function(t,e,i){var n=t("hbsfy/runtime");e.exports=n.template({compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){return'<div class="list">\n  <div class="inner">\n    <table class="table table-hover table-condensed shiplist fixedhead">\n    <thead></thead>\n    <tbody class="scrollable"></tbody>\n    </table>\n    <div class="mask" style="display: none;"></div>\n  </div>\n</div>\n'},useData:!0})},{"hbsfy/runtime":116}],61:[function(t,e,i){"use strict";var n=t("jquery"),o=t("underscore"),r=t("./list-header"),s=t("./list-item"),a=t("../lib/view"),l=t("./list-view.hbs"),u=a.extend({tagName:"div",className:"item listview",listItems:{},container:null,template:l,initialize:function(){this.isShown=!1,this.search="",this.render(),this.listenTo(this.collection,"add",this.addItemView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenToOnce(this.collection,"sync",this.initItems)},unsetFilter:function(){this.search="",o.invoke(this.listItems,"filter")},filter:function(t){t.preventDefault(),t.stopPropagation();var e=n(t.target).val();this.search=e&&e.toLowerCase()||"",o.invoke(this.listItems,"filter")},getContainer:function(){return this.container},addItemView:function(t){var e=new s({model:t,collection:this.collection,listview:this});e.render(),this.listItems[t.get("id")]=e,this.renderItem(t)},removeItemView:function(t){this.listItems[t.get("id")]&&(this.listItems[t.get("id")].remove(),
delete this.listItems[t.get("id")])},render:function(){this.$el.html(this.template({})),this.listHeaderView=new r({el:this.$el.find("thead"),collection:this.collection}),this.selectedColumn=this.listHeaderView.selectedColumn(),this.listHeaderView.render(),this.listenTo(this.listHeaderView,"column:change",function(t){this.selectedColumn=t,o.invoke(this.listItems,"render")}),this.container=this.$el.find("tbody"),this.$el.delegate(".dropdown","show.bs.dropdown",o.bind(this.dropdownShow,this)),this.$el.delegate(".dropdown","hide.bs.dropdown",o.bind(this.dropdownHide,this)),this.listenTo(this.listHeaderView,"hide.bs.dropdown",this.dropdownHide)},hideing:!1,dropdownShow:function(){this.hideing||this.$el.find(".mask").show()},dropdownHide:function(){this.hideing=!0,o.delay(o.bind(function(){this.$el.find(".mask").hide(),this.hideing=!1},this),250)},initItems:function(){this.listenTo(this.collection,"sort",this.renderItems),this.collection.sort()},renderItem:function(t){var e=this.collection.indexOf(t),i=t.get("id"),n=this.container.children().eq(e-1);n.length>0?this.listItems[i].after(n):this.listItems[i].prepend()},renderItems:function(){var t=this.collection.pluck("id");t.reverse(),o.each(t,function(t){this.listItems[t].prepend()},this)}});e.exports=u},{"../lib/view":21,"./list-header":57,"./list-item":59,"./list-view.hbs":60,jquery:117,underscore:371}],62:[function(t,e,i){var n=t("hbsfy/runtime");e.exports=n.template({compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){var r,s,a=null!=e?e:{},l=i.helperMissing,u="function",c=t.escapeExpression;return"<td>\n  <p>"+c((s=null!=(s=i.title||(null!=e?e.title:e))?s:l,typeof s===u?s.call(a,{name:"title",hash:{},data:o}):s))+"<p>\n  <p>\n    "+(null!=(s=null!=(s=i.message||(null!=e?e.message:e))?s:l,r=typeof s===u?s.call(a,{name:"message",hash:{},data:o}):s)?r:"")+"<br/>\n    "+c((s=null!=(s=i.datetime||(null!=e?e.datetime:e))?s:l,typeof s===u?s.call(a,{name:"datetime",hash:{},data:o}):s))+"</p>\n</td>\n"},useData:!0})},{"hbsfy/runtime":116}],63:[function(t,e,i){"use strict";var n=(t("../lib/helper/background-animate"),t("../lib/view")),o=t("./log-item.hbs"),r=n.extend({tagName:"tr",template:o,className:function(){var t="";return this.model.has("userid")&&(t=this.model.get("userid")+" "),t+"list-item "+this.model.get("type")},initialize:function(t){this.listenTo(this.model,"remove",this.remove)},render:function(){this.$el.html(this.template(this.model.toJSON()))}});e.exports=r},{"../lib/helper/background-animate":10,"../lib/view":21,"./log-item.hbs":62}],64:[function(t,e,i){var n=t("hbsfy/runtime");e.exports=n.template({compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){return'<div class="log">\n  <div class="inner">\n    <table class="table table-condensed table-hover loglist fixedhead">\n    <thead>\n      <th>\n        <div class="pull-left">\n          Message\n        </div>\n      </th>\n    </thead>\n    <tbody class="scrollable"></tbody>\n    </table>\n  </div>\n</div>\n'},useData:!0})},{"hbsfy/runtime":116}],65:[function(t,e,i){"use strict";var n=t("jquery"),o=t("../lib/helper/background-animate"),r=t("./log-item"),s=t("../models/log/collection"),a=t("../lib/view"),l=t("./log-view.hbs"),u=a.extend({tagName:"div",className:"item logview",template:l,events:{"click tbody tr":"select"},select:function(t){var e=n(t.currentTarget).attr("class");location.hash="mmsi/"+e.split(" ").shift()},initialize:function(){this.collection=s,this.isShown=!1,this.positionsOnly=!1,this.render()},getContainer:function(){return this.container},addItemView:function(t){var e=new r({model:t});e.render(),this.container.prepend(e.$el),!this.isShown||this.positionsOnly&&"position-added"!==t.get("type")||o(e.$el)},render:function(){this.$el.html(this.template({})),this.container=this.$el.find("tbody"),this.listenTo(this.collection,"add",this.addItemView)}});e.exports=u},{"../lib/helper/background-animate":10,"../lib/view":21,"../models/log/collection":34,"./log-item":63,"./log-view.hbs":64,jquery:117}],66:[function(t,e,i){var n=t("hbsfy/runtime");e.exports=n.template({1:function(t,e,i,n,o){var r,s=null!=e?e:{},a=i.helperMissing,l="function",u=t.escapeExpression;return'    <button type="button" class="btn btn-default '+u((r=null!=(r=i.cls||(null!=e?e.cls:e))?r:a,typeof r===l?r.call(s,{name:"cls",hash:{},data:o}):r))+'">\n      <span class="glyphicon glyphicon-'+u((r=null!=(r=i.cls||(null!=e?e.cls:e))?r:a,typeof r===l?r.call(s,{name:"cls",hash:{},data:o}):r))+'" aria-hidden="true"></span>\n    </button>\n'},compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){var r;return'<div class="btn-group btn-group-vertical btn-group-lg" role="group">\n'+(null!=(r=i.each.call(null!=e?e:{},null!=e?e.buttons:e,{name:"each",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o}))?r:"")+"</div>"},useData:!0})},{"hbsfy/runtime":116}],67:[function(t,e,i){"use strict";var n=t("jquery"),o=t("underscore"),r=t("../lib/view"),s=t("./map-nav.hbs"),a=r.extend({tagName:"div",template:s,className:"map-nav",events:{"fastclick button":"onClick"},onClick:function(t){o.each(this.buttons,function(e){n(t.currentTarget).hasClass(e.cls)&&this.trigger(e.trigger)},this)},initialize:function(t){t=t||{},this.buttons=t.buttons&&t.buttons.before||[],this.buttons.push({cls:"zoom-in",trigger:"zoomIn"}),this.buttons.push({cls:"zoom-out",trigger:"zoomOut"}),this.buttons.push({cls:"home",trigger:"toHome"}),t.buttons&&t.buttons.after&&(this.buttons=this.buttons.concat(t.buttons.after)),this.render()},render:function(){this.$el.html(this.template({buttons:this.buttons})),n("body").append(this.$el)}});e.exports=a},{"../lib/view":21,"./map-nav.hbs":66,jquery:117,underscore:371}],68:[function(t,e,i){var n=t("hbsfy/runtime");e.exports=n.template({compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){var r;return'<div class="panel-container">\n  <a href="#" class="btn btn-default menu-close">\n    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>\n  </a>\n  <div class="panel-content">\n    <form class="form-horizontal">\n      <input class="form-control" type="text" placeholder="Filter by Name or MMSI" value="'+t.escapeExpression((r=null!=(r=i.filter||(null!=e?e.filter:e))?r:i.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"filter",hash:{},data:o}):r))+'">\n    </form>\n    <div id="carousel" class="carousel slide">\n      <div class="carousel-inner" role="listbox">\n      </div>\n    </div>\n    <div class="footer">\n      <ul class="nav nav-pills">\n        <li role="presentation" class="tolist"><a href="#">List</a></li>\n        <li role="presentation" class="toship disabled"><a href="#">Details</a></li>\n        <li role="presentation" class="tolog"><a href="#">Log</a></li>\n        <li role="presentation" class="toabout"><a href="#">About</a></li>\n      </ul>\n    </div>\n  </div>\n</div>\n'},useData:!0})},{"hbsfy/runtime":116}],69:[function(t,e,i){"use strict";var n=t("jquery"),o=(t("underscore"),t("./base-view")),r=t("./mobile-view.hbs"),s=o.extend({template:r,events:{"keyup input[type='text']":"filter","focus input[type='text']":"openlistview","fastclick .footer .tolist a":"openlistview","fastclick .footer .toship a":"openshipview","fastclick .footer .toabout a":"openaboutview","fastclick .footer .tolog a":"openlogview","fastclick .menu-close":"slideIn","click .shiplist tbody tr":"slideIn","click .loglist tbody tr":"slideIn"},prevent:function(t){t.preventDefault(),t.stopPropagation()},initialize:function(t){this.app=t.app,this.isOpen=!0,this.render(),this.listenTo(this.app,"clickout",this.destroyShipview),this.listenTo(this.app,"startListening",this.onStart),this.listenTo(this.app,"shopListening",this.onStop)},onStop:function(){o.prototype.onStop.call(this),this.destroyShipview(),this.openlistview(),this.slideIn()},slideIn:function(t){t&&t.preventDefault&&(t.preventDefault(),t.stopPropagation()),n("#content").removeClass("is-visible")},slideOut:function(t){t&&t.preventDefault&&(t.preventDefault(),t.stopPropagation()),n("#content").addClass("is-visible")},render:function(){o.prototype.render.call(this),this.openlistview()}});e.exports=s},{"./base-view":53,"./mobile-view.hbs":68,jquery:117,underscore:371}],70:[function(t,e,i){var n=t("hbsfy/runtime");e.exports=n.template({1:function(t,e,i,n,o){var r,s,a=null!=e?e:{},l=i.helperMissing,u="function",c=t.escapeExpression;return'  <tr class="'+c((s=null!=(s=i.cls||(null!=e?e.cls:e))?s:l,typeof s===u?s.call(a,{name:"cls",hash:{},data:o}):s))+'">\n    <th scope="row">'+c((s=null!=(s=i.name||(null!=e?e.name:e))?s:l,typeof s===u?s.call(a,{name:"name",hash:{},data:o}):s))+"</th>\n    <td>"+(null!=(s=null!=(s=i.value||(null!=e?e.value:e))?s:l,r=typeof s===u?s.call(a,{name:"value",hash:{},data:o}):s)?r:"")+"</td>\n  </tr>\n"},compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){var r;return'<thead>\n  <tr>\n    <th>Name</th>\n    <th>Value</th>\n  </tr>\n</thead>\n<tbody class="scrollable">\n'+(null!=(r=i.each.call(null!=e?e:{},null!=e?e.properties:e,{name:"each",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o}))?r:"")+"</tbody>\n"},useData:!0})},{"hbsfy/runtime":116}],71:[function(t,e,i){"use strict";var n=t("underscore"),o=t("../lib/helper/background-animate"),r=t("../lib/view"),s=t("./ship-details.hbs"),a=r.extend({template:s,tagName:"table",className:"table table-condensed details fixedhead",shipdata:null,initialize:function(){this.shipdata=this.model.get("shipdata")},render:function(t){var e={};t&&this.shipdata&&(e=t.get("shipdata").diff(this.shipdata),this.model=t,this.shipdata=t.get("shipdata")),this.$el.html(this.template({properties:this.shipdata&&this.shipdata.getHelper().toPropertyList()})),n.each(e,function(t,e){o(this.$el.find("."+e))},this)}});e.exports=a},{"../lib/helper/background-animate":10,"../lib/view":21,"./ship-details.hbs":70,underscore:371}],72:[function(t,e,i){arguments[4][70][0].apply(i,arguments)},{dup:70,"hbsfy/runtime":116}],73:[function(t,e,i){"use strict";var n=t("underscore"),o=t("../lib/helper/background-animate"),r=t("../lib/view"),s=t("./ship-position.hbs"),a=r.extend({template:s,tagName:"table",className:"table table-condensed position fixedhead",position:null,initialize:function(){this.position=this.model.get("position")},render:function(t){var e={};t&&this.position&&(e=t.get("position").diff(this.position),this.model=t,this.position=t.get("position")),this.$el.html(this.template({properties:this.position&&this.position.getHelper().toPropertyList()})),n.each(e,function(t,e){o(this.$el.find("."+e))},this)}});e.exports=a},{"../lib/helper/background-animate":10,"../lib/view":21,"./ship-position.hbs":72,underscore:371}],74:[function(t,e,i){var n=t("hbsfy/runtime");e.exports=n.template({compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){var r,s,a=null!=e?e:{},l=i.helperMissing,u="function",c=t.escapeExpression;return'<td>\n  <table class="property">\n  <tr>\n    <th>Timestamp</th>\n    <td>'+(null!=(s=null!=(s=i.timestamp||(null!=e?e.timestamp:e))?s:l,r=typeof s===u?s.call(a,{name:"timestamp",hash:{},data:o}):s)?r:"")+"</td>\n  </tr>\n  <tr>\n    <th>Course/Speed</th>\n    <td>"+(null!=(s=null!=(s=i.nav||(null!=e?e.nav:e))?s:l,r=typeof s===u?s.call(a,{name:"nav",hash:{},data:o}):s)?r:"")+"</td>\n  </tr>\n  <tr>\n    <th>Latitude</th>\n    <td>"+c((s=null!=(s=i.latitude||(null!=e?e.latitude:e))?s:l,typeof s===u?s.call(a,{name:"latitude",hash:{},data:o}):s))+"</td>\n  </tr>\n  <tr>\n    <th>Longitude</th>\n    <td>"+c((s=null!=(s=i.longitude||(null!=e?e.longitude:e))?s:l,typeof s===u?s.call(a,{name:"longitude",hash:{},data:o}):s))+"</td>\n  </tr>\n  </table>\n</td>\n"},useData:!0})},{"hbsfy/runtime":116}],75:[function(t,e,i){"use strict";var n=t("../lib/view"),o=t("./ship-track-item.hbs"),r=n.extend({template:o,tagName:"tr",initialize:function(t){this.options=t},render:function(){this.$el.html(this.template({latitude:this.model.getHelper().format("Latitude").value,longitude:this.model.getHelper().format("Longitude").value,nav:this.model.getHelper().getNav(),timestamp:this.model.getHelper().format("Timestamp").value}))}});e.exports=r},{"../lib/view":21,"./ship-track-item.hbs":74}],76:[function(t,e,i){var n=t("hbsfy/runtime");e.exports=n.template({compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){return'<table class="table table-hover table-condensed track fixedhead">\n<thead>\n  <tr>\n    <th>Position</th>\n  </tr>\n</thead>\n<tbody class="scrollable"></tbody>\n</table>\n<div class="range"></div>'},useData:!0})},{"hbsfy/runtime":116}],77:[function(t,e,i){"use strict";var n=t("underscore"),o=t("nouislider"),r=t("./ship-track-item"),s=t("../lib/view"),a=t("./ship-track.hbs"),l=s.extend({template:a,tagName:"div",initialize:function(){this.start=1,this.lastPosition=null},updateSlider:function(){var t=n.first(this.$el.find(".range"));t.noUiSlider&&t.noUiSlider.destroy(),o.create(t,{start:this.start,connect:"upper",step:1,range:{min:[1],max:[this.model.get("track").length]},pips:{mode:"range",density:5}}),t.noUiSlider.on("change",n.bind(function(t){t=Number(t),this.start=t,this.model.get("track").setRange(t-1)},this))},checkShipPosition:function(){if(!(this.model.get("track").length<1)){var t=this.model.get("track").last().getCoordinate(),e=this.model.get("position").getCoordinate(),i=n.omit(e,function(e,i){return t[i]===e});n.isEmpty(i)?this.lastPosition=null:(this.lastPosition=this.model.get("position"),this.addPosition(this.lastPosition))}},updateView:function(){n.invoke(this.items,"remove"),this.items={},this.$el.find("> table > tbody").empty(),this.model.get("track").each(this.addPosition,this),this.checkShipPosition(),this.updateSlider()},addPosition:function(t){var e=new r({model:t});this.items[t.get("id")]=e,e.render(),this.$el.find("> table > tbody").prepend(e.$el),this.updateSlider()},addNewPosition:function(t){this.lastPosition&&this.removePosition(this.lastPosition),this.addPosition(t),this.checkShipPosition()},changeLastPosition:function(){this.lastPosition&&this.removePosition(this.lastPosition),this.checkShipPosition()},removePosition:function(t){t&&this.items[t.get("id")]&&(this.items[t.get("id")].remove(),delete this.items[t.get("id")]),this.updateSlider()},render:function(){this.$el.html(this.template()),this.listenToOnce(this.model.get("track"),"sync",function(){this.updateView(),this.listenTo(this.model.get("track"),"add",this.addNewPosition),this.listenTo(this.model,"change:position",this.changeLastPosition),this.listenTo(this.model.get("track"),"remove",this.removePosition)},this)},remove:function(){n.invoke(this.items,"remove"),s.prototype.remove.call(this)}});e.exports=l},{"../lib/view":21,"./ship-track-item":75,"./ship-track.hbs":76,nouislider:253,underscore:371}],78:[function(t,e,i){var n=t("hbsfy/runtime");e.exports=n.template({1:function(t,e,i,n,o){return"active"},compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){var r,s,a=null!=e?e:{};return'<div class="ship">\n  <div class="inner">\n    <h3>'+t.escapeExpression((s=null!=(s=i.title||(null!=e?e.title:e))?s:i.helperMissing,"function"==typeof s?s.call(a,{name:"title",hash:{},data:o}):s))+'</h3>\n    <div>\n      <!-- Nav tabs -->\n      <ul class="nav nav-tabs" role="tablist">\n        <li role="presentation" class="shipdetails '+(null!=(r=i["if"].call(a,null!=(r=null!=e?e.active:e)?r.ship:r,{name:"if",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o}))?r:"")+'">\n          <a href="#shipdetails" aria-controls="shipdetails" role="tab" data-toggle="tab">Details</a>\n        </li>\n        <li role="presentation" class="lastposition '+(null!=(r=i["if"].call(a,null!=(r=null!=e?e.active:e)?r.position:r,{name:"if",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o}))?r:"")+'">\n          <a href="#lastposition" aria-controls="lastposition" role="tab" data-toggle="tab">Last position</a>\n        </li>\n        <li role="presentation" class="track disabled">\n          <a href="#track" aria-controls="track" role="tab" data-toggle="tab">Track</a>\n        </li>\n      </ul>\n\n      <!-- Tab panes -->\n      <div class="tab-content">\n        <div role="tabpanel" class="tab-pane '+(null!=(r=i["if"].call(a,null!=(r=null!=e?e.active:e)?r.ship:r,{name:"if",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o}))?r:"")+'" id="shipdetails"></div>\n        <div role="tabpanel" class="tab-pane '+(null!=(r=i["if"].call(a,null!=(r=null!=e?e.active:e)?r.position:r,{name:"if",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o}))?r:"")+'" id="lastposition"></div>\n        <div role="tabpanel" class="tab-pane" id="track"></div>\n      </div>\n    </div>\n  </div>\n</div>\n'},useData:!0})},{"hbsfy/runtime":116}],79:[function(t,e,i){"use strict";var n=t("underscore"),o=t("./ship-details"),r=t("./ship-position"),s=t("./ship-track"),a=t("../lib/view"),l=t("./ship-view.hbs"),u=a.extend({tagName:"div",className:"item shipview",template:l,events:{"fastclick h3":"center","fastclick a[href='#shipdetails']":"chkShipdata","fastclick a[href='#lastposition']":"chkPosition","fastclick a[href='#track']":"chkTrack"},center:function(){this.model.getMarker().center()},chkShipdata:function(t){this.hasShipdata()||t.stopPropagation()},chkPosition:function(t){this.model.has("position")||t.stopPropagation()},chkTrack:function(t){this.model.get("track").length||t.stopPropagation()},trackTab:function(){this.model.get("track").length?this.$el.find(".nav-tabs .track").removeClass("disabled"):this.$el.find(".nav-tabs .track").addClass("disabled")},addTrack:function(){this.track=new s({model:this.model}),this.track.render(),this.$el.find("#track").append(this.track.$el),this.trackTab()},updateTrack:function(){this.trackTab()},shipdataTab:function(){this.hasShipdata()?this.$el.find(".nav-tabs .shipdetails").removeClass("disabled"):this.$el.find(".nav-tabs .shipdetails").addClass("disabled")},addShipdata:function(){this.shipdata=new o({model:this.model}),this.shipdata.render(),this.$el.find("#shipdetails").append(this.shipdata.$el),this.shipdataTab()},updateShipdata:function(){this.shipdata.render(this.model),this.shipdataTab()},positionTab:function(){this.model.has("position")?this.$el.find(".nav-tabs .lastposition").removeClass("disabled"):this.$el.find(".nav-tabs .lastposition").addClass("disabled")},addPosition:function(){this.position=new r({model:this.model}),this.position.render(),this.$el.find("#lastposition").append(this.position.$el),this.positionTab()},updatePosition:function(){this.position.render(this.model),this.positionTab()},hasShipdata:function(){return!this.model.has("shipdata")||n.isEmpty(this.model.get("shipdata").attributes)?!1:!0},render:function(){this.$el.html(this.template({title:this.model.getHelper().toTitle(),active:{ship:this.hasShipdata(),position:!this.hasShipdata()}})),this.addShipdata(),this.addPosition(),this.addTrack(),this.listenTo(this.model,"change:shipdata",this.updateShipdata),this.listenTo(this.model,"change:position",this.updatePosition),this.listenToOnce(this.model.get("track"),"sync",function(){this.updateTrack(),this.listenTo(this.model.get("track"),"remove",this.updateTrack),this.listenTo(this.model.get("track"),"add",this.updateTrack)},this)},remove:function(){this.shipdata.remove(),this.position.remove(),this.track.remove(),a.prototype.remove.call(this)}});e.exports=u},{"../lib/view":21,"./ship-details":71,"./ship-position":73,"./ship-track":77,"./ship-view.hbs":78,underscore:371}],80:[function(t,e,i){e.exports={development:{sequelize:{dialect:"mysql",database:"ais",host:"localhost",username:"ais",password:"myAIS!123",logging:!1},server:{http:3e3,https:3443,hostname:"127.0.0.1",maxAge:0,"public":{route:"/html",dir:"html"},fonts:{route:"/fonts",dir:"html/fonts"}},receiver:{port:29421,address:"0.0.0.0"},setup:{movemin:50,ship:{minutes:60,limit:100,order:"datetime DESC"},track:{limit:100,hours:72},reception:{distancefrom:{lat:53.552731,lng:10.05254}}},frontend:{map_type:"mapboxgljs",mapboxgljs:{accessToken:"pk.eyJ1IjoiYnJldHNjaG4iLCJhIjoiY2lldmU5ZjA3MDA5cHQxbTBsenF4OTN6NCJ9.k-N7xO9qfKgI6aBjxFgGKw",center:[9.996006002132162,53.50766131847098],zoom:12},googleios:{apiKey:"AIzaSyCl3B0ReIM6dfcL0lsCpCEv6zQSnuV_eMg",center:[9.996006002132162,53.50766131847098],zoom:12},googlemapjs:{apiKey:"AIzaSyCrzfGzddblnADYww8eipsTncvk7F_HTCc",center:{lat:53.50766131847098,lng:9.996006002132162},zoom:12}}},test:{sequelize:{dialect:"mysql",database:"ais",host:"localhost",username:"ais",password:"myAIS!123",logging:!1},server:{http:3e3,https:3443,hostname:"127.0.0.1",maxAge:864e5,"public":{route:"/html",dir:"html"},fonts:{route:"/fonts",dir:"html/fonts"}},receiver:{port:29421,address:"0.0.0.0"},setup:{movemin:50,ship:{minutes:60,limit:100,order:"datetime DESC"},track:{limit:100,hours:72},reception:{distancefrom:{lat:53.521729,lng:10.013245}}},frontend:{map_type:"mapboxgljs",mapboxgljs:{accessToken:"pk.eyJ1IjoiYnJldHNjaG4iLCJhIjoiY2lldmU5ZjA3MDA5cHQxbTBsenF4OTN6NCJ9.k-N7xO9qfKgI6aBjxFgGKw",center:[9.996006002132162,53.50766131847098],zoom:12},googleios:{apiKey:"AIzaSyCl3B0ReIM6dfcL0lsCpCEv6zQSnuV_eMg",center:[9.996006002132162,53.50766131847098],zoom:12},googlemapjs:{apiKey:"AIzaSyCrzfGzddblnADYww8eipsTncvk7F_HTCc",center:{lat:53.50766131847098,lng:9.996006002132162},zoom:12}}},production:{sequelize:{dialect:"mysql",database:"mb_ais",host:"localhost",username:"mb",password:"ilhonlyijryamsoddEs",logging:!1},server:{http:64486,https:64485,hostname:"ais.3epnm.de",maxAge:864e5,"public":{route:"/html",dir:"/home/mb/ais-tracker/html"},fonts:{route:"/fonts",dir:"/home/mb/ais-tracker/html/fonts"}},receiver:{port:63837,address:"95.143.172.114"},setup:{movemin:50,ship:{minutes:60,limit:100,order:"datetime DESC"},track:{limit:100,hours:72},reception:{distancefrom:{lat:53.521729,lng:10.013245}}},frontend:{type:"mapboxgljs",mapboxgljs:{accessToken:"pk.eyJ1IjoiYnJldHNjaG4iLCJhIjoiY2lldmU5ZjA3MDA5cHQxbTBsenF4OTN6NCJ9.k-N7xO9qfKgI6aBjxFgGKw",center:[9.996006002132162,53.50766131847098],zoom:12},googleios:{apiKey:"AIzaSyCl3B0ReIM6dfcL0lsCpCEv6zQSnuV_eMg",center:[9.996006002132162,53.50766131847098],zoom:12},googlemapjs:{apiKey:"AIzaSyCrzfGzddblnADYww8eipsTncvk7F_HTCc",center:{lat:53.50766131847098,lng:9.996006002132162},zoom:12}}},cordova:{sequelize:{dialect:"mysql",database:"mb_ais",host:"localhost",username:"mb",password:"ilhonlyijryamsoddEs",logging:!1},server:{http:64486,https:64485,hostname:"ais.3epnm.de","public":{route:"/html",dir:"/home/mb/ais-tracker/html"},fonts:{route:"/fonts",dir:"/home/mb/ais-tracker/html/fonts"}},receiver:{port:63837,address:"95.143.172.114"},setup:{movemin:50,ship:{minutes:60,limit:100,order:"datetime DESC"},track:{limit:100,hours:72},reception:{distancefrom:{lat:53.521729,lng:10.013245}}},frontend:{map_type:"googlemapjs",mapboxgljs:{accessToken:"pk.eyJ1IjoiYnJldHNjaG4iLCJhIjoiY2lldmU5ZjA3MDA5cHQxbTBsenF4OTN6NCJ9.k-N7xO9qfKgI6aBjxFgGKw",center:[9.996006002132162,53.50766131847098],zoom:12},googleios:{apiKey:"AIzaSyCl3B0ReIM6dfcL0lsCpCEv6zQSnuV_eMg",center:[9.996006002132162,53.50766131847098],zoom:12},googlemapjs:{apiKey:"AIzaSyCrzfGzddblnADYww8eipsTncvk7F_HTCc",center:{lat:53.50766131847098,lng:9.996006002132162},zoom:12}}}}},{}],81:[function(t,e,i){e.exports={aismsgnum:1,name:"position","class":"a",description:"Scheduled position report",fields:[{name:"MessageID",numberofbits:6,type:"int",description:"AIS message number.  Must be 1",required:1},{name:"RepeatIndicator",numberofbits:2,type:"int",description:"Indicated how many times a message has been repeated",unavailable:0,lookuptable:[{value:0,desc:"default"},{value:3,desc:"do not repeat any more"}]},{name:"UserID",numberofbits:30,type:"int",description:"Unique ship identification number (MMSI)"},{name:"NavigationStatus",numberofbits:4,type:"int",description:"What is the vessel doing",unavailable:15,lookuptable:[{value:0,desc:"under way using engine"},{value:1,desc:"at anchor"},{value:2,desc:"not under command"},{value:3,desc:"restricted maneuverability"},{value:4,desc:"constrained by her draught"},{value:5,desc:"moored"},{value:6,desc:"aground"},{value:7,desc:"engaged in fishing"},{value:8,desc:"under way sailing"},{value:9,desc:"reserved for future use (hazmat)"},{value:10,desc:"reserved for future use"},{value:11,desc:"reserved for future use"},{value:12,desc:"reserved for future use"},{value:13,desc:"reserved for future use"},{value:14,desc:"reserved for future use"},{value:15,desc:"not defined = default"}]},{name:"ROT",numberofbits:8,type:"uint",description:"Rate of turning.  Positive right; negative left.  BROKEN!",unavailable:-128,units:"degrees/min",lookuptable:[{value:127,desc:"turning right > 5&deg;/30s"},{value:-127,desc:"turning left > 5&deg;/30s"}]},{name:"SOG",numberofbits:10,type:"int",description:"Speed over ground",unavailable:102.3,lookuptable:[{value:102.2,desc:"102.2 knots or higher"}],units:"knots",scale:10,decimalplaces:1},{name:"PositionAccuracy",numberofbits:1,type:"int",description:"Accuracy of positioning fixes",lookuptable:[{value:0,desc:"low (greater than 10 m)"},{value:1,desc:"high (less than 10 m)"}]},{name:"Longitude",numberofbits:28,type:"uint",description:"East West location",unavailable:181,units:"degrees",scale:6e5,decimalplaces:5},{name:"Latitude",numberofbits:27,type:"uint",description:"North South location",unavailable:91,units:"degrees",scale:6e5,decimalplaces:5},{name:"COG",numberofbits:12,type:"int",description:"Course over ground",unavailable:360,units:"degrees",scale:10,decimalplaces:1},{name:"TrueHeading",numberofbits:9,type:"int",description:"True heading (relative to true North)",unavailable:511,units:"degrees"},{name:"TimeStamp",numberofbits:6,type:"int",description:"UTC second when the report was generated",unavailable:60,lookuptable:[{value:60,desc:"not available/default"},{value:61,desc:"manual input"},{value:62,desc:"dead reckoning"},{value:63,desc:"inoperative"}],units:"seconds"},{name:"RegionalReserved",numberofbits:4,type:"int",description:"Reserved for definition by a regional authority.",required:0},{name:"Spare",numberofbits:1,type:"int",description:"Not used.  Should be set to zero.",required:0},{name:"RAIM",numberofbits:1,type:"bool",description:"Receiver autonomous integrity monitoring flag",lookuptable:[{value:!1,desc:"not in use"},{value:!0,desc:"in use"}]},{name:"SyncState",numberofbits:2,type:"int",description:"Sycronization state",lookuptable:[{value:0,desc:"UTC direct"},{value:1,desc:"UTC indirect"},{value:2,desc:"synchronized to a base station"},{value:3,desc:"synchronized to another station"}]},{name:"SlotTimeout",numberofbits:3,type:"int",description:"Frames remaining until a new slot is selected",units:"frames",lookuptable:[{value:0,desc:"Last frame in this slot"},{value:1,desc:"1 frames left"},{value:2,desc:"2 frames left"},{value:3,desc:"3 frames left"},{value:4,desc:"4 frames left"},{value:5,desc:"5 frames left"},{value:6,desc:"6 frames left"},{value:7,desc:"7 frames left"}]},{name:"SlotMessage",numberofbits:14,type:"int",description:"In what slot will the next transmission occur. BROKEN"}]}},{}],82:[function(t,e,i){e.exports={aismsgnum:5,name:"shipdata","class":"a",description:"Class A vessel data report",fields:[{name:"MessageID",numberofbits:6,type:"int",description:"AIS message number.  Must be 5",required:5},{name:"RepeatIndicator",numberofbits:2,type:"int",description:"Indicated how many times a message has been repeated",unavailable:0,lookuptable:[{value:0,desc:"default"},{value:3,desc:"do not repeat any more"}]},{name:"UserID",numberofbits:30,type:"int",description:"Unique ship identification number (MMSI)"},{name:"AISversion",numberofbits:2,type:"int",description:"Compliant with what edition.  0 is the first edition.",lookuptable:[{value:0,desc:"ITU-R M.1371-1"},{value:1,desc:"ITU-R M.1371-3 (or later)"},{value:2,desc:"ITU-R M.1371-5 (or later)"}]},{name:"IMOnumber",numberofbits:30,type:"int",description:"vessel identification number (different than mmsi)",unavailable:0},{name:"CallSign",numberofbits:42,type:"aisstr6",description:"Ship radio call sign",unavailable:null},{name:"Name",numberofbits:120,type:"aisstr6",description:"Vessel name",unavailable:null},{name:"ShipType",numberofbits:8,type:"int",description:"Type of ship and cargo type",unavailable:0,lookuptable:[{value:20,desc:"Wing in ground (WIG), all ships of this type"},{value:21,desc:"Wing in ground (WIG), Hazardous catagory A"},{value:22,desc:"Wing in ground (WIG), Hazardous catagory B"},{value:23,desc:"Wing in ground (WIG), Hazardous catagory C"},{value:24,desc:"Wing in ground (WIG), Hazardous catagory D"},{value:25,desc:"Wing in ground (WIG), Reserved for future use"},{value:26,desc:"Wing in ground (WIG), Reserved for future use"},{value:27,desc:"Wing in ground (WIG), Reserved for future use"},{value:28,desc:"Wing in ground (WIG), Reserved for future use"},{value:29,desc:"Wing in ground (WIG), No additional information"},{value:30,desc:"fishing"},{value:31,desc:"towing"},{value:32,desc:"towing length exceeds 200m or breadth exceeds 25m"},{value:33,desc:"dredging or underwater ops"},{value:34,desc:"diving ops"},{value:35,desc:"military ops"},{value:36,desc:"sailing"},{value:37,desc:"pleasure craft"},{value:38,desc:"reserved"},{value:39,desc:"reserved"},{value:40,desc:"High speed craft (HSC), all ships of this type"},{value:41,desc:"High speed craft (HSC), Hazardous catagory A"},{value:42,desc:"High speed craft (HSC), Hazardous catagory B"},{value:43,desc:"High speed craft (HSC), Hazardous catagory C"},{value:44,desc:"High speed craft (HSC), Hazardous catagory D"},{value:45,desc:"High speed craft (HSC), Reserved for future use"},{value:46,desc:"High speed craft (HSC), Reserved for future use"},{value:47,desc:"High speed craft (HSC), Reserved for future use"},{value:48,desc:"High speed craft (HSC), Reserved for future use"},{value:49,desc:"High speed craft (HSC), No additional information"},{value:50,desc:"pilot vessel"},{value:51,desc:"search and rescue vessel"},{value:52,desc:"tug"},{value:53,desc:"port tender"},{value:54,desc:"anti-polution equipment"},{value:55,desc:"law enforcement"},{value:56,desc:"spare - local vessel"},{value:57,desc:"spare - local vessel"},{value:58,desc:"medical transport"},{value:59,desc:"ship according to RR Resolution No. 18"},{value:60,desc:"passenger, all ships of this type"},{value:61,desc:"passenger, Hazardous catagory A"},{value:62,desc:"passenger, Hazardous catagory B"},{value:63,desc:"passenger, Hazardous catagory C"},{value:64,desc:"passenger, Hazardous catagory D"},{value:65,desc:"passenger, Reserved for future use"},{value:66,desc:"passenger, Reserved for future use"},{value:67,desc:"passenger, Reserved for future use"},{value:68,desc:"passenger, Reserved for future use"},{value:69,desc:"passenger, No additional information"},{value:70,desc:"cargo, all ships of this type"},{value:71,desc:"cargo, Hazardous catagory A"},{value:72,desc:"cargo, Hazardous catagory B"},{value:73,desc:"cargo, Hazardous catagory C"},{value:74,desc:"cargo, Hazardous catagory D"},{value:75,desc:"cargo, Reserved for future use"},{value:76,desc:"cargo, Reserved for future use"},{value:77,desc:"cargo, Reserved for future use"},{value:78,desc:"cargo, Reserved for future use"},{value:79,desc:"cargo, No additional information"},{value:80,desc:"tanker, all ships of this type"},{value:81,desc:"tanker, Hazardous catagory A"},{value:82,desc:"tanker, Hazardous catagory B"},{value:83,desc:"tanker, Hazardous catagory C"},{value:84,desc:"tanker, Hazardous catagory D"},{value:85,desc:"tanker, Reserved for future use"},{value:86,desc:"tanker, Reserved for future use"},{value:87,desc:"tanker, Reserved for future use"},{value:88,desc:"tanker, Reserved for future use"},{value:89,desc:"tanker, No additional information"},{value:90,desc:"other type, all ships of this type"},{value:91,desc:"other type, Hazardous catagory A"},{value:92,desc:"other type, Hazardous catagory B"},{value:93,desc:"other type, Hazardous catagory C"},{value:94,desc:"other type, Hazardous catagory D"},{value:95,desc:"other type, Reserved for future use"},{value:96,desc:"other type, Reserved for future use"},{value:97,desc:"other type, Reserved for future use"},{value:98,desc:"other type, Reserved for future use"},{value:99,desc:"other type, No additional information"
}]},{name:"DimA",numberofbits:9,type:"int",description:"Distance from bow to reference position",units:"m",unavailable:0},{name:"DimB",numberofbits:9,type:"int",description:"Distance from reference position to stern",units:"m",unavailable:0},{name:"DimC",numberofbits:6,type:"int",description:"Distance from port side to reference position",units:"m",unavailable:0,lookuptable:[{value:63,desc:"63 m or greater"}]},{name:"DimD",numberofbits:6,type:"int",description:"Distance from reference position to starboard side",units:"m",unavailable:0,lookuptable:[{value:63,desc:"63 m or greater"}]},{name:"PositionType",numberofbits:4,type:"int",description:"Method used for positioning",unavailable:0,lookuptable:[{value:0,desc:"undefined"},{value:1,desc:"GPS"},{value:2,desc:"GLONASS"},{value:3,desc:"combined GPS/GLONASS"},{value:4,desc:"Loran-C"},{value:5,desc:"Chayka"},{value:6,desc:"integrated navigation system"},{value:7,desc:"surveyed"},{value:15,desc:"internal GNSS"}]},{name:"ETAmonth",numberofbits:4,type:"int",description:"Estimated time of arrival - month",unavailable:0},{name:"ETAday",numberofbits:5,type:"int",description:"Estimated time of arrival - day",unavailable:0},{name:"ETAhour",numberofbits:5,type:"int",description:"Estimated time of arrival - hour",unavailable:24},{name:"ETAminute",numberofbits:6,type:"int",description:"Estimated time of arrival - minutes",unavailable:60},{name:"Draught",numberofbits:8,type:"int",description:"Maximum present static draught",unavailable:0,units:"m",scale:10,decimalplaces:1,lookuptable:[{value:25.5,desc:"25.5 m or greater"}]},{name:"Destination",numberofbits:120,type:"aisstr6",description:"Where is the vessel going",unavailable:"@@@@@@@@@@@@@@@@@@"},{name:"DTE",numberofbits:1,type:"int",description:"Data terminal ready",lookuptable:[{value:0,desc:"available"},{value:1,desc:"not available"}]},{name:"Spare",numberofbits:1,type:"int",description:"Reserved for definition by a regional authority.",required:0}]}},{}],83:[function(t,e,i){!function(e,n){"function"==typeof define&&define.amd?define(["exports","backbone","underscore"],n):"undefined"!=typeof i?n(i,t("backbone"),t("underscore")):n(e,e.Backbone,e._)}(this,function(t,e,i){"use strict";e.Relational={showWarnings:!0},e.Semaphore={_permitsAvailable:null,_permitsUsed:0,acquire:function(){if(this._permitsAvailable&&this._permitsUsed>=this._permitsAvailable)throw new Error("Max permits acquired");this._permitsUsed++},release:function(){if(0===this._permitsUsed)throw new Error("All permits released");this._permitsUsed--},isLocked:function(){return this._permitsUsed>0},setAvailablePermits:function(t){if(this._permitsUsed>t)throw new Error("Available permits cannot be less than used permits");this._permitsAvailable=t}},e.BlockingQueue=function(){this._queue=[]},i.extend(e.BlockingQueue.prototype,e.Semaphore,{_queue:null,add:function(t){this.isBlocked()?this._queue.push(t):t()},process:function(){var t=this._queue;for(this._queue=[];t&&t.length;)t.shift()()},block:function(){this.acquire()},unblock:function(){this.release(),this.isBlocked()||this.process()},isBlocked:function(){return this.isLocked()}}),e.Relational.eventQueue=new e.BlockingQueue,e.Store=function(){this._collections=[],this._reverseRelations=[],this._orphanRelations=[],this._subModels=[],this._modelScopes=[t]},i.extend(e.Store.prototype,e.Events,{initializeRelation:function(t,n,o){var r=i.isString(n.type)?e[n.type]||this.getObjectByName(n.type):n.type;if(r&&r.prototype instanceof e.Relation){new r(t,n,o)}else e.Relational.showWarnings&&"undefined"!=typeof console&&console.warn("Relation=%o; missing or invalid relation type!",n)},addModelScope:function(t){this._modelScopes.push(t)},removeModelScope:function(t){this._modelScopes=i.without(this._modelScopes,t)},addSubModels:function(t,e){this._subModels.push({superModelType:e,subModels:t})},setupSuperModel:function(t){i.find(this._subModels,function(e){return i.filter(e.subModels||[],function(i,n){var o=this.getObjectByName(i);return t===o?(e.superModelType._subModels[n]=t,t._superModel=e.superModelType,t._subModelTypeValue=n,t._subModelTypeAttribute=e.superModelType.prototype.subModelTypeAttribute,!0):void 0},this).length},this)},addReverseRelation:function(t){var e=i.any(this._reverseRelations,function(e){return i.all(t||[],function(t,i){return t===e[i]})});!e&&t.model&&t.type&&(this._reverseRelations.push(t),this._addRelation(t.model,t),this.retroFitRelation(t))},addOrphanRelation:function(t){var e=i.any(this._orphanRelations,function(e){return i.all(t||[],function(t,i){return t===e[i]})});!e&&t.model&&t.type&&this._orphanRelations.push(t)},processOrphanRelations:function(){i.each(this._orphanRelations.slice(0),function(t){var n=e.Relational.store.getObjectByName(t.relatedModel);n&&(this.initializeRelation(null,t),this._orphanRelations=i.without(this._orphanRelations,t))},this)},_addRelation:function(t,e){t.prototype.relations||(t.prototype.relations=[]),t.prototype.relations.push(e),i.each(t._subModels||[],function(t){this._addRelation(t,e)},this)},retroFitRelation:function(t){var e=this.getCollection(t.model,!1);e&&e.each(function(e){if(e instanceof t.model){new t.type(e,t)}},this)},getCollection:function(t,n){t instanceof e.RelationalModel&&(t=t.constructor);for(var o=t;o._superModel;)o=o._superModel;var r=i.find(this._collections,function(t){return t.model===o});return r||n===!1||(r=this._createCollection(o)),r},getObjectByName:function(t){var e=t.split("."),n=null;return i.find(this._modelScopes,function(t){return n=i.reduce(e||[],function(t,e){return t?t[e]:void 0},t),n&&n!==t?!0:void 0},this),n},_createCollection:function(t){var i;return t instanceof e.RelationalModel&&(t=t.constructor),t.prototype instanceof e.RelationalModel&&(i=new e.Collection,i.model=t,this._collections.push(i)),i},resolveIdForItem:function(t,n){var o=i.isString(n)||i.isNumber(n)?n:null;return null===o&&(n instanceof e.RelationalModel?o=n.id:i.isObject(n)&&(o=n[t.prototype.idAttribute])),o||0===o||(o=null),o},find:function(t,e){var i=this.resolveIdForItem(t,e),n=this.getCollection(t);if(n){var o=n.get(i);if(o instanceof t)return o}return null},register:function(t){var e=this.getCollection(t);if(e){var i=t.collection;e.add(t),t.collection=i}},checkId:function(t,i){var n=this.getCollection(t),o=n&&n.get(i);if(o&&t!==o)throw e.Relational.showWarnings&&"undefined"!=typeof console&&console.warn("Duplicate id! Old RelationalModel=%o, new RelationalModel=%o",o,t),new Error("Cannot instantiate more than one Backbone.RelationalModel with the same id per type!")},update:function(t){var e=this.getCollection(t);e.contains(t)||this.register(t),e._onModelEvent("change:"+t.idAttribute,t,e),t.trigger("relational:change:id",t,e)},unregister:function(t){var n,o;t instanceof e.Model?(n=this.getCollection(t),o=[t]):t instanceof e.Collection?(n=this.getCollection(t.model),o=i.clone(t.models)):(n=this.getCollection(t),o=i.clone(n.models)),i.each(o,function(t){this.stopListening(t),i.invoke(t.getRelations(),"stopListening")},this),i.contains(this._collections,t)?n.reset([]):i.each(o,function(t){n.get(t)?n.remove(t):n.trigger("relational:remove",t,n)},this)},reset:function(){this.stopListening(),i.each(this._collections,function(t){this.unregister(t)},this),this._collections=[],this._subModels=[],this._modelScopes=[t]}}),e.Relational.store=new e.Store,e.Relation=function(t,n,o){if(this.instance=t,n=i.isObject(n)?n:{},this.reverseRelation=i.defaults(n.reverseRelation||{},this.options.reverseRelation),this.options=i.defaults(n,this.options,e.Relation.prototype.options),this.reverseRelation.type=i.isString(this.reverseRelation.type)?e[this.reverseRelation.type]||e.Relational.store.getObjectByName(this.reverseRelation.type):this.reverseRelation.type,this.key=this.options.key,this.keySource=this.options.keySource||this.key,this.keyDestination=this.options.keyDestination||this.keySource||this.key,this.model=this.options.model||this.instance.constructor,this.relatedModel=this.options.relatedModel,i.isUndefined(this.relatedModel)&&(this.relatedModel=this.model),!i.isFunction(this.relatedModel)||this.relatedModel.prototype instanceof e.RelationalModel||(this.relatedModel=i.result(this,"relatedModel")),i.isString(this.relatedModel)&&(this.relatedModel=e.Relational.store.getObjectByName(this.relatedModel)),this.checkPreconditions()&&(!this.options.isAutoRelation&&this.reverseRelation.type&&this.reverseRelation.key&&e.Relational.store.addReverseRelation(i.defaults({isAutoRelation:!0,model:this.relatedModel,relatedModel:this.model,reverseRelation:this.options},this.reverseRelation)),t)){var r=this.keySource;r!==this.key&&i.isObject(this.instance.get(this.key))&&(r=this.key),this.setKeyContents(this.instance.get(r)),this.relatedCollection=e.Relational.store.getCollection(this.relatedModel),this.keySource!==this.key&&delete this.instance.attributes[this.keySource],this.instance._relations[this.key]=this,this.initialize(o),this.options.autoFetch&&this.instance.getAsync(this.key,i.isObject(this.options.autoFetch)?this.options.autoFetch:{}),this.listenTo(this.instance,"destroy",this.destroy).listenTo(this.relatedCollection,"relational:add relational:change:id",this.tryAddRelated).listenTo(this.relatedCollection,"relational:remove",this.removeRelated)}},e.Relation.extend=e.Model.extend,i.extend(e.Relation.prototype,e.Events,e.Semaphore,{options:{createModels:!0,includeInJSON:!0,isAutoRelation:!1,autoFetch:!1,parse:!1},instance:null,key:null,keyContents:null,relatedModel:null,relatedCollection:null,reverseRelation:null,related:null,checkPreconditions:function(){var t=this.instance,n=this.key,o=this.model,r=this.relatedModel,s=e.Relational.showWarnings&&"undefined"!=typeof console;if(!o||!n||!r)return s&&console.warn("Relation=%o: missing model, key or relatedModel (%o, %o, %o).",this,o,n,r),!1;if(!(o.prototype instanceof e.RelationalModel))return s&&console.warn("Relation=%o: model does not inherit from Backbone.RelationalModel (%o).",this,t),!1;if(!(r.prototype instanceof e.RelationalModel))return s&&console.warn("Relation=%o: relatedModel does not inherit from Backbone.RelationalModel (%o).",this,r),!1;if(this instanceof e.HasMany&&this.reverseRelation.type===e.HasMany)return s&&console.warn("Relation=%o: relation is a HasMany, and the reverseRelation is HasMany as well.",this),!1;if(t&&i.keys(t._relations).length){var a=i.find(t._relations,function(t){return t.key===n},this);if(a)return s&&console.warn("Cannot create relation=%o on %o for model=%o: already taken by relation=%o.",this,n,t,a),!1}return!0},setRelated:function(t){this.related=t,this.instance.attributes[this.key]=t},_isReverseRelation:function(t){return t.instance instanceof this.relatedModel&&this.reverseRelation.key===t.key&&this.key===t.reverseRelation.key},getReverseRelations:function(t){for(var e=[],n=i.isUndefined(t)?this.related&&(this.related.models||[this.related]):[t],o=null,r=null,s=0;s<(n||[]).length;s++){o=n[s].getRelations()||[];for(var a=0;a<o.length;a++)r=o[a],this._isReverseRelation(r)&&e.push(r)}return e},destroy:function(){this.stopListening(),this instanceof e.HasOne?this.setRelated(null):this instanceof e.HasMany&&this.setRelated(this._prepareCollection()),i.each(this.getReverseRelations(),function(t){t.removeRelated(this.instance)},this)}}),e.HasOne=e.Relation.extend({options:{reverseRelation:{type:"HasMany"}},initialize:function(t){this.listenTo(this.instance,"relational:change:"+this.key,this.onChange);var e=this.findRelated(t);this.setRelated(e),i.each(this.getReverseRelations(),function(e){e.addRelated(this.instance,t)},this)},findRelated:function(t){var e=null;if(t=i.defaults({parse:this.options.parse},t),this.keyContents instanceof this.relatedModel)e=this.keyContents;else if(this.keyContents||0===this.keyContents){var n=i.defaults({create:this.options.createModels},t);e=this.relatedModel.findOrCreate(this.keyContents,n)}return e&&(this.keyId=null),e},setKeyContents:function(t){this.keyContents=t,this.keyId=e.Relational.store.resolveIdForItem(this.relatedModel,this.keyContents)},onChange:function(t,n,o){if(!this.isLocked()){this.acquire(),o=o?i.clone(o):{};var r=i.isUndefined(o.__related),s=r?this.related:o.__related;if(r){this.setKeyContents(n);var a=this.findRelated(o);this.setRelated(a)}if(s&&this.related!==s&&i.each(this.getReverseRelations(s),function(t){t.removeRelated(this.instance,null,o)},this),i.each(this.getReverseRelations(),function(t){t.addRelated(this.instance,o)},this),!o.silent&&this.related!==s){var l=this;this.changed=!0,e.Relational.eventQueue.add(function(){l.instance.trigger("change:"+l.key,l.instance,l.related,o,!0),l.changed=!1})}this.release()}},tryAddRelated:function(t,e,i){!this.keyId&&0!==this.keyId||t.id!==this.keyId||(this.addRelated(t,i),this.keyId=null)},addRelated:function(t,e){var n=this;t.queue(function(){if(t!==n.related){var o=n.related||null;n.setRelated(t),n.onChange(n.instance,t,i.defaults({__related:o},e))}})},removeRelated:function(t,e,n){if(this.related&&t===this.related){var o=this.related||null;this.setRelated(null),this.onChange(this.instance,t,i.defaults({__related:o},n))}}}),e.HasMany=e.Relation.extend({collectionType:null,options:{reverseRelation:{type:"HasOne"},collectionType:e.Collection,collectionKey:!0,collectionOptions:{}},initialize:function(t){if(this.listenTo(this.instance,"relational:change:"+this.key,this.onChange),this.collectionType=this.options.collectionType,!i.isFunction(this.collectionType)||this.collectionType===e.Collection||this.collectionType.prototype instanceof e.Collection||(this.collectionType=i.result(this,"collectionType")),i.isString(this.collectionType)&&(this.collectionType=e.Relational.store.getObjectByName(this.collectionType)),this.collectionType!==e.Collection&&!(this.collectionType.prototype instanceof e.Collection))throw new Error("`collectionType` must inherit from Backbone.Collection");var n=this.findRelated(t);this.setRelated(n)},_prepareCollection:function(t){if(this.related&&this.stopListening(this.related),!(t&&t instanceof e.Collection)){var n=i.isFunction(this.options.collectionOptions)?this.options.collectionOptions(this.instance):this.options.collectionOptions;t=new this.collectionType(null,n)}if(t.model=this.relatedModel,this.options.collectionKey){var o=this.options.collectionKey===!0?this.options.reverseRelation.key:this.options.collectionKey;t[o]&&t[o]!==this.instance?e.Relational.showWarnings&&"undefined"!=typeof console&&console.warn("Relation=%o; collectionKey=%s already exists on collection=%o",this,o,this.options.collectionKey):o&&(t[o]=this.instance)}return this.listenTo(t,"relational:add",this.handleAddition).listenTo(t,"relational:remove",this.handleRemoval).listenTo(t,"relational:reset",this.handleReset),t},findRelated:function(t){var n=null;if(t=i.defaults({parse:this.options.parse},t),this.keyContents instanceof e.Collection)this._prepareCollection(this.keyContents),n=this.keyContents;else{var o=[];i.each(this.keyContents,function(e){var n=null;n=e instanceof this.relatedModel?e:i.isObject(e)&&t.parse&&this.relatedModel.prototype.parse?this.relatedModel.prototype.parse(i.clone(e),t):e,n&&o.push(n)},this),n=this.related instanceof e.Collection?this.related:this._prepareCollection(),n.set(o,i.defaults({parse:!1},t))}return this.keyIds=i.difference(this.keyIds,i.pluck(n.models,"id")),n},setKeyContents:function(t){this.keyContents=t instanceof e.Collection?t:null,this.keyIds=[],this.keyContents||!t&&0!==t||(this.keyContents=i.isArray(t)?t:[t],i.each(this.keyContents,function(t){var i=e.Relational.store.resolveIdForItem(this.relatedModel,t);(i||0===i)&&this.keyIds.push(i)},this))},onChange:function(t,n,o){o=o?i.clone(o):{},this.setKeyContents(n),this.changed=!1;var r=this.findRelated(o);if(this.setRelated(r),!o.silent){var s=this;e.Relational.eventQueue.add(function(){s.changed&&(s.instance.trigger("change:"+s.key,s.instance,s.related,o,!0),s.changed=!1)})}},handleAddition:function(t,n,o){o=o?i.clone(o):{},this.changed=!0,i.each(this.getReverseRelations(t),function(t){t.addRelated(this.instance,o)},this);var r=this;!o.silent&&e.Relational.eventQueue.add(function(){r.instance.trigger("add:"+r.key,t,r.related,o)})},handleRemoval:function(t,n,o){o=o?i.clone(o):{},this.changed=!0,i.each(this.getReverseRelations(t),function(t){t.removeRelated(this.instance,null,o)},this);var r=this;!o.silent&&e.Relational.eventQueue.add(function(){r.instance.trigger("remove:"+r.key,t,r.related,o)})},handleReset:function(t,n){var o=this;n=n?i.clone(n):{},!n.silent&&e.Relational.eventQueue.add(function(){o.instance.trigger("reset:"+o.key,o.related,n)})},tryAddRelated:function(t,e,n){var o=i.contains(this.keyIds,t.id);o&&(this.addRelated(t,n),this.keyIds=i.without(this.keyIds,t.id))},addRelated:function(t,e){var n=this;t.queue(function(){n.related&&!n.related.get(t)&&n.related.add(t,i.defaults({parse:!1},e))})},removeRelated:function(t,e,i){this.related.get(t)&&this.related.remove(t,i)}}),e.RelationalModel=e.Model.extend({relations:null,_relations:null,_isInitialized:!1,_deferProcessing:!1,_queue:null,_attributeChangeFired:!1,subModelTypeAttribute:"type",subModelTypes:null,constructor:function(t,n){if(n&&n.collection){var o=this,r=this.collection=n.collection;delete n.collection,this._deferProcessing=!0;var s=function(t){t===o&&(o._deferProcessing=!1,o.processQueue(),r.off("relational:add",s))};r.on("relational:add",s),i.defer(function(){s(o)})}e.Relational.store.processOrphanRelations(),e.Relational.store.listenTo(this,"relational:unregister",e.Relational.store.unregister),this._queue=new e.BlockingQueue,this._queue.block(),e.Relational.eventQueue.block();try{e.Model.apply(this,arguments)}finally{e.Relational.eventQueue.unblock()}},trigger:function(t){if(t.length>5&&0===t.indexOf("change")){var i=this,n=arguments;e.Relational.eventQueue.isBlocked()?e.Relational.eventQueue.add(function(){var o=!0;if("change"===t)o=i.hasChanged()||i._attributeChangeFired,i._attributeChangeFired=!1;else{var r=t.slice(7),s=i.getRelation(r);s?(o=n[4]===!0,o?i.changed[r]=n[2]:s.changed||delete i.changed[r]):o&&(i._attributeChangeFired=!0)}o&&e.Model.prototype.trigger.apply(i,n)}):e.Model.prototype.trigger.apply(i,n)}else"destroy"===t?(e.Model.prototype.trigger.apply(this,arguments),e.Relational.store.unregister(this)):e.Model.prototype.trigger.apply(this,arguments);return this},initializeRelations:function(t){this.acquire(),this._relations={},i.each(this.relations||[],function(i){e.Relational.store.initializeRelation(this,i,t)},this),this._isInitialized=!0,this.release(),this.processQueue()},updateRelations:function(t,e){this._isInitialized&&!this.isLocked()&&i.each(this._relations,function(i){if(!t||i.keySource in t||i.key in t){var n=this.attributes[i.keySource]||this.attributes[i.key],o=t&&(t[i.keySource]||t[i.key]);(i.related!==n||null===n&&null===o)&&this.trigger("relational:change:"+i.key,this,n,e||{})}i.keySource!==i.key&&delete this.attributes[i.keySource]},this)},queue:function(t){this._queue.add(t)},processQueue:function(){this._isInitialized&&!this._deferProcessing&&this._queue.isBlocked()&&this._queue.unblock()},getRelation:function(t){return this._relations[t]},getRelations:function(){return i.values(this._relations)},getIdsToFetch:function(t,n){var o=t instanceof e.Relation?t:this.getRelation(t),r=o?o.keyIds&&o.keyIds.slice(0)||(o.keyId||0===o.keyId?[o.keyId]:[]):[];if(n){var s=o.related&&(o.related.models||[o.related]);i.each(s,function(t){(t.id||0===t.id)&&r.push(t.id)})}return r},getAsync:function(t,n){n=i.extend({add:!0,remove:!1,refresh:!1},n);var o=this,r=[],s=this.getRelation(t),a=s&&this.getIdsToFetch(s,n.refresh),l=s.related instanceof e.Collection?s.related:s.relatedCollection;if(a&&a.length){var u,c=[],h=[],p=function(){c=i.map(a,function(t){var e=s.relatedModel.findModel(t);if(!e){var i={};i[s.relatedModel.prototype.idAttribute]=t,e=s.relatedModel.findOrCreate(i,n),h.push(e)}return e},this)};if(l instanceof e.Collection&&i.isFunction(l.url)){var d=l.url();u=l.url(a),u===d&&(p(),u=l.url(c),u===d&&(u=null))}if(u){var f=i.defaults({error:function(){i.each(h,function(t){t.trigger("destroy",t,t.collection,n)}),n.error&&n.error.apply(c,arguments)},url:u},n);r=[l.fetch(f)]}else c.length||p(),r=i.map(c,function(t){var e=i.defaults({error:function(){i.contains(h,t)&&t.trigger("destroy",t,t.collection,n),n.error&&n.error.apply(c,arguments)}},n);return t.fetch(e)},this)}return this.deferArray(r).then(function(){return e.Model.prototype.get.call(o,t)})},deferArray:function(t){return e.$.when.apply(null,t)},set:function(t,n,o){e.Relational.eventQueue.block();var r,s;i.isObject(t)||null==t?(r=t,o=n):(r={},r[t]=n);try{var a=this.id,l=r&&this.idAttribute in r&&r[this.idAttribute];e.Relational.store.checkId(this,l),s=e.Model.prototype.set.apply(this,arguments),this._isInitialized||this.isLocked()?l&&l!==a&&e.Relational.store.update(this):(this.constructor.initializeModelHierarchy(),(l||0===l)&&e.Relational.store.register(this),this.initializeRelations(o)),r&&this.updateRelations(r,o)}finally{e.Relational.eventQueue.unblock()}return s},clone:function(){var t=i.clone(this.attributes);return i.isUndefined(t[this.idAttribute])||(t[this.idAttribute]=null),i.each(this.getRelations(),function(e){delete t[e.key]}),new this.constructor(t)},toJSON:function(t){if(this.isLocked())return this.id;this.acquire();var n=e.Model.prototype.toJSON.call(this,t);return!this.constructor._superModel||this.constructor._subModelTypeAttribute in n||(n[this.constructor._subModelTypeAttribute]=this.constructor._subModelTypeValue),i.each(this._relations,function(o){var r=n[o.key],s=o.options.includeInJSON,a=null;s===!0?r&&i.isFunction(r.toJSON)&&(a=r.toJSON(t)):i.isString(s)?(r instanceof e.Collection?a=r.pluck(s):r instanceof e.Model&&(a=r.get(s)),s===o.relatedModel.prototype.idAttribute&&(o instanceof e.HasMany?a=a.concat(o.keyIds):o instanceof e.HasOne&&(a=a||o.keyId,a||i.isObject(o.keyContents)||(a=o.keyContents||null)))):i.isArray(s)?r instanceof e.Collection?(a=[],r.each(function(t){var e={};i.each(s,function(i){e[i]=t.get(i)}),a.push(e)})):r instanceof e.Model&&(a={},i.each(s,function(t){a[t]=r.get(t)})):delete n[o.key],null===a&&t&&t.wait&&(a=r),s&&(n[o.keyDestination]=a),o.keyDestination!==o.key&&delete n[o.key]}),this.release(),n}},{setup:function(t){return this.prototype.relations=(this.prototype.relations||[]).slice(0),this._subModels={},this._superModel=null,this.prototype.hasOwnProperty("subModelTypes")?e.Relational.store.addSubModels(this.prototype.subModelTypes,this):this.prototype.subModelTypes=null,i.each(this.prototype.relations||[],function(t){if(t.model||(t.model=this),t.reverseRelation&&t.model===this){var n=!0;if(i.isString(t.relatedModel)){var o=e.Relational.store.getObjectByName(t.relatedModel);n=o&&o.prototype instanceof e.RelationalModel}n?e.Relational.store.initializeRelation(null,t):i.isString(t.relatedModel)&&e.Relational.store.addOrphanRelation(t)}},this),this},build:function(t,e){this.initializeModelHierarchy();var i=this._findSubModelType(this,t)||this;return new i(t,e)},_findSubModelType:function(t,e){if(t._subModels&&t.prototype.subModelTypeAttribute in e){var i=e[t.prototype.subModelTypeAttribute],n=t._subModels[i];if(n)return n;for(i in t._subModels)if(n=this._findSubModelType(t._subModels[i],e))return n}return null},initializeModelHierarchy:function(){if(this.inheritRelations(),this.prototype.subModelTypes){var t=i.keys(this._subModels),n=i.omit(this.prototype.subModelTypes,t);i.each(n,function(t){var i=e.Relational.store.getObjectByName(t);i&&i.initializeModelHierarchy()})}},inheritRelations:function(){if(i.isUndefined(this._superModel)||i.isNull(this._superModel))if(e.Relational.store.setupSuperModel(this),this._superModel){if(this._superModel.inheritRelations(),this._superModel.prototype.relations){var t=i.filter(this._superModel.prototype.relations||[],function(t){return!i.any(this.prototype.relations||[],function(e){return t.relatedModel===e.relatedModel&&t.key===e.key},this)},this);this.prototype.relations=t.concat(this.prototype.relations)}}else this._superModel=!1},findOrCreate:function(t,e){e||(e={});var n=i.isObject(t)&&e.parse&&this.prototype.parse?this.prototype.parse(i.clone(t),e):t,o=this.findModel(n);return i.isObject(t)&&(o&&e.merge!==!1?(delete e.collection,delete e.url,o.set(n,e)):o||e.create===!1||(o=this.build(n,i.defaults({parse:!1},e)))),o},find:function(t,e){return e||(e={}),e.create=!1,this.findOrCreate(t,e)},findModel:function(t){return e.Relational.store.find(this,t)}}),i.extend(e.RelationalModel.prototype,e.Semaphore),e.Collection.prototype.__prepareModel=e.Collection.prototype._prepareModel,e.Collection.prototype._prepareModel=function(t,n){var o;return t instanceof e.Model?(t.collection||(t.collection=this),o=t):(n=n?i.clone(n):{},n.collection=this,o="undefined"!=typeof this.model.findOrCreate?this.model.findOrCreate(t,n):new this.model(t,n),o&&o.validationError&&(this.trigger("invalid",this,t,n),o=!1)),o};var n=e.Collection.prototype.__set=e.Collection.prototype.set;e.Collection.prototype.set=function(t,o){if(!(this.model.prototype instanceof e.RelationalModel))return n.call(this,t,o);o&&o.parse&&(t=this.parse(t,o));var r=!i.isArray(t),s=[],a=[],l=null;t=r?t?[t]:[]:i.clone(t);for(var u=0;u<t.length;u++)l=t[u],l instanceof e.Model||(l=e.Collection.prototype._prepareModel.call(this,l,o)),l&&(a.push(l),this.get(l)||this.get(l.cid)?null!==l.id&&void 0!==l.id&&(this._byId[l.id]=l):s.push(l));a=r?a.length?a[0]:null:a;var c=n.call(this,a,i.defaults({merge:!1,parse:!1},o));for(u=0;u<s.length;u++)l=s[u],(this.get(l)||this.get(l.cid))&&this.trigger("relational:add",l,this,o);return c};var o=e.Collection.prototype.___removeModels=e.Collection.prototype._removeModels;e.Collection.prototype._removeModels=function(t,n){if(!(this.model.prototype instanceof e.RelationalModel))return o.call(this,t,n);var r=[];i.each(t,function(t){t=this.get(t)||t&&this.get(t.cid),t&&r.push(t)},this);var s=o.call(this,r,n);return i.each(r,function(t){this.trigger("relational:remove",t,this,n)},this),s};var r=e.Collection.prototype.__reset=e.Collection.prototype.reset;e.Collection.prototype.reset=function(t,n){n=i.extend({merge:!0},n);var o=r.call(this,t,n);return this.model.prototype instanceof e.RelationalModel&&this.trigger("relational:reset",this,n),o};var s=e.Collection.prototype.__sort=e.Collection.prototype.sort;e.Collection.prototype.sort=function(t){var i=s.call(this,t);return this.model.prototype instanceof e.RelationalModel&&this.trigger("relational:reset",this,t),i};var a=e.Collection.prototype.__trigger=e.Collection.prototype.trigger;e.Collection.prototype.trigger=function(t){if(!(this.model.prototype instanceof e.RelationalModel))return a.apply(this,arguments);if("add"===t||"remove"===t||"reset"===t||"sort"===t){var n=this,o=arguments;i.isObject(o[3])&&(o=i.toArray(o),o[3]=i.clone(o[3])),e.Relational.eventQueue.add(function(){a.apply(n,o)})}else a.apply(this,arguments);return this},e.RelationalModel.extend=function(t,i){var n=e.Model.extend.call(this,t,i);return n.setup(this),n}})},{backbone:84,underscore:371}],84:[function(t,e,i){(function(e){!function(n){var o="object"==typeof self&&self.self==self&&self||"object"==typeof e&&e.global==e&&e;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(t,e,i){o.Backbone=n(o,i,t,e)});else if("undefined"!=typeof i){var r,s=t("underscore");try{r=t("jquery")}catch(a){}n(o,i,s,r)}else o.Backbone=n(o,{},o._,o.jQuery||o.Zepto||o.ender||o.$)}(function(t,e,i,n){var o=t.Backbone,r=Array.prototype.slice;e.VERSION="1.2.3",e.$=n,e.noConflict=function(){return t.Backbone=o,this},e.emulateHTTP=!1,e.emulateJSON=!1;var s=function(t,e,n){switch(t){case 1:return function(){return i[e](this[n])};case 2:return function(t){return i[e](this[n],t)};case 3:return function(t,o){return i[e](this[n],l(t,this),o)};case 4:return function(t,o,r){return i[e](this[n],l(t,this),o,r)};default:return function(){var t=r.call(arguments);return t.unshift(this[n]),i[e].apply(i,t)}}},a=function(t,e,n){i.each(e,function(e,o){i[o]&&(t.prototype[o]=s(e,o,n))})},l=function(t,e){return i.isFunction(t)?t:i.isObject(t)&&!e._isModel(t)?u(t):i.isString(t)?function(e){return e.get(t)}:t},u=function(t){var e=i.matches(t);return function(t){return e(t.attributes)}},c=e.Events={},h=/\s+/,p=function(t,e,n,o,r){var s,a=0;if(n&&"object"==typeof n){void 0!==o&&"context"in r&&void 0===r.context&&(r.context=o);for(s=i.keys(n);a<s.length;a++)e=p(t,e,s[a],n[s[a]],r)}else if(n&&h.test(n))for(s=n.split(h);a<s.length;a++)e=t(e,s[a],o,r);else e=t(e,n,o,r);return e};c.on=function(t,e,i){return d(this,t,e,i)};var d=function(t,e,i,n,o){if(t._events=p(f,t._events||{},e,i,{context:n,ctx:t,listening:o}),o){var r=t._listeners||(t._listeners={});r[o.id]=o}return t};c.listenTo=function(t,e,n){if(!t)return this;var o=t._listenId||(t._listenId=i.uniqueId("l")),r=this._listeningTo||(this._listeningTo={}),s=r[o];if(!s){var a=this._listenId||(this._listenId=i.uniqueId("l"));s=r[o]={obj:t,objId:o,id:a,listeningTo:r,count:0}}return d(t,e,n,this,s),this};var f=function(t,e,i,n){if(i){var o=t[e]||(t[e]=[]),r=n.context,s=n.ctx,a=n.listening;a&&a.count++,o.push({callback:i,context:r,ctx:r||s,listening:a})}return t};c.off=function(t,e,i){return this._events?(this._events=p(m,this._events,t,e,{context:i,listeners:this._listeners}),this):this},c.stopListening=function(t,e,n){var o=this._listeningTo;if(!o)return this;for(var r=t?[t._listenId]:i.keys(o),s=0;s<r.length;s++){var a=o[r[s]];if(!a)break;a.obj.off(e,n,this)}return i.isEmpty(o)&&(this._listeningTo=void 0),this};var m=function(t,e,n,o){if(t){var r,s=0,a=o.context,l=o.listeners;if(e||n||a){for(var u=e?[e]:i.keys(t);s<u.length;s++){e=u[s];var c=t[e];if(!c)break;for(var h=[],p=0;p<c.length;p++){var d=c[p];n&&n!==d.callback&&n!==d.callback._callback||a&&a!==d.context?h.push(d):(r=d.listening,r&&0===--r.count&&(delete l[r.id],delete r.listeningTo[r.objId]))}h.length?t[e]=h:delete t[e]}return i.size(t)?t:void 0}for(var f=i.keys(l);s<f.length;s++)r=l[f[s]],delete l[r.id],delete r.listeningTo[r.objId]}};c.once=function(t,e,n){var o=p(g,{},t,e,i.bind(this.off,this));return this.on(o,void 0,n)},c.listenToOnce=function(t,e,n){var o=p(g,{},e,n,i.bind(this.stopListening,this,t));return this.listenTo(t,o)};var g=function(t,e,n,o){if(n){var r=t[e]=i.once(function(){o(e,r),n.apply(this,arguments)});r._callback=n}return t};c.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),i=Array(e),n=0;e>n;n++)i[n]=arguments[n+1];return p(y,this._events,t,void 0,i),this};var y=function(t,e,i,n){if(t){var o=t[e],r=t.all;o&&r&&(r=r.slice()),o&&v(o,n),r&&v(r,[e].concat(n))}return t},v=function(t,e){var i,n=-1,o=t.length,r=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++n<o;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<o;)(i=t[n]).callback.call(i.ctx,r);return;case 2:for(;++n<o;)(i=t[n]).callback.call(i.ctx,r,s);return;case 3:for(;++n<o;)(i=t[n]).callback.call(i.ctx,r,s,a);return;default:for(;++n<o;)(i=t[n]).callback.apply(i.ctx,e);return}};c.bind=c.on,c.unbind=c.off,i.extend(e,c);var b=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(b.prototype,c,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!i.iteratee(t,this)(this.attributes)},set:function(t,e,n){if(null==t)return this;var o;if("object"==typeof t?(o=t,n=e):(o={})[t]=e,n||(n={}),!this._validate(o,n))return!1;var r=n.unset,s=n.silent,a=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=i.clone(this.attributes),
this.changed={});var u=this.attributes,c=this.changed,h=this._previousAttributes;for(var p in o)e=o[p],i.isEqual(u[p],e)||a.push(p),i.isEqual(h[p],e)?delete c[p]:c[p]=e,r?delete u[p]:u[p]=e;if(this.id=this.get(this.idAttribute),!s){a.length&&(this._pending=n);for(var d=0;d<a.length;d++)this.trigger("change:"+a[d],this,u[a[d]],n)}if(l)return this;if(!s)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.clone(this.changed):!1;var e=this._changing?this._previousAttributes:this.attributes,n={};for(var o in t){var r=t[o];i.isEqual(e[o],r)||(n[o]=r)}return i.size(n)?n:!1},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=i.extend({parse:!0},t);var e=this,n=t.success;return t.success=function(i){var o=t.parse?e.parse(i,t):i;return e.set(o,t)?(n&&n.call(t.context,e,i,t),void e.trigger("sync",e,i,t)):!1},F(this,t),this.sync("read",this,t)},save:function(t,e,n){var o;null==t||"object"==typeof t?(o=t,n=e):(o={})[t]=e,n=i.extend({validate:!0,parse:!0},n);var r=n.wait;if(o&&!r){if(!this.set(o,n))return!1}else if(!this._validate(o,n))return!1;var s=this,a=n.success,l=this.attributes;n.success=function(t){s.attributes=l;var e=n.parse?s.parse(t,n):t;return r&&(e=i.extend({},o,e)),e&&!s.set(e,n)?!1:(a&&a.call(n.context,s,t,n),void s.trigger("sync",s,t,n))},F(this,n),o&&r&&(this.attributes=i.extend({},l,o));var u=this.isNew()?"create":n.patch?"patch":"update";"patch"!==u||n.attrs||(n.attrs=o);var c=this.sync(u,this,n);return this.attributes=l,c},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,o=t.wait,r=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(i){o&&r(),n&&n.call(t.context,e,i,t),e.isNew()||e.trigger("sync",e,i,t)};var s=!1;return this.isNew()?i.defer(t.success):(F(this,t),s=this.sync("delete",this,t)),o||r(),s},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||B();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.defaults({validate:!0},t))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1):!0}});var x={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};a(b,x,"attributes");var _=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},w={add:!0,remove:!0,merge:!0},S={add:!0,remove:!1},k=function(t,e,i){i=Math.min(Math.max(i,0),t.length);for(var n=Array(t.length-i),o=e.length,r=0;r<n.length;r++)n[r]=t[r+i];for(r=0;o>r;r++)t[r+i]=e[r];for(r=0;r<n.length;r++)t[r+o+i]=n[r]};i.extend(_.prototype,c,{model:b,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,S))},remove:function(t,e){e=i.extend({},e);var n=!i.isArray(t);t=n?[t]:i.clone(t);var o=this._removeModels(t,e);return!e.silent&&o&&this.trigger("update",this,e),n?o[0]:o},set:function(t,e){if(null!=t){e=i.defaults({},e,w),e.parse&&!this._isModel(t)&&(t=this.parse(t,e));var n=!i.isArray(t);t=n?[t]:t.slice();var o=e.at;null!=o&&(o=+o),0>o&&(o+=this.length+1);for(var r,s=[],a=[],l=[],u={},c=e.add,h=e.merge,p=e.remove,d=!1,f=this.comparator&&null==o&&e.sort!==!1,m=i.isString(this.comparator)?this.comparator:null,g=0;g<t.length;g++){r=t[g];var y=this.get(r);if(y){if(h&&r!==y){var v=this._isModel(r)?r.attributes:r;e.parse&&(v=y.parse(v,e)),y.set(v,e),f&&!d&&(d=y.hasChanged(m))}u[y.cid]||(u[y.cid]=!0,s.push(y)),t[g]=y}else c&&(r=t[g]=this._prepareModel(r,e),r&&(a.push(r),this._addReference(r,e),u[r.cid]=!0,s.push(r)))}if(p){for(g=0;g<this.length;g++)r=this.models[g],u[r.cid]||l.push(r);l.length&&this._removeModels(l,e)}var b=!1,x=!f&&c&&p;if(s.length&&x?(b=this.length!=s.length||i.some(this.models,function(t,e){return t!==s[e]}),this.models.length=0,k(this.models,s,0),this.length=this.models.length):a.length&&(f&&(d=!0),k(this.models,a,null==o?this.length:o),this.length=this.models.length),d&&this.sort({silent:!0}),!e.silent){for(g=0;g<a.length;g++)null!=o&&(e.index=o+g),r=a[g],r.trigger("add",r,this,e);(d||b)&&this.trigger("sort",this,e),(a.length||l.length)&&this.trigger("update",this,e)}return n?t[0]:t}},reset:function(t,e){e=e?i.clone(e):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return r.apply(this.models,arguments)},get:function(t){if(null==t)return void 0;var e=this.modelId(this._isModel(t)?t.attributes:t);return this._byId[t]||this._byId[e]||this._byId[t.cid]},at:function(t){return 0>t&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var n=e.length;return i.isFunction(e)&&(e=i.bind(e,this)),1===n||i.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=i.extend({parse:!0},t);var e=t.success,n=this;return t.success=function(i){var o=t.reset?"reset":"set";n[o](i,t),e&&e.call(t.context,n,i,t),n.trigger("sync",n,i,t)},F(this,t),this.sync("read",this,t)},create:function(t,e){e=e?i.clone(e):{};var n=e.wait;if(t=this._prepareModel(t,e),!t)return!1;n||this.add(t,e);var o=this,r=e.success;return e.success=function(t,e,i){n&&o.add(t,i),r&&r.call(i.context,t,e,i)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_removeModels:function(t,e){for(var i=[],n=0;n<t.length;n++){var o=this.get(t[n]);if(o){var r=this.indexOf(o);this.models.splice(r,1),this.length--,e.silent||(e.index=r,o.trigger("remove",o,this,e)),i.push(o),this._removeReference(o,e)}}return i.length?i:!1},_isModel:function(t){return t instanceof b},_addReference:function(t,e){this._byId[t.cid]=t;var i=this.modelId(t.attributes);null!=i&&(this._byId[i]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var i=this.modelId(t.attributes);null!=i&&delete this._byId[i],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){if("add"!==t&&"remove"!==t||i===this){if("destroy"===t&&this.remove(e,n),"change"===t){var o=this.modelId(e.previousAttributes()),r=this.modelId(e.attributes);o!==r&&(null!=o&&delete this._byId[o],null!=r&&(this._byId[r]=e))}this.trigger.apply(this,arguments)}}});var T={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3};a(_,T,"models");var E=e.View=function(t){this.cid=i.uniqueId("view"),i.extend(this,i.pick(t,C)),this._ensureElement(),this.initialize.apply(this,arguments)},M=/^(\S+)\s*(.*)$/,C=["model","collection","el","id","attributes","className","tagName","events"];i.extend(E.prototype,c,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=i.result(this,"events")),!t)return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[n]),n){var o=e.match(M);this.delegate(o[1],o[2],i.bind(n,this))}}return this},delegate:function(t,e,i){return this.$el.on(t+".delegateEvents"+this.cid,e,i),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,i){return this.$el.off(t+".delegateEvents"+this.cid,e,i),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"));else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t["class"]=i.result(this,"className")),this.setElement(this._createElement(i.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,n,o){var r=A[t];i.defaults(o||(o={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var s={type:r,dataType:"json"};if(o.url||(s.url=i.result(n,"url")||B()),null!=o.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(s.contentType="application/json",s.data=JSON.stringify(o.attrs||n.toJSON(o))),o.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),o.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){s.type="POST",o.emulateJSON&&(s.data._method=r);var a=o.beforeSend;o.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",r),a?a.apply(this,arguments):void 0}}"GET"===s.type||o.emulateJSON||(s.processData=!1);var l=o.error;o.error=function(t,e,i){o.textStatus=e,o.errorThrown=i,l&&l.call(o.context,t,e,i)};var u=o.xhr=e.ajax(i.extend(s,o));return n.trigger("request",n,u,o),u};var A={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var R=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},D=/\((.*?)\)/g,z=/(\(\?)?:\w+/g,L=/\*\w+/g,P=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(R.prototype,c,{initialize:function(){},route:function(t,n,o){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(o=n,n=""),o||(o=this[n]);var r=this;return e.history.route(t,function(i){var s=r._extractParameters(t,i);r.execute(o,s,n)!==!1&&(r.trigger.apply(r,["route:"+n].concat(s)),r.trigger("route",n,s),e.history.trigger("route",r,n,s))}),this},execute:function(t,e,i){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(P,"\\$&").replace(D,"(?:$1)?").replace(z,function(t,e){return e?t:"([^/?]+)"}).replace(L,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var I=e.History=function(){this.handlers=[],this.checkUrl=i.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},N=/^[#\/]|\s+$/g,O=/^\/+|\/+$/g,j=/#.*$/;I.started=!1,i.extend(I.prototype,c,{interval:50,atRoot:function(){var t=this.location.pathname.replace(/[^\/]$/,"$&/");return t===this.root&&!this.getSearch()},matchRoot:function(){var t=this.decodeFragment(this.location.pathname),e=t.slice(0,this.root.length-1)+"/";return e===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(N,"")},start:function(t){if(I.started)throw new Error("Backbone.history has already been started");if(I.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(O,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var n=document.body,o=n.insertBefore(this.iframe,n.firstChild).contentWindow;o.document.open(),o.document.close(),o.location.hash="#"+this.fragment}var r=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};return this._usePushState?r("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?r("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.options.silent?void 0:this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),I.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return this.matchRoot()?(t=this.fragment=this.getFragment(t),i.some(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})):!1},navigate:function(t,e){if(!I.started)return!1;e&&e!==!0||(e={trigger:!!e}),t=this.getFragment(t||"");var i=this.root;(""===t||"?"===t.charAt(0))&&(i=i.slice(0,-1)||"/");var n=i+t;if(t=this.decodeFragment(t.replace(j,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var o=this.iframe.contentWindow;e.replace||(o.document.open(),o.document.close()),this._updateHash(o.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new I;var U=function(t,e){var n,o=this;n=t&&i.has(t,"constructor")?t.constructor:function(){return o.apply(this,arguments)},i.extend(n,o,e);var r=function(){this.constructor=n};return r.prototype=o.prototype,n.prototype=new r,t&&i.extend(n.prototype,t),n.__super__=o.prototype,n};b.extend=_.extend=R.extend=E.extend=I.extend=U;var B=function(){throw new Error('A "url" property or function must be specified')},F=function(t,e){var i=e.error;e.error=function(n){i&&i.call(e.context,t,n,e),t.trigger("error",t,n,e)}};return e})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{jquery:117,underscore:371}],85:[function(t,e,i){(function(){var t=[].slice;!function(e,i){"use strict";var n;return n=function(){function t(t,i){null==i&&(i={}),this.$element=e(t),this.options=e.extend({},e.fn.bootstrapSwitch.defaults,{state:this.$element.is(":checked"),size:this.$element.data("size"),animate:this.$element.data("animate"),disabled:this.$element.is(":disabled"),readonly:this.$element.is("[readonly]"),indeterminate:this.$element.data("indeterminate"),inverse:this.$element.data("inverse"),radioAllOff:this.$element.data("radio-all-off"),onColor:this.$element.data("on-color"),offColor:this.$element.data("off-color"),onText:this.$element.data("on-text"),offText:this.$element.data("off-text"),labelText:this.$element.data("label-text"),handleWidth:this.$element.data("handle-width"),labelWidth:this.$element.data("label-width"),baseClass:this.$element.data("base-class"),wrapperClass:this.$element.data("wrapper-class")},i),this.$wrapper=e("<div>",{"class":function(t){return function(){var e;return e=[""+t.options.baseClass].concat(t._getClasses(t.options.wrapperClass)),e.push(t.options.state?""+t.options.baseClass+"-on":""+t.options.baseClass+"-off"),null!=t.options.size&&e.push(""+t.options.baseClass+"-"+t.options.size),t.options.disabled&&e.push(""+t.options.baseClass+"-disabled"),t.options.readonly&&e.push(""+t.options.baseClass+"-readonly"),t.options.indeterminate&&e.push(""+t.options.baseClass+"-indeterminate"),t.options.inverse&&e.push(""+t.options.baseClass+"-inverse"),t.$element.attr("id")&&e.push(""+t.options.baseClass+"-id-"+t.$element.attr("id")),e.join(" ")}}(this)()}),this.$container=e("<div>",{"class":""+this.options.baseClass+"-container"}),this.$on=e("<span>",{html:this.options.onText,"class":""+this.options.baseClass+"-handle-on "+this.options.baseClass+"-"+this.options.onColor}),this.$off=e("<span>",{html:this.options.offText,"class":""+this.options.baseClass+"-handle-off "+this.options.baseClass+"-"+this.options.offColor}),this.$label=e("<span>",{html:this.options.labelText,"class":""+this.options.baseClass+"-label"}),this.$element.on("init.bootstrapSwitch",function(e){return function(){return e.options.onInit.apply(t,arguments)}}(this)),this.$element.on("switchChange.bootstrapSwitch",function(e){return function(){return e.options.onSwitchChange.apply(t,arguments)}}(this)),this.$container=this.$element.wrap(this.$container).parent(),this.$wrapper=this.$container.wrap(this.$wrapper).parent(),this.$element.before(this.options.inverse?this.$off:this.$on).before(this.$label).before(this.options.inverse?this.$on:this.$off),this.options.indeterminate&&this.$element.prop("indeterminate",!0),this._init(),this._elementHandlers(),this._handleHandlers(),this._labelHandlers(),this._formHandler(),this._externalLabelHandler(),this.$element.trigger("init.bootstrapSwitch")}return t.prototype._constructor=t,t.prototype.state=function(t,e){return"undefined"==typeof t?this.options.state:this.options.disabled||this.options.readonly?this.$element:this.options.state&&!this.options.radioAllOff&&this.$element.is(":radio")?this.$element:(this.options.indeterminate&&this.indeterminate(!1),t=!!t,this.$element.prop("checked",t).trigger("change.bootstrapSwitch",e),this.$element)},t.prototype.toggleState=function(t){return this.options.disabled||this.options.readonly?this.$element:this.options.indeterminate?(this.indeterminate(!1),this.state(!0)):this.$element.prop("checked",!this.options.state).trigger("change.bootstrapSwitch",t)},t.prototype.size=function(t){return"undefined"==typeof t?this.options.size:(null!=this.options.size&&this.$wrapper.removeClass(""+this.options.baseClass+"-"+this.options.size),t&&this.$wrapper.addClass(""+this.options.baseClass+"-"+t),this._width(),this._containerPosition(),this.options.size=t,this.$element)},t.prototype.animate=function(t){return"undefined"==typeof t?this.options.animate:(t=!!t,t===this.options.animate?this.$element:this.toggleAnimate())},t.prototype.toggleAnimate=function(){return this.options.animate=!this.options.animate,this.$wrapper.toggleClass(""+this.options.baseClass+"-animate"),this.$element},t.prototype.disabled=function(t){return"undefined"==typeof t?this.options.disabled:(t=!!t,t===this.options.disabled?this.$element:this.toggleDisabled())},t.prototype.toggleDisabled=function(){return this.options.disabled=!this.options.disabled,this.$element.prop("disabled",this.options.disabled),this.$wrapper.toggleClass(""+this.options.baseClass+"-disabled"),this.$element},t.prototype.readonly=function(t){return"undefined"==typeof t?this.options.readonly:(t=!!t,t===this.options.readonly?this.$element:this.toggleReadonly())},t.prototype.toggleReadonly=function(){return this.options.readonly=!this.options.readonly,this.$element.prop("readonly",this.options.readonly),this.$wrapper.toggleClass(""+this.options.baseClass+"-readonly"),this.$element},t.prototype.indeterminate=function(t){return"undefined"==typeof t?this.options.indeterminate:(t=!!t,t===this.options.indeterminate?this.$element:this.toggleIndeterminate())},t.prototype.toggleIndeterminate=function(){return this.options.indeterminate=!this.options.indeterminate,this.$element.prop("indeterminate",this.options.indeterminate),this.$wrapper.toggleClass(""+this.options.baseClass+"-indeterminate"),this._containerPosition(),this.$element},t.prototype.inverse=function(t){return"undefined"==typeof t?this.options.inverse:(t=!!t,t===this.options.inverse?this.$element:this.toggleInverse())},t.prototype.toggleInverse=function(){var t,e;return this.$wrapper.toggleClass(""+this.options.baseClass+"-inverse"),e=this.$on.clone(!0),t=this.$off.clone(!0),this.$on.replaceWith(t),this.$off.replaceWith(e),this.$on=t,this.$off=e,this.options.inverse=!this.options.inverse,this.$element},t.prototype.onColor=function(t){var e;return e=this.options.onColor,"undefined"==typeof t?e:(null!=e&&this.$on.removeClass(""+this.options.baseClass+"-"+e),this.$on.addClass(""+this.options.baseClass+"-"+t),this.options.onColor=t,this.$element)},t.prototype.offColor=function(t){var e;return e=this.options.offColor,"undefined"==typeof t?e:(null!=e&&this.$off.removeClass(""+this.options.baseClass+"-"+e),this.$off.addClass(""+this.options.baseClass+"-"+t),this.options.offColor=t,this.$element)},t.prototype.onText=function(t){return"undefined"==typeof t?this.options.onText:(this.$on.html(t),this._width(),this._containerPosition(),this.options.onText=t,this.$element)},t.prototype.offText=function(t){return"undefined"==typeof t?this.options.offText:(this.$off.html(t),this._width(),this._containerPosition(),this.options.offText=t,this.$element)},t.prototype.labelText=function(t){return"undefined"==typeof t?this.options.labelText:(this.$label.html(t),this._width(),this.options.labelText=t,this.$element)},t.prototype.handleWidth=function(t){return"undefined"==typeof t?this.options.handleWidth:(this.options.handleWidth=t,this._width(),this._containerPosition(),this.$element)},t.prototype.labelWidth=function(t){return"undefined"==typeof t?this.options.labelWidth:(this.options.labelWidth=t,this._width(),this._containerPosition(),this.$element)},t.prototype.baseClass=function(t){return this.options.baseClass},t.prototype.wrapperClass=function(t){return"undefined"==typeof t?this.options.wrapperClass:(t||(t=e.fn.bootstrapSwitch.defaults.wrapperClass),this.$wrapper.removeClass(this._getClasses(this.options.wrapperClass).join(" ")),this.$wrapper.addClass(this._getClasses(t).join(" ")),this.options.wrapperClass=t,this.$element)},t.prototype.radioAllOff=function(t){return"undefined"==typeof t?this.options.radioAllOff:(t=!!t,t===this.options.radioAllOff?this.$element:(this.options.radioAllOff=t,this.$element))},t.prototype.onInit=function(t){return"undefined"==typeof t?this.options.onInit:(t||(t=e.fn.bootstrapSwitch.defaults.onInit),this.options.onInit=t,this.$element)},t.prototype.onSwitchChange=function(t){return"undefined"==typeof t?this.options.onSwitchChange:(t||(t=e.fn.bootstrapSwitch.defaults.onSwitchChange),this.options.onSwitchChange=t,this.$element)},t.prototype.destroy=function(){var t;return t=this.$element.closest("form"),t.length&&t.off("reset.bootstrapSwitch").removeData("bootstrap-switch"),this.$container.children().not(this.$element).remove(),this.$element.unwrap().unwrap().off(".bootstrapSwitch").removeData("bootstrap-switch"),this.$element},t.prototype._width=function(){var t,e;return t=this.$on.add(this.$off),t.add(this.$label).css("width",""),e="auto"===this.options.handleWidth?Math.max(this.$on.width(),this.$off.width()):this.options.handleWidth,t.width(e),this.$label.width(function(t){return function(i,n){return"auto"!==t.options.labelWidth?t.options.labelWidth:e>n?e:n}}(this)),this._handleWidth=this.$on.outerWidth(),this._labelWidth=this.$label.outerWidth(),this.$container.width(2*this._handleWidth+this._labelWidth),this.$wrapper.width(this._handleWidth+this._labelWidth)},t.prototype._containerPosition=function(t,e){return null==t&&(t=this.options.state),this.$container.css("margin-left",function(e){return function(){var i;return i=[0,"-"+e._handleWidth+"px"],e.options.indeterminate?"-"+e._handleWidth/2+"px":t?e.options.inverse?i[1]:i[0]:e.options.inverse?i[0]:i[1]}}(this)),e?setTimeout(function(){return e()},50):void 0},t.prototype._init=function(){var t,e;return t=function(t){return function(){return t._width(),t._containerPosition(null,function(){return t.options.animate?t.$wrapper.addClass(""+t.options.baseClass+"-animate"):void 0})}}(this),this.$wrapper.is(":visible")?t():e=i.setInterval(function(n){return function(){return n.$wrapper.is(":visible")?(t(),i.clearInterval(e)):void 0}}(this),50)},t.prototype._elementHandlers=function(){return this.$element.on({"change.bootstrapSwitch":function(t){return function(i,n){var o;return i.preventDefault(),i.stopImmediatePropagation(),o=t.$element.is(":checked"),t._containerPosition(o),o!==t.options.state?(t.options.state=o,t.$wrapper.toggleClass(""+t.options.baseClass+"-off").toggleClass(""+t.options.baseClass+"-on"),n?void 0:(t.$element.is(":radio")&&e("[name='"+t.$element.attr("name")+"']").not(t.$element).prop("checked",!1).trigger("change.bootstrapSwitch",!0),t.$element.trigger("switchChange.bootstrapSwitch",[o]))):void 0}}(this),"focus.bootstrapSwitch":function(t){return function(e){return e.preventDefault(),t.$wrapper.addClass(""+t.options.baseClass+"-focused")}}(this),"blur.bootstrapSwitch":function(t){return function(e){return e.preventDefault(),t.$wrapper.removeClass(""+t.options.baseClass+"-focused")}}(this),"keydown.bootstrapSwitch":function(t){return function(e){if(e.which&&!t.options.disabled&&!t.options.readonly)switch(e.which){case 37:return e.preventDefault(),e.stopImmediatePropagation(),t.state(!1);case 39:return e.preventDefault(),e.stopImmediatePropagation(),t.state(!0)}}}(this)})},t.prototype._handleHandlers=function(){return this.$on.on("click.bootstrapSwitch",function(t){return function(e){return e.preventDefault(),e.stopPropagation(),t.state(!1),t.$element.trigger("focus.bootstrapSwitch")}}(this)),this.$off.on("click.bootstrapSwitch",function(t){return function(e){return e.preventDefault(),e.stopPropagation(),t.state(!0),t.$element.trigger("focus.bootstrapSwitch")}}(this))},t.prototype._labelHandlers=function(){return this.$label.on({"mousedown.bootstrapSwitch touchstart.bootstrapSwitch":function(t){return function(e){return t._dragStart||t.options.disabled||t.options.readonly?void 0:(e.preventDefault(),e.stopPropagation(),t._dragStart=(e.pageX||e.originalEvent.touches[0].pageX)-parseInt(t.$container.css("margin-left"),10),t.options.animate&&t.$wrapper.removeClass(""+t.options.baseClass+"-animate"),t.$element.trigger("focus.bootstrapSwitch"))}}(this),"mousemove.bootstrapSwitch touchmove.bootstrapSwitch":function(t){return function(e){var i;if(null!=t._dragStart&&(e.preventDefault(),i=(e.pageX||e.originalEvent.touches[0].pageX)-t._dragStart,!(i<-t._handleWidth||i>0)))return t._dragEnd=i,t.$container.css("margin-left",""+t._dragEnd+"px")}}(this),"mouseup.bootstrapSwitch touchend.bootstrapSwitch":function(t){return function(e){var i;if(t._dragStart)return e.preventDefault(),t.options.animate&&t.$wrapper.addClass(""+t.options.baseClass+"-animate"),t._dragEnd?(i=t._dragEnd>-(t._handleWidth/2),t._dragEnd=!1,t.state(t.options.inverse?!i:i)):t.state(!t.options.state),t._dragStart=!1}}(this),"mouseleave.bootstrapSwitch":function(t){return function(e){return t.$label.trigger("mouseup.bootstrapSwitch")}}(this)})},t.prototype._externalLabelHandler=function(){var t;return t=this.$element.closest("label"),t.on("click",function(e){return function(i){return i.preventDefault(),i.stopImmediatePropagation(),i.target===t[0]?e.toggleState():void 0}}(this))},t.prototype._formHandler=function(){var t;return t=this.$element.closest("form"),t.data("bootstrap-switch")?void 0:t.on("reset.bootstrapSwitch",function(){return i.setTimeout(function(){return t.find("input").filter(function(){return e(this).data("bootstrap-switch")}).each(function(){return e(this).bootstrapSwitch("state",this.checked)})},1)}).data("bootstrap-switch",!0)},t.prototype._getClasses=function(t){var i,n,o,r;if(!e.isArray(t))return[""+this.options.baseClass+"-"+t];for(n=[],o=0,r=t.length;r>o;o++)i=t[o],n.push(""+this.options.baseClass+"-"+i);return n},t}(),e.fn.bootstrapSwitch=function(){var i,o,r;return o=arguments[0],i=2<=arguments.length?t.call(arguments,1):[],r=this,this.each(function(){var t,s;return t=e(this),s=t.data("bootstrap-switch"),s||t.data("bootstrap-switch",s=new n(this,o)),"string"==typeof o?r=s[o].apply(s,i):void 0}),r},e.fn.bootstrapSwitch.Constructor=n,e.fn.bootstrapSwitch.defaults={state:!0,size:null,animate:!0,disabled:!1,readonly:!1,indeterminate:!1,inverse:!1,radioAllOff:!1,onColor:"primary",offColor:"default",onText:"ON",offText:"OFF",labelText:"&nbsp;",handleWidth:"auto",labelWidth:"auto",baseClass:"bootstrap-switch",wrapperClass:"wrapper",onInit:function(){},onSwitchChange:function(){}}}(window.jQuery,window)}).call(this)},{}],86:[function(t,e,i){(function(i){jQuery=i.jQuery=t("jquery");(function(t,e,i){if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]
};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one("bsTransitionEnd",function(){i=!0});var o=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(o,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.alert");o||i.data("bs.alert",o=new n(this)),"string"==typeof e&&o[e].call(i)})}var i='[data-dismiss="alert"]',n=function(e){t(e).on("click",i,this.close)};n.VERSION="3.3.5",n.TRANSITION_DURATION=150,n.prototype.close=function(e){function i(){s.detach().trigger("closed.bs.alert").remove()}var o=t(this),r=o.attr("data-target");r||(r=o.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var s=t(r);e&&e.preventDefault(),s.length||(s=o.closest(".alert")),s.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i())};var o=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=o,this},t(document).on("click.bs.alert.data-api",i,n.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.button"),r="object"==typeof e&&e;o||n.data("bs.button",o=new i(this,r)),"toggle"==e?o.toggle():e&&o.setState(e)})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.3.5",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",n=this.$element,o=n.is("input")?"val":"html",r=n.data();e+="Text",null==r.resetText&&n.data("resetText",n[o]()),setTimeout(t.proxy(function(){n[o](null==r[e]?this.options[e]:r[e]),"loadingText"==e?(this.isLoading=!0,n.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),t&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=t(i.target);n.hasClass("btn")||(n=n.closest(".btn")),e.call(n,"toggle"),t(i.target).is('input[type="radio"]')||t(i.target).is('input[type="checkbox"]')||i.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.carousel"),r=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e),s="string"==typeof e?e:r.slide;o||n.data("bs.carousel",o=new i(this,r)),"number"==typeof e?o.to(e):s?o[s]():r.interval&&o.pause().cycle()})}var i=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.3.5",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e),n="prev"==t&&0===i||"next"==t&&i==this.$items.length-1;if(n&&!this.options.wrap)return e;var o="prev"==t?-1:1,r=(i+o)%this.$items.length;return this.$items.eq(r)},i.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(e,n){var o=this.$element.find(".item.active"),r=n||this.getItemForDirection(e,o),s=this.interval,a="next"==e?"left":"right",l=this;if(r.hasClass("active"))return this.sliding=!1;var u=r[0],c=t.Event("slide.bs.carousel",{relatedTarget:u,direction:a});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,s&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=t(this.$indicators.children()[this.getItemIndex(r)]);h&&h.addClass("active")}var p=t.Event("slid.bs.carousel",{relatedTarget:u,direction:a});return t.support.transition&&this.$element.hasClass("slide")?(r.addClass(e),r[0].offsetWidth,o.addClass(a),r.addClass(a),o.one("bsTransitionEnd",function(){r.removeClass([e,a].join(" ")).addClass("active"),o.removeClass(["active",a].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(p)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(o.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger(p)),s&&this.cycle(),this}};var n=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this};var o=function(i){var n,o=t(this),r=t(o.attr("data-target")||(n=o.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(r.hasClass("carousel")){var s=t.extend({},r.data(),o.data()),a=o.attr("data-slide-to");a&&(s.interval=!1),e.call(r,s),a&&r.data("bs.carousel").to(a),i.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";function e(e){var i,n=e.attr("data-target")||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return t(n)}function i(e){return this.each(function(){var i=t(this),o=i.data("bs.collapse"),r=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e);!o&&r.toggle&&/show|hide/.test(e)&&(r.toggle=!1),o||i.data("bs.collapse",o=new n(this,r)),"string"==typeof e&&o[e]()})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};n.VERSION="3.3.5",n.TRANSITION_DURATION=350,n.DEFAULTS={toggle:!0},n.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(e=o.data("bs.collapse"),e&&e.transitioning))){var r=t.Event("show.bs.collapse");if(this.$element.trigger(r),!r.isDefaultPrevented()){o&&o.length&&(i.call(o,"hide"),e||o.data("bs.collapse",null));var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return a.call(this);var l=t.camelCase(["scroll",s].join("-"));this.$element.one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(n.TRANSITION_DURATION)[s](this.$element[0][l])}}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(o,this)).emulateTransitionEnd(n.TRANSITION_DURATION):o.call(this)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},n.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(i,n){var o=t(n);this.addAriaAndCollapsedClass(e(o),o)},this)).end()},n.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var o=t.fn.collapse;t.fn.collapse=i,t.fn.collapse.Constructor=n,t.fn.collapse.noConflict=function(){return t.fn.collapse=o,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var o=t(this);o.attr("data-target")||n.preventDefault();var r=e(o),s=r.data("bs.collapse"),a=s?"toggle":o.data();i.call(r,a)})}(jQuery),+function(t){"use strict";function e(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&t(i);return n&&n.length?n:e.parent()}function i(i){i&&3===i.which||(t(o).remove(),t(r).each(function(){var n=t(this),o=e(n),r={relatedTarget:this};o.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&t.contains(o[0],i.target)||(o.trigger(i=t.Event("hide.bs.dropdown",r)),i.isDefaultPrevented()||(n.attr("aria-expanded","false"),o.removeClass("open").trigger("hidden.bs.dropdown",r))))}))}function n(e){return this.each(function(){var i=t(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new s(this)),"string"==typeof e&&n[e].call(i)})}var o=".dropdown-backdrop",r='[data-toggle="dropdown"]',s=function(e){t(e).on("click.bs.dropdown",this.toggle)};s.VERSION="3.3.5",s.prototype.toggle=function(n){var o=t(this);if(!o.is(".disabled, :disabled")){var r=e(o),s=r.hasClass("open");if(i(),!s){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",i);var a={relatedTarget:this};if(r.trigger(n=t.Event("show.bs.dropdown",a)),n.isDefaultPrevented())return;o.trigger("focus").attr("aria-expanded","true"),r.toggleClass("open").trigger("shown.bs.dropdown",a)}return!1}},s.prototype.keydown=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)){var n=t(this);if(i.preventDefault(),i.stopPropagation(),!n.is(".disabled, :disabled")){var o=e(n),s=o.hasClass("open");if(!s&&27!=i.which||s&&27==i.which)return 27==i.which&&o.find(r).trigger("focus"),n.trigger("click");var a=" li:not(.disabled):visible a",l=o.find(".dropdown-menu"+a);if(l.length){var u=l.index(i.target);38==i.which&&u>0&&u--,40==i.which&&u<l.length-1&&u++,~u||(u=0),l.eq(u).trigger("focus")}}}};var a=t.fn.dropdown;t.fn.dropdown=n,t.fn.dropdown.Constructor=s,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=a,this},t(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",r,s.prototype.toggle).on("keydown.bs.dropdown.data-api",r,s.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",s.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e,n){return this.each(function(){var o=t(this),r=o.data("bs.modal"),s=t.extend({},i.DEFAULTS,o.data(),"object"==typeof e&&e);r||o.data("bs.modal",r=new i(this,s)),"string"==typeof e?r[e](n):s.show&&r.show(n)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.5",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var n=this,o=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var o=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),o&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var r=t.Event("shown.bs.modal",{relatedTarget:e});o?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(i.TRANSITION_DURATION):n.$element.trigger("focus").trigger(r)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var n=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=t.support.transition&&o;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;r?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){n.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):s()}else e&&e()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=t(this),o=n.attr("href"),r=t(n.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),s=r.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(o)&&o},r.data(),n.data());n.is("a")&&i.preventDefault(),r.one("show.bs.modal",function(t){t.isDefaultPrevented()||r.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),e.call(r,s,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.tooltip"),r="object"==typeof e&&e;(o||!/destroy|hide/.test(e))&&(o||n.data("bs.tooltip",o=new i(this,r)),"string"==typeof e&&o[e]())})}var i=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};i.VERSION="3.3.5",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,n){if(this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),r=o.length;r--;){var s=o[r];if("click"==s)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focusin",l="hover"==s?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusin"==e.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState?void(i.hoverState="in"):(clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},i.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusout"==e.type?"focus":"hover"]=!1),i.isInStateTrue()?void 0:(clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide())},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var n=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!n)return;var o=this,r=this.tip(),s=this.getUID(this.type);this.setContent(),r.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&r.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,u=l.test(a);u&&(a=a.replace(l,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),h=r[0].offsetWidth,p=r[0].offsetHeight;if(u){var d=a,f=this.getPosition(this.$viewport);a="bottom"==a&&c.bottom+p>f.bottom?"top":"top"==a&&c.top-p<f.top?"bottom":"right"==a&&c.right+h>f.width?"left":"left"==a&&c.left-h<f.left?"right":a,r.removeClass(d).addClass(a)}var m=this.getCalculatedOffset(a,c,h,p);this.applyPlacement(m,a);var g=function(){var t=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==t&&o.leave(o)};t.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",g).emulateTransitionEnd(i.TRANSITION_DURATION):g()}},i.prototype.applyPlacement=function(e,i){var n=this.tip(),o=n[0].offsetWidth,r=n[0].offsetHeight,s=parseInt(n.css("margin-top"),10),a=parseInt(n.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(a)&&(a=0),e.top+=s,e.left+=a,t.offset.setOffset(n[0],t.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),n.addClass("in");var l=n[0].offsetWidth,u=n[0].offsetHeight;"top"==i&&u!=r&&(e.top=e.top+r-u);var c=this.getViewportAdjustedDelta(i,e,l,u);c.left?e.left+=c.left:e.top+=c.top;var h=/top|bottom/.test(i),p=h?2*c.left-o+l:2*c.top-r+u,d=h?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(p,n[0][d],h)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(e){function n(){"in"!=o.hoverState&&r.detach(),o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),e&&e()}var o=this,r=t(this.$tip),s=t.Event("hide.bs."+this.type);return this.$element.trigger(s),s.isDefaultPrevented()?void 0:(r.removeClass("in"),t.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],n="BODY"==i.tagName,o=i.getBoundingClientRect();null==o.width&&(o=t.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var r=n?{top:0,left:0}:e.offset(),s={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},a=n?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},o,s,a,r)},i.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,n){var o={top:0,left:0};if(!this.$viewport)return o;var r=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-r-s.scroll,l=e.top+r-s.scroll+n;a<s.top?o.top=s.top-a:l>s.top+s.height&&(o.top=s.top+s.height-l)}else{var u=e.left-r,c=e.left+r+i;u<s.left?o.left=s.left-u:c>s.right&&(o.left=s.left+s.width-c)}return o},i.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},i.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},i.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&(i=t(e.currentTarget).data("bs."+this.type),i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),e?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null})};var n=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.popover"),r="object"==typeof e&&e;(o||!/destroy|hide/.test(e))&&(o||n.data("bs.popover",o=new i(this,r)),"string"==typeof e&&o[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.3.5",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery),+function(t){"use strict";function e(i,n){this.$body=t(document.body),this.$scrollElement=t(t(i).is(document.body)?window:i),this.options=t.extend({},e.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each(function(){var n=t(this),o=n.data("bs.scrollspy"),r="object"==typeof i&&i;o||n.data("bs.scrollspy",o=new e(this,r)),"string"==typeof i&&o[i]()})}e.VERSION="3.3.5",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,i="offset",n=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(i="position",n=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),o=e.data("target")||e.attr("href"),r=/^#./.test(o)&&t(o);return r&&r.length&&r.is(":visible")&&[[r[i]().top+n,o]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),o=this.offsets,r=this.targets,s=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=n)return s!=(t=r[r.length-1])&&this.activate(t);if(s&&e<o[0])return this.activeTarget=null,this.clear();for(t=o.length;t--;)s!=r[t]&&e>=o[t]&&(void 0===o[t+1]||e<o[t+1])&&this.activate(r[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var n=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.tab");o||n.data("bs.tab",o=new i(this)),
"string"==typeof e&&o[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.3.5",i.TRANSITION_DURATION=150,i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),n=e.data("target");if(n||(n=e.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var o=i.find(".active:last a"),r=t.Event("hide.bs.tab",{relatedTarget:e[0]}),s=t.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(r),e.trigger(s),!s.isDefaultPrevented()&&!r.isDefaultPrevented()){var a=t(n);this.activate(e.closest("li"),i),this.activate(a,a.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:o[0]})})}}},i.prototype.activate=function(e,n,o){function r(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}var s=n.find("> .active"),a=o&&t.support.transition&&(s.length&&s.hasClass("fade")||!!n.find("> .fade").length);s.length&&a?s.one("bsTransitionEnd",r).emulateTransitionEnd(i.TRANSITION_DURATION):r(),s.removeClass("in")};var n=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=n,this};var o=function(i){i.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.affix"),r="object"==typeof e&&e;o||n.data("bs.affix",o=new i(this,r)),"string"==typeof e&&o[e]()})}var i=function(e,n){this.options=t.extend({},i.DEFAULTS,n),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.5",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(t,e,i,n){var o=this.$target.scrollTop(),r=this.$element.offset(),s=this.$target.height();if(null!=i&&"top"==this.affixed)return i>o?"top":!1;if("bottom"==this.affixed)return null!=i?o+this.unpin<=r.top?!1:"bottom":t-n>=o+s?!1:"bottom";var a=null==this.affixed,l=a?o:r.top,u=a?s:e;return null!=i&&i>=o?"top":null!=n&&l+u>=t-n?"bottom":!1},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),n=this.options.offset,o=n.top,r=n.bottom,s=Math.max(t(document).height(),t(document.body).height());"object"!=typeof n&&(r=o=n),"function"==typeof o&&(o=n.top(this.$element)),"function"==typeof r&&(r=n.bottom(this.$element));var a=this.getState(s,e,o,r);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var l="affix"+(a?"-"+a:""),u=t.Event(l+".bs.affix");if(this.$element.trigger(u),u.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:s-e-r})}};var n=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),n=i.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),e.call(i,n)})})}(jQuery)}).call(i,e,void 0,void 0)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{jquery:117}],87:[function(t,e,i){function n(t,e){return d.isUndefined(e)?""+e:d.isNumber(e)&&!isFinite(e)?e.toString():d.isFunction(e)||d.isRegExp(e)?e.toString():e}function o(t,e){return d.isString(t)?t.length<e?t:t.slice(0,e):t}function r(t){return o(JSON.stringify(t.actual,n),128)+" "+t.operator+" "+o(JSON.stringify(t.expected,n),128)}function s(t,e,i,n,o){throw new g.AssertionError({message:i,actual:t,expected:e,operator:n,stackStartFunction:o})}function a(t,e){t||s(t,!0,e,"==",g.ok)}function l(t,e){if(t===e)return!0;if(d.isBuffer(t)&&d.isBuffer(e)){if(t.length!=e.length)return!1;for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}return d.isDate(t)&&d.isDate(e)?t.getTime()===e.getTime():d.isRegExp(t)&&d.isRegExp(e)?t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase:d.isObject(t)||d.isObject(e)?c(t,e):t==e}function u(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function c(t,e){if(d.isNullOrUndefined(t)||d.isNullOrUndefined(e))return!1;if(t.prototype!==e.prototype)return!1;if(d.isPrimitive(t)||d.isPrimitive(e))return t===e;var i=u(t),n=u(e);if(i&&!n||!i&&n)return!1;if(i)return t=f.call(t),e=f.call(e),l(t,e);var o,r,s=y(t),a=y(e);if(s.length!=a.length)return!1;for(s.sort(),a.sort(),r=s.length-1;r>=0;r--)if(s[r]!=a[r])return!1;for(r=s.length-1;r>=0;r--)if(o=s[r],!l(t[o],e[o]))return!1;return!0}function h(t,e){return t&&e?"[object RegExp]"==Object.prototype.toString.call(e)?e.test(t):t instanceof e?!0:e.call({},t)===!0?!0:!1:!1}function p(t,e,i,n){var o;d.isString(i)&&(n=i,i=null);try{e()}catch(r){o=r}if(n=(i&&i.name?" ("+i.name+").":".")+(n?" "+n:"."),t&&!o&&s(o,i,"Missing expected exception"+n),!t&&h(o,i)&&s(o,i,"Got unwanted exception"+n),t&&o&&i&&!h(o,i)||!t&&o)throw o}var d=t("util/"),f=Array.prototype.slice,m=Object.prototype.hasOwnProperty,g=e.exports=a;g.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=r(this),this.generatedMessage=!0);var e=t.stackStartFunction||s;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var i=new Error;if(i.stack){var n=i.stack,o=e.name,a=n.indexOf("\n"+o);if(a>=0){var l=n.indexOf("\n",a+1);n=n.substring(l+1)}this.stack=n}}},d.inherits(g.AssertionError,Error),g.fail=s,g.ok=a,g.equal=function(t,e,i){t!=e&&s(t,e,i,"==",g.equal)},g.notEqual=function(t,e,i){t==e&&s(t,e,i,"!=",g.notEqual)},g.deepEqual=function(t,e,i){l(t,e)||s(t,e,i,"deepEqual",g.deepEqual)},g.notDeepEqual=function(t,e,i){l(t,e)&&s(t,e,i,"notDeepEqual",g.notDeepEqual)},g.strictEqual=function(t,e,i){t!==e&&s(t,e,i,"===",g.strictEqual)},g.notStrictEqual=function(t,e,i){t===e&&s(t,e,i,"!==",g.notStrictEqual)},g["throws"]=function(t,e,i){p.apply(this,[!0].concat(f.call(arguments)))},g.doesNotThrow=function(t,e){p.apply(this,[!1].concat(f.call(arguments)))},g.ifError=function(t){if(t)throw t};var y=Object.keys||function(t){var e=[];for(var i in t)m.call(t,i)&&e.push(i);return e}},{"util/":95}],88:[function(t,e,i){(function(e){function n(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t){return this instanceof o?(this.length=0,this.parent=void 0,"number"==typeof t?r(this,t):"string"==typeof t?s(this,t,arguments.length>1?arguments[1]:"utf8"):a(this,t)):arguments.length>1?new o(t,arguments[1]):new o(t)}function r(t,e){if(t=f(t,0>e?0:0|m(e)),!o.TYPED_ARRAY_SUPPORT)for(var i=0;e>i;i++)t[i]=0;return t}function s(t,e,i){("string"!=typeof i||""===i)&&(i="utf8");var n=0|y(e,i);return t=f(t,n),t.write(e,i),t}function a(t,e){if(o.isBuffer(e))return l(t,e);if(X(e))return u(t,e);if(null==e)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(e.buffer instanceof ArrayBuffer)return c(t,e);if(e instanceof ArrayBuffer)return h(t,e)}return e.length?p(t,e):d(t,e)}function l(t,e){var i=0|m(e.length);return t=f(t,i),e.copy(t,0,0,i),t}function u(t,e){var i=0|m(e.length);t=f(t,i);for(var n=0;i>n;n+=1)t[n]=255&e[n];return t}function c(t,e){var i=0|m(e.length);t=f(t,i);for(var n=0;i>n;n+=1)t[n]=255&e[n];return t}function h(t,e){return o.TYPED_ARRAY_SUPPORT?(e.byteLength,t=o._augment(new Uint8Array(e))):t=c(t,new Uint8Array(e)),t}function p(t,e){var i=0|m(e.length);t=f(t,i);for(var n=0;i>n;n+=1)t[n]=255&e[n];return t}function d(t,e){var i,n=0;"Buffer"===e.type&&X(e.data)&&(i=e.data,n=0|m(i.length)),t=f(t,n);for(var o=0;n>o;o+=1)t[o]=255&i[o];return t}function f(t,e){o.TYPED_ARRAY_SUPPORT?(t=o._augment(new Uint8Array(e)),t.__proto__=o.prototype):(t.length=e,t._isBuffer=!0);var i=0!==e&&e<=o.poolSize>>>1;return i&&(t.parent=Z),t}function m(t){if(t>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|t}function g(t,e){if(!(this instanceof g))return new g(t,e);var i=new o(t,e);return delete i.parent,i}function y(t,e){"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var n=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return i;case"utf8":case"utf-8":return q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return Y(t).length;default:if(n)return q(t).length;e=(""+e).toLowerCase(),n=!0}}function v(t,e,i){var n=!1;if(e=0|e,i=void 0===i||i===1/0?this.length:0|i,t||(t="utf8"),0>e&&(e=0),i>this.length&&(i=this.length),e>=i)return"";for(;;)switch(t){case"hex":return R(this,e,i);case"utf8":case"utf-8":return E(this,e,i);case"ascii":return C(this,e,i);case"binary":return A(this,e,i);case"base64":return T(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,e,i);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,e,i,n){i=Number(i)||0;var o=t.length-i;n?(n=Number(n),n>o&&(n=o)):n=o;var r=e.length;if(r%2!==0)throw new Error("Invalid hex string");n>r/2&&(n=r/2);for(var s=0;n>s;s++){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");t[i+s]=a}return s}function x(t,e,i,n){return G(q(e,t.length-i),t,i,n)}function _(t,e,i,n){return G($(e),t,i,n)}function w(t,e,i,n){return _(t,e,i,n)}function S(t,e,i,n){return G(Y(e),t,i,n)}function k(t,e,i,n){return G(H(e,t.length-i),t,i,n)}function T(t,e,i){return 0===e&&i===t.length?W.fromByteArray(t):W.fromByteArray(t.slice(e,i))}function E(t,e,i){i=Math.min(t.length,i);for(var n=[],o=e;i>o;){var r=t[o],s=null,a=r>239?4:r>223?3:r>191?2:1;if(i>=o+a){var l,u,c,h;switch(a){case 1:128>r&&(s=r);break;case 2:l=t[o+1],128===(192&l)&&(h=(31&r)<<6|63&l,h>127&&(s=h));break;case 3:l=t[o+1],u=t[o+2],128===(192&l)&&128===(192&u)&&(h=(15&r)<<12|(63&l)<<6|63&u,h>2047&&(55296>h||h>57343)&&(s=h));break;case 4:l=t[o+1],u=t[o+2],c=t[o+3],128===(192&l)&&128===(192&u)&&128===(192&c)&&(h=(15&r)<<18|(63&l)<<12|(63&u)<<6|63&c,h>65535&&1114112>h&&(s=h))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),o+=a}return M(n)}function M(t){var e=t.length;if(J>=e)return String.fromCharCode.apply(String,t);for(var i="",n=0;e>n;)i+=String.fromCharCode.apply(String,t.slice(n,n+=J));return i}function C(t,e,i){var n="";i=Math.min(t.length,i);for(var o=e;i>o;o++)n+=String.fromCharCode(127&t[o]);return n}function A(t,e,i){var n="";i=Math.min(t.length,i);for(var o=e;i>o;o++)n+=String.fromCharCode(t[o]);return n}function R(t,e,i){var n=t.length;(!e||0>e)&&(e=0),(!i||0>i||i>n)&&(i=n);for(var o="",r=e;i>r;r++)o+=F(t[r]);return o}function D(t,e,i){for(var n=t.slice(e,i),o="",r=0;r<n.length;r+=2)o+=String.fromCharCode(n[r]+256*n[r+1]);return o}function z(t,e,i){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function L(t,e,i,n,r,s){if(!o.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>r||s>e)throw new RangeError("value is out of bounds");if(i+n>t.length)throw new RangeError("index out of range")}function P(t,e,i,n){0>e&&(e=65535+e+1);for(var o=0,r=Math.min(t.length-i,2);r>o;o++)t[i+o]=(e&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function I(t,e,i,n){0>e&&(e=4294967295+e+1);for(var o=0,r=Math.min(t.length-i,4);r>o;o++)t[i+o]=e>>>8*(n?o:3-o)&255}function N(t,e,i,n,o,r){if(e>o||r>e)throw new RangeError("value is out of bounds");if(i+n>t.length)throw new RangeError("index out of range");if(0>i)throw new RangeError("index out of range")}function O(t,e,i,n,o){return o||N(t,e,i,4,3.4028234663852886e38,-3.4028234663852886e38),V.write(t,e,i,n,23,4),i+4}function j(t,e,i,n,o){return o||N(t,e,i,8,1.7976931348623157e308,-1.7976931348623157e308),V.write(t,e,i,n,52,8),i+8}function U(t){if(t=B(t).replace(Q,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function B(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function F(t){return 16>t?"0"+t.toString(16):t.toString(16)}function q(t,e){e=e||1/0;for(var i,n=t.length,o=null,r=[],s=0;n>s;s++){if(i=t.charCodeAt(s),i>55295&&57344>i){if(!o){if(i>56319){(e-=3)>-1&&r.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&r.push(239,191,189);continue}o=i;continue}if(56320>i){(e-=3)>-1&&r.push(239,191,189),o=i;continue}i=o-55296<<10|i-56320|65536}else o&&(e-=3)>-1&&r.push(239,191,189);if(o=null,128>i){if((e-=1)<0)break;r.push(i)}else if(2048>i){if((e-=2)<0)break;r.push(i>>6|192,63&i|128)}else if(65536>i){if((e-=3)<0)break;r.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(1114112>i))throw new Error("Invalid code point");if((e-=4)<0)break;r.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return r}function $(t){for(var e=[],i=0;i<t.length;i++)e.push(255&t.charCodeAt(i));return e}function H(t,e){for(var i,n,o,r=[],s=0;s<t.length&&!((e-=2)<0);s++)i=t.charCodeAt(s),n=i>>8,o=i%256,r.push(o),r.push(n);return r}function Y(t){return W.toByteArray(U(t))}function G(t,e,i,n){for(var o=0;n>o&&!(o+i>=e.length||o>=t.length);o++)e[o+i]=t[o];return o}var W=t("base64-js"),V=t("ieee754"),X=t("is-array");i.Buffer=o,i.SlowBuffer=g,i.INSPECT_MAX_BYTES=50,o.poolSize=8192;var Z={};o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){function t(){}try{var e=new Uint8Array(1);return e.foo=function(){return 42},e.constructor=t,42===e.foo()&&e.constructor===t&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(i){return!1}}(),o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array),o.isBuffer=function(t){return!(null==t||!t._isBuffer)},o.compare=function(t,e){if(!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,n=e.length,r=0,s=Math.min(i,n);s>r&&t[r]===e[r];)++r;return r!==s&&(i=t[r],n=e[r]),n>i?-1:i>n?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!X(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new o(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;i++)e+=t[i].length;var n=new o(e),r=0;for(i=0;i<t.length;i++){var s=t[i];s.copy(n,r),r+=s.length}return n},o.byteLength=y,o.prototype.length=void 0,o.prototype.parent=void 0,o.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?E(this,0,t):v.apply(this,arguments)},o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:0===o.compare(this,t)},o.prototype.inspect=function(){var t="",e=i.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},o.prototype.compare=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:o.compare(this,t)},o.prototype.indexOf=function(t,e){function i(t,e,i){for(var n=-1,o=0;i+o<t.length;o++)if(t[i+o]===e[-1===n?0:o-n]){if(-1===n&&(n=o),o-n+1===e.length)return i+n}else n=-1;return-1}if(e>2147483647?e=2147483647:-2147483648>e&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(0>e&&(e=Math.max(this.length+e,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,e);if(o.isBuffer(t))return i(this,t,e);if("number"==typeof t)return o.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):i(this,[t],e);throw new TypeError("val must be string, number or Buffer")},o.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},o.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},o.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)n=e,i=this.length,e=0;else if(isFinite(e))e=0|e,isFinite(i)?(i=0|i,void 0===n&&(n="utf8")):(n=i,i=void 0);else{var o=n;n=e,e=0|i,i=o}var r=this.length-e;if((void 0===i||i>r)&&(i=r),t.length>0&&(0>i||0>e)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return b(this,t,e,i);case"utf8":case"utf-8":return x(this,t,e,i);case"ascii":return _(this,t,e,i);case"binary":return w(this,t,e,i);case"base64":return S(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,i);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;o.prototype.slice=function(t,e){var i=this.length;t=~~t,e=void 0===e?i:~~e,0>t?(t+=i,0>t&&(t=0)):t>i&&(t=i),0>e?(e+=i,0>e&&(e=0)):e>i&&(e=i),t>e&&(e=t);var n;if(o.TYPED_ARRAY_SUPPORT)n=o._augment(this.subarray(t,e));else{var r=e-t;n=new o(r,void 0);for(var s=0;r>s;s++)n[s]=this[s+t]}return n.length&&(n.parent=this.parent||this),n},o.prototype.readUIntLE=function(t,e,i){t=0|t,e=0|e,i||z(t,e,this.length);for(var n=this[t],o=1,r=0;++r<e&&(o*=256);)n+=this[t+r]*o;return n},o.prototype.readUIntBE=function(t,e,i){t=0|t,e=0|e,i||z(t,e,this.length);for(var n=this[t+--e],o=1;e>0&&(o*=256);)n+=this[t+--e]*o;return n},o.prototype.readUInt8=function(t,e){return e||z(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return e||z(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return e||z(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return e||z(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return e||z(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,i){t=0|t,e=0|e,i||z(t,e,this.length);for(var n=this[t],o=1,r=0;++r<e&&(o*=256);)n+=this[t+r]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*e)),n},o.prototype.readIntBE=function(t,e,i){t=0|t,e=0|e,i||z(t,e,this.length);for(var n=e,o=1,r=this[t+--n];n>0&&(o*=256);)r+=this[t+--n]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r},o.prototype.readInt8=function(t,e){return e||z(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){e||z(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},o.prototype.readInt16BE=function(t,e){e||z(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},o.prototype.readInt32LE=function(t,e){return e||z(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return e||z(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return e||z(t,4,this.length),V.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return e||z(t,4,this.length),V.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return e||z(t,8,this.length),V.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return e||z(t,8,this.length),V.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,i,n){t=+t,e=0|e,i=0|i,n||L(this,t,e,i,Math.pow(2,8*i),0);var o=1,r=0;for(this[e]=255&t;++r<i&&(o*=256);)this[e+r]=t/o&255;return e+i},o.prototype.writeUIntBE=function(t,e,i,n){t=+t,e=0|e,i=0|i,n||L(this,t,e,i,Math.pow(2,8*i),0);var o=i-1,r=1;for(this[e+o]=255&t;--o>=0&&(r*=256);)this[e+o]=t/r&255;return e+i},o.prototype.writeUInt8=function(t,e,i){return t=+t,e=0|e,i||L(this,t,e,1,255,0),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=t,e+1},o.prototype.writeUInt16LE=function(t,e,i){return t=+t,e=0|e,i||L(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},o.prototype.writeUInt16BE=function(t,e,i){return t=+t,e=0|e,i||L(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):P(this,t,e,!1),e+2},o.prototype.writeUInt32LE=function(t,e,i){return t=+t,e=0|e,i||L(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t):I(this,t,e,!0),e+4},o.prototype.writeUInt32BE=function(t,e,i){return t=+t,e=0|e,i||L(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):I(this,t,e,!1),e+4},o.prototype.writeIntLE=function(t,e,i,n){if(t=+t,e=0|e,!n){var o=Math.pow(2,8*i-1);L(this,t,e,i,o-1,-o)}var r=0,s=1,a=0>t?1:0;for(this[e]=255&t;++r<i&&(s*=256);)this[e+r]=(t/s>>0)-a&255;return e+i},o.prototype.writeIntBE=function(t,e,i,n){if(t=+t,e=0|e,!n){var o=Math.pow(2,8*i-1);L(this,t,e,i,o-1,-o)}var r=i-1,s=1,a=0>t?1:0;for(this[e+r]=255&t;--r>=0&&(s*=256);)this[e+r]=(t/s>>0)-a&255;return e+i},o.prototype.writeInt8=function(t,e,i){return t=+t,e=0|e,i||L(this,t,e,1,127,-128),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=t,e+1},o.prototype.writeInt16LE=function(t,e,i){return t=+t,e=0|e,i||L(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},o.prototype.writeInt16BE=function(t,e,i){return t=+t,e=0|e,i||L(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):P(this,t,e,!1),e+2},o.prototype.writeInt32LE=function(t,e,i){return t=+t,e=0|e,i||L(this,t,e,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):I(this,t,e,!0),e+4},o.prototype.writeInt32BE=function(t,e,i){return t=+t,e=0|e,i||L(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):I(this,t,e,!1),e+4},o.prototype.writeFloatLE=function(t,e,i){return O(this,t,e,!0,i)},o.prototype.writeFloatBE=function(t,e,i){return O(this,t,e,!1,i)},o.prototype.writeDoubleLE=function(t,e,i){return j(this,t,e,!0,i)},o.prototype.writeDoubleBE=function(t,e,i){return j(this,t,e,!1,i)},o.prototype.copy=function(t,e,i,n){if(i||(i=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&i>n&&(n=i),n===i)return 0;if(0===t.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>i||i>=this.length)throw new RangeError("sourceStart out of bounds");if(0>n)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);var r,s=n-i;if(this===t&&e>i&&n>e)for(r=s-1;r>=0;r--)t[r+e]=this[r+i];else if(1e3>s||!o.TYPED_ARRAY_SUPPORT)for(r=0;s>r;r++)t[r+e]=this[r+i];else t._set(this.subarray(i,i+s),e);return s},o.prototype.fill=function(t,e,i){if(t||(t=0),e||(e=0),i||(i=this.length),e>i)throw new RangeError("end < start");if(i!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>i||i>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof t)for(n=e;i>n;n++)this[n]=t;else{var o=q(t.toString()),r=o.length;for(n=e;i>n;n++)this[n]=o[n%r]}return this}},o.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(o.TYPED_ARRAY_SUPPORT)return new o(this).buffer;for(var t=new Uint8Array(this.length),e=0,i=t.length;i>e;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var K=o.prototype;o._augment=function(t){return t.constructor=o,t._isBuffer=!0,t._set=t.set,t.get=K.get,t.set=K.set,t.write=K.write,t.toString=K.toString,t.toLocaleString=K.toString,t.toJSON=K.toJSON,t.equals=K.equals,t.compare=K.compare,t.indexOf=K.indexOf,t.copy=K.copy,t.slice=K.slice,t.readUIntLE=K.readUIntLE,t.readUIntBE=K.readUIntBE,t.readUInt8=K.readUInt8,t.readUInt16LE=K.readUInt16LE,t.readUInt16BE=K.readUInt16BE,t.readUInt32LE=K.readUInt32LE,t.readUInt32BE=K.readUInt32BE,t.readIntLE=K.readIntLE,t.readIntBE=K.readIntBE,t.readInt8=K.readInt8,t.readInt16LE=K.readInt16LE,t.readInt16BE=K.readInt16BE,t.readInt32LE=K.readInt32LE,t.readInt32BE=K.readInt32BE,t.readFloatLE=K.readFloatLE,t.readFloatBE=K.readFloatBE,t.readDoubleLE=K.readDoubleLE,t.readDoubleBE=K.readDoubleBE,t.writeUInt8=K.writeUInt8,t.writeUIntLE=K.writeUIntLE,t.writeUIntBE=K.writeUIntBE,t.writeUInt16LE=K.writeUInt16LE,t.writeUInt16BE=K.writeUInt16BE,t.writeUInt32LE=K.writeUInt32LE,t.writeUInt32BE=K.writeUInt32BE,t.writeIntLE=K.writeIntLE,t.writeIntBE=K.writeIntBE,t.writeInt8=K.writeInt8,t.writeInt16LE=K.writeInt16LE,t.writeInt16BE=K.writeInt16BE,t.writeInt32LE=K.writeInt32LE,t.writeInt32BE=K.writeInt32BE,t.writeFloatLE=K.writeFloatLE,t.writeFloatBE=K.writeFloatBE,t.writeDoubleLE=K.writeDoubleLE,t.writeDoubleBE=K.writeDoubleBE,t.fill=K.fill,t.inspect=K.inspect,t.toArrayBuffer=K.toArrayBuffer,t};var Q=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":89,ieee754:90,"is-array":91}],89:[function(t,e,i){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===s||e===h?62:e===a||e===p?63:l>e?-1:l+10>e?e-l+26+26:c+26>e?e-c:u+26>e?e-u+26:void 0}function i(t){function i(t){u[h++]=t}var n,o,s,a,l,u;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=t.length;l="="===t.charAt(c-2)?2:"="===t.charAt(c-1)?1:0,u=new r(3*t.length/4-l),s=l>0?t.length-4:t.length;var h=0;for(n=0,o=0;s>n;n+=4,o+=3)a=e(t.charAt(n))<<18|e(t.charAt(n+1))<<12|e(t.charAt(n+2))<<6|e(t.charAt(n+3)),i((16711680&a)>>16),i((65280&a)>>8),i(255&a);return 2===l?(a=e(t.charAt(n))<<2|e(t.charAt(n+1))>>4,i(255&a)):1===l&&(a=e(t.charAt(n))<<10|e(t.charAt(n+1))<<4|e(t.charAt(n+2))>>2,i(a>>8&255),i(255&a)),u}function o(t){function e(t){return n.charAt(t)}function i(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var o,r,s,a=t.length%3,l="";for(o=0,s=t.length-a;s>o;o+=3)r=(t[o]<<16)+(t[o+1]<<8)+t[o+2],l+=i(r);switch(a){case 1:r=t[t.length-1],l+=e(r>>2),l+=e(r<<4&63),l+="==";break;case 2:r=(t[t.length-2]<<8)+t[t.length-1],l+=e(r>>10),l+=e(r>>4&63),l+=e(r<<2&63),l+="="}return l}var r="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),l="0".charCodeAt(0),u="a".charCodeAt(0),c="A".charCodeAt(0),h="-".charCodeAt(0),p="_".charCodeAt(0);t.toByteArray=i,t.fromByteArray=o}("undefined"==typeof i?this.base64js={}:i)},{}],90:[function(t,e,i){i.read=function(t,e,i,n,o){var r,s,a=8*o-n-1,l=(1<<a)-1,u=l>>1,c=-7,h=i?o-1:0,p=i?-1:1,d=t[e+h];for(h+=p,r=d&(1<<-c)-1,d>>=-c,c+=a;c>0;r=256*r+t[e+h],h+=p,c-=8);for(s=r&(1<<-c)-1,r>>=-c,c+=n;c>0;s=256*s+t[e+h],h+=p,c-=8);if(0===r)r=1-u;else{if(r===l)return s?NaN:(d?-1:1)*(1/0);s+=Math.pow(2,n),r-=u}return(d?-1:1)*s*Math.pow(2,r-n)},i.write=function(t,e,i,n,o,r){var s,a,l,u=8*r-o-1,c=(1<<u)-1,h=c>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:r-1,f=n?1:-1,m=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),e+=s+h>=1?p/l:p*Math.pow(2,1-h),e*l>=2&&(s++,l/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(e*l-1)*Math.pow(2,o),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,o),s=0));o>=8;t[i+d]=255&a,d+=f,a/=256,o-=8);for(s=s<<o|a,u+=o;u>0;t[i+d]=255&s,d+=f,s/=256,u-=8);t[i+d-f]|=128*m}},{}],91:[function(t,e,i){var n=Array.isArray,o=Object.prototype.toString;e.exports=n||function(t){return!!t&&"[object Array]"==o.call(t)}},{}],92:[function(t,e,i){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},{}],93:[function(t,e,i){function n(){c=!1,a.length?u=a.concat(u):h=-1,u.length&&o()}function o(){if(!c){var t=setTimeout(n);c=!0;for(var e=u.length;e;){for(a=u,u=[];++h<e;)a&&a[h].run();h=-1,e=u.length}a=null,c=!1,clearTimeout(t)}}function r(t,e){this.fun=t,this.array=e}function s(){}var a,l=e.exports={},u=[],c=!1,h=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];u.push(new r(t,e)),1!==u.length||c||setTimeout(o,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=s,l.addListener=s,l.once=s,l.off=s,l.removeListener=s,l.removeAllListeners=s,l.emit=s,l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],94:[function(t,e,i){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],95:[function(t,e,i){(function(e,n){function o(t,e){var n={seen:[],stylize:s};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),m(e)?n.showHidden=e:e&&i._extend(n,e),_(n.showHidden)&&(n.showHidden=!1),_(n.depth)&&(n.depth=2),_(n.colors)&&(n.colors=!1),_(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=r),l(n,t,n.depth)}function r(t,e){var i=o.styles[e];return i?"["+o.colors[i][0]+"m"+t+"["+o.colors[i][1]+"m":t}function s(t,e){return t}function a(t){var e={};return t.forEach(function(t,i){e[t]=!0}),e}function l(t,e,n){if(t.customInspect&&e&&E(e.inspect)&&e.inspect!==i.inspect&&(!e.constructor||e.constructor.prototype!==e)){var o=e.inspect(n,t);return b(o)||(o=l(t,o,n)),o}var r=u(t,e);if(r)return r;var s=Object.keys(e),m=a(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),T(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return c(e);if(0===s.length){if(E(e)){var g=e.name?": "+e.name:"";return t.stylize("[Function"+g+"]","special")}if(w(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(k(e))return t.stylize(Date.prototype.toString.call(e),"date");if(T(e))return c(e)}var y="",v=!1,x=["{","}"];if(f(e)&&(v=!0,x=["[","]"]),E(e)){var _=e.name?": "+e.name:"";y=" [Function"+_+"]"}if(w(e)&&(y=" "+RegExp.prototype.toString.call(e)),k(e)&&(y=" "+Date.prototype.toUTCString.call(e)),T(e)&&(y=" "+c(e)),0===s.length&&(!v||0==e.length))return x[0]+y+x[1];if(0>n)return w(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var S;return S=v?h(t,e,n,m,s):s.map(function(i){return p(t,e,n,m,i,v)}),t.seen.pop(),d(S,y,x)}function u(t,e){if(_(e))return t.stylize("undefined","undefined");if(b(e)){var i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(i,"string")}return v(e)?t.stylize(""+e,"number"):m(e)?t.stylize(""+e,"boolean"):g(e)?t.stylize("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,i,n,o){for(var r=[],s=0,a=e.length;a>s;++s)D(e,String(s))?r.push(p(t,e,i,n,String(s),!0)):r.push("");
return o.forEach(function(o){o.match(/^\d+$/)||r.push(p(t,e,i,n,o,!0))}),r}function p(t,e,i,n,o,r){var s,a,u;if(u=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]},u.get?a=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(a=t.stylize("[Setter]","special")),D(n,o)||(s="["+o+"]"),a||(t.seen.indexOf(u.value)<0?(a=g(i)?l(t,u.value,null):l(t,u.value,i-1),a.indexOf("\n")>-1&&(a=r?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),_(s)){if(r&&o.match(/^\d+$/))return a;s=JSON.stringify(""+o),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function d(t,e,i){var n=0,o=t.reduce(function(t,e){return n++,e.indexOf("\n")>=0&&n++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return o>60?i[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+i[1]:i[0]+e+" "+t.join(", ")+" "+i[1]}function f(t){return Array.isArray(t)}function m(t){return"boolean"==typeof t}function g(t){return null===t}function y(t){return null==t}function v(t){return"number"==typeof t}function b(t){return"string"==typeof t}function x(t){return"symbol"==typeof t}function _(t){return void 0===t}function w(t){return S(t)&&"[object RegExp]"===C(t)}function S(t){return"object"==typeof t&&null!==t}function k(t){return S(t)&&"[object Date]"===C(t)}function T(t){return S(t)&&("[object Error]"===C(t)||t instanceof Error)}function E(t){return"function"==typeof t}function M(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function C(t){return Object.prototype.toString.call(t)}function A(t){return 10>t?"0"+t.toString(10):t.toString(10)}function R(){var t=new Date,e=[A(t.getHours()),A(t.getMinutes()),A(t.getSeconds())].join(":");return[t.getDate(),I[t.getMonth()],e].join(" ")}function D(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var z=/%[sdj%]/g;i.format=function(t){if(!b(t)){for(var e=[],i=0;i<arguments.length;i++)e.push(o(arguments[i]));return e.join(" ")}for(var i=1,n=arguments,r=n.length,s=String(t).replace(z,function(t){if("%%"===t)return"%";if(i>=r)return t;switch(t){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(e){return"[Circular]"}default:return t}}),a=n[i];r>i;a=n[++i])s+=g(a)||!S(a)?" "+a:" "+o(a);return s},i.deprecate=function(t,o){function r(){if(!s){if(e.throwDeprecation)throw new Error(o);e.traceDeprecation?console.trace(o):console.error(o),s=!0}return t.apply(this,arguments)}if(_(n.process))return function(){return i.deprecate(t,o).apply(this,arguments)};if(e.noDeprecation===!0)return t;var s=!1;return r};var L,P={};i.debuglog=function(t){if(_(L)&&(L=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!P[t])if(new RegExp("\\b"+t+"\\b","i").test(L)){var n=e.pid;P[t]=function(){var e=i.format.apply(i,arguments);console.error("%s %d: %s",t,n,e)}}else P[t]=function(){};return P[t]},i.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},i.isArray=f,i.isBoolean=m,i.isNull=g,i.isNullOrUndefined=y,i.isNumber=v,i.isString=b,i.isSymbol=x,i.isUndefined=_,i.isRegExp=w,i.isObject=S,i.isDate=k,i.isError=T,i.isFunction=E,i.isPrimitive=M,i.isBuffer=t("./support/isBuffer");var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];i.log=function(){console.log("%s - %s",R(),i.format.apply(i,arguments))},i.inherits=t("inherits"),i._extend=function(t,e){if(!e||!S(e))return t;for(var i=Object.keys(e),n=i.length;n--;)t[i[n]]=e[i[n]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":94,_process:93,inherits:92}],96:[function(t,e,i){!function(t){var e={};e.Constants={},e.Math={},e.Accumulator={},function(t){"use strict";t.WGS84={a:6378137,f:1/298.257223563},t.version={major:1,minor:45,patch:0},t.version_string="1.45"}(e.Constants),function(t){"use strict";t.digits=53,t.epsilon=Math.pow(.5,t.digits-1),t.degree=Math.PI/180,t.sq=function(t){return t*t},t.hypot=function(t,e){var i,n;return t=Math.abs(t),e=Math.abs(e),i=Math.max(t,e),n=Math.min(t,e)/(i?i:1),i*Math.sqrt(1+n*n)},t.cbrt=function(t){var e=Math.pow(Math.abs(t),1/3);return 0>t?-e:e},t.log1p=function(t){var e=1+t,i=e-1;return 0===i?t:t*Math.log(e)/i},t.atanh=function(e){var i=Math.abs(e);return i=t.log1p(2*i/(1-i))/2,0>e?-i:i},t.sum=function(t,e){var i,n=t+e,o=n-e,r=n-o;return o-=t,r-=e,i=-(o+r),{s:n,t:i}},t.polyval=function(t,e,i,n){for(var o=0>t?0:e[i++];--t>=0;)o=o*n+e[i++];return o},t.AngRound=function(t){var e=1/16,i=Math.abs(t);return i=e>i?e-(e-i):i,0>t?0-i:i},t.AngNormalize=function(t){return t%=360,-180>t?t+360:180>t?t:t-360},t.LatFix=function(t){return Math.abs(t)>90?Number.NaN:t},t.AngDiff=function(e,i){var n=t.sum(t.AngNormalize(e),t.AngNormalize(-i)),o=-t.AngNormalize(n.s),r=n.t;return(180==o&&0>r?-180:o)-r},t.sincosd=function(t){var e,i,n,o,r,s;switch(e=t%360,i=Math.floor(e/90+.5),e-=90*i,e*=this.degree,n=Math.sin(e),o=Math.cos(e),3&i){case 0:r=n,s=o;break;case 1:r=o,s=0-n;break;case 2:r=0-n,s=0-o;break;default:r=0-o,s=n}return{s:r,c:s}},t.atan2d=function(t,e){var i,n,o=0;switch(Math.abs(t)>Math.abs(e)&&(i=e,e=t,t=i,o=2),0>e&&(e=-e,++o),n=Math.atan2(t,e)/this.degree,o){case 1:n=(t>0?180:-180)-n;break;case 2:n=90-n;break;case 3:n=-90+n}return n}}(e.Math),function(t,e){"use strict";t.Accumulator=function(t){this.Set(t)},t.Accumulator.prototype.Set=function(e){e||(e=0),e.constructor===t.Accumulator?(this._s=e._s,this._t=e._t):(this._s=e,this._t=0)},t.Accumulator.prototype.Add=function(t){var i=e.sum(t,this._t),n=e.sum(i.s,this._s);i=i.t,this._s=n.s,this._t=n.t,0===this._s?this._s=i:this._t+=i},t.Accumulator.prototype.Sum=function(e){var i;return e?(i=new t.Accumulator(this),i.Add(e),i._s):this._s},t.Accumulator.prototype.Negate=function(){this._s*=-1,this._t*=-1}}(e.Accumulator,e.Math),e.Geodesic={},e.GeodesicLine={},e.PolygonArea={},function(t,e,i,n,o){"use strict";var r,s,a,l,u,c,h,p,d,f,m,g=6,y=g,v=g,b=g,x=b,_=20,w=_+n.digits+10,S=n.epsilon,k=200*S,T=Math.sqrt(S),E=S*k,M=1e3*T,C=0,A=31,R=32640;t.tiny_=Math.sqrt(Number.MIN_VALUE),t.nC1_=g,t.nC1p_=g,t.nC2_=g,t.nC3_=g,t.nC4_=g,r=t.nC3_*(t.nC3_-1)/2,s=t.nC4_*(t.nC4_+1)/2,t.CAP_C1=1,t.CAP_C1p=2,t.CAP_C2=4,t.CAP_C3=8,t.CAP_C4=16,t.NONE=0,t.LATITUDE=128|C,t.LONGITUDE=256|t.CAP_C3,t.AZIMUTH=512|C,t.DISTANCE=1024|t.CAP_C1,t.STANDARD=t.LATITUDE|t.LONGITUDE|t.AZIMUTH|t.DISTANCE,t.DISTANCE_IN=2048|t.CAP_C1|t.CAP_C1p,t.REDUCEDLENGTH=4096|t.CAP_C1|t.CAP_C2,t.GEODESICSCALE=8192|t.CAP_C1|t.CAP_C2,t.AREA=16384|t.CAP_C4,t.ALL=R|A,t.LONG_UNROLL=32768,t.OUT_MASK=R|t.LONG_UNROLL,t.SinCosSeries=function(t,e,i,n){var o=n.length,r=o-(t?1:0),s=2*(i-e)*(i+e),a=1&r?n[--o]:0,l=0;for(r=Math.floor(r/2);r--;)l=s*a-l+n[--o],a=s*l-a+n[--o];return t?2*e*i*a:i*(a-l)},a=function(t,e){var i,o,r,s,a,l,u,c,h,p,d,f,m=n.sq(t),g=n.sq(e),y=(m+g-1)/6;return 0===g&&0>=y?i=0:(o=m*g/4,r=n.sq(y),s=y*r,a=o*(o+2*s),l=y,a>=0?(u=o+s,u+=0>u?-Math.sqrt(a):Math.sqrt(a),c=n.cbrt(u),l+=c+(0!==c?r/c:0)):(h=Math.atan2(Math.sqrt(-a),-(o+s)),l+=2*y*Math.cos(h/3)),p=Math.sqrt(n.sq(l)+g),d=0>l?g/(p-l):l+p,f=(d-g)/(2*p),i=d/(Math.sqrt(d+n.sq(f))+f)),i},l=[1,4,64,0,256],t.A1m1f=function(t){var e=Math.floor(y/2),i=n.polyval(e,l,0,n.sq(t))/l[e+1];return(i+t)/(1-t)},u=[-1,6,-16,32,-9,64,-128,2048,9,-16,768,3,-5,512,-7,1280,-7,2048],t.C1f=function(e,i){var o,r,s=n.sq(e),a=e,l=0;for(o=1;o<=t.nC1_;++o)r=Math.floor((t.nC1_-o)/2),i[o]=a*n.polyval(r,u,l,s)/u[l+r+1],l+=r+2,a*=e},c=[205,-432,768,1536,4005,-4736,3840,12288,-225,116,384,-7173,2695,7680,3467,7680,38081,61440],t.C1pf=function(e,i){var o,r,s=n.sq(e),a=e,l=0;for(o=1;o<=t.nC1p_;++o)r=Math.floor((t.nC1p_-o)/2),i[o]=a*n.polyval(r,c,l,s)/c[l+r+1],l+=r+2,a*=e},h=[-11,-28,-192,0,256],t.A2m1f=function(t){var e=Math.floor(v/2),i=n.polyval(e,h,0,n.sq(t))/h[e+1];return(i-t)/(1+t)},p=[1,2,16,32,35,64,384,2048,15,80,768,7,35,512,63,1280,77,2048],t.C2f=function(e,i){var o,r,s=n.sq(e),a=e,l=0;for(o=1;o<=t.nC2_;++o)r=Math.floor((t.nC2_-o)/2),i[o]=a*n.polyval(r,p,l,s)/p[l+r+1],l+=r+2,a*=e},t.Geodesic=function(t,e){if(this.a=t,this.f=e,this._f1=1-this.f,this._e2=this.f*(2-this.f),this._ep2=this._e2/n.sq(this._f1),this._n=this.f/(2-this.f),this._b=this.a*this._f1,this._c2=(n.sq(this.a)+n.sq(this._b)*(0===this._e2?1:(this._e2>0?n.atanh(Math.sqrt(this._e2)):Math.atan(Math.sqrt(-this._e2)))/Math.sqrt(Math.abs(this._e2))))/2,this._etol2=.1*T/Math.sqrt(Math.max(.001,Math.abs(this.f))*Math.min(1,1-this.f/2)/2),!(isFinite(this.a)&&this.a>0))throw new Error("Major radius is not positive");if(!(isFinite(this._b)&&this._b>0))throw new Error("Minor radius is not positive");this._A3x=new Array(x),this._C3x=new Array(r),this._C4x=new Array(s),this.A3coeff(),this.C3coeff(),this.C4coeff()},d=[-3,128,-2,-3,64,-1,-3,-1,16,3,-1,-2,8,1,-1,2,1,1],t.Geodesic.prototype.A3coeff=function(){var t,e,i=0,o=0;for(t=b-1;t>=0;--t)e=Math.min(b-t-1,t),this._A3x[o++]=n.polyval(e,d,i,this._n)/d[i+e+1],i+=e+2},f=[3,128,2,5,128,-1,3,3,64,-1,0,1,8,-1,1,4,5,256,1,3,128,-3,-2,3,64,1,-3,2,32,7,512,-10,9,384,5,-9,5,192,7,512,-14,7,512,21,2560],t.Geodesic.prototype.C3coeff=function(){var e,i,o,r=0,s=0;for(e=1;e<t.nC3_;++e)for(i=t.nC3_-1;i>=e;--i)o=Math.min(t.nC3_-i-1,i),this._C3x[s++]=n.polyval(o,f,r,this._n)/f[r+o+1],r+=o+2},m=[97,15015,1088,156,45045,-224,-4784,1573,45045,-10656,14144,-4576,-858,45045,64,624,-4576,6864,-3003,15015,100,208,572,3432,-12012,30030,45045,1,9009,-2944,468,135135,5792,1040,-1287,135135,5952,-11648,9152,-2574,135135,-64,-624,4576,-6864,3003,135135,8,10725,1856,-936,225225,-8448,4992,-1144,225225,-1440,4160,-4576,1716,225225,-136,63063,1024,-208,105105,3584,-3328,1144,315315,-128,135135,-2560,832,405405,128,99099],t.Geodesic.prototype.C4coeff=function(){var e,i,o,r=0,s=0;for(e=0;e<t.nC4_;++e)for(i=t.nC4_-1;i>=e;--i)o=t.nC4_-i-1,this._C4x[s++]=n.polyval(o,m,r,this._n)/m[r+o+1],r+=o+2},t.Geodesic.prototype.A3f=function(t){return n.polyval(x-1,this._A3x,0,t)},t.Geodesic.prototype.C3f=function(e,i){var o,r,s=1,a=0;for(o=1;o<t.nC3_;++o)r=t.nC3_-o-1,s*=e,i[o]=s*n.polyval(r,this._C3x,a,e),a+=r+1},t.Geodesic.prototype.C4f=function(e,i){var o,r,s=1,a=0;for(o=0;o<t.nC4_;++o)r=t.nC4_-o-1,i[o]=s*n.polyval(r,this._C4x,a,e),a+=r+1,s*=e},t.Geodesic.prototype.Lengths=function(e,i,n,o,r,s,a,l,u,c,h,p,d){h&=t.OUT_MASK;var f,m,g,y,v,b={},x=0,_=0,w=0,S=0;if(h&(t.DISTANCE|t.REDUCEDLENGTH|t.GEODESICSCALE)&&(w=t.A1m1f(e),t.C1f(e,p),h&(t.REDUCEDLENGTH|t.GEODESICSCALE)&&(S=t.A2m1f(e),t.C2f(e,d),x=w-S,S=1+S),w=1+w),h&t.DISTANCE)f=t.SinCosSeries(!0,s,a,p)-t.SinCosSeries(!0,n,o,p),b.s12b=w*(i+f),h&(t.REDUCEDLENGTH|t.GEODESICSCALE)&&(m=t.SinCosSeries(!0,s,a,d)-t.SinCosSeries(!0,n,o,d),_=x*i+(w*f-S*m));else if(h&(t.REDUCEDLENGTH|t.GEODESICSCALE)){for(g=1;g<=t.nC2_;++g)d[g]=w*p[g]-S*d[g];_=x*i+(t.SinCosSeries(!0,s,a,d)-t.SinCosSeries(!0,n,o,d))}return h&t.REDUCEDLENGTH&&(b.m0=x,b.m12b=l*(o*s)-r*(n*a)-o*a*_),h&t.GEODESICSCALE&&(y=o*a+n*s,v=this._ep2*(u-c)*(u+c)/(r+l),b.M12=y+(v*s-a*_)*n/r,b.M21=y-(v*n-o*_)*s/l),b},t.Geodesic.prototype.InverseStart=function(e,i,o,r,s,l,u,c,h){var p,d,f,m,g,y,v,b,x,_,w,S,T,E,C,A,R,D,z,L,P,I,N={},O=r*i-s*e,j=s*i+r*e;return N.sig12=-1,p=r*i,p+=s*e,d=j>=0&&.5>O&&.5>s*u,f=u,d&&(m=n.sq(e+r),m/=m+n.sq(i+s),N.dnm=Math.sqrt(1+this._ep2*m),f/=this._f1*N.dnm),g=Math.sin(f),y=Math.cos(f),N.salp1=s*g,N.calp1=y>=0?O+s*e*n.sq(g)/(1+y):p-s*e*n.sq(g)/(1-y),b=n.hypot(N.salp1,N.calp1),x=e*r+i*s*y,d&&b<this._etol2?(N.salp2=i*g,N.calp2=O-i*r*(y>=0?n.sq(g)/(1+y):1-y),v=n.hypot(N.salp2,N.calp2),N.salp2/=v,N.calp2/=v,N.sig12=Math.atan2(b,x)):Math.abs(this._n)>.1||x>=0||b>=6*Math.abs(this._n)*Math.PI*n.sq(i)||(this.f>=0?(E=n.sq(e)*this._ep2,C=E/(2*(1+Math.sqrt(1+E))+E),S=this.f*i*this.A3f(C)*Math.PI,T=S*i,_=(u-Math.PI)/S,w=p/T):(A=s*i-r*e,R=Math.atan2(p,A),L=this.Lengths(this._n,Math.PI+R,e,-i,o,r,s,l,i,s,t.REDUCEDLENGTH,c,h),D=L.m12b,z=L.m0,_=-1+D/(i*s*z*Math.PI),T=-.01>_?p/_:-this.f*n.sq(i)*Math.PI,S=T/i,w=(u-Math.PI)/S),w>-k&&_>-1-M?this.f>=0?(N.salp1=Math.min(1,-_),N.calp1=-Math.sqrt(1-n.sq(N.salp1))):(N.calp1=Math.max(_>-k?0:-1,_),N.salp1=Math.sqrt(1-n.sq(N.calp1))):(P=a(_,w),I=S*(this.f>=0?-_*P/(1+P):-w*(1+P)/P),g=Math.sin(I),y=-Math.cos(I),N.salp1=s*g,N.calp1=p-s*e*n.sq(g)/(1-y))),N.salp1<=0?(N.salp1=1,N.calp1=0):(v=n.hypot(N.salp1,N.calp1),N.salp1/=v,N.calp1/=v),N},t.Geodesic.prototype.Lambda12=function(e,i,o,r,s,a,l,u,c,h,p,d){var f,m,g,y,v,b,x,_,w,S,k,T,E={};return 0===e&&0===u&&(u=-t.tiny_),m=l*i,g=n.hypot(u,l*e),E.ssig1=e,y=m*e,E.csig1=v=u*i,f=n.hypot(E.ssig1,E.csig1),E.ssig1/=f,E.csig1/=f,E.salp2=s!==i?m/s:l,E.calp2=s!==i||Math.abs(r)!==-e?Math.sqrt(n.sq(u*i)+(-e>i?(s-i)*(i+s):(e-r)*(e+r)))/s:Math.abs(u),E.ssig2=r,b=m*r,E.csig2=x=E.calp2*s,f=n.hypot(E.ssig2,E.csig2),E.ssig2/=f,E.csig2/=f,E.sig12=Math.atan2(Math.max(0,E.csig1*E.ssig2-E.ssig1*E.csig2),E.csig1*E.csig2+E.ssig1*E.ssig2),_=Math.atan2(Math.max(0,v*b-y*x),v*x+y*b),k=n.sq(g)*this._ep2,E.eps=k/(2*(1+Math.sqrt(1+k))+k),this.C3f(E.eps,d),w=t.SinCosSeries(!0,E.ssig2,E.csig2,d)-t.SinCosSeries(!0,E.ssig1,E.csig1,d),S=-this.f*this.A3f(E.eps),E.domg12=m*S*(E.sig12+w),E.lam12=_+E.domg12,c&&(0===E.calp2?E.dlam12=-2*this._f1*o/e:(T=this.Lengths(E.eps,E.sig12,E.ssig1,E.csig1,o,E.ssig2,E.csig2,a,i,s,t.REDUCEDLENGTH,h,p),E.dlam12=T.m12b,E.dlam12*=this._f1/(E.calp2*s))),E},t.Geodesic.prototype.Inverse=function(e,i,o,r,s){var a,l,u,c,h,p,d,f,m,g,y,v,b,x,k,T,M,C,A,R,D,z,L,P,I,N,O,j,U,B,F,q,$,H,Y,G,W,V,X,Z,J,K,Q,tt,et,it,nt,ot,rt,st,at,lt,ut,ct,ht,pt,dt,ft,mt,gt,yt,vt={};if(s||(s=t.STANDARD),s==t.LONG_UNROLL&&(s|=t.STANDARD),s&=t.OUT_MASK,vt.lat1=e=n.LatFix(e),vt.lat2=o=n.LatFix(o),a=n.AngDiff(i,r),s&t.LONG_UNROLL?(vt.lon1=i,vt.lon2=i+a):(vt.lon1=n.AngNormalize(i),vt.lon2=n.AngNormalize(r)),a=n.AngRound(a),l=a>=0?1:-1,a*=l,e=n.AngRound(e),o=n.AngRound(o),c=Math.abs(e)<Math.abs(o)?-1:1,0>c&&(l*=-1,u=e,e=o,o=u),h=0>e?1:-1,e*=h,o*=h,u=n.sincosd(e),p=this._f1*u.s,d=u.c,u=n.hypot(p,d),p/=u,d/=u,d=Math.max(t.tiny_,d),u=n.sincosd(o),f=this._f1*u.s,m=u.c,u=n.hypot(f,m),f/=u,m/=u,m=Math.max(t.tiny_,m),-p>d?m===d&&(f=0>f?p:-p):Math.abs(f)===-p&&(m=d),v=Math.sqrt(1+this._ep2*n.sq(p)),b=Math.sqrt(1+this._ep2*n.sq(f)),x=a*n.degree,u=n.sincosd(a),k=u.s,T=u.c,z=new Array(t.nC1_+1),L=new Array(t.nC2_+1),P=new Array(t.nC3_),I=-90===e||0===k,I&&(C=T,A=k,R=1,D=0,O=p,j=C*d,U=f,B=R*m,M=Math.atan2(Math.max(0,j*U-O*B),j*B+O*U),N=this.Lengths(this._n,M,O,j,v,U,B,b,d,m,s|t.DISTANCE|t.REDUCEDLENGTH,z,L),g=N.s12b,y=N.m12b,0!==(s&t.GEODESICSCALE)&&(vt.M12=N.M12,vt.M21=N.M21),1>M||y>=0?(M<3*t.tiny_&&(M=y=g=0),y*=this._b,g*=this._b,vt.a12=M/n.degree):I=!1),!I&&0===p&&(this.f<=0||x<=Math.PI-this.f*Math.PI))C=R=0,A=D=1,g=this.a*x,M=q=x/this._f1,y=this._b*Math.sin(M),s&t.GEODESICSCALE&&(vt.M12=vt.M21=Math.cos(M)),vt.a12=a/this._f1;else if(!I)if(N=this.InverseStart(p,d,v,f,m,b,x,z,L),M=N.sig12,A=N.salp1,C=N.calp1,M>=0)D=N.salp2,R=N.calp2,$=N.dnm,g=M*this._b*$,y=n.sq($)*this._b*Math.sin(M/$),s&t.GEODESICSCALE&&(vt.M12=vt.M21=Math.cos(M/$)),vt.a12=M/n.degree,q=x/(this._f1*$);else{for(H=0,Y=t.tiny_,G=1,W=t.tiny_,V=-1,X=!1,Z=!1;w>H&&(N=this.Lambda12(p,d,v,f,m,b,A,C,_>H,z,L,P),J=N.lam12-x,D=N.salp2,R=N.calp2,M=N.sig12,O=N.ssig1,j=N.csig1,U=N.ssig2,B=N.csig2,F=N.eps,q=N.domg12,K=N.dlam12,!Z&&Math.abs(J)>=(X?8:2)*S);++H)J>0&&(_>H||C/A>V/W)?(W=A,V=C):0>J&&(_>H||G/Y>C/A)&&(Y=A,G=C),_>H&&K>0&&(Q=-J/K,tt=Math.sin(Q),et=Math.cos(Q),it=A*et+C*tt,it>0&&Math.abs(Q)<Math.PI)?(C=C*et-A*tt,A=it,u=n.hypot(A,C),A/=u,C/=u,X=Math.abs(J)<=16*S):(A=(Y+W)/2,C=(G+V)/2,u=n.hypot(A,C),A/=u,C/=u,X=!1,Z=Math.abs(Y-A)+(G-C)<E||Math.abs(A-W)+(C-V)<E);nt=s|(s&(t.REDUCEDLENGTH|t.GEODESICSCALE)?t.DISTANCE:t.NONE),N=this.Lengths(F,M,O,j,v,U,B,b,d,m,nt,z,L),g=N.s12b,y=N.m12b,0!==(s&t.GEODESICSCALE)&&(vt.M12=N.M12,vt.M21=N.M21),y*=this._b,g*=this._b,vt.a12=M/n.degree,q=x-q}return s&t.DISTANCE&&(vt.s12=0+g),s&t.REDUCEDLENGTH&&(vt.m12=0+y),s&t.AREA&&(ot=A*d,rt=n.hypot(C,A*p),0!==rt&&0!==ot?(O=p,j=C*d,U=f,B=R*m,at=n.sq(rt)*this._ep2,F=at/(2*(1+Math.sqrt(1+at))+at),lt=n.sq(this.a)*rt*ot*this._e2,u=n.hypot(O,j),O/=u,j/=u,u=n.hypot(U,B),U/=u,B/=u,ut=new Array(t.nC4_),this.C4f(F,ut),ct=t.SinCosSeries(!1,O,j,ut),ht=t.SinCosSeries(!1,U,B,ut),vt.S12=lt*(ht-ct)):vt.S12=0,!I&&q<.75*Math.PI&&1.75>f-p?(pt=Math.sin(q),dt=1+Math.cos(q),ft=1+d,mt=1+m,st=2*Math.atan2(pt*(p*mt+f*ft),dt*(p*f+ft*mt))):(gt=D*C-R*A,yt=R*C+D*A,0===gt&&0>yt&&(gt=t.tiny_*C,yt=-1),st=Math.atan2(gt,yt)),vt.S12+=this._c2*st,vt.S12*=c*l*h,vt.S12+=0),0>c&&(u=A,A=D,D=u,u=C,C=R,R=u,s&t.GEODESICSCALE&&(u=vt.M12,vt.M12=vt.M21,vt.M21=u)),A*=c*l,C*=c*h,D*=c*l,R*=c*h,s&t.AZIMUTH&&(vt.azi1=n.atan2d(A,C),vt.azi2=n.atan2d(D,R)),vt},t.Geodesic.prototype.GenDirect=function(i,n,o,r,s,a){var l;return a?a==t.LONG_UNROLL&&(a|=t.STANDARD):a=t.STANDARD,l=new e.GeodesicLine(this,i,n,o,a|(r?t.NONE:t.DISTANCE_IN)),l.GenPosition(r,s,a)},t.Geodesic.prototype.Direct=function(t,e,i,n,o){return this.GenDirect(t,e,i,!1,n,o)},t.Geodesic.prototype.ArcDirect=function(t,e,i,n,o){return this.GenDirect(t,e,i,!0,n,o)},t.Geodesic.prototype.Line=function(t,i,n,o){return new e.GeodesicLine(this,t,i,n,o)},t.Geodesic.prototype.Polygon=function(t){return new i.PolygonArea(this,t)},t.WGS84=new t.Geodesic(o.WGS84.a,o.WGS84.f)}(e.Geodesic,e.GeodesicLine,e.PolygonArea,e.Math,e.Constants),function(t,e,i){"use strict";e.GeodesicLine=function(e,n,o,r,s){var a,l,u,c,h,p;s||(s=t.STANDARD|t.DISTANCE_IN),this.a=e.a,this.f=e.f,this._b=e._b,this._c2=e._c2,this._f1=e._f1,this._caps=(s?s|t.LATITUDE|t.AZIMUTH:t.ALL)|t.LONG_UNROLL,this.lat1=i.LatFix(n),this.lon1=o,this.azi1=i.AngNormalize(r),a=i.sincosd(i.AngRound(this.azi1)),this._salp1=a.s,this._calp1=a.c,a=i.sincosd(i.AngRound(this.lat1)),u=this._f1*a.s,l=a.c,a=i.hypot(u,l),u/=a,l/=a,l=Math.max(t.tiny_,l),this._dn1=Math.sqrt(1+e._ep2*i.sq(u)),this._salp0=this._salp1*l,this._calp0=i.hypot(this._calp1,this._salp1*u),this._ssig1=u,this._somg1=this._salp0*u,this._csig1=this._comg1=0!==u||0!==this._calp1?l*this._calp1:1,a=i.hypot(this._ssig1,this._csig1),this._ssig1/=a,this._csig1/=a,this._k2=i.sq(this._calp0)*e._ep2,c=this._k2/(2*(1+Math.sqrt(1+this._k2))+this._k2),this._caps&t.CAP_C1&&(this._A1m1=t.A1m1f(c),this._C1a=new Array(t.nC1_+1),t.C1f(c,this._C1a),this._B11=t.SinCosSeries(!0,this._ssig1,this._csig1,this._C1a),h=Math.sin(this._B11),p=Math.cos(this._B11),this._stau1=this._ssig1*p+this._csig1*h,this._ctau1=this._csig1*p-this._ssig1*h),this._caps&t.CAP_C1p&&(this._C1pa=new Array(t.nC1p_+1),t.C1pf(c,this._C1pa)),this._caps&t.CAP_C2&&(this._A2m1=t.A2m1f(c),this._C2a=new Array(t.nC2_+1),t.C2f(c,this._C2a),this._B21=t.SinCosSeries(!0,this._ssig1,this._csig1,this._C2a)),this._caps&t.CAP_C3&&(this._C3a=new Array(t.nC3_),e.C3f(c,this._C3a),this._A3c=-this.f*this._salp0*e.A3f(c),this._B31=t.SinCosSeries(!0,this._ssig1,this._csig1,this._C3a)),this._caps&t.CAP_C4&&(this._C4a=new Array(t.nC4_),e.C4f(c,this._C4a),this._A4=i.sq(this.a)*this._calp0*this._salp0*e._e2,this._B41=t.SinCosSeries(!1,this._ssig1,this._csig1,this._C4a))},e.GeodesicLine.prototype.GenPosition=function(e,n,o){var r,s,a,l,u,c,h,p,d,f,m,g,y,v,b,x,_,w,S,k,T,E,M,C,A,R,D,z,L,P={};return o?o==t.LONG_UNROLL&&(o|=t.STANDARD):o=t.STANDARD,o&=this._caps&t.OUT_MASK,P.lat1=this.lat1,P.azi1=this.azi1,P.lon1=o&t.LONG_UNROLL?this.lon1:i.AngNormalize(this.lon1),e?P.a12=n:P.s12=n,e||this._caps&t.DISTANCE_IN&t.OUT_MASK?(l=0,u=0,e?(r=n*i.degree,R=i.sincosd(n),s=R.s,a=R.c):(p=n/(this._b*(1+this._A1m1)),d=Math.sin(p),f=Math.cos(p),l=-t.SinCosSeries(!0,this._stau1*f+this._ctau1*d,this._ctau1*f-this._stau1*d,this._C1pa),r=p-(l-this._B11),s=Math.sin(r),a=Math.cos(r),Math.abs(this.f)>.01&&(c=this._ssig1*a+this._csig1*s,h=this._csig1*a-this._ssig1*s,l=t.SinCosSeries(!0,c,h,this._C1a),m=(1+this._A1m1)*(r+(l-this._B11))-n/this._b,r-=m/Math.sqrt(1+this._k2*i.sq(c)),s=Math.sin(r),a=Math.cos(r))),c=this._ssig1*a+this._csig1*s,h=this._csig1*a-this._ssig1*s,E=Math.sqrt(1+this._k2*i.sq(c)),o&(t.DISTANCE|t.REDUCEDLENGTH|t.GEODESICSCALE)&&((e||Math.abs(this.f)>.01)&&(l=t.SinCosSeries(!0,c,h,this._C1a)),u=(1+this._A1m1)*(l-this._B11)),x=this._calp0*c,_=i.hypot(this._salp0,this._calp0*h),0===_&&(_=h=t.tiny_),k=this._salp0,T=this._calp0*h,e&&o&t.DISTANCE&&(P.s12=this._b*((1+this._A1m1)*r+u)),o&t.LONGITUDE&&(w=this._salp0*c,S=h,b=this._salp0<0?-1:1,g=o&t.LONG_UNROLL?b*(r-(Math.atan2(c,h)-Math.atan2(this._ssig1,this._csig1))+(Math.atan2(b*w,S)-Math.atan2(b*this._somg1,this._comg1))):Math.atan2(w*this._comg1-S*this._somg1,S*this._comg1+w*this._somg1),y=g+this._A3c*(r+(t.SinCosSeries(!0,c,h,this._C3a)-this._B31)),v=y/i.degree,P.lon2=o&t.LONG_UNROLL?this.lon1+v:i.AngNormalize(i.AngNormalize(this.lon1)+i.AngNormalize(v))),o&t.LATITUDE&&(P.lat2=i.atan2d(x,this._f1*_)),o&t.AZIMUTH&&(P.azi2=i.atan2d(k,T)),o&(t.REDUCEDLENGTH|t.GEODESICSCALE)&&(M=t.SinCosSeries(!0,c,h,this._C2a),C=(1+this._A2m1)*(M-this._B21),A=(this._A1m1-this._A2m1)*r+(u-C),o&t.REDUCEDLENGTH&&(P.m12=this._b*(E*(this._csig1*c)-this._dn1*(this._ssig1*h)-this._csig1*h*A)),o&t.GEODESICSCALE&&(R=this._k2*(c-this._ssig1)*(c+this._ssig1)/(this._dn1+E),P.M12=a+(R*c-h*A)*this._ssig1/this._dn1,P.M21=a-(R*this._ssig1-this._csig1*A)*c/E)),o&t.AREA&&(D=t.SinCosSeries(!1,c,h,this._C4a),0===this._calp0||0===this._salp0?(z=k*this._calp1-T*this._salp1,L=T*this._calp1+k*this._salp1,0===z&&0>L&&(z=t.tiny_*this._calp1,L=-1)):(z=this._calp0*this._salp0*(0>=a?this._csig1*(1-a)+s*this._ssig1:s*(this._csig1*s/(1+a)+this._ssig1)),L=i.sq(this._salp0)+i.sq(this._calp0)*this._csig1*h),P.S12=this._c2*Math.atan2(z,L)+this._A4*(D-this._B41)),e||(P.a12=r/i.degree),P):(P.a12=Number.NaN,P)},e.GeodesicLine.prototype.Position=function(t,e){return this.GenPosition(!1,t,e)},e.GeodesicLine.prototype.ArcPosition=function(t,e){return this.GenPosition(!0,t,e)}}(e.Geodesic,e.GeodesicLine,e.Math),function(t,e,i,n){"use strict";var o,r;o=function(t,e){var n,o;return t=i.AngNormalize(t),e=i.AngNormalize(e),n=i.AngDiff(t,e),o=0>t&&e>=0&&n>0?1:0>e&&t>=0&&0>n?-1:0},r=function(t,e){return t%=720,e%=720,(e>=0&&360>e||-360>e?0:1)-(t>=0&&360>t||-360>t?0:1)},t.PolygonArea=function(t,i){this._geod=t,this.a=this._geod.a,this.f=this._geod.f,this._area0=4*Math.PI*t._c2,this.polyline=i?i:!1,this._mask=e.LATITUDE|e.LONGITUDE|e.DISTANCE|(this.polyline?e.NONE:e.AREA|e.LONG_UNROLL),this.polyline||(this._areasum=new n.Accumulator(0)),this._perimetersum=new n.Accumulator(0),this.Clear()},t.PolygonArea.prototype.Clear=function(){this.num=0,this._crossings=0,this.polyline||this._areasum.Set(0),this._perimetersum.Set(0),this._lat0=this._lon0=this.lat=this.lon=Number.NaN},t.PolygonArea.prototype.AddPoint=function(t,e){var i;0===this.num?(this._lat0=this.lat=t,this._lon0=this.lon=e):(i=this._geod.Inverse(this.lat,this.lon,t,e,this._mask),this._perimetersum.Add(i.s12),this.polyline||(this._areasum.Add(i.S12),this._crossings+=o(this.lon,e)),this.lat=t,this.lon=e),++this.num},t.PolygonArea.prototype.AddEdge=function(t,e){var i;this.num&&(i=this._geod.Direct(this.lat,this.lon,t,e,this._mask),this._perimetersum.Add(e),this.polyline||(this._areasum.Add(i.S12),this._crossings+=r(this.lon,i.lon2)),this.lat=i.lat2,this.lon=i.lon2),++this.num},t.PolygonArea.prototype.Compute=function(t,e){var i,r,s,a={number:this.num};return this.num<2?(a.perimeter=0,this.polyline||(a.area=0),a):this.polyline?(a.perimeter=this._perimetersum.Sum(),a):(i=this._geod.Inverse(this.lat,this.lon,this._lat0,this._lon0,this._mask),a.perimeter=this._perimetersum.Sum(i.s12),r=new n.Accumulator(this._areasum),r.Add(i.S12),s=this._crossings+o(this.lon,this._lon0),1&s&&r.Add((r.Sum()<0?1:-1)*this._area0/2),t||r.Negate(),e?r.Sum()>this._area0/2?r.Add(-this._area0):r.Sum()<=-this._area0/2&&r.Add(+this._area0):r.Sum()>=this._area0?r.Add(-this._area0):0>r&&r.Add(-this._area0),a.area=r.Sum(),a)},t.PolygonArea.prototype.TestPoint=function(t,e,i,n){var r,s,a,l,u={number:this.num+1};if(0===this.num)return u.perimeter=0,this.polyline||(u.area=0),u;for(u.perimeter=this._perimetersum.Sum(),s=this.polyline?0:this._areasum.Sum(),a=this._crossings,l=0;l<(this.polyline?1:2);++l)r=this._geod.Inverse(0===l?this.lat:t,0===l?this.lon:e,0!==l?this._lat0:t,0!==l?this._lon0:e,this._mask),u.perimeter+=r.s12,this.polyline||(s+=r.S12,a+=o(0===l?this.lon:e,0!==l?this._lon0:e));return this.polyline?u:(1&a&&(s+=(0>s?1:-1)*this._area0/2),i||(s*=-1),n?s>this._area0/2?s-=this._area0:s<=-this._area0/2&&(s+=this._area0):s>=this._area0?s-=this._area0:0>s&&(s+=this._area0),u.area=s,u)},t.PolygonArea.prototype.TestEdge=function(t,e,i,n){var s,a,l={number:this.num?this.num+1:0};return 0===this.num?l:(l.perimeter=this._perimetersum.Sum()+e,this.polyline?l:(tempsum=this._areasum.Sum(),a=this._crossings,s=this._geod.Direct(this.lat,this.lon,t,e,this._mask),tempsum+=s.S12,a+=r(this.lon,s.lon2),s=this._geod(s.lat2,s.lon2,this._lat0,this._lon0,this._mask),perimeter+=s.s12,tempsum+=s.S12,a+=o(s.lon2,this._lon0),1&a&&(tempsum+=(tempsum<0?1:-1)*this._area0/2),i||(tempsum*=-1),n?tempsum>this._area0/2?tempsum-=this._area0:tempsum<=-this._area0/2&&(tempsum+=this._area0):tempsum>=this._area0?tempsum-=this._area0:tempsum<0&&(tempsum+=this._area0),l.area=tempsum,l))}}(e.PolygonArea,e.Geodesic,e.Math,e.Accumulator),e.DMS={},function(t){"use strict";var e,i,n,o,r="SNWE",s="-+",a="0123456789",l="D'\":",u="°'\"",c=["degrees","minutes","seconds"];e=function(t,e){return t.indexOf(e.toUpperCase())},i=function(t,e){return String("0000").substr(0,Math.max(0,Math.min(4,e-t.length)))+t},t.NONE=0,t.LATITUDE=1,t.LONGITUDE=2,t.AZIMUTH=3,t.DEGREE=0,t.MINUTE=1,t.SECOND=2,t.Decode=function(i){var o,a,l,u,c,h,p,d,f=i,m=0,g=0,y=t.NONE;for(f=f.replace(/\u00b0/g,"d").replace(/\u00ba/g,"d").replace(/\u2070/g,"d").replace(/\u02da/g,"d").replace(/\u2032/g,"'").replace(/\u00b4/g,"'").replace(/\u2019/g,"'").replace(/\u2033/g,'"').replace(/\u201d/g,'"').replace(/\u2212/g,"-").replace(/''/g,'"').trim(),o=f.length,h=0;o>h;h=d,++g)if(p=h,0===g&&e(r,f.charAt(p))>=0&&++p,(g>0||o>p&&e(s,f.charAt(p))>=0)&&++p,a=f.substr(p,o-p).indexOf("-"),l=f.substr(p,o-p).indexOf("+"),0>a?a=o:a+=p,0>l?l=o:l+=p,d=Math.min(a,l),u=n(f.substr(h,d-h)),m+=u.val,c=u.ind,y==t.NONE)y=c;else if(c!=t.NONE&&y!=c)throw new Error("Incompatible hemisphere specifies in "+f.substr(0,d));if(0===g)throw new Error("Empty or incomplete DMS string "+f);return{val:m,ind:y}},n=function(i){var n,u,h,p,d,f,m,g,y,v,b,x,_,w,S,k,T={},E="";do{if(n=1,u=0,h=i.length,p=t.NONE,d=-1,h>u&&(d=e(r,i.charAt(u)))>=0&&(p=2&d?t.LONGITUDE:t.LATITUDE,n=1&d?1:-1,++u),h>u&&(d=e(r,i.charAt(h-1)))>=0&&d>=0){if(p!==t.NONE){E=i.charAt(u-1).toUpperCase()===i.charAt(h-1).toUpperCase()?"Repeated hemisphere indicators "+i.charAt(u-1)+" in "+i.substr(u-1,h-u+1):"Contradictory hemisphere indicators "+i.charAt(u-1)+" and "+i.charAt(h-1)+" in "+i.substr(u-1,h-u+1);break}p=2&d?t.LONGITUDE:t.LATITUDE,n=1&d?1:-1,--h}if(h>u&&(d=e(s,i.charAt(u)))>=0&&d>=0&&(n*=d?1:-1,++u),h===u){E="Empty or incomplete DMS string "+i;break}for(f=[0,0,0],m=[0,0,0],g=0,y=0,v=0,b=0,x=u,_=!1,w=0,S=0;h>x;)if(k=i.charAt(x++),(d=e(a,k))>=0)++b,w>0?++w:(y=10*y+d,++S);else if("."===k){if(_){E="Multiple decimal points in "+i.substr(u,h-u);break}_=!0,w=1}else{if(!((d=e(l,k))>=0)){if(e(s,k)>=0){E="Internal sign in DMS string "+i.substr(u,h-u);break}E="Illegal character "+k+" in DMS string "+i.substr(u,h-u);break}if(d>=3){if(x===h){E="Illegal for colon to appear at the end of "+i.substr(u,h-u);break}d=g}if(d===g-1){E="Repeated "+c[d]+" component in "+i.substr(u,h-u);break}if(g>d){E=c[d]+" component follows "+c[g-1]+" component in "+i.substr(u,h-u);break}if(0===b){E="Missing numbers in "+c[d]+" component of "+i.substr(u,h-u);break}w>0&&(v=parseFloat(i.substr(x-S-w-1,S+w)),y=0),f[d]=y,m[d]=y+v,h>x&&(g=d+1,y=v=0,b=w=S=0)}if(E.length)break;if(e(l,i.charAt(x-1))<0){if(g>=3){E="Extra text following seconds in DMS string "+i.substr(u,h-u);break}if(0===b){E="Missing numbers in trailing component of "+i.substr(u,h-u);break}w>0&&(v=parseFloat(i.substr(x-S-w,S+w)),y=0),f[g]=y,m[g]=y+v}if(_&&0===w){E="Decimal point in non-terminal component of "+i.substr(u,h-u);break}if(f[1]>=60||m[1]>60){E="Minutes "+m[1]+" not in range [0,60)";break}if(f[2]>=60||m[2]>60){E="Seconds "+m[2]+" not in range [0,60)";break}return T.ind=p,T.val=n*(m[2]?(60*(60*m[0]+m[1])+m[2])/3600:m[1]?(60*m[0]+m[1])/60:m[0]),T}while(!1);if(T.val=o(i),0===T.val)throw new Error(E);return T.ind=t.NONE,T},o=function(t){var e,i,n,o;return t.length<3?0:(e=t.toUpperCase().replace(/0+$/,""),i="-"===e.charAt(0)?-1:1,n="-"===e.charAt(0)||"+"===e.charAt(0)?1:0,o=e.length-1,n+3>o+1?0:(e=e.substr(n,o+1-n),"NAN"===e||"1.#QNAN"===e||"1.#SNAN"===e||"1.#IND"===e||"1.#R"===e?Number.NaN:"INF"===e||"1.#INF"===e?i*Number.POSITIVE_INFINITY:0))},t.DecodeLatLon=function(e,i,n){var o,r,s={},a=t.Decode(e),l=t.Decode(i),u=a.val,c=a.ind,h=l.val,p=l.ind;if(n||(n=!1),c===t.NONE&&p===t.NONE?(c=n?t.LONGITUDE:t.LATITUDE,p=n?t.LATITUDE:t.LONGITUDE):c===t.NONE?c=t.LATITUDE+t.LONGITUDE-p:p===t.NONE&&(p=t.LATITUDE+t.LONGITUDE-c),c===p)throw new Error("Both "+e+" and "+i+" interpreted as "+(c===t.LATITUDE?"latitudes":"longitudes"));if(o=c===t.LATITUDE?u:h,r=c===t.LATITUDE?h:u,Math.abs(o)>90)throw new Error("Latitude "+o+" not in [-90,90]");return s.lat=o,s.lon=r,s},t.DecodeAngle=function(e){var i=t.Decode(e),n=i.val,o=i.ind;if(o!==t.NONE)throw new Error("Arc angle "+e+" includes a hemisphere N/E/W/S");return n},t.DecodeAzimuth=function(e){var i=t.Decode(e),n=i.val,o=i.ind;if(o===t.LATITUDE)throw new Error("Azimuth "+e+" has a latitude hemisphere N/S");return n},t.Encode=function(e,n,o,s){var a,l,c,h,p,d,f,m,g,y=1;if(s||(s=t.NONE),!isFinite(e))return 0>e?String("-inf"):e>0?String("inf"):String("nan");for(o=Math.min(15-2*n,o),a=0;n>a;++a)y*=60;for(a=0;o>a;++a)y*=10;for(s===t.AZIMUTH&&(e-=360*Math.floor(e/360)),l=0>e?-1:1,e*=l,c=Math.floor(e),h=(e-c)*y+.5,p=Math.floor(h),h=p==h&&1&p?p-1:p,h/=y,h=Math.floor((e-c)*y+.5)/y,h>=1&&(c+=1,h-=1),d=[h,0,0],a=1;n>=a;++a)f=Math.floor(d[a-1]),m=d[a-1]-f,d[a]=60*m,d[a-1]=f;switch(d[0]+=c,g="",s===t.NONE&&0>l&&(g+="-"),n){case t.DEGREE:g+=i(d[0].toFixed(o),s===t.NONE?0:1+Math.min(s,2)+o+(o?1:0))+u.charAt(0);break;default:switch(g+=i(d[0].toFixed(0),s===t.NONE?0:1+Math.min(s,2))+u.charAt(0),n){case t.MINUTE:g+=i(d[1].toFixed(o),2+o+(o?1:0))+u.charAt(1);break;case t.SECOND:g+=i(d[1].toFixed(0),2)+u.charAt(1),g+=i(d[2].toFixed(o),2+o+(o?1:0))+u.charAt(2)}}return s!==t.NONE&&s!==t.AZIMUTH&&(g+=r.charAt((s===t.LATITUDE?0:2)+(0>l?0:1))),g}}(e.DMS),t(e)}(function(t){"object"==typeof e&&e.exports?e.exports=t:"function"==typeof define&&define.amd?define("geographiclib",[],function(){return t}):window.GeographicLib=t})},{}],97:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e["default"]=t,e}function r(){var t=new a.HandlebarsEnvironment;return d.extend(t,a),t.SafeString=u["default"],t.Exception=h["default"],t.Utils=d,t.escapeExpression=d.escapeExpression,t.VM=m,t.template=function(e){return m.template(e,t)},t}i.__esModule=!0;var s=t("./handlebars/base"),a=o(s),l=t("./handlebars/safe-string"),u=n(l),c=t("./handlebars/exception"),h=n(c),p=t("./handlebars/utils"),d=o(p),f=t("./handlebars/runtime"),m=o(f),g=t("./handlebars/no-conflict"),y=n(g),v=r();v.create=r,y["default"](v),v["default"]=v,i["default"]=v,e.exports=i["default"]},{"./handlebars/base":98,"./handlebars/exception":101,"./handlebars/no-conflict":111,"./handlebars/runtime":112,"./handlebars/safe-string":113,"./handlebars/utils":114}],98:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,i){this.helpers=t||{},this.partials=e||{},this.decorators=i||{},
l.registerDefaultHelpers(this),u.registerDefaultDecorators(this)}i.__esModule=!0,i.HandlebarsEnvironment=o;var r=t("./utils"),s=t("./exception"),a=n(s),l=t("./helpers"),u=t("./decorators"),c=t("./logger"),h=n(c),p="4.0.3";i.VERSION=p;var d=7;i.COMPILER_REVISION=d;var f={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};i.REVISION_CHANGES=f;var m="[object Object]";o.prototype={constructor:o,logger:h["default"],log:h["default"].log,registerHelper:function(t,e){if(r.toString.call(t)===m){if(e)throw new a["default"]("Arg not supported with multiple helpers");r.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){if(r.toString.call(t)===m)r.extend(this.partials,t);else{if("undefined"==typeof e)throw new a["default"]("Attempting to register a partial as undefined");this.partials[t]=e}},unregisterPartial:function(t){delete this.partials[t]},registerDecorator:function(t,e){if(r.toString.call(t)===m){if(e)throw new a["default"]("Arg not supported with multiple decorators");r.extend(this.decorators,t)}else this.decorators[t]=e},unregisterDecorator:function(t){delete this.decorators[t]}};var g=h["default"].log;i.log=g,i.createFrame=r.createFrame,i.logger=h["default"]},{"./decorators":99,"./exception":101,"./helpers":102,"./logger":110,"./utils":114}],99:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t){s["default"](t)}i.__esModule=!0,i.registerDefaultDecorators=o;var r=t("./decorators/inline"),s=n(r)},{"./decorators/inline":100}],100:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("../utils");i["default"]=function(t){t.registerDecorator("inline",function(t,e,i,o){var r=t;return e.partials||(e.partials={},r=function(o,r){var s=i.partials;i.partials=n.extend({},s,e.partials);var a=t(o,r);return i.partials=s,a}),e.partials[o.args[0]]=o.fn,r})},e.exports=i["default"]},{"../utils":114}],101:[function(t,e,i){"use strict";function n(t,e){var i=e&&e.loc,r=void 0,s=void 0;i&&(r=i.start.line,s=i.start.column,t+=" - "+r+":"+s);for(var a=Error.prototype.constructor.call(this,t),l=0;l<o.length;l++)this[o[l]]=a[o[l]];Error.captureStackTrace&&Error.captureStackTrace(this,n),i&&(this.lineNumber=r,this.column=s)}i.__esModule=!0;var o=["description","fileName","lineNumber","message","name","number","stack"];n.prototype=new Error,i["default"]=n,e.exports=i["default"]},{}],102:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t){s["default"](t),l["default"](t),c["default"](t),p["default"](t),f["default"](t),g["default"](t),v["default"](t)}i.__esModule=!0,i.registerDefaultHelpers=o;var r=t("./helpers/block-helper-missing"),s=n(r),a=t("./helpers/each"),l=n(a),u=t("./helpers/helper-missing"),c=n(u),h=t("./helpers/if"),p=n(h),d=t("./helpers/log"),f=n(d),m=t("./helpers/lookup"),g=n(m),y=t("./helpers/with"),v=n(y)},{"./helpers/block-helper-missing":103,"./helpers/each":104,"./helpers/helper-missing":105,"./helpers/if":106,"./helpers/log":107,"./helpers/lookup":108,"./helpers/with":109}],103:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("../utils");i["default"]=function(t){t.registerHelper("blockHelperMissing",function(e,i){var o=i.inverse,r=i.fn;if(e===!0)return r(this);if(e===!1||null==e)return o(this);if(n.isArray(e))return e.length>0?(i.ids&&(i.ids=[i.name]),t.helpers.each(e,i)):o(this);if(i.data&&i.ids){var s=n.createFrame(i.data);s.contextPath=n.appendContextPath(i.data.contextPath,i.name),i={data:s}}return r(e,i)})},e.exports=i["default"]},{"../utils":114}],104:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}i.__esModule=!0;var o=t("../utils"),r=t("../exception"),s=n(r);i["default"]=function(t){t.registerHelper("each",function(t,e){function i(e,i,r){u&&(u.key=e,u.index=i,u.first=0===i,u.last=!!r,c&&(u.contextPath=c+e)),l+=n(t[e],{data:u,blockParams:o.blockParams([t[e],e],[c+e,null])})}if(!e)throw new s["default"]("Must pass iterator to #each");var n=e.fn,r=e.inverse,a=0,l="",u=void 0,c=void 0;if(e.data&&e.ids&&(c=o.appendContextPath(e.data.contextPath,e.ids[0])+"."),o.isFunction(t)&&(t=t.call(this)),e.data&&(u=o.createFrame(e.data)),t&&"object"==typeof t)if(o.isArray(t))for(var h=t.length;h>a;a++)a in t&&i(a,a,a===t.length-1);else{var p=void 0;for(var d in t)t.hasOwnProperty(d)&&(void 0!==p&&i(p,a-1),p=d,a++);void 0!==p&&i(p,a-1,!0)}return 0===a&&(l=r(this)),l})},e.exports=i["default"]},{"../exception":101,"../utils":114}],105:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}i.__esModule=!0;var o=t("../exception"),r=n(o);i["default"]=function(t){t.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new r["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=i["default"]},{"../exception":101}],106:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("../utils");i["default"]=function(t){t.registerHelper("if",function(t,e){return n.isFunction(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||n.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,i){return t.helpers["if"].call(this,e,{fn:i.inverse,inverse:i.fn,hash:i.hash})})},e.exports=i["default"]},{"../utils":114}],107:[function(t,e,i){"use strict";i.__esModule=!0,i["default"]=function(t){t.registerHelper("log",function(){for(var e=[void 0],i=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)e.push(arguments[n]);var o=1;null!=i.hash.level?o=i.hash.level:i.data&&null!=i.data.level&&(o=i.data.level),e[0]=o,t.log.apply(t,e)})},e.exports=i["default"]},{}],108:[function(t,e,i){"use strict";i.__esModule=!0,i["default"]=function(t){t.registerHelper("lookup",function(t,e){return t&&t[e]})},e.exports=i["default"]},{}],109:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("../utils");i["default"]=function(t){t.registerHelper("with",function(t,e){n.isFunction(t)&&(t=t.call(this));var i=e.fn;if(n.isEmpty(t))return e.inverse(this);var o=e.data;return e.data&&e.ids&&(o=n.createFrame(e.data),o.contextPath=n.appendContextPath(e.data.contextPath,e.ids[0])),i(t,{data:o,blockParams:n.blockParams([t],[o&&o.contextPath])})})},e.exports=i["default"]},{"../utils":114}],110:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("./utils"),o={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(t){if("string"==typeof t){var e=n.indexOf(o.methodMap,t.toLowerCase());t=e>=0?e:parseInt(t,10)}return t},log:function(t){if(t=o.lookupLevel(t),"undefined"!=typeof console&&o.lookupLevel(o.level)<=t){var e=o.methodMap[t];console[e]||(e="log");for(var i=arguments.length,n=Array(i>1?i-1:0),r=1;i>r;r++)n[r-1]=arguments[r];console[e].apply(console,n)}}};i["default"]=o,e.exports=i["default"]},{"./utils":114}],111:[function(t,e,i){(function(t){"use strict";i.__esModule=!0,i["default"]=function(e){var i="undefined"!=typeof t?t:window,n=i.Handlebars;e.noConflict=function(){i.Handlebars===e&&(i.Handlebars=n)}},e.exports=i["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],112:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e["default"]=t,e}function r(t){var e=t&&t[0]||1,i=y.COMPILER_REVISION;if(e!==i){if(i>e){var n=y.REVISION_CHANGES[i],o=y.REVISION_CHANGES[e];throw new g["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+o+").")}throw new g["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function s(t,e){function i(i,n,o){o.hash&&(n=f.extend({},n,o.hash),o.ids&&(o.ids[0]=!0)),i=e.VM.resolvePartial.call(this,i,n,o);var r=e.VM.invokePartial.call(this,i,n,o);if(null==r&&e.compile&&(o.partials[o.name]=e.compile(i,t.compilerOptions,e),r=o.partials[o.name](n,o)),null!=r){if(o.indent){for(var s=r.split("\n"),a=0,l=s.length;l>a&&(s[a]||a+1!==l);a++)s[a]=o.indent+s[a];r=s.join("\n")}return r}throw new g["default"]("The partial "+o.name+" could not be compiled when running in runtime-only mode")}function n(e){function i(e){return""+t.main(o,e,o.helpers,o.partials,s,l,a)}var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=r.data;n._setup(r),!r.partial&&t.useData&&(s=h(e,s));var a=void 0,l=t.useBlockParams?[]:void 0;return t.useDepths&&(a=r.depths?e!==r.depths[0]?[e].concat(r.depths):r.depths:[e]),(i=p(t.main,i,o,r.depths||[],s,l))(e,r)}if(!e)throw new g["default"]("No environment passed to template");if(!t||!t.main)throw new g["default"]("Unknown template object: "+typeof t);t.main.decorator=t.main_d,e.VM.checkRevision(t.compiler);var o={strict:function(t,e){if(!(e in t))throw new g["default"]('"'+e+'" not defined in '+t);return t[e]},lookup:function(t,e){for(var i=t.length,n=0;i>n;n++)if(t[n]&&null!=t[n][e])return t[n][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:f.escapeExpression,invokePartial:i,fn:function(e){var i=t[e];return i.decorator=t[e+"_d"],i},programs:[],program:function(t,e,i,n,o){var r=this.programs[t],s=this.fn(t);return e||o||n||i?r=a(this,t,s,e,i,n,o):r||(r=this.programs[t]=a(this,t,s)),r},data:function(t,e){for(;t&&e--;)t=t._parent;return t},merge:function(t,e){var i=t||e;return t&&e&&t!==e&&(i=f.extend({},e,t)),i},noop:e.VM.noop,compilerInfo:t.compiler};return n.isTop=!0,n._setup=function(i){i.partial?(o.helpers=i.helpers,o.partials=i.partials,o.decorators=i.decorators):(o.helpers=o.merge(i.helpers,e.helpers),t.usePartial&&(o.partials=o.merge(i.partials,e.partials)),(t.usePartial||t.useDecorators)&&(o.decorators=o.merge(i.decorators,e.decorators)))},n._child=function(e,i,n,r){if(t.useBlockParams&&!n)throw new g["default"]("must pass block params");if(t.useDepths&&!r)throw new g["default"]("must pass parent depths");return a(o,e,t[e],i,0,n,r)},n}function a(t,e,i,n,o,r,s){function a(e){var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=s;return s&&e!==s[0]&&(a=[e].concat(s)),i(t,e,t.helpers,t.partials,o.data||n,r&&[o.blockParams].concat(r),a)}return a=p(i,a,t,s,n,r),a.program=e,a.depth=s?s.length:0,a.blockParams=o||0,a}function l(t,e,i){return t?t.call||i.name||(i.name=t,t=i.partials[t]):t="@partial-block"===i.name?i.data["partial-block"]:i.partials[i.name],t}function u(t,e,i){i.partial=!0,i.ids&&(i.data.contextPath=i.ids[0]||i.data.contextPath);var n=void 0;if(i.fn&&i.fn!==c&&(i.data=y.createFrame(i.data),n=i.data["partial-block"]=i.fn,n.partials&&(i.partials=f.extend({},i.partials,n.partials))),void 0===t&&n&&(t=n),void 0===t)throw new g["default"]("The partial "+i.name+" could not be found");return t instanceof Function?t(e,i):void 0}function c(){return""}function h(t,e){return e&&"root"in e||(e=e?y.createFrame(e):{},e.root=t),e}function p(t,e,i,n,o,r){if(t.decorator){var s={};e=t.decorator(e,s,i,n&&n[0],o,r,n),f.extend(e,s)}return e}i.__esModule=!0,i.checkRevision=r,i.template=s,i.wrapProgram=a,i.resolvePartial=l,i.invokePartial=u,i.noop=c;var d=t("./utils"),f=o(d),m=t("./exception"),g=n(m),y=t("./base")},{"./base":98,"./exception":101,"./utils":114}],113:[function(t,e,i){"use strict";function n(t){this.string=t}i.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},i["default"]=n,e.exports=i["default"]},{}],114:[function(t,e,i){"use strict";function n(t){return h[t]}function o(t){for(var e=1;e<arguments.length;e++)for(var i in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],i)&&(t[i]=arguments[e][i]);return t}function r(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1}function s(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}return d.test(t)?t.replace(p,n):t}function a(t){return t||0===t?g(t)&&0===t.length?!0:!1:!0}function l(t){var e=o({},t);return e._parent=t,e}function u(t,e){return t.path=e,t}function c(t,e){return(t?t+".":"")+e}i.__esModule=!0,i.extend=o,i.indexOf=r,i.escapeExpression=s,i.isEmpty=a,i.createFrame=l,i.blockParams=u,i.appendContextPath=c;var h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},p=/[&<>"'`=]/g,d=/[&<>"'`=]/,f=Object.prototype.toString;i.toString=f;var m=function(t){return"function"==typeof t};m(/x/)&&(i.isFunction=m=function(t){return"function"==typeof t&&"[object Function]"===f.call(t)}),i.isFunction=m;var g=Array.isArray||function(t){return t&&"object"==typeof t?"[object Array]"===f.call(t):!1};i.isArray=g},{}],115:[function(t,e,i){e.exports=t("./dist/cjs/handlebars.runtime")["default"]},{"./dist/cjs/handlebars.runtime":97}],116:[function(t,e,i){e.exports=t("handlebars/runtime")["default"]},{"handlebars/runtime":115}],117:[function(t,e,i){!function(t,i){"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?i(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return i(t)}:i(t)}("undefined"!=typeof window?window:this,function(t,e){function i(t){var e="length"in t&&t.length,i=Q.type(t);return"function"===i||Q.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t}function n(t,e,i){if(Q.isFunction(e))return Q.grep(t,function(t,n){return!!e.call(t,n,t)!==i});if(e.nodeType)return Q.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(at.test(e))return Q.filter(e,t,i);e=Q.filter(e,t)}return Q.grep(t,function(t){return G.call(e,t)>=0!==i})}function o(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function r(t){var e=ft[t]={};return Q.each(t.match(dt)||[],function(t,i){e[i]=!0}),e}function s(){J.removeEventListener("DOMContentLoaded",s,!1),t.removeEventListener("load",s,!1),Q.ready()}function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Q.expando+a.uid++}function l(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(xt,"-$1").toLowerCase(),i=t.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:bt.test(i)?Q.parseJSON(i):i}catch(o){}vt.set(t,e,i)}else i=void 0;return i}function u(){return!0}function c(){return!1}function h(){try{return J.activeElement}catch(t){}}function p(t,e){return Q.nodeName(t,"table")&&Q.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function d(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function f(t){var e=Nt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function m(t,e){for(var i=0,n=t.length;n>i;i++)yt.set(t[i],"globalEval",!e||yt.get(e[i],"globalEval"))}function g(t,e){var i,n,o,r,s,a,l,u;if(1===e.nodeType){if(yt.hasData(t)&&(r=yt.access(t),s=yt.set(e,r),u=r.events)){delete s.handle,s.events={};for(o in u)for(i=0,n=u[o].length;n>i;i++)Q.event.add(e,o,u[o][i])}vt.hasData(t)&&(a=vt.access(t),l=Q.extend({},a),vt.set(e,l))}}function y(t,e){var i=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&Q.nodeName(t,e)?Q.merge([t],i):i}function v(t,e){var i=e.nodeName.toLowerCase();"input"===i&&kt.test(t.type)?e.checked=t.checked:("input"===i||"textarea"===i)&&(e.defaultValue=t.defaultValue)}function b(e,i){var n,o=Q(i.createElement(e)).appendTo(i.body),r=t.getDefaultComputedStyle&&(n=t.getDefaultComputedStyle(o[0]))?n.display:Q.css(o[0],"display");return o.detach(),r}function x(t){var e=J,i=Bt[t];return i||(i=b(t,e),"none"!==i&&i||(Ut=(Ut||Q("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Ut[0].contentDocument,e.write(),e.close(),i=b(t,e),Ut.detach()),Bt[t]=i),i}function _(t,e,i){var n,o,r,s,a=t.style;return i=i||$t(t),i&&(s=i.getPropertyValue(e)||i[e]),i&&(""!==s||Q.contains(t.ownerDocument,t)||(s=Q.style(t,e)),qt.test(s)&&Ft.test(e)&&(n=a.width,o=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=i.width,a.width=n,a.minWidth=o,a.maxWidth=r)),void 0!==s?s+"":s}function w(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function S(t,e){if(e in t)return e;for(var i=e[0].toUpperCase()+e.slice(1),n=e,o=Xt.length;o--;)if(e=Xt[o]+i,e in t)return e;return n}function k(t,e,i){var n=Yt.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function T(t,e,i,n,o){for(var r=i===(n?"border":"content")?4:"width"===e?1:0,s=0;4>r;r+=2)"margin"===i&&(s+=Q.css(t,i+wt[r],!0,o)),n?("content"===i&&(s-=Q.css(t,"padding"+wt[r],!0,o)),"margin"!==i&&(s-=Q.css(t,"border"+wt[r]+"Width",!0,o))):(s+=Q.css(t,"padding"+wt[r],!0,o),"padding"!==i&&(s+=Q.css(t,"border"+wt[r]+"Width",!0,o)));return s}function E(t,e,i){var n=!0,o="width"===e?t.offsetWidth:t.offsetHeight,r=$t(t),s="border-box"===Q.css(t,"boxSizing",!1,r);if(0>=o||null==o){if(o=_(t,e,r),(0>o||null==o)&&(o=t.style[e]),qt.test(o))return o;n=s&&(Z.boxSizingReliable()||o===t.style[e]),o=parseFloat(o)||0}return o+T(t,e,i||(s?"border":"content"),n,r)+"px"}function M(t,e){for(var i,n,o,r=[],s=0,a=t.length;a>s;s++)n=t[s],n.style&&(r[s]=yt.get(n,"olddisplay"),i=n.style.display,e?(r[s]||"none"!==i||(n.style.display=""),""===n.style.display&&St(n)&&(r[s]=yt.access(n,"olddisplay",x(n.nodeName)))):(o=St(n),"none"===i&&o||yt.set(n,"olddisplay",o?i:Q.css(n,"display"))));for(s=0;a>s;s++)n=t[s],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?r[s]||"":"none"));return t}function C(t,e,i,n,o){return new C.prototype.init(t,e,i,n,o)}function A(){return setTimeout(function(){Zt=void 0}),Zt=Q.now()}function R(t,e){var i,n=0,o={height:t};for(e=e?1:0;4>n;n+=2-e)i=wt[n],o["margin"+i]=o["padding"+i]=t;return e&&(o.opacity=o.width=t),o}function D(t,e,i){for(var n,o=(ie[e]||[]).concat(ie["*"]),r=0,s=o.length;s>r;r++)if(n=o[r].call(i,e,t))return n}function z(t,e,i){var n,o,r,s,a,l,u,c,h=this,p={},d=t.style,f=t.nodeType&&St(t),m=yt.get(t,"fxshow");i.queue||(a=Q._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,Q.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[d.overflow,d.overflowX,d.overflowY],u=Q.css(t,"display"),c="none"===u?yt.get(t,"olddisplay")||x(t.nodeName):u,"inline"===c&&"none"===Q.css(t,"float")&&(d.display="inline-block")),i.overflow&&(d.overflow="hidden",h.always(function(){d.overflow=i.overflow[0],d.overflowX=i.overflow[1],d.overflowY=i.overflow[2]}));for(n in e)if(o=e[n],Kt.exec(o)){if(delete e[n],r=r||"toggle"===o,o===(f?"hide":"show")){if("show"!==o||!m||void 0===m[n])continue;f=!0}p[n]=m&&m[n]||Q.style(t,n)}else u=void 0;if(Q.isEmptyObject(p))"inline"===("none"===u?x(t.nodeName):u)&&(d.display=u);else{m?"hidden"in m&&(f=m.hidden):m=yt.access(t,"fxshow",{}),r&&(m.hidden=!f),f?Q(t).show():h.done(function(){Q(t).hide()}),h.done(function(){var e;yt.remove(t,"fxshow");for(e in p)Q.style(t,e,p[e])});for(n in p)s=D(f?m[n]:0,n,h),n in m||(m[n]=s.start,f&&(s.end=s.start,s.start="width"===n||"height"===n?1:0))}}function L(t,e){var i,n,o,r,s;for(i in t)if(n=Q.camelCase(i),o=e[n],r=t[i],Q.isArray(r)&&(o=r[1],r=t[i]=r[0]),i!==n&&(t[n]=r,delete t[i]),s=Q.cssHooks[n],s&&"expand"in s){r=s.expand(r),delete t[n];for(i in r)i in t||(t[i]=r[i],e[i]=o)}else e[n]=o}function P(t,e,i){var n,o,r=0,s=ee.length,a=Q.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=Zt||A(),i=Math.max(0,u.startTime+u.duration-e),n=i/u.duration||0,r=1-n,s=0,l=u.tweens.length;l>s;s++)u.tweens[s].run(r);return a.notifyWith(t,[u,r,i]),1>r&&l?i:(a.resolveWith(t,[u]),!1)},u=a.promise({elem:t,props:Q.extend({},e),opts:Q.extend(!0,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:Zt||A(),duration:i.duration,tweens:[],createTween:function(e,i){var n=Q.Tween(t,u.opts,e,i,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(n),n},stop:function(e){var i=0,n=e?u.tweens.length:0;if(o)return this;for(o=!0;n>i;i++)u.tweens[i].run(1);return e?a.resolveWith(t,[u,e]):a.rejectWith(t,[u,e]),this}}),c=u.props;for(L(c,u.opts.specialEasing);s>r;r++)if(n=ee[r].call(u,t,c,u.opts))return n;return Q.map(c,D,u),Q.isFunction(u.opts.start)&&u.opts.start.call(t,u),Q.fx.timer(Q.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function I(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,o=0,r=e.toLowerCase().match(dt)||[];if(Q.isFunction(i))for(;n=r[o++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function N(t,e,i,n){function o(a){var l;return r[a]=!0,Q.each(t[a]||[],function(t,a){var u=a(e,i,n);return"string"!=typeof u||s||r[u]?s?!(l=u):void 0:(e.dataTypes.unshift(u),o(u),!1)}),l}var r={},s=t===be;return o(e.dataTypes[0])||!r["*"]&&o("*")}function O(t,e){var i,n,o=Q.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((o[i]?t:n||(n={}))[i]=e[i]);return n&&Q.extend(!0,t,n),t}function j(t,e,i){for(var n,o,r,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(o in a)if(a[o]&&a[o].test(n)){l.unshift(o);break}if(l[0]in i)r=l[0];else{for(o in i){if(!l[0]||t.converters[o+" "+l[0]]){r=o;break}s||(s=o)}r=r||s}return r?(r!==l[0]&&l.unshift(r),i[r]):void 0}function U(t,e,i,n){var o,r,s,a,l,u={},c=t.dataTypes.slice();if(c[1])for(s in t.converters)u[s.toLowerCase()]=t.converters[s];for(r=c.shift();r;)if(t.responseFields[r]&&(i[t.responseFields[r]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=c.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(s=u[l+" "+r]||u["* "+r],!s)for(o in u)if(a=o.split(" "),a[1]===r&&(s=u[l+" "+a[0]]||u["* "+a[0]])){s===!0?s=u[o]:u[o]!==!0&&(r=a[0],c.unshift(a[1]));break}if(s!==!0)if(s&&t["throws"])e=s(e);else try{e=s(e)}catch(h){return{state:"parsererror",error:s?h:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}function B(t,e,i,n){var o;if(Q.isArray(e))Q.each(e,function(e,o){i||ke.test(t)?n(t,o):B(t+"["+("object"==typeof o?e:"")+"]",o,i,n)});else if(i||"object"!==Q.type(e))n(t,e);else for(o in e)B(t+"["+o+"]",e[o],i,n)}function F(t){return Q.isWindow(t)?t:9===t.nodeType&&t.defaultView}var q=[],$=q.slice,H=q.concat,Y=q.push,G=q.indexOf,W={},V=W.toString,X=W.hasOwnProperty,Z={},J=t.document,K="2.1.4",Q=function(t,e){return new Q.fn.init(t,e)},tt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,et=/^-ms-/,it=/-([\da-z])/gi,nt=function(t,e){return e.toUpperCase()};Q.fn=Q.prototype={jquery:K,constructor:Q,selector:"",length:0,toArray:function(){return $.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:$.call(this)},pushStack:function(t){var e=Q.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return Q.each(this,t,e)},map:function(t){return this.pushStack(Q.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack($.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(0>t?e:0);return this.pushStack(i>=0&&e>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Y,sort:q.sort,splice:q.splice},Q.extend=Q.fn.extend=function(){var t,e,i,n,o,r,s=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[a]||{},a++),"object"==typeof s||Q.isFunction(s)||(s={}),a===l&&(s=this,a--);l>a;a++)if(null!=(t=arguments[a]))for(e in t)i=s[e],n=t[e],s!==n&&(u&&n&&(Q.isPlainObject(n)||(o=Q.isArray(n)))?(o?(o=!1,r=i&&Q.isArray(i)?i:[]):r=i&&Q.isPlainObject(i)?i:{},s[e]=Q.extend(u,r,n)):void 0!==n&&(s[e]=n));return s},Q.extend({expando:"jQuery"+(K+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===Q.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!Q.isArray(t)&&t-parseFloat(t)+1>=0},isPlainObject:function(t){return"object"!==Q.type(t)||t.nodeType||Q.isWindow(t)?!1:t.constructor&&!X.call(t.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?W[V.call(t)]||"object":typeof t},globalEval:function(t){var e,i=eval;t=Q.trim(t),t&&(1===t.indexOf("use strict")?(e=J.createElement("script"),e.text=t,J.head.appendChild(e).parentNode.removeChild(e)):i(t))},camelCase:function(t){return t.replace(et,"ms-").replace(it,nt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var o,r=0,s=t.length,a=i(t);if(n){if(a)for(;s>r&&(o=e.apply(t[r],n),o!==!1);r++);else for(r in t)if(o=e.apply(t[r],n),o===!1)break}else if(a)for(;s>r&&(o=e.call(t[r],r,t[r]),o!==!1);r++);else for(r in t)if(o=e.call(t[r],r,t[r]),o===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(tt,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?Q.merge(n,"string"==typeof t?[t]:t):Y.call(n,t)),n},inArray:function(t,e,i){return null==e?-1:G.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,o=t.length;i>n;n++)t[o++]=e[n];return t.length=o,t},grep:function(t,e,i){for(var n,o=[],r=0,s=t.length,a=!i;s>r;r++)n=!e(t[r],r),n!==a&&o.push(t[r]);return o},map:function(t,e,n){var o,r=0,s=t.length,a=i(t),l=[];if(a)for(;s>r;r++)o=e(t[r],r,n),null!=o&&l.push(o);else for(r in t)o=e(t[r],r,n),null!=o&&l.push(o);return H.apply([],l)},guid:1,proxy:function(t,e){var i,n,o;return"string"==typeof e&&(i=t[e],e=t,t=i),Q.isFunction(t)?(n=$.call(arguments,2),o=function(){return t.apply(e||this,n.concat($.call(arguments)))},o.guid=t.guid=t.guid||Q.guid++,o):void 0},now:Date.now,support:Z}),Q.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){W["[object "+e+"]"]=e.toLowerCase()});var ot=function(t){function e(t,e,i,n){var o,r,s,a,l,u,h,d,f,m;if((e?e.ownerDocument||e:B)!==z&&D(e),e=e||z,i=i||[],a=e.nodeType,"string"!=typeof t||!t||1!==a&&9!==a&&11!==a)return i;if(!n&&P){if(11!==a&&(o=vt.exec(t)))if(s=o[1]){if(9===a){if(r=e.getElementById(s),!r||!r.parentNode)return i;if(r.id===s)return i.push(r),i}else if(e.ownerDocument&&(r=e.ownerDocument.getElementById(s))&&j(e,r)&&r.id===s)return i.push(r),i}else{if(o[2])return K.apply(i,e.getElementsByTagName(t)),i;if((s=o[3])&&_.getElementsByClassName)return K.apply(i,e.getElementsByClassName(s)),i}if(_.qsa&&(!I||!I.test(t))){if(d=h=U,f=e,m=1!==a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(u=T(t),(h=e.getAttribute("id"))?d=h.replace(xt,"\\$&"):e.setAttribute("id",d),d="[id='"+d+"'] ",l=u.length;l--;)u[l]=d+p(u[l]);f=bt.test(t)&&c(e.parentNode)||e,m=u.join(",")}if(m)try{return K.apply(i,f.querySelectorAll(m)),i}catch(g){}finally{h||e.removeAttribute("id")}}}return M(t.replace(lt,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>w.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[U]=!0,t}function o(t){var e=z.createElement("div");try{return!!t(e)}catch(i){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function r(t,e){for(var i=t.split("|"),n=t.length;n--;)w.attrHandle[i[n]]=e}function s(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||W)-(~t.sourceIndex||W);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function a(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function l(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function u(t){return n(function(e){return e=+e,n(function(i,n){for(var o,r=t([],i.length,e),s=r.length;s--;)i[o=r[s]]&&(i[o]=!(n[o]=i[o]))})})}function c(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function h(){}function p(t){for(var e=0,i=t.length,n="";i>e;e++)n+=t[e].value;return n}function d(t,e,i){var n=e.dir,o=i&&"parentNode"===n,r=q++;return e.first?function(e,i,r){for(;e=e[n];)if(1===e.nodeType||o)return t(e,i,r)}:function(e,i,s){var a,l,u=[F,r];if(s){for(;e=e[n];)if((1===e.nodeType||o)&&t(e,i,s))return!0}else for(;e=e[n];)if(1===e.nodeType||o){if(l=e[U]||(e[U]={}),(a=l[n])&&a[0]===F&&a[1]===r)return u[2]=a[2];if(l[n]=u,u[2]=t(e,i,s))return!0}}}function f(t){return t.length>1?function(e,i,n){for(var o=t.length;o--;)if(!t[o](e,i,n))return!1;return!0}:t[0]}function m(t,i,n){for(var o=0,r=i.length;r>o;o++)e(t,i[o],n);return n}function g(t,e,i,n,o){for(var r,s=[],a=0,l=t.length,u=null!=e;l>a;a++)(r=t[a])&&(!i||i(r,n,o))&&(s.push(r),u&&e.push(a));return s}function y(t,e,i,o,r,s){return o&&!o[U]&&(o=y(o)),r&&!r[U]&&(r=y(r,s)),n(function(n,s,a,l){var u,c,h,p=[],d=[],f=s.length,y=n||m(e||"*",a.nodeType?[a]:a,[]),v=!t||!n&&e?y:g(y,p,t,a,l),b=i?r||(n?t:f||o)?[]:s:v;if(i&&i(v,b,a,l),o)for(u=g(b,d),o(u,[],a,l),c=u.length;c--;)(h=u[c])&&(b[d[c]]=!(v[d[c]]=h));if(n){if(r||t){if(r){for(u=[],c=b.length;c--;)(h=b[c])&&u.push(v[c]=h);r(null,b=[],u,l)}for(c=b.length;c--;)(h=b[c])&&(u=r?tt(n,h):p[c])>-1&&(n[u]=!(s[u]=h))}}else b=g(b===s?b.splice(f,b.length):b),r?r(null,s,b,l):K.apply(s,b)})}function v(t){for(var e,i,n,o=t.length,r=w.relative[t[0].type],s=r||w.relative[" "],a=r?1:0,l=d(function(t){return t===e},s,!0),u=d(function(t){return tt(e,t)>-1},s,!0),c=[function(t,i,n){var o=!r&&(n||i!==C)||((e=i).nodeType?l(t,i,n):u(t,i,n));return e=null,o}];o>a;a++)if(i=w.relative[t[a].type])c=[d(f(c),i)];else{if(i=w.filter[t[a].type].apply(null,t[a].matches),i[U]){for(n=++a;o>n&&!w.relative[t[n].type];n++);return y(a>1&&f(c),a>1&&p(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(lt,"$1"),i,n>a&&v(t.slice(a,n)),o>n&&v(t=t.slice(n)),o>n&&p(t))}c.push(i)}return f(c)}function b(t,i){var o=i.length>0,r=t.length>0,s=function(n,s,a,l,u){var c,h,p,d=0,f="0",m=n&&[],y=[],v=C,b=n||r&&w.find.TAG("*",u),x=F+=null==v?1:Math.random()||.1,_=b.length;for(u&&(C=s!==z&&s);f!==_&&null!=(c=b[f]);f++){if(r&&c){for(h=0;p=t[h++];)if(p(c,s,a)){l.push(c);break}u&&(F=x)}o&&((c=!p&&c)&&d--,n&&m.push(c))}if(d+=f,o&&f!==d){for(h=0;p=i[h++];)p(m,y,s,a);if(n){if(d>0)for(;f--;)m[f]||y[f]||(y[f]=Z.call(l));y=g(y)}K.apply(l,y),u&&!n&&y.length>0&&d+i.length>1&&e.uniqueSort(l)}return u&&(F=x,C=v),m};return o?n(s):s}var x,_,w,S,k,T,E,M,C,A,R,D,z,L,P,I,N,O,j,U="sizzle"+1*new Date,B=t.document,F=0,q=0,$=i(),H=i(),Y=i(),G=function(t,e){return t===e&&(R=!0),0},W=1<<31,V={}.hasOwnProperty,X=[],Z=X.pop,J=X.push,K=X.push,Q=X.slice,tt=function(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",nt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ot=nt.replace("w","w#"),rt="\\["+it+"*("+nt+")(?:"+it+"*([*^$|!~]?=)"+it+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ot+"))|)"+it+"*\\]",st=":("+nt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+rt+")*)|.*)\\)|)",at=new RegExp(it+"+","g"),lt=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),ut=new RegExp("^"+it+"*,"+it+"*"),ct=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),ht=new RegExp("="+it+"*([^\\]'\"]*?)"+it+"*\\]","g"),pt=new RegExp(st),dt=new RegExp("^"+ot+"$"),ft={ID:new RegExp("^#("+nt+")"),CLASS:new RegExp("^\\.("+nt+")"),TAG:new RegExp("^("+nt.replace("w","w*")+")"),ATTR:new RegExp("^"+rt),PSEUDO:new RegExp("^"+st),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")
},mt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,yt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bt=/[+~]/,xt=/'|\\/g,_t=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),wt=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},St=function(){D()};try{K.apply(X=Q.call(B.childNodes),B.childNodes),X[B.childNodes.length].nodeType}catch(kt){K={apply:X.length?function(t,e){J.apply(t,Q.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}_=e.support={},k=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},D=e.setDocument=function(t){var e,i,n=t?t.ownerDocument||t:B;return n!==z&&9===n.nodeType&&n.documentElement?(z=n,L=n.documentElement,i=n.defaultView,i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",St,!1):i.attachEvent&&i.attachEvent("onunload",St)),P=!k(n),_.attributes=o(function(t){return t.className="i",!t.getAttribute("className")}),_.getElementsByTagName=o(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),_.getElementsByClassName=yt.test(n.getElementsByClassName),_.getById=o(function(t){return L.appendChild(t).id=U,!n.getElementsByName||!n.getElementsByName(U).length}),_.getById?(w.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&P){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},w.filter.ID=function(t){var e=t.replace(_t,wt);return function(t){return t.getAttribute("id")===e}}):(delete w.find.ID,w.filter.ID=function(t){var e=t.replace(_t,wt);return function(t){var i="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}}),w.find.TAG=_.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):_.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;i=r[o++];)1===i.nodeType&&n.push(i);return n}return r},w.find.CLASS=_.getElementsByClassName&&function(t,e){return P?e.getElementsByClassName(t):void 0},N=[],I=[],(_.qsa=yt.test(n.querySelectorAll))&&(o(function(t){L.appendChild(t).innerHTML="<a id='"+U+"'></a><select id='"+U+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&I.push("[*^$]="+it+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||I.push("\\["+it+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+U+"-]").length||I.push("~="),t.querySelectorAll(":checked").length||I.push(":checked"),t.querySelectorAll("a#"+U+"+*").length||I.push(".#.+[+~]")}),o(function(t){var e=n.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&I.push("name"+it+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||I.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),I.push(",.*:")})),(_.matchesSelector=yt.test(O=L.matches||L.webkitMatchesSelector||L.mozMatchesSelector||L.oMatchesSelector||L.msMatchesSelector))&&o(function(t){_.disconnectedMatch=O.call(t,"div"),O.call(t,"[s!='']:x"),N.push("!=",st)}),I=I.length&&new RegExp(I.join("|")),N=N.length&&new RegExp(N.join("|")),e=yt.test(L.compareDocumentPosition),j=e||yt.test(L.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},G=e?function(t,e){if(t===e)return R=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i?i:(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&i||!_.sortDetached&&e.compareDocumentPosition(t)===i?t===n||t.ownerDocument===B&&j(B,t)?-1:e===n||e.ownerDocument===B&&j(B,e)?1:A?tt(A,t)-tt(A,e):0:4&i?-1:1)}:function(t,e){if(t===e)return R=!0,0;var i,o=0,r=t.parentNode,a=e.parentNode,l=[t],u=[e];if(!r||!a)return t===n?-1:e===n?1:r?-1:a?1:A?tt(A,t)-tt(A,e):0;if(r===a)return s(t,e);for(i=t;i=i.parentNode;)l.unshift(i);for(i=e;i=i.parentNode;)u.unshift(i);for(;l[o]===u[o];)o++;return o?s(l[o],u[o]):l[o]===B?-1:u[o]===B?1:0},n):z},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==z&&D(t),i=i.replace(ht,"='$1']"),_.matchesSelector&&P&&(!N||!N.test(i))&&(!I||!I.test(i)))try{var n=O.call(t,i);if(n||_.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(o){}return e(i,z,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==z&&D(t),j(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==z&&D(t);var i=w.attrHandle[e.toLowerCase()],n=i&&V.call(w.attrHandle,e.toLowerCase())?i(t,e,!P):void 0;return void 0!==n?n:_.attributes||!P?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,o=0;if(R=!_.detectDuplicates,A=!_.sortStable&&t.slice(0),t.sort(G),R){for(;e=t[o++];)e===t[o]&&(n=i.push(o));for(;n--;)t.splice(i[n],1)}return A=null,t},S=e.getText=function(t){var e,i="",n=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=S(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[n++];)i+=S(e);return i},w=e.selectors={cacheLength:50,createPseudo:n,match:ft,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(_t,wt),t[3]=(t[3]||t[4]||t[5]||"").replace(_t,wt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return ft.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&pt.test(i)&&(e=T(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(_t,wt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=$[t+" "];return e||(e=new RegExp("(^|"+it+")"+t+"("+it+"|$)"))&&$(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(o){var r=e.attr(o,t);return null==r?"!="===i:i?(r+="","="===i?r===n:"!="===i?r!==n:"^="===i?n&&0===r.indexOf(n):"*="===i?n&&r.indexOf(n)>-1:"$="===i?n&&r.slice(-n.length)===n:"~="===i?(" "+r.replace(at," ")+" ").indexOf(n)>-1:"|="===i?r===n||r.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,i,n,o){var r="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===o?function(t){return!!t.parentNode}:function(e,i,l){var u,c,h,p,d,f,m=r!==s?"nextSibling":"previousSibling",g=e.parentNode,y=a&&e.nodeName.toLowerCase(),v=!l&&!a;if(g){if(r){for(;m;){for(h=e;h=h[m];)if(a?h.nodeName.toLowerCase()===y:1===h.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?g.firstChild:g.lastChild],s&&v){for(c=g[U]||(g[U]={}),u=c[t]||[],d=u[0]===F&&u[1],p=u[0]===F&&u[2],h=d&&g.childNodes[d];h=++d&&h&&h[m]||(p=d=0)||f.pop();)if(1===h.nodeType&&++p&&h===e){c[t]=[F,d,p];break}}else if(v&&(u=(e[U]||(e[U]={}))[t])&&u[0]===F)p=u[1];else for(;(h=++d&&h&&h[m]||(p=d=0)||f.pop())&&((a?h.nodeName.toLowerCase()!==y:1!==h.nodeType)||!++p||(v&&((h[U]||(h[U]={}))[t]=[F,p]),h!==e)););return p-=o,p===n||p%n===0&&p/n>=0}}},PSEUDO:function(t,i){var o,r=w.pseudos[t]||w.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return r[U]?r(i):r.length>1?(o=[t,t,"",i],w.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,o=r(t,i),s=o.length;s--;)n=tt(t,o[s]),t[n]=!(e[n]=o[s])}):function(t){return r(t,0,o)}):r}},pseudos:{not:n(function(t){var e=[],i=[],o=E(t.replace(lt,"$1"));return o[U]?n(function(t,e,i,n){for(var r,s=o(t,null,n,[]),a=t.length;a--;)(r=s[a])&&(t[a]=!(e[a]=r))}):function(t,n,r){return e[0]=t,o(e,null,r,i),e[0]=null,!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return t=t.replace(_t,wt),function(e){return(e.textContent||e.innerText||S(e)).indexOf(t)>-1}}),lang:n(function(t){return dt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(_t,wt).toLowerCase(),function(e){var i;do if(i=P?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return i=i.toLowerCase(),i===t||0===i.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===L},focus:function(t){return t===z.activeElement&&(!z.hasFocus||z.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!w.pseudos.empty(t)},header:function(t){return gt.test(t.nodeName)},input:function(t){return mt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:u(function(){return[0]}),last:u(function(t,e){return[e-1]}),eq:u(function(t,e,i){return[0>i?i+e:i]}),even:u(function(t,e){for(var i=0;e>i;i+=2)t.push(i);return t}),odd:u(function(t,e){for(var i=1;e>i;i+=2)t.push(i);return t}),lt:u(function(t,e,i){for(var n=0>i?i+e:i;--n>=0;)t.push(n);return t}),gt:u(function(t,e,i){for(var n=0>i?i+e:i;++n<e;)t.push(n);return t})}},w.pseudos.nth=w.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[x]=a(x);for(x in{submit:!0,reset:!0})w.pseudos[x]=l(x);return h.prototype=w.filters=w.pseudos,w.setFilters=new h,T=e.tokenize=function(t,i){var n,o,r,s,a,l,u,c=H[t+" "];if(c)return i?0:c.slice(0);for(a=t,l=[],u=w.preFilter;a;){(!n||(o=ut.exec(a)))&&(o&&(a=a.slice(o[0].length)||a),l.push(r=[])),n=!1,(o=ct.exec(a))&&(n=o.shift(),r.push({value:n,type:o[0].replace(lt," ")}),a=a.slice(n.length));for(s in w.filter)!(o=ft[s].exec(a))||u[s]&&!(o=u[s](o))||(n=o.shift(),r.push({value:n,type:s,matches:o}),a=a.slice(n.length));if(!n)break}return i?a.length:a?e.error(t):H(t,l).slice(0)},E=e.compile=function(t,e){var i,n=[],o=[],r=Y[t+" "];if(!r){for(e||(e=T(t)),i=e.length;i--;)r=v(e[i]),r[U]?n.push(r):o.push(r);r=Y(t,b(o,n)),r.selector=t}return r},M=e.select=function(t,e,i,n){var o,r,s,a,l,u="function"==typeof t&&t,h=!n&&T(t=u.selector||t);if(i=i||[],1===h.length){if(r=h[0]=h[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&_.getById&&9===e.nodeType&&P&&w.relative[r[1].type]){if(e=(w.find.ID(s.matches[0].replace(_t,wt),e)||[])[0],!e)return i;u&&(e=e.parentNode),t=t.slice(r.shift().value.length)}for(o=ft.needsContext.test(t)?0:r.length;o--&&(s=r[o],!w.relative[a=s.type]);)if((l=w.find[a])&&(n=l(s.matches[0].replace(_t,wt),bt.test(r[0].type)&&c(e.parentNode)||e))){if(r.splice(o,1),t=n.length&&p(r),!t)return K.apply(i,n),i;break}}return(u||E(t,h))(n,e,!P,i,bt.test(t)&&c(e.parentNode)||e),i},_.sortStable=U.split("").sort(G).join("")===U,_.detectDuplicates=!!R,D(),_.sortDetached=o(function(t){return 1&t.compareDocumentPosition(z.createElement("div"))}),o(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||r("type|href|height|width",function(t,e,i){return i?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),_.attributes&&o(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||r("value",function(t,e,i){return i||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),o(function(t){return null==t.getAttribute("disabled")})||r(et,function(t,e,i){var n;return i?void 0:t[e]===!0?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);Q.find=ot,Q.expr=ot.selectors,Q.expr[":"]=Q.expr.pseudos,Q.unique=ot.uniqueSort,Q.text=ot.getText,Q.isXMLDoc=ot.isXML,Q.contains=ot.contains;var rt=Q.expr.match.needsContext,st=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,at=/^.[^:#\[\.,]*$/;Q.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?Q.find.matchesSelector(n,t)?[n]:[]:Q.find.matches(t,Q.grep(e,function(t){return 1===t.nodeType}))},Q.fn.extend({find:function(t){var e,i=this.length,n=[],o=this;if("string"!=typeof t)return this.pushStack(Q(t).filter(function(){for(e=0;i>e;e++)if(Q.contains(o[e],this))return!0}));for(e=0;i>e;e++)Q.find(t,o[e],n);return n=this.pushStack(i>1?Q.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(n(this,t||[],!1))},not:function(t){return this.pushStack(n(this,t||[],!0))},is:function(t){return!!n(this,"string"==typeof t&&rt.test(t)?Q(t):t||[],!1).length}});var lt,ut=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ct=Q.fn.init=function(t,e){var i,n;if(!t)return this;if("string"==typeof t){if(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:ut.exec(t),!i||!i[1]&&e)return!e||e.jquery?(e||lt).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof Q?e[0]:e,Q.merge(this,Q.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:J,!0)),st.test(i[1])&&Q.isPlainObject(e))for(i in e)Q.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return n=J.getElementById(i[2]),n&&n.parentNode&&(this.length=1,this[0]=n),this.context=J,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):Q.isFunction(t)?"undefined"!=typeof lt.ready?lt.ready(t):t(Q):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),Q.makeArray(t,this))};ct.prototype=Q.fn,lt=Q(J);var ht=/^(?:parents|prev(?:Until|All))/,pt={children:!0,contents:!0,next:!0,prev:!0};Q.extend({dir:function(t,e,i){for(var n=[],o=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&Q(t).is(i))break;n.push(t)}return n},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}}),Q.fn.extend({has:function(t){var e=Q(t,this),i=e.length;return this.filter(function(){for(var t=0;i>t;t++)if(Q.contains(this,e[t]))return!0})},closest:function(t,e){for(var i,n=0,o=this.length,r=[],s=rt.test(t)||"string"!=typeof t?Q(t,e||this.context):0;o>n;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&Q.find.matchesSelector(i,t))){r.push(i);break}return this.pushStack(r.length>1?Q.unique(r):r)},index:function(t){return t?"string"==typeof t?G.call(Q(t),this[0]):G.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(Q.unique(Q.merge(this.get(),Q(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),Q.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return Q.dir(t,"parentNode")},parentsUntil:function(t,e,i){return Q.dir(t,"parentNode",i)},next:function(t){return o(t,"nextSibling")},prev:function(t){return o(t,"previousSibling")},nextAll:function(t){return Q.dir(t,"nextSibling")},prevAll:function(t){return Q.dir(t,"previousSibling")},nextUntil:function(t,e,i){return Q.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return Q.dir(t,"previousSibling",i)},siblings:function(t){return Q.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return Q.sibling(t.firstChild)},contents:function(t){return t.contentDocument||Q.merge([],t.childNodes)}},function(t,e){Q.fn[t]=function(i,n){var o=Q.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(o=Q.filter(n,o)),this.length>1&&(pt[t]||Q.unique(o),ht.test(t)&&o.reverse()),this.pushStack(o)}});var dt=/\S+/g,ft={};Q.Callbacks=function(t){t="string"==typeof t?ft[t]||r(t):Q.extend({},t);var e,i,n,o,s,a,l=[],u=!t.once&&[],c=function(r){for(e=t.memory&&r,i=!0,a=o||0,o=0,s=l.length,n=!0;l&&s>a;a++)if(l[a].apply(r[0],r[1])===!1&&t.stopOnFalse){e=!1;break}n=!1,l&&(u?u.length&&c(u.shift()):e?l=[]:h.disable())},h={add:function(){if(l){var i=l.length;!function r(e){Q.each(e,function(e,i){var n=Q.type(i);"function"===n?t.unique&&h.has(i)||l.push(i):i&&i.length&&"string"!==n&&r(i)})}(arguments),n?s=l.length:e&&(o=i,c(e))}return this},remove:function(){return l&&Q.each(arguments,function(t,e){for(var i;(i=Q.inArray(e,l,i))>-1;)l.splice(i,1),n&&(s>=i&&s--,a>=i&&a--)}),this},has:function(t){return t?Q.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],s=0,this},disable:function(){return l=u=e=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,e||h.disable(),this},locked:function(){return!u},fireWith:function(t,e){return!l||i&&!u||(e=e||[],e=[t,e.slice?e.slice():e],n?u.push(e):c(e)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!i}};return h},Q.extend({Deferred:function(t){var e=[["resolve","done",Q.Callbacks("once memory"),"resolved"],["reject","fail",Q.Callbacks("once memory"),"rejected"],["notify","progress",Q.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return Q.Deferred(function(i){Q.each(e,function(e,r){var s=Q.isFunction(t[e])&&t[e];o[r[1]](function(){var t=s&&s.apply(this,arguments);t&&Q.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[r[0]+"With"](this===n?i.promise():this,s?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?Q.extend(t,n):n}},o={};return n.pipe=n.then,Q.each(e,function(t,r){var s=r[2],a=r[3];n[r[1]]=s.add,a&&s.add(function(){i=a},e[1^t][2].disable,e[2][2].lock),o[r[0]]=function(){return o[r[0]+"With"](this===o?n:this,arguments),this},o[r[0]+"With"]=s.fireWith}),n.promise(o),t&&t.call(o,o),o},when:function(t){var e,i,n,o=0,r=$.call(arguments),s=r.length,a=1!==s||t&&Q.isFunction(t.promise)?s:0,l=1===a?t:Q.Deferred(),u=function(t,i,n){return function(o){i[t]=this,n[t]=arguments.length>1?$.call(arguments):o,n===e?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(s>1)for(e=new Array(s),i=new Array(s),n=new Array(s);s>o;o++)r[o]&&Q.isFunction(r[o].promise)?r[o].promise().done(u(o,n,r)).fail(l.reject).progress(u(o,i,e)):--a;return a||l.resolveWith(n,r),l.promise()}});var mt;Q.fn.ready=function(t){return Q.ready.promise().done(t),this},Q.extend({isReady:!1,readyWait:1,holdReady:function(t){t?Q.readyWait++:Q.ready(!0)},ready:function(t){(t===!0?--Q.readyWait:Q.isReady)||(Q.isReady=!0,t!==!0&&--Q.readyWait>0||(mt.resolveWith(J,[Q]),Q.fn.triggerHandler&&(Q(J).triggerHandler("ready"),Q(J).off("ready"))))}}),Q.ready.promise=function(e){return mt||(mt=Q.Deferred(),"complete"===J.readyState?setTimeout(Q.ready):(J.addEventListener("DOMContentLoaded",s,!1),t.addEventListener("load",s,!1))),mt.promise(e)},Q.ready.promise();var gt=Q.access=function(t,e,i,n,o,r,s){var a=0,l=t.length,u=null==i;if("object"===Q.type(i)){o=!0;for(a in i)Q.access(t,e,a,i[a],!0,r,s)}else if(void 0!==n&&(o=!0,Q.isFunction(n)||(s=!0),u&&(s?(e.call(t,n),e=null):(u=e,e=function(t,e,i){return u.call(Q(t),i)})),e))for(;l>a;a++)e(t[a],i,s?n:n.call(t[a],a,e(t[a],i)));return o?t:u?e.call(t):l?e(t[0],i):r};Q.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},a.uid=1,a.accepts=Q.acceptData,a.prototype={key:function(t){if(!a.accepts(t))return 0;var e={},i=t[this.expando];if(!i){i=a.uid++;try{e[this.expando]={value:i},Object.defineProperties(t,e)}catch(n){e[this.expando]=i,Q.extend(t,e)}}return this.cache[i]||(this.cache[i]={}),i},set:function(t,e,i){var n,o=this.key(t),r=this.cache[o];if("string"==typeof e)r[e]=i;else if(Q.isEmptyObject(r))Q.extend(this.cache[o],e);else for(n in e)r[n]=e[n];return r},get:function(t,e){var i=this.cache[this.key(t)];return void 0===e?i:i[e]},access:function(t,e,i){var n;return void 0===e||e&&"string"==typeof e&&void 0===i?(n=this.get(t,e),void 0!==n?n:this.get(t,Q.camelCase(e))):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n,o,r=this.key(t),s=this.cache[r];if(void 0===e)this.cache[r]={};else{Q.isArray(e)?n=e.concat(e.map(Q.camelCase)):(o=Q.camelCase(e),e in s?n=[e,o]:(n=o,n=n in s?[n]:n.match(dt)||[])),i=n.length;for(;i--;)delete s[n[i]]}},hasData:function(t){return!Q.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var yt=new a,vt=new a,bt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,xt=/([A-Z])/g;Q.extend({hasData:function(t){return vt.hasData(t)||yt.hasData(t)},data:function(t,e,i){return vt.access(t,e,i)},removeData:function(t,e){vt.remove(t,e)},_data:function(t,e,i){return yt.access(t,e,i)},_removeData:function(t,e){yt.remove(t,e)}}),Q.fn.extend({data:function(t,e){var i,n,o,r=this[0],s=r&&r.attributes;if(void 0===t){if(this.length&&(o=vt.get(r),1===r.nodeType&&!yt.get(r,"hasDataAttrs"))){for(i=s.length;i--;)s[i]&&(n=s[i].name,0===n.indexOf("data-")&&(n=Q.camelCase(n.slice(5)),l(r,n,o[n])));yt.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof t?this.each(function(){vt.set(this,t)}):gt(this,function(e){var i,n=Q.camelCase(t);if(r&&void 0===e){if(i=vt.get(r,t),void 0!==i)return i;if(i=vt.get(r,n),void 0!==i)return i;if(i=l(r,n,void 0),void 0!==i)return i}else this.each(function(){var i=vt.get(this,n);vt.set(this,n,e),-1!==t.indexOf("-")&&void 0!==i&&vt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){vt.remove(this,t)})}}),Q.extend({queue:function(t,e,i){var n;return t?(e=(e||"fx")+"queue",n=yt.get(t,e),i&&(!n||Q.isArray(i)?n=yt.access(t,e,Q.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var i=Q.queue(t,e),n=i.length,o=i.shift(),r=Q._queueHooks(t,e),s=function(){Q.dequeue(t,e)};"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===e&&i.unshift("inprogress"),delete r.stop,o.call(t,s,r)),!n&&r&&r.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return yt.get(t,i)||yt.access(t,i,{empty:Q.Callbacks("once memory").add(function(){yt.remove(t,[e+"queue",i])})})}}),Q.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?Q.queue(this[0],t):void 0===e?this:this.each(function(){var i=Q.queue(this,t,e);Q._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&Q.dequeue(this,t)})},dequeue:function(t){return this.each(function(){Q.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,o=Q.Deferred(),r=this,s=this.length,a=function(){--n||o.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)i=yt.get(r[s],t+"queueHooks"),i&&i.empty&&(n++,i.empty.add(a));return a(),o.promise(e)}});var _t=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,wt=["Top","Right","Bottom","Left"],St=function(t,e){return t=e||t,"none"===Q.css(t,"display")||!Q.contains(t.ownerDocument,t)},kt=/^(?:checkbox|radio)$/i;!function(){var t=J.createDocumentFragment(),e=t.appendChild(J.createElement("div")),i=J.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),e.appendChild(i),Z.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",Z.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Tt="undefined";Z.focusinBubbles="onfocusin"in t;var Et=/^key/,Mt=/^(?:mouse|pointer|contextmenu)|click/,Ct=/^(?:focusinfocus|focusoutblur)$/,At=/^([^.]*)(?:\.(.+)|)$/;Q.event={global:{},add:function(t,e,i,n,o){var r,s,a,l,u,c,h,p,d,f,m,g=yt.get(t);if(g)for(i.handler&&(r=i,i=r.handler,o=r.selector),i.guid||(i.guid=Q.guid++),(l=g.events)||(l=g.events={}),(s=g.handle)||(s=g.handle=function(e){return typeof Q!==Tt&&Q.event.triggered!==e.type?Q.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(dt)||[""],u=e.length;u--;)a=At.exec(e[u])||[],d=m=a[1],f=(a[2]||"").split(".").sort(),d&&(h=Q.event.special[d]||{},d=(o?h.delegateType:h.bindType)||d,h=Q.event.special[d]||{},c=Q.extend({type:d,origType:m,data:n,handler:i,guid:i.guid,selector:o,needsContext:o&&Q.expr.match.needsContext.test(o),namespace:f.join(".")},r),(p=l[d])||(p=l[d]=[],p.delegateCount=0,h.setup&&h.setup.call(t,n,f,s)!==!1||t.addEventListener&&t.addEventListener(d,s,!1)),h.add&&(h.add.call(t,c),c.handler.guid||(c.handler.guid=i.guid)),o?p.splice(p.delegateCount++,0,c):p.push(c),Q.event.global[d]=!0)},remove:function(t,e,i,n,o){var r,s,a,l,u,c,h,p,d,f,m,g=yt.hasData(t)&&yt.get(t);if(g&&(l=g.events)){for(e=(e||"").match(dt)||[""],u=e.length;u--;)if(a=At.exec(e[u])||[],d=m=a[1],f=(a[2]||"").split(".").sort(),d){for(h=Q.event.special[d]||{},d=(n?h.delegateType:h.bindType)||d,p=l[d]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=p.length;r--;)c=p[r],!o&&m!==c.origType||i&&i.guid!==c.guid||a&&!a.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(p.splice(r,1),c.selector&&p.delegateCount--,h.remove&&h.remove.call(t,c));s&&!p.length&&(h.teardown&&h.teardown.call(t,f,g.handle)!==!1||Q.removeEvent(t,d,g.handle),delete l[d])}else for(d in l)Q.event.remove(t,d+e[u],i,n,!0);Q.isEmptyObject(l)&&(delete g.handle,yt.remove(t,"events"))}},trigger:function(e,i,n,o){var r,s,a,l,u,c,h,p=[n||J],d=X.call(e,"type")?e.type:e,f=X.call(e,"namespace")?e.namespace.split("."):[];if(s=a=n=n||J,3!==n.nodeType&&8!==n.nodeType&&!Ct.test(d+Q.event.triggered)&&(d.indexOf(".")>=0&&(f=d.split("."),d=f.shift(),f.sort()),u=d.indexOf(":")<0&&"on"+d,e=e[Q.expando]?e:new Q.Event(d,"object"==typeof e&&e),e.isTrigger=o?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:Q.makeArray(i,[e]),h=Q.event.special[d]||{},o||!h.trigger||h.trigger.apply(n,i)!==!1)){if(!o&&!h.noBubble&&!Q.isWindow(n)){for(l=h.delegateType||d,Ct.test(l+d)||(s=s.parentNode);s;s=s.parentNode)p.push(s),a=s;a===(n.ownerDocument||J)&&p.push(a.defaultView||a.parentWindow||t)}for(r=0;(s=p[r++])&&!e.isPropagationStopped();)e.type=r>1?l:h.bindType||d,c=(yt.get(s,"events")||{})[e.type]&&yt.get(s,"handle"),c&&c.apply(s,i),c=u&&s[u],c&&c.apply&&Q.acceptData(s)&&(e.result=c.apply(s,i),e.result===!1&&e.preventDefault());return e.type=d,o||e.isDefaultPrevented()||h._default&&h._default.apply(p.pop(),i)!==!1||!Q.acceptData(n)||u&&Q.isFunction(n[d])&&!Q.isWindow(n)&&(a=n[u],a&&(n[u]=null),Q.event.triggered=d,n[d](),Q.event.triggered=void 0,a&&(n[u]=a)),e.result}},dispatch:function(t){t=Q.event.fix(t);var e,i,n,o,r,s=[],a=$.call(arguments),l=(yt.get(this,"events")||{})[t.type]||[],u=Q.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,t)!==!1){for(s=Q.event.handlers.call(this,t,l),e=0;(o=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,i=0;(r=o.handlers[i++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(r.namespace))&&(t.handleObj=r,t.data=r.data,n=((Q.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,a),void 0!==n&&(t.result=n)===!1&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,o,r,s=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==t.type){for(n=[],i=0;a>i;i++)r=e[i],o=r.selector+" ",void 0===n[o]&&(n[o]=r.needsContext?Q(o,this).index(l)>=0:Q.find(o,this,null,[l]).length),n[o]&&n.push(r);n.length&&s.push({elem:l,handlers:n})}return a<e.length&&s.push({elem:this,handlers:e.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,o,r=e.button;return null==t.pageX&&null!=e.clientX&&(i=t.target.ownerDocument||J,n=i.documentElement,o=i.body,t.pageX=e.clientX+(n&&n.scrollLeft||o&&o.scrollLeft||0)-(n&&n.clientLeft||o&&o.clientLeft||0),t.pageY=e.clientY+(n&&n.scrollTop||o&&o.scrollTop||0)-(n&&n.clientTop||o&&o.clientTop||0)),t.which||void 0===r||(t.which=1&r?1:2&r?3:4&r?2:0),t}},fix:function(t){if(t[Q.expando])return t;var e,i,n,o=t.type,r=t,s=this.fixHooks[o];for(s||(this.fixHooks[o]=s=Mt.test(o)?this.mouseHooks:Et.test(o)?this.keyHooks:{}),n=s.props?this.props.concat(s.props):this.props,t=new Q.Event(r),e=n.length;e--;)i=n[e],t[i]=r[i];return t.target||(t.target=J),3===t.target.nodeType&&(t.target=t.target.parentNode),s.filter?s.filter(t,r):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==h()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===h()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Q.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return Q.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){var o=Q.extend(new Q.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?Q.event.trigger(o,null,e):Q.event.dispatch.call(e,o),o.isDefaultPrevented()&&i.preventDefault()}},Q.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)},Q.Event=function(t,e){return this instanceof Q.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?u:c):this.type=t,e&&Q.extend(this,e),this.timeStamp=t&&t.timeStamp||Q.now(),void(this[Q.expando]=!0)):new Q.Event(t,e)},Q.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=u,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=u,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=u,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},Q.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){Q.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,o=t.relatedTarget,r=t.handleObj;return(!o||o!==n&&!Q.contains(n,o))&&(t.type=r.origType,i=r.handler.apply(this,arguments),t.type=e),i}}}),Z.focusinBubbles||Q.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){Q.event.simulate(e,t.target,Q.event.fix(t),!0)};Q.event.special[e]={setup:function(){var n=this.ownerDocument||this,o=yt.access(n,e);o||n.addEventListener(t,i,!0),yt.access(n,e,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this,o=yt.access(n,e)-1;o?yt.access(n,e,o):(n.removeEventListener(t,i,!0),yt.remove(n,e))}}}),Q.fn.extend({on:function(t,e,i,n,o){var r,s;if("object"==typeof t){"string"!=typeof e&&(i=i||e,e=void 0);for(s in t)this.on(s,e,i,t[s],o);return this}if(null==i&&null==n?(n=e,i=e=void 0):null==n&&("string"==typeof e?(n=i,i=void 0):(n=i,i=e,e=void 0)),n===!1)n=c;else if(!n)return this;return 1===o&&(r=n,n=function(t){return Q().off(t),r.apply(this,arguments);
},n.guid=r.guid||(r.guid=Q.guid++)),this.each(function(){Q.event.add(this,t,n,i,e)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,e,i){var n,o;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,Q(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return(e===!1||"function"==typeof e)&&(i=e,e=void 0),i===!1&&(i=c),this.each(function(){Q.event.remove(this,t,i,e)})},trigger:function(t,e){return this.each(function(){Q.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];return i?Q.event.trigger(t,e,i,!0):void 0}});var Rt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Dt=/<([\w:]+)/,zt=/<|&#?\w+;/,Lt=/<(?:script|style|link)/i,Pt=/checked\s*(?:[^=]|=\s*.checked.)/i,It=/^$|\/(?:java|ecma)script/i,Nt=/^true\/(.*)/,Ot=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,jt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};jt.optgroup=jt.option,jt.tbody=jt.tfoot=jt.colgroup=jt.caption=jt.thead,jt.th=jt.td,Q.extend({clone:function(t,e,i){var n,o,r,s,a=t.cloneNode(!0),l=Q.contains(t.ownerDocument,t);if(!(Z.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||Q.isXMLDoc(t)))for(s=y(a),r=y(t),n=0,o=r.length;o>n;n++)v(r[n],s[n]);if(e)if(i)for(r=r||y(t),s=s||y(a),n=0,o=r.length;o>n;n++)g(r[n],s[n]);else g(t,a);return s=y(a,"script"),s.length>0&&m(s,!l&&y(t,"script")),a},buildFragment:function(t,e,i,n){for(var o,r,s,a,l,u,c=e.createDocumentFragment(),h=[],p=0,d=t.length;d>p;p++)if(o=t[p],o||0===o)if("object"===Q.type(o))Q.merge(h,o.nodeType?[o]:o);else if(zt.test(o)){for(r=r||c.appendChild(e.createElement("div")),s=(Dt.exec(o)||["",""])[1].toLowerCase(),a=jt[s]||jt._default,r.innerHTML=a[1]+o.replace(Rt,"<$1></$2>")+a[2],u=a[0];u--;)r=r.lastChild;Q.merge(h,r.childNodes),r=c.firstChild,r.textContent=""}else h.push(e.createTextNode(o));for(c.textContent="",p=0;o=h[p++];)if((!n||-1===Q.inArray(o,n))&&(l=Q.contains(o.ownerDocument,o),r=y(c.appendChild(o),"script"),l&&m(r),i))for(u=0;o=r[u++];)It.test(o.type||"")&&i.push(o);return c},cleanData:function(t){for(var e,i,n,o,r=Q.event.special,s=0;void 0!==(i=t[s]);s++){if(Q.acceptData(i)&&(o=i[yt.expando],o&&(e=yt.cache[o]))){if(e.events)for(n in e.events)r[n]?Q.event.remove(i,n):Q.removeEvent(i,n,e.handle);yt.cache[o]&&delete yt.cache[o]}delete vt.cache[i[vt.expando]]}}}),Q.fn.extend({text:function(t){return gt(this,function(t){return void 0===t?Q.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=p(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=p(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var i,n=t?Q.filter(t,this):this,o=0;null!=(i=n[o]);o++)e||1!==i.nodeType||Q.cleanData(y(i)),i.parentNode&&(e&&Q.contains(i.ownerDocument,i)&&m(y(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(Q.cleanData(y(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return Q.clone(this,t,e)})},html:function(t){return gt(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Lt.test(t)&&!jt[(Dt.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Rt,"<$1></$2>");try{for(;n>i;i++)e=this[i]||{},1===e.nodeType&&(Q.cleanData(y(e,!1)),e.innerHTML=t);e=0}catch(o){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,Q.cleanData(y(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=H.apply([],t);var i,n,o,r,s,a,l=0,u=this.length,c=this,h=u-1,p=t[0],m=Q.isFunction(p);if(m||u>1&&"string"==typeof p&&!Z.checkClone&&Pt.test(p))return this.each(function(i){var n=c.eq(i);m&&(t[0]=p.call(this,i,n.html())),n.domManip(t,e)});if(u&&(i=Q.buildFragment(t,this[0].ownerDocument,!1,this),n=i.firstChild,1===i.childNodes.length&&(i=n),n)){for(o=Q.map(y(i,"script"),d),r=o.length;u>l;l++)s=i,l!==h&&(s=Q.clone(s,!0,!0),r&&Q.merge(o,y(s,"script"))),e.call(this[l],s,l);if(r)for(a=o[o.length-1].ownerDocument,Q.map(o,f),l=0;r>l;l++)s=o[l],It.test(s.type||"")&&!yt.access(s,"globalEval")&&Q.contains(a,s)&&(s.src?Q._evalUrl&&Q._evalUrl(s.src):Q.globalEval(s.textContent.replace(Ot,"")))}return this}}),Q.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){Q.fn[t]=function(t){for(var i,n=[],o=Q(t),r=o.length-1,s=0;r>=s;s++)i=s===r?this:this.clone(!0),Q(o[s])[e](i),Y.apply(n,i.get());return this.pushStack(n)}});var Ut,Bt={},Ft=/^margin/,qt=new RegExp("^("+_t+")(?!px)[a-z%]+$","i"),$t=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):t.getComputedStyle(e,null)};!function(){function e(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",o.appendChild(r);var e=t.getComputedStyle(s,null);i="1%"!==e.top,n="4px"===e.width,o.removeChild(r)}var i,n,o=J.documentElement,r=J.createElement("div"),s=J.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",Z.clearCloneStyle="content-box"===s.style.backgroundClip,r.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",r.appendChild(s),t.getComputedStyle&&Q.extend(Z,{pixelPosition:function(){return e(),i},boxSizingReliable:function(){return null==n&&e(),n},reliableMarginRight:function(){var e,i=s.appendChild(J.createElement("div"));return i.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",s.style.width="1px",o.appendChild(r),e=!parseFloat(t.getComputedStyle(i,null).marginRight),o.removeChild(r),s.removeChild(i),e}}))}(),Q.swap=function(t,e,i,n){var o,r,s={};for(r in e)s[r]=t.style[r],t.style[r]=e[r];o=i.apply(t,n||[]);for(r in e)t.style[r]=s[r];return o};var Ht=/^(none|table(?!-c[ea]).+)/,Yt=new RegExp("^("+_t+")(.*)$","i"),Gt=new RegExp("^([+-])=("+_t+")","i"),Wt={position:"absolute",visibility:"hidden",display:"block"},Vt={letterSpacing:"0",fontWeight:"400"},Xt=["Webkit","O","Moz","ms"];Q.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=_(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,r,s,a=Q.camelCase(e),l=t.style;return e=Q.cssProps[a]||(Q.cssProps[a]=S(l,a)),s=Q.cssHooks[e]||Q.cssHooks[a],void 0===i?s&&"get"in s&&void 0!==(o=s.get(t,!1,n))?o:l[e]:(r=typeof i,"string"===r&&(o=Gt.exec(i))&&(i=(o[1]+1)*o[2]+parseFloat(Q.css(t,e)),r="number"),null!=i&&i===i&&("number"!==r||Q.cssNumber[a]||(i+="px"),Z.clearCloneStyle||""!==i||0!==e.indexOf("background")||(l[e]="inherit"),s&&"set"in s&&void 0===(i=s.set(t,i,n))||(l[e]=i)),void 0)}},css:function(t,e,i,n){var o,r,s,a=Q.camelCase(e);return e=Q.cssProps[a]||(Q.cssProps[a]=S(t.style,a)),s=Q.cssHooks[e]||Q.cssHooks[a],s&&"get"in s&&(o=s.get(t,!0,i)),void 0===o&&(o=_(t,e,n)),"normal"===o&&e in Vt&&(o=Vt[e]),""===i||i?(r=parseFloat(o),i===!0||Q.isNumeric(r)?r||0:o):o}}),Q.each(["height","width"],function(t,e){Q.cssHooks[e]={get:function(t,i,n){return i?Ht.test(Q.css(t,"display"))&&0===t.offsetWidth?Q.swap(t,Wt,function(){return E(t,e,n)}):E(t,e,n):void 0},set:function(t,i,n){var o=n&&$t(t);return k(t,i,n?T(t,e,n,"border-box"===Q.css(t,"boxSizing",!1,o),o):0)}}}),Q.cssHooks.marginRight=w(Z.reliableMarginRight,function(t,e){return e?Q.swap(t,{display:"inline-block"},_,[t,"marginRight"]):void 0}),Q.each({margin:"",padding:"",border:"Width"},function(t,e){Q.cssHooks[t+e]={expand:function(i){for(var n=0,o={},r="string"==typeof i?i.split(" "):[i];4>n;n++)o[t+wt[n]+e]=r[n]||r[n-2]||r[0];return o}},Ft.test(t)||(Q.cssHooks[t+e].set=k)}),Q.fn.extend({css:function(t,e){return gt(this,function(t,e,i){var n,o,r={},s=0;if(Q.isArray(e)){for(n=$t(t),o=e.length;o>s;s++)r[e[s]]=Q.css(t,e[s],!1,n);return r}return void 0!==i?Q.style(t,e,i):Q.css(t,e)},t,e,arguments.length>1)},show:function(){return M(this,!0)},hide:function(){return M(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){St(this)?Q(this).show():Q(this).hide()})}}),Q.Tween=C,C.prototype={constructor:C,init:function(t,e,i,n,o,r){this.elem=t,this.prop=i,this.easing=o||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=r||(Q.cssNumber[i]?"":"px")},cur:function(){var t=C.propHooks[this.prop];return t&&t.get?t.get(this):C.propHooks._default.get(this)},run:function(t){var e,i=C.propHooks[this.prop];return this.options.duration?this.pos=e=Q.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):C.propHooks._default.set(this),this}},C.prototype.init.prototype=C.prototype,C.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=Q.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){Q.fx.step[t.prop]?Q.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[Q.cssProps[t.prop]]||Q.cssHooks[t.prop])?Q.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},C.propHooks.scrollTop=C.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},Q.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},Q.fx=C.prototype.init,Q.fx.step={};var Zt,Jt,Kt=/^(?:toggle|show|hide)$/,Qt=new RegExp("^(?:([+-])=|)("+_t+")([a-z%]*)$","i"),te=/queueHooks$/,ee=[z],ie={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),o=Qt.exec(e),r=o&&o[3]||(Q.cssNumber[t]?"":"px"),s=(Q.cssNumber[t]||"px"!==r&&+n)&&Qt.exec(Q.css(i.elem,t)),a=1,l=20;if(s&&s[3]!==r){r=r||s[3],o=o||[],s=+n||1;do a=a||".5",s/=a,Q.style(i.elem,t,s+r);while(a!==(a=i.cur()/n)&&1!==a&&--l)}return o&&(s=i.start=+s||+n||0,i.unit=r,i.end=o[1]?s+(o[1]+1)*o[2]:+o[2]),i}]};Q.Animation=Q.extend(P,{tweener:function(t,e){Q.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,n=0,o=t.length;o>n;n++)i=t[n],ie[i]=ie[i]||[],ie[i].unshift(e)},prefilter:function(t,e){e?ee.unshift(t):ee.push(t)}}),Q.speed=function(t,e,i){var n=t&&"object"==typeof t?Q.extend({},t):{complete:i||!i&&e||Q.isFunction(t)&&t,duration:t,easing:i&&e||e&&!Q.isFunction(e)&&e};return n.duration=Q.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in Q.fx.speeds?Q.fx.speeds[n.duration]:Q.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){Q.isFunction(n.old)&&n.old.call(this),n.queue&&Q.dequeue(this,n.queue)},n},Q.fn.extend({fadeTo:function(t,e,i,n){return this.filter(St).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var o=Q.isEmptyObject(t),r=Q.speed(e,i,n),s=function(){var e=P(this,Q.extend({},t),r);(o||yt.get(this,"finish"))&&e.stop(!0)};return s.finish=s,o||r.queue===!1?this.each(s):this.queue(r.queue,s)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,o=null!=t&&t+"queueHooks",r=Q.timers,s=yt.get(this);if(o)s[o]&&s[o].stop&&n(s[o]);else for(o in s)s[o]&&s[o].stop&&te.test(o)&&n(s[o]);for(o=r.length;o--;)r[o].elem!==this||null!=t&&r[o].queue!==t||(r[o].anim.stop(i),e=!1,r.splice(o,1));(e||!i)&&Q.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,i=yt.get(this),n=i[t+"queue"],o=i[t+"queueHooks"],r=Q.timers,s=n?n.length:0;for(i.finish=!0,Q.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;s>e;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),Q.each(["toggle","show","hide"],function(t,e){var i=Q.fn[e];Q.fn[e]=function(t,n,o){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(R(e,!0),t,n,o)}}),Q.each({slideDown:R("show"),slideUp:R("hide"),slideToggle:R("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){Q.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),Q.timers=[],Q.fx.tick=function(){var t,e=0,i=Q.timers;for(Zt=Q.now();e<i.length;e++)t=i[e],t()||i[e]!==t||i.splice(e--,1);i.length||Q.fx.stop(),Zt=void 0},Q.fx.timer=function(t){Q.timers.push(t),t()?Q.fx.start():Q.timers.pop()},Q.fx.interval=13,Q.fx.start=function(){Jt||(Jt=setInterval(Q.fx.tick,Q.fx.interval))},Q.fx.stop=function(){clearInterval(Jt),Jt=null},Q.fx.speeds={slow:600,fast:200,_default:400},Q.fn.delay=function(t,e){return t=Q.fx?Q.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}})},function(){var t=J.createElement("input"),e=J.createElement("select"),i=e.appendChild(J.createElement("option"));t.type="checkbox",Z.checkOn=""!==t.value,Z.optSelected=i.selected,e.disabled=!0,Z.optDisabled=!i.disabled,t=J.createElement("input"),t.value="t",t.type="radio",Z.radioValue="t"===t.value}();var ne,oe,re=Q.expr.attrHandle;Q.fn.extend({attr:function(t,e){return gt(this,Q.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){Q.removeAttr(this,t)})}}),Q.extend({attr:function(t,e,i){var n,o,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return typeof t.getAttribute===Tt?Q.prop(t,e,i):(1===r&&Q.isXMLDoc(t)||(e=e.toLowerCase(),n=Q.attrHooks[e]||(Q.expr.match.bool.test(e)?oe:ne)),void 0===i?n&&"get"in n&&null!==(o=n.get(t,e))?o:(o=Q.find.attr(t,e),null==o?void 0:o):null!==i?n&&"set"in n&&void 0!==(o=n.set(t,i,e))?o:(t.setAttribute(e,i+""),i):void Q.removeAttr(t,e))},removeAttr:function(t,e){var i,n,o=0,r=e&&e.match(dt);if(r&&1===t.nodeType)for(;i=r[o++];)n=Q.propFix[i]||i,Q.expr.match.bool.test(i)&&(t[n]=!1),t.removeAttribute(i)},attrHooks:{type:{set:function(t,e){if(!Z.radioValue&&"radio"===e&&Q.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}}}),oe={set:function(t,e,i){return e===!1?Q.removeAttr(t,i):t.setAttribute(i,i),i}},Q.each(Q.expr.match.bool.source.match(/\w+/g),function(t,e){var i=re[e]||Q.find.attr;re[e]=function(t,e,n){var o,r;return n||(r=re[e],re[e]=o,o=null!=i(t,e,n)?e.toLowerCase():null,re[e]=r),o}});var se=/^(?:input|select|textarea|button)$/i;Q.fn.extend({prop:function(t,e){return gt(this,Q.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[Q.propFix[t]||t]})}}),Q.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,i){var n,o,r,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return r=1!==s||!Q.isXMLDoc(t),r&&(e=Q.propFix[e]||e,o=Q.propHooks[e]),void 0!==i?o&&"set"in o&&void 0!==(n=o.set(t,i,e))?n:t[e]=i:o&&"get"in o&&null!==(n=o.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||se.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),Z.optSelected||(Q.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),Q.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Q.propFix[this.toLowerCase()]=this});var ae=/[\t\r\n\f]/g;Q.fn.extend({addClass:function(t){var e,i,n,o,r,s,a="string"==typeof t&&t,l=0,u=this.length;if(Q.isFunction(t))return this.each(function(e){Q(this).addClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(dt)||[];u>l;l++)if(i=this[l],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(ae," "):" ")){for(r=0;o=e[r++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");s=Q.trim(n),i.className!==s&&(i.className=s)}return this},removeClass:function(t){var e,i,n,o,r,s,a=0===arguments.length||"string"==typeof t&&t,l=0,u=this.length;if(Q.isFunction(t))return this.each(function(e){Q(this).removeClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(dt)||[];u>l;l++)if(i=this[l],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(ae," "):"")){for(r=0;o=e[r++];)for(;n.indexOf(" "+o+" ")>=0;)n=n.replace(" "+o+" "," ");s=t?Q.trim(n):"",i.className!==s&&(i.className=s)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):Q.isFunction(t)?this.each(function(i){Q(this).toggleClass(t.call(this,i,this.className,e),e)}):this.each(function(){if("string"===i)for(var e,n=0,o=Q(this),r=t.match(dt)||[];e=r[n++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else(i===Tt||"boolean"===i)&&(this.className&&yt.set(this,"__className__",this.className),this.className=this.className||t===!1?"":yt.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(ae," ").indexOf(e)>=0)return!0;return!1}});var le=/\r/g;Q.fn.extend({val:function(t){var e,i,n,o=this[0];{if(arguments.length)return n=Q.isFunction(t),this.each(function(i){var o;1===this.nodeType&&(o=n?t.call(this,i,Q(this).val()):t,null==o?o="":"number"==typeof o?o+="":Q.isArray(o)&&(o=Q.map(o,function(t){return null==t?"":t+""})),e=Q.valHooks[this.type]||Q.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))});if(o)return e=Q.valHooks[o.type]||Q.valHooks[o.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(i=e.get(o,"value"))?i:(i=o.value,"string"==typeof i?i.replace(le,""):null==i?"":i)}}}),Q.extend({valHooks:{option:{get:function(t){var e=Q.find.attr(t,"value");return null!=e?e:Q.trim(Q.text(t))}},select:{get:function(t){for(var e,i,n=t.options,o=t.selectedIndex,r="select-one"===t.type||0>o,s=r?null:[],a=r?o+1:n.length,l=0>o?a:r?o:0;a>l;l++)if(i=n[l],(i.selected||l===o)&&(Z.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!Q.nodeName(i.parentNode,"optgroup"))){if(e=Q(i).val(),r)return e;s.push(e)}return s},set:function(t,e){for(var i,n,o=t.options,r=Q.makeArray(e),s=o.length;s--;)n=o[s],(n.selected=Q.inArray(n.value,r)>=0)&&(i=!0);return i||(t.selectedIndex=-1),r}}}}),Q.each(["radio","checkbox"],function(){Q.valHooks[this]={set:function(t,e){return Q.isArray(e)?t.checked=Q.inArray(Q(t).val(),e)>=0:void 0}},Z.checkOn||(Q.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),Q.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){Q.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),Q.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}});var ue=Q.now(),ce=/\?/;Q.parseJSON=function(t){return JSON.parse(t+"")},Q.parseXML=function(t){var e,i;if(!t||"string"!=typeof t)return null;try{i=new DOMParser,e=i.parseFromString(t,"text/xml")}catch(n){e=void 0}return(!e||e.getElementsByTagName("parsererror").length)&&Q.error("Invalid XML: "+t),e};var he=/#.*$/,pe=/([?&])_=[^&]*/,de=/^(.*?):[ \t]*([^\r\n]*)$/gm,fe=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,me=/^(?:GET|HEAD)$/,ge=/^\/\//,ye=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ve={},be={},xe="*/".concat("*"),_e=t.location.href,we=ye.exec(_e.toLowerCase())||[];Q.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_e,type:"GET",isLocal:fe.test(we[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":xe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Q.parseJSON,"text xml":Q.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?O(O(t,Q.ajaxSettings),e):O(Q.ajaxSettings,t)},ajaxPrefilter:I(ve),ajaxTransport:I(be),ajax:function(t,e){function i(t,e,i,s){var l,c,y,v,x,w=e;2!==b&&(b=2,a&&clearTimeout(a),n=void 0,r=s||"",_.readyState=t>0?4:0,l=t>=200&&300>t||304===t,i&&(v=j(h,_,i)),v=U(h,v,_,l),l?(h.ifModified&&(x=_.getResponseHeader("Last-Modified"),x&&(Q.lastModified[o]=x),x=_.getResponseHeader("etag"),x&&(Q.etag[o]=x)),204===t||"HEAD"===h.type?w="nocontent":304===t?w="notmodified":(w=v.state,c=v.data,y=v.error,l=!y)):(y=w,(t||!w)&&(w="error",0>t&&(t=0))),_.status=t,_.statusText=(e||w)+"",l?f.resolveWith(p,[c,w,_]):f.rejectWith(p,[_,w,y]),_.statusCode(g),g=void 0,u&&d.trigger(l?"ajaxSuccess":"ajaxError",[_,h,l?c:y]),m.fireWith(p,[_,w]),u&&(d.trigger("ajaxComplete",[_,h]),--Q.active||Q.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,o,r,s,a,l,u,c,h=Q.ajaxSetup({},e),p=h.context||h,d=h.context&&(p.nodeType||p.jquery)?Q(p):Q.event,f=Q.Deferred(),m=Q.Callbacks("once memory"),g=h.statusCode||{},y={},v={},b=0,x="canceled",_={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!s)for(s={};e=de.exec(r);)s[e[1].toLowerCase()]=e[2];e=s[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?r:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return b||(t=v[i]=v[i]||t,y[t]=e),this},overrideMimeType:function(t){return b||(h.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>b)for(e in t)g[e]=[g[e],t[e]];else _.always(t[_.status]);return this},abort:function(t){var e=t||x;return n&&n.abort(e),i(0,e),this}};if(f.promise(_).complete=m.add,_.success=_.done,_.error=_.fail,h.url=((t||h.url||_e)+"").replace(he,"").replace(ge,we[1]+"//"),h.type=e.method||e.type||h.method||h.type,h.dataTypes=Q.trim(h.dataType||"*").toLowerCase().match(dt)||[""],null==h.crossDomain&&(l=ye.exec(h.url.toLowerCase()),h.crossDomain=!(!l||l[1]===we[1]&&l[2]===we[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(we[3]||("http:"===we[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=Q.param(h.data,h.traditional)),N(ve,h,e,_),2===b)return _;u=Q.event&&h.global,u&&0===Q.active++&&Q.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!me.test(h.type),o=h.url,h.hasContent||(h.data&&(o=h.url+=(ce.test(o)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=pe.test(o)?o.replace(pe,"$1_="+ue++):o+(ce.test(o)?"&":"?")+"_="+ue++)),h.ifModified&&(Q.lastModified[o]&&_.setRequestHeader("If-Modified-Since",Q.lastModified[o]),Q.etag[o]&&_.setRequestHeader("If-None-Match",Q.etag[o])),(h.data&&h.hasContent&&h.contentType!==!1||e.contentType)&&_.setRequestHeader("Content-Type",h.contentType),_.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+xe+"; q=0.01":""):h.accepts["*"]);for(c in h.headers)_.setRequestHeader(c,h.headers[c]);if(h.beforeSend&&(h.beforeSend.call(p,_,h)===!1||2===b))return _.abort();x="abort";for(c in{success:1,error:1,complete:1})_[c](h[c]);if(n=N(be,h,e,_)){_.readyState=1,u&&d.trigger("ajaxSend",[_,h]),h.async&&h.timeout>0&&(a=setTimeout(function(){_.abort("timeout")},h.timeout));try{b=1,n.send(y,i)}catch(w){if(!(2>b))throw w;i(-1,w)}}else i(-1,"No Transport");return _},getJSON:function(t,e,i){return Q.get(t,e,i,"json")},getScript:function(t,e){return Q.get(t,void 0,e,"script")}}),Q.each(["get","post"],function(t,e){Q[e]=function(t,i,n,o){return Q.isFunction(i)&&(o=o||n,n=i,i=void 0),Q.ajax({url:t,type:e,dataType:o,data:i,success:n})}}),Q._evalUrl=function(t){return Q.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},Q.fn.extend({wrapAll:function(t){var e;return Q.isFunction(t)?this.each(function(e){Q(this).wrapAll(t.call(this,e))}):(this[0]&&(e=Q(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return Q.isFunction(t)?this.each(function(e){Q(this).wrapInner(t.call(this,e))}):this.each(function(){var e=Q(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=Q.isFunction(t);return this.each(function(i){Q(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){Q.nodeName(this,"body")||Q(this).replaceWith(this.childNodes)}).end()}}),Q.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},Q.expr.filters.visible=function(t){return!Q.expr.filters.hidden(t)};var Se=/%20/g,ke=/\[\]$/,Te=/\r?\n/g,Ee=/^(?:submit|button|image|reset|file)$/i,Me=/^(?:input|select|textarea|keygen)/i;Q.param=function(t,e){var i,n=[],o=function(t,e){e=Q.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=Q.ajaxSettings&&Q.ajaxSettings.traditional),Q.isArray(t)||t.jquery&&!Q.isPlainObject(t))Q.each(t,function(){o(this.name,this.value)});else for(i in t)B(i,t[i],e,o);return n.join("&").replace(Se,"+")},Q.fn.extend({serialize:function(){return Q.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=Q.prop(this,"elements");return t?Q.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!Q(this).is(":disabled")&&Me.test(this.nodeName)&&!Ee.test(t)&&(this.checked||!kt.test(t))}).map(function(t,e){var i=Q(this).val();return null==i?null:Q.isArray(i)?Q.map(i,function(t){return{name:e.name,value:t.replace(Te,"\r\n")}}):{name:e.name,value:i.replace(Te,"\r\n")}}).get()}}),Q.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Ce=0,Ae={},Re={0:200,1223:204},De=Q.ajaxSettings.xhr();t.attachEvent&&t.attachEvent("onunload",function(){for(var t in Ae)Ae[t]()}),Z.cors=!!De&&"withCredentials"in De,Z.ajax=De=!!De,Q.ajaxTransport(function(t){var e;return Z.cors||De&&!t.crossDomain?{send:function(i,n){var o,r=t.xhr(),s=++Ce;if(r.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)r[o]=t.xhrFields[o];t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(o in i)r.setRequestHeader(o,i[o]);e=function(t){return function(){e&&(delete Ae[s],e=r.onload=r.onerror=null,"abort"===t?r.abort():"error"===t?n(r.status,r.statusText):n(Re[r.status]||r.status,r.statusText,"string"==typeof r.responseText?{text:r.responseText}:void 0,r.getAllResponseHeaders()))}},r.onload=e(),r.onerror=e("error"),e=Ae[s]=e("abort");try{r.send(t.hasContent&&t.data||null)}catch(a){if(e)throw a}},abort:function(){e&&e()}}:void 0}),Q.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return Q.globalEval(t),t}}}),Q.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),Q.ajaxTransport("script",function(t){if(t.crossDomain){var e,i;return{send:function(n,o){e=Q("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&o("error"===t.type?404:200,t.type)}),J.head.appendChild(e[0])},abort:function(){i&&i()}}}});var ze=[],Le=/(=)\?(?=&|$)|\?\?/;Q.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=ze.pop()||Q.expando+"_"+ue++;return this[t]=!0,t}}),Q.ajaxPrefilter("json jsonp",function(e,i,n){var o,r,s,a=e.jsonp!==!1&&(Le.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Le.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(o=e.jsonpCallback=Q.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Le,"$1"+o):e.jsonp!==!1&&(e.url+=(ce.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return s||Q.error(o+" was not called"),s[0]},e.dataTypes[0]="json",r=t[o],t[o]=function(){s=arguments},n.always(function(){t[o]=r,e[o]&&(e.jsonpCallback=i.jsonpCallback,ze.push(o)),s&&Q.isFunction(r)&&r(s[0]),s=r=void 0}),"script"):void 0}),Q.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||J;var n=st.exec(t),o=!i&&[];return n?[e.createElement(n[1])]:(n=Q.buildFragment([t],e,o),o&&o.length&&Q(o).remove(),Q.merge([],n.childNodes))};var Pe=Q.fn.load;Q.fn.load=function(t,e,i){if("string"!=typeof t&&Pe)return Pe.apply(this,arguments);var n,o,r,s=this,a=t.indexOf(" ");return a>=0&&(n=Q.trim(t.slice(a)),t=t.slice(0,a)),Q.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(o="POST"),s.length>0&&Q.ajax({url:t,type:o,dataType:"html",data:e}).done(function(t){r=arguments,s.html(n?Q("<div>").append(Q.parseHTML(t)).find(n):t)}).complete(i&&function(t,e){s.each(i,r||[t.responseText,e,t])}),this},Q.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){Q.fn[e]=function(t){return this.on(e,t)}}),Q.expr.filters.animated=function(t){return Q.grep(Q.timers,function(e){return t===e.elem}).length};var Ie=t.document.documentElement;Q.offset={setOffset:function(t,e,i){var n,o,r,s,a,l,u,c=Q.css(t,"position"),h=Q(t),p={};"static"===c&&(t.style.position="relative"),a=h.offset(),r=Q.css(t,"top"),l=Q.css(t,"left"),u=("absolute"===c||"fixed"===c)&&(r+l).indexOf("auto")>-1,u?(n=h.position(),s=n.top,o=n.left):(s=parseFloat(r)||0,o=parseFloat(l)||0),Q.isFunction(e)&&(e=e.call(t,i,a)),null!=e.top&&(p.top=e.top-a.top+s),null!=e.left&&(p.left=e.left-a.left+o),"using"in e?e.using.call(t,p):h.css(p)}},Q.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){Q.offset.setOffset(this,t,e)});var e,i,n=this[0],o={top:0,left:0},r=n&&n.ownerDocument;if(r)return e=r.documentElement,Q.contains(e,n)?(typeof n.getBoundingClientRect!==Tt&&(o=n.getBoundingClientRect()),i=F(r),{top:o.top+i.pageYOffset-e.clientTop,left:o.left+i.pageXOffset-e.clientLeft}):o},position:function(){if(this[0]){var t,e,i=this[0],n={top:0,left:0};return"fixed"===Q.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),Q.nodeName(t[0],"html")||(n=t.offset()),n.top+=Q.css(t[0],"borderTopWidth",!0),n.left+=Q.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-Q.css(i,"marginTop",!0),left:e.left-n.left-Q.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Ie;t&&!Q.nodeName(t,"html")&&"static"===Q.css(t,"position");)t=t.offsetParent;return t||Ie})}}),Q.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var n="pageYOffset"===i;
Q.fn[e]=function(o){return gt(this,function(e,o,r){var s=F(e);return void 0===r?s?s[i]:e[o]:void(s?s.scrollTo(n?t.pageXOffset:r,n?r:t.pageYOffset):e[o]=r)},e,o,arguments.length,null)}}),Q.each(["top","left"],function(t,e){Q.cssHooks[e]=w(Z.pixelPosition,function(t,i){return i?(i=_(t,e),qt.test(i)?Q(t).position()[e]+"px":i):void 0})}),Q.each({Height:"height",Width:"width"},function(t,e){Q.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){Q.fn[n]=function(n,o){var r=arguments.length&&(i||"boolean"!=typeof n),s=i||(n===!0||o===!0?"margin":"border");return gt(this,function(e,i,n){var o;return Q.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===n?Q.css(e,i,s):Q.style(e,i,n,s)},e,r?n:void 0,r,null)}})}),Q.fn.size=function(){return this.length},Q.fn.andSelf=Q.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Q});var Ne=t.jQuery,Oe=t.$;return Q.noConflict=function(e){return t.$===Q&&(t.$=Oe),e&&t.jQuery===Q&&(t.jQuery=Ne),Q},typeof e===Tt&&(t.jQuery=t.$=Q),Q})},{}],118:[function(t,e,i){!function(i){"use strict";var n,o=i.Base64,r="2.1.9";if("undefined"!=typeof e&&e.exports)try{n=t("buffer").Buffer}catch(s){}var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=function(t){for(var e={},i=0,n=t.length;n>i;i++)e[t.charAt(i)]=i;return e}(a),u=String.fromCharCode,c=function(t){if(t.length<2){var e=t.charCodeAt(0);return 128>e?t:2048>e?u(192|e>>>6)+u(128|63&e):u(224|e>>>12&15)+u(128|e>>>6&63)+u(128|63&e)}var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return u(240|e>>>18&7)+u(128|e>>>12&63)+u(128|e>>>6&63)+u(128|63&e)},h=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,p=function(t){return t.replace(h,c)},d=function(t){var e=[0,2,1][t.length%3],i=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0),n=[a.charAt(i>>>18),a.charAt(i>>>12&63),e>=2?"=":a.charAt(i>>>6&63),e>=1?"=":a.charAt(63&i)];return n.join("")},f=i.btoa?function(t){return i.btoa(t)}:function(t){return t.replace(/[\s\S]{1,3}/g,d)},m=n?function(t){return(t.constructor===n.constructor?t:new n(t)).toString("base64")}:function(t){return f(p(t))},g=function(t,e){return e?m(String(t)).replace(/[+\/]/g,function(t){return"+"==t?"-":"_"}).replace(/=/g,""):m(String(t))},y=function(t){return g(t,!0)},v=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),b=function(t){switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),i=e-65536;return u((i>>>10)+55296)+u((1023&i)+56320);case 3:return u((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return u((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},x=function(t){return t.replace(v,b)},_=function(t){var e=t.length,i=e%4,n=(e>0?l[t.charAt(0)]<<18:0)|(e>1?l[t.charAt(1)]<<12:0)|(e>2?l[t.charAt(2)]<<6:0)|(e>3?l[t.charAt(3)]:0),o=[u(n>>>16),u(n>>>8&255),u(255&n)];return o.length-=[0,0,2,1][i],o.join("")},w=i.atob?function(t){return i.atob(t)}:function(t){return t.replace(/[\s\S]{1,4}/g,_)},S=n?function(t){return(t.constructor===n.constructor?t:new n(t,"base64")).toString()}:function(t){return x(w(t))},k=function(t){return S(String(t).replace(/[-_]/g,function(t){return"-"==t?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},T=function(){var t=i.Base64;return i.Base64=o,t};if(i.Base64={VERSION:r,atob:w,btoa:f,fromBase64:k,toBase64:g,utob:p,encode:g,encodeURI:y,btou:x,decode:k,noConflict:T},"function"==typeof Object.defineProperty){var E=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}};i.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",E(function(){return k(this)})),Object.defineProperty(String.prototype,"toBase64",E(function(t){return g(this,t)})),Object.defineProperty(String.prototype,"toBase64URI",E(function(){return g(this,!0)}))}}i.Meteor&&(Base64=i.Base64)}(this)},{buffer:88}],119:[function(t,e,i){"use strict";function n(t){if(this.type=t.type,t.arrayBuffer)this.capacity=t.capacity,this.arrayBuffer=t.arrayBuffer,this.attributes=t.attributes,this.itemSize=t.itemSize,this.length=t.length;else{this.capacity=o(n.CAPACITY_DEFAULT,n.CAPACITY_ALIGNMENT),this.arrayBuffer=new ArrayBuffer(this.capacity),this.attributes=[],this.itemSize=0,this.length=0;for(var e=this.type===n.BufferType.VERTEX?n.VERTEX_ATTRIBUTE_ALIGNMENT:1,i=0;i<t.attributes.length;i++){var a=r.extend({},t.attributes[i]);a.components=a.components||1,a.type=a.type||n.AttributeType.UNSIGNED_BYTE,a.size=a.type.size*a.components,a.offset=this.itemSize,this.attributes.push(a),this.itemSize=o(a.offset+a.size,e),s(!isNaN(this.itemSize)),s(!isNaN(a.size)),s(a.type.name in n.AttributeType)}this._createPushMethod(),this._refreshViews()}}function o(t,e){e=e||1;var i=t%e;return 1!==e&&0!==i&&(t+=e-i),t}var r=t("../util/util"),s=t("assert");n.prototype.bind=function(t){var e=t[this.type];this.buffer?t.bindBuffer(e,this.buffer):(this.buffer=t.createBuffer(),t.bindBuffer(e,this.buffer),t.bufferData(e,this.arrayBuffer.slice(0,this.length*this.itemSize),t.STATIC_DRAW),this.arrayBuffer=null)},n.prototype.destroy=function(t){this.buffer&&t.deleteBuffer(this.buffer)},n.prototype.setAttribPointers=function(t,e,i){for(var n=0;n<this.attributes.length;n++){var o=this.attributes[n];t.vertexAttribPointer(e["a_"+o.name],o.components,t[o.type.name],!1,this.itemSize,i+o.offset)}},n.prototype.get=function(t){for(var e={},i=t*this.itemSize,n=0;n<this.attributes.length;n++)for(var o=this.attributes[n],r=e[o.name]=[],s=0;s<o.components;s++){var a=(i+o.offset)/o.type.size+s;r.push(this.views[o.type.name][a])}return e},n.prototype._resize=function(t){var e=this.views.UNSIGNED_BYTE;this.capacity=o(t,n.CAPACITY_ALIGNMENT),this.arrayBuffer=new ArrayBuffer(this.capacity),this._refreshViews(),this.views.UNSIGNED_BYTE.set(e)},n.prototype._refreshViews=function(){this.views={UNSIGNED_BYTE:new Uint8Array(this.arrayBuffer),BYTE:new Int8Array(this.arrayBuffer),UNSIGNED_SHORT:new Uint16Array(this.arrayBuffer),SHORT:new Int16Array(this.arrayBuffer)}},n.prototype._createPushMethod=function(){var t="",e=[];t+="var index = this.length++;\n",t+="var offset = index * "+this.itemSize+";\n",t+="if (offset + "+this.itemSize+" > this.capacity) { this._resize(this.capacity * 1.5); }\n";for(var i=0;i<this.attributes.length;i++){var n=this.attributes[i],o="offset"+i;t+="\nvar "+o+" = (offset + "+n.offset+") / "+n.type.size+";\n";for(var r=0;r<n.components;r++){var s="value"+i+"_"+r,a="this.views."+n.type.name+"["+o+" + "+r+"]";t+=a+" = "+s+";\n",e.push(s)}}t+="\nreturn index;\n",this.push=new Function(e,t)},n.BufferType={VERTEX:"ARRAY_BUFFER",ELEMENT:"ELEMENT_ARRAY_BUFFER"},n.AttributeType={BYTE:{size:1,name:"BYTE"},UNSIGNED_BYTE:{size:1,name:"UNSIGNED_BYTE"},SHORT:{size:2,name:"SHORT"},UNSIGNED_SHORT:{size:2,name:"UNSIGNED_SHORT"}},n.ELEMENT_ATTRIBUTE_TYPE=n.AttributeType.UNSIGNED_SHORT,n.CAPACITY_DEFAULT=8192,n.CAPACITY_ALIGNMENT=2,n.VERTEX_ATTRIBUTE_ALIGNMENT=4,e.exports=n},{"../util/util":214,assert:87}],120:[function(t,e,i){"use strict";function n(t){t=t||{};for(var e in h)t[e]=new o(t[e]||h[e]);return t}var o=t("./buffer");e.exports=n;var r={type:o.BufferType.VERTEX,attributes:[{name:"pos",components:2,type:o.AttributeType.SHORT}]},s={type:o.BufferType.VERTEX,attributes:[{name:"pos",components:2,type:o.AttributeType.SHORT},{name:"data",components:4,type:o.AttributeType.BYTE}]},a={type:o.BufferType.VERTEX,attributes:[{name:"pos",components:2,type:o.AttributeType.SHORT},{name:"offset",components:2,type:o.AttributeType.SHORT},{name:"data1",components:4,type:o.AttributeType.UNSIGNED_BYTE},{name:"data2",components:2,type:o.AttributeType.UNSIGNED_BYTE}]},l={type:o.BufferType.VERTEX,attributes:[{name:"pos",components:2,type:o.AttributeType.SHORT},{name:"extrude",components:2,type:o.AttributeType.SHORT},{name:"data",components:2,type:o.AttributeType.UNSIGNED_BYTE}]},u={type:o.BufferType.ELEMENT,attributes:[{name:"vertices",components:3,type:o.ELEMENT_ATTRIBUTE_TYPE}]},c={type:o.BufferType.ELEMENT,attributes:[{name:"vertices",components:2,type:o.ELEMENT_ATTRIBUTE_TYPE}]},h={glyphVertex:a,glyphElement:u,iconVertex:a,iconElement:u,circleVertex:r,circleElement:u,fillVertex:r,fillElement:u,outlineElement:c,lineVertex:s,lineElement:u,collisionBoxVertex:l}},{"./buffer":119}],121:[function(t,e,i){"use strict";function n(t){this.buffers=t,this.elementGroups=new o(t.circleVertex,t.circleElement)}var o=t("./element_groups");e.exports=n,n.prototype.addFeatures=function(){for(var t=4096,e=0;e<this.features.length;e++)for(var i=this.features[e].loadGeometry()[0],n=0;n<i.length;n++){this.elementGroups.makeRoomFor(6);var o=i[n].x,r=i[n].y;if(!(0>o||o>=t||0>r||r>=t)){var s=this.buffers.circleVertex.length-this.elementGroups.current.vertexStartIndex;this.buffers.circleVertex.push(2*o,2*r),this.buffers.circleVertex.push(2*o+1,2*r),this.buffers.circleVertex.push(2*o+1,2*r+1),this.buffers.circleVertex.push(2*o,2*r+1),this.elementGroups.elementBuffer.push(s,s+1,s+2),this.elementGroups.elementBuffer.push(s,s+3,s+2),this.elementGroups.current.vertexLength+=4,this.elementGroups.current.elementLength+=2}}}},{"./element_groups":123}],122:[function(t,e,i){"use strict";function n(t,e,i,n,h){var p=new c("layout",t.type,t.layout,{}).values(),d={lastIntegerZoom:1/0,lastIntegerZoomTime:0,lastZoom:0},f={};for(var m in p)f[m]=p[m].calculate(i,d);"symbol"===t.type&&(p["text-size"]&&(f["text-max-size"]=p["text-size"].calculate(18,d),f["text-size"]=p["text-size"].calculate(i+1,d)),p["icon-size"]&&(f["icon-max-size"]=p["icon-size"].calculate(18,d),f["icon-size"]=p["icon-size"].calculate(i+1,d)));var g="line"===t.type?o:"fill"===t.type?r:"symbol"===t.type?s:"circle"===t.type?a:null,y=new g(e,new l[t.type](f),n,i,h);return y.id=t.id,y.type=t.type,y["source-layer"]=t["source-layer"],y.interactive=t.interactive,y.minZoom=t.minzoom,y.maxZoom=t.maxzoom,y.filter=u(t.filter),y.features=[],y}e.exports=n;var o=t("./line_bucket"),r=t("./fill_bucket"),s=t("./symbol_bucket"),a=t("./circle_bucket"),l=t("../style/layout_properties"),u=t("feature-filter"),c=t("../style/style_declaration_set")},{"../style/layout_properties":162,"../style/style_declaration_set":168,"./circle_bucket":121,"./fill_bucket":125,"./line_bucket":126,"./symbol_bucket":127,"feature-filter":216}],123:[function(t,e,i){"use strict";function n(t,e,i){this.vertexBuffer=t,this.elementBuffer=e,this.secondElementBuffer=i,this.groups=[]}function o(t,e,i){this.vertexStartIndex=t,this.elementStartIndex=e,this.secondElementStartIndex=i,this.elementLength=0,this.vertexLength=0,this.secondElementLength=0}e.exports=n,n.prototype.makeRoomFor=function(t){(!this.current||this.current.vertexLength+t>65535)&&(this.current=new o(this.vertexBuffer.length,this.elementBuffer&&this.elementBuffer.length,this.secondElementBuffer&&this.secondElementBuffer.length),this.groups.push(this.current))}},{}],124:[function(t,e,i){"use strict";function n(t,e){this.x=t.x,this.y=t.y,this.z=t.z-Math.log(e)/Math.LN2,this.rtree=f(9),this.toBeInserted=[]}function o(t,e,i){return"Point"===e?l(t,i):"LineString"===e?s(t,i):"Polygon"===e?r(t,i)||s(t,i):!1}function r(t,e){return p(t,new m(e[0],e[1]))||p(t,new m(e[0],e[3]))||p(t,new m(e[2],e[1]))||p(t,new m(e[2],e[3]))?!0:s(t,e)}function s(t,e){for(var i=0;i<t.length;i++)for(var n=t[i],o=0,r=n.length-1;o<n.length;r=o++){var s=n[o],u=n[r],c=new m(s.y,s.x),h=new m(u.y,u.x);if(a(s,u,e[0],e[2],e[1])||a(s,u,e[0],e[2],e[3])||a(c,h,e[1],e[3],e[0])||a(c,h,e[1],e[3],e[2]))return!0}return l(t,e)}function a(t,e,i,n,o){if(e.y===t.y)return e.y===o&&Math.min(t.x,e.x)<=n&&Math.max(t.x,e.x)>=i;var r=(o-t.y)/(e.y-t.y),s=t.x+r*(e.x-t.x);return s>=i&&n>=s&&1>=r&&r>=0}function l(t,e){for(var i=0;i<t.length;i++)for(var n=t[i],o=0;o<n.length;o++)if(n[o].x>=e[0]&&n[o].y>=e[1]&&n[o].x<=e[2]&&n[o].y<=e[3])return!0;return!1}function u(t,e,i,n){return"Point"===e?d(t,i,n):"LineString"===e?h(t,i,n):"Polygon"===e?p(t,i)||h(t,i,n):!1}function c(t,e,i){var n=e.distSqr(i);if(0===n)return t.distSqr(e);var o=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/n;return 0>o?t.distSqr(e):o>1?t.distSqr(i):t.distSqr(i.sub(e)._mult(o)._add(e))}function h(t,e,i){for(var n=i*i,o=0;o<t.length;o++)for(var r=t[o],s=1;s<r.length;s++){var a=r[s-1],l=r[s];if(c(e,a,l)<n)return!0}return!1}function p(t,e){for(var i,n,o,r=!1,s=0;s<t.length;s++){i=t[s];for(var a=0,l=i.length-1;a<i.length;l=a++)n=i[a],o=i[l],n.y>e.y!=o.y>e.y&&e.x<(o.x-n.x)*(e.y-n.y)/(o.y-n.y)+n.x&&(r=!r)}return r}function d(t,e,i){for(var n=i*i,o=0;o<t.length;o++)for(var r=t[o],s=0;s<r.length;s++)if(r[s].distSqr(e)<=n)return!0;return!1}var f=t("rbush"),m=t("point-geometry"),g=t("vector-tile"),y=t("../util/util");e.exports=n,n.prototype.insert=function(t,e,i){t.layers=e,t.feature=i,this.toBeInserted.push(t)},n.prototype._load=function(){this.rtree.load(this.toBeInserted),this.toBeInserted=[]},n.prototype.query=function(t,e){this.toBeInserted.length&&this._load();var i,n,r=t.params||{},s=t.x,a=t.y,l=[];"undefined"!=typeof s&&"undefined"!=typeof a?(i=(r.radius||0)*(t.tileExtent||4096)/t.scale,n=[s-i,a-i,s+i,a+i]):n=[t.minX,t.minY,t.maxX,t.maxY];for(var c=this.rtree.search(n),h=0;h<c.length;h++){var p=c[h].feature,d=c[h].layers,f=g.VectorTileFeature.types[p.type];if((!r.$type||f===r.$type)&&(!i||u(p.loadGeometry(),f,new m(s,a),i))&&o(p.loadGeometry(),f,n)){var v=p.toGeoJSON(this.x,this.y,this.z);r.includeGeometry||(v.geometry=null);for(var b=0;b<d.length;b++){var x=d[b];r.layerIds&&r.layerIds.indexOf(x)<0||l.push(y.extend({layer:x},v))}}}e(null,l)}},{"../util/util":214,"point-geometry":243,rbush:244,"vector-tile":247}],125:[function(t,e,i){"use strict";function n(t){this.buffers=t,this.elementGroups=new o(t.fillVertex,t.fillElement,t.outlineElement)}var o=t("./element_groups");e.exports=n,n.prototype.addFeatures=function(){for(var t=this.features,e=0;e<t.length;e++){var i=t[e];this.addFeature(i.loadGeometry())}},n.prototype.addFeature=function(t){for(var e=0;e<t.length;e++)this.addFill(t[e])},n.prototype.addFill=function(t){if(!(t.length<3)){var e=t.length;this.elementGroups.makeRoomFor(e+1);for(var i,n,o,r=this.elementGroups.current,s=this.buffers.fillVertex,a=this.buffers.fillElement,l=this.buffers.outlineElement,u=s.length-r.vertexStartIndex,c=0;c<t.length;c++)n=s.length-r.vertexStartIndex,o=t[c],s.push(o.x,o.y),r.vertexLength++,c>=2&&(o.x!==t[0].x||o.y!==t[0].y)&&(a.push(u,i,n),r.elementLength++),c>=1&&(l.push(i,n),r.secondElementLength++),i=n}}},{"./element_groups":123}],126:[function(t,e,i){"use strict";function n(t,e){this.buffers=t,this.elementGroups=new r(t.lineVertex,t.lineElement),this.layoutProperties=e}function o(t,e,i,n,o,r){return t.push(e.x<<1|n,e.y<<1|o,Math.round(s*i.x),Math.round(s*i.y),r/128,r%128)}var r=t("./element_groups");e.exports=n,n.prototype.addFeatures=function(){for(var t=this.features,e=0;e<t.length;e++){var i=t[e];this.addFeature(i.loadGeometry())}},n.prototype.addFeature=function(t){for(var e=this.layoutProperties,i=0;i<t.length;i++)this.addLine(t[i],e["line-join"],e["line-cap"],e["line-miter-limit"],e["line-round-limit"])},n.prototype.addLine=function(t,e,i,n,o){for(var r=t.length;r>2&&t[r-1].equals(t[r-2]);)r--;if(!(t.length<2)){"bevel"===e&&(n=1.05);var s=t[0],a=t[r-1],l=s.equals(a);if(this.elementGroups.makeRoomFor(10*r),2!==r||!l){var u,c,h,p,d,f,m,g=i,y=l?"butt":i,v=1,b=0,x=!0;this.e1=this.e2=this.e3=-1,l&&(u=t[r-2],d=s.sub(u)._unit()._perp());for(var _=0;r>_;_++)if(h=l&&_===r-1?t[1]:t[_+1],!h||!t[_].equals(h)){d&&(p=d),u&&(c=u),u=t[_],c&&(b+=u.dist(c)),d=h?h.sub(u)._unit()._perp():p,p=p||d;var w=p.add(d)._unit(),S=w.x*d.x+w.y*d.y,k=1/S,T=c&&h,E=T?e:h?g:y;if(T&&"round"===E&&(o>k?E="miter":2>=k&&(E="fakeround")),"miter"===E&&k>n&&(E="bevel"),"bevel"===E&&(k>2&&(E="flipbevel"),n>k&&(E="miter")),"miter"===E)w._mult(k),this.addCurrentVertex(u,v,b,w,0,0,!1);else if("flipbevel"===E){if(k>100)w=d.clone();else{var M=p.x*d.y-p.y*d.x>0?-1:1,C=k*p.add(d).mag()/p.sub(d).mag();w._perp()._mult(C*M)}this.addCurrentVertex(u,v,b,w,0,0,!1),v=-v}else if("bevel"===E||"fakeround"===E){var A=v*(p.x*d.y-p.y*d.x)>0,R=-Math.sqrt(k*k-1);if(A?(m=0,f=R):(f=0,m=R),x||this.addCurrentVertex(u,v,b,p,f,m,!1),"fakeround"===E){for(var D,z=Math.floor(8*(.5-(S-.5))),L=0;z>L;L++)D=d.mult((L+1)/(z+1))._add(p)._unit(),this.addPieSliceVertex(u,v,b,D,A);this.addPieSliceVertex(u,v,b,w,A);for(var P=z-1;P>=0;P--)D=p.mult((P+1)/(z+1))._add(d)._unit(),this.addPieSliceVertex(u,v,b,D,A)}h&&this.addCurrentVertex(u,v,b,d,-f,-m,!1)}else"butt"===E?(x||this.addCurrentVertex(u,v,b,p,0,0,!1),h&&this.addCurrentVertex(u,v,b,d,0,0,!1)):"square"===E?(x||(this.addCurrentVertex(u,v,b,p,1,1,!1),this.e1=this.e2=-1,v=1),h&&this.addCurrentVertex(u,v,b,d,-1,-1,!1)):"round"===E&&(x||(this.addCurrentVertex(u,v,b,p,0,0,!1),this.addCurrentVertex(u,v,b,p,1,1,!0),this.e1=this.e2=-1,v=1),h&&(this.addCurrentVertex(u,v,b,d,-1,-1,!0),this.addCurrentVertex(u,v,b,d,0,0,!1)));x=!1}}}},n.prototype.addCurrentVertex=function(t,e,i,n,r,s,a){var l,u=a?1:0,c=this.buffers.lineVertex,h=this.buffers.lineElement,p=this.elementGroups.current,d=this.elementGroups.current.vertexStartIndex;l=n.mult(e),r&&l._sub(n.perp()._mult(r)),this.e3=o(c,t,l,u,0,i)-d,this.e1>=0&&this.e2>=0&&(h.push(this.e1,this.e2,this.e3),p.elementLength++),this.e1=this.e2,this.e2=this.e3,l=n.mult(-e),s&&l._sub(n.perp()._mult(s)),this.e3=o(c,t,l,u,1,i)-d,this.e1>=0&&this.e2>=0&&(h.push(this.e1,this.e2,this.e3),p.elementLength++),this.e1=this.e2,this.e2=this.e3,p.vertexLength+=2},n.prototype.addPieSliceVertex=function(t,e,i,n,r){var s=this.buffers.lineVertex,a=this.buffers.lineElement,l=this.elementGroups.current,u=this.elementGroups.current.vertexStartIndex,c=r?1:0;n=n.mult(e*(r?-1:1)),this.e3=o(s,t,n,0,c,i)-u,l.vertexLength+=1,this.e1>=0&&this.e2>=0&&(a.push(this.e1,this.e2,this.e3),l.elementLength++),r?this.e2=this.e3:this.e1=this.e3};var s=63},{"./element_groups":123}],127:[function(t,e,i){"use strict";function n(t,e,i,n,o){this.buffers=t,this.layoutProperties=e,this.overscaling=i,this.zoom=n,this.collisionDebug=o;var r=512*i,s=4096;this.tilePixelRatio=s/r,this.compareText={},this.symbolInstances=[]}function o(t,e,i,n,o){t.push(e.x,e.y,Math.round(i.x),Math.round(i.y),10*n,10*o)}function r(t,e,i,n,o,r,s,a,l,u){t.push(e,i,Math.round(64*n),Math.round(64*o),r/4,s/4,10*(u||0),0,10*(a||0),10*Math.min(l||25,25),0,0)}function s(t,e,i,n,o,r,s,a,l,u,c,h){this.x=t.x,this.y=t.y,this.hasText=!!i,this.hasIcon=!!n,this.hasText&&(this.glyphQuads=r?y(t,i,s,e,o,l):[],this.textCollisionFeature=new _(e,t,i,s,a,l)),this.hasIcon&&(this.iconQuads=r?v(t,n,u,e,o,h):[],this.iconCollisionFeature=new _(e,t,n,u,c,h))}var a=t("./element_groups"),l=t("../symbol/anchor"),u=t("../symbol/get_anchors"),c=t("../util/token"),h=t("../symbol/quads"),p=t("../symbol/shaping"),d=t("../symbol/resolve_text"),f=t("../symbol/mergelines"),m=p.shapeText,g=p.shapeIcon,y=h.getGlyphQuads,v=h.getIconQuads,b=t("../symbol/clip_line"),x=t("point-geometry"),_=t("../symbol/collision_feature");e.exports=n,n.prototype.addFeatures=function(t,e,i){var n=this.layoutProperties,o=this.features,r=this.textFeatures,s=.5,a=.5;switch(n["text-anchor"]){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(n["text-anchor"]){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}for(var l="right"===n["text-justify"]?1:"left"===n["text-justify"]?0:.5,u=24,h=n["text-line-height"]*u,p="line"!==n["symbol-placement"]?n["text-max-width"]*u:0,d=n["text-letter-spacing"]*u,y=[n["text-offset"][0]*u,n["text-offset"][1]*u],v=n["text-font"].join(","),b=[],x=0;x<o.length;x++)b.push(o[x].loadGeometry());if("line"===n["symbol-placement"]){var _=f(o,r,b);b=_.geometries,o=_.features,r=_.textFeatures}for(var w,S,k=0;k<o.length;k++)if(b[k]){if(w=r[k]?m(r[k],e[v],p,h,s,a,l,d,y):null,n["icon-image"]){var T=c(o[k].properties,n["icon-image"]),E=i[T];S=g(E,n),E&&(void 0===this.sdfIcons?this.sdfIcons=E.sdf:this.sdfIcons!==E.sdf&&console.warn("Style sheet warning: Cannot mix SDF and non-SDF icons in one bucket"))}else S=null;(w||S)&&this.addFeature(b[k],w,S)}this.placeFeatures(t,this.buffers,this.collisionDebug)},n.prototype.addFeature=function(t,e,i){var n=this.layoutProperties,o=24,r=n["text-size"]/o,a=this.tilePixelRatio*r,c=this.tilePixelRatio*n["text-max-size"]/o,h=this.tilePixelRatio*n["icon-size"],p=this.tilePixelRatio*n["symbol-spacing"],d=n["symbol-avoid-edges"],f=n["text-padding"]*this.tilePixelRatio,m=n["icon-padding"]*this.tilePixelRatio,g=n["text-max-angle"]/180*Math.PI,y="map"===n["text-rotation-alignment"]&&"line"===n["symbol-placement"],v="map"===n["icon-rotation-alignment"]&&"line"===n["symbol-placement"],x=n["text-allow-overlap"]||n["icon-allow-overlap"]||n["text-ignore-placement"]||n["icon-ignore-placement"],_="line"===n["symbol-placement"],w=p/2;_&&(t=b(t,0,0,4096,4096));for(var S=0;S<t.length;S++)for(var k=t[S],T=_?u(k,p,g,e,i,o,c,this.overscaling):[new l(k[0].x,k[0].y,0)],E=0,M=T.length;M>E;E++){var C=T[E];if(!(e&&_&&this.anchorIsTooClose(e.text,w,C))){var A=!(C.x<0||C.x>4096||C.y<0||C.y>4096);if(!d||A){var R=A||x;this.symbolInstances.push(new s(C,k,e,i,n,R,a,f,y,h,m,v))}}}},n.prototype.anchorIsTooClose=function(t,e,i){var n=this.compareText;if(t in n){for(var o=n[t],r=o.length-1;r>=0;r--)if(i.dist(o[r])<e)return!0}else n[t]=[];return n[t].push(i),!1},n.prototype.placeFeatures=function(t,e,i){this.buffers=e;var n=this.elementGroups={text:new a(e.glyphVertex,e.glyphElement),icon:new a(e.iconVertex,e.iconElement),sdfIcons:this.sdfIcons},o=this.layoutProperties,r=t.maxScale;n.text["text-size"]=o["text-size"],n.icon["icon-size"]=o["icon-size"];var s="map"===o["text-rotation-alignment"]&&"line"===o["symbol-placement"],l="map"===o["icon-rotation-alignment"]&&"line"===o["symbol-placement"],u=o["text-allow-overlap"]||o["icon-allow-overlap"]||o["text-ignore-placement"]||o["icon-ignore-placement"];if(u){var c=t.angle,h=Math.sin(c),p=Math.cos(c);this.symbolInstances.sort(function(t,e){var i=h*t.x+p*t.y,n=h*e.x+p*e.y;return n-i})}for(var d=0;d<this.symbolInstances.length;d++){var f=this.symbolInstances[d],m=f.hasText,g=f.hasIcon,y=o["text-optional"]||!m,v=o["icon-optional"]||!g,b=m&&!o["text-allow-overlap"]?t.placeCollisionFeature(f.textCollisionFeature):t.minScale,x=g&&!o["icon-allow-overlap"]?t.placeCollisionFeature(f.iconCollisionFeature):t.minScale;y||v?!v&&b?b=Math.max(x,b):!y&&x&&(x=Math.max(x,b)):x=b=Math.max(x,b),m&&(o["text-ignore-placement"]||t.insertCollisionFeature(f.textCollisionFeature,b),r>=b&&this.addSymbols(e.glyphVertex,e.glyphElement,n.text,f.glyphQuads,b,o["text-keep-upright"],s,t.angle)),g&&(o["icon-ignore-placement"]||t.insertCollisionFeature(f.iconCollisionFeature,x),r>=x&&this.addSymbols(e.iconVertex,e.iconElement,n.icon,f.iconQuads,x,o["icon-keep-upright"],l,t.angle))}i&&this.addToDebugBuffers(t)},n.prototype.addSymbols=function(t,e,i,n,o,s,a,l){i.makeRoomFor(4*n.length);for(var u=i.current,c=this.zoom,h=Math.max(Math.log(o)/Math.LN2+c,0),p=0;p<n.length;p++){var d=n[p],f=d.angle,m=(f+l+Math.PI)%(2*Math.PI);if(!(s&&a&&(m<=Math.PI/2||m>3*Math.PI/2))){var g=d.tl,y=d.tr,v=d.bl,b=d.br,x=d.tex,_=d.anchorPoint,w=Math.max(c+Math.log(d.minScale)/Math.LN2,h),S=Math.min(c+Math.log(d.maxScale)/Math.LN2,25);if(!(w>=S)){w===h&&(w=0);var k=t.length-u.vertexStartIndex;r(t,_.x,_.y,g.x,g.y,x.x,x.y,w,S,h),r(t,_.x,_.y,y.x,y.y,x.x+x.w,x.y,w,S,h),r(t,_.x,_.y,v.x,v.y,x.x,x.y+x.h,w,S,h),r(t,_.x,_.y,b.x,b.y,x.x+x.w,x.y+x.h,w,S,h),u.vertexLength+=4,e.push(k,k+1,k+2),e.push(k+1,k+2,k+3),u.elementLength+=2}}}},n.prototype.updateIcons=function(t){var e=this.layoutProperties["icon-image"];if(e)for(var i=0;i<this.features.length;i++){var n=c(this.features[i].properties,e);n&&(t[n]=!0)}},n.prototype.updateFont=function(t){var e=this.layoutProperties["text-font"],i=t[e]=t[e]||{};this.textFeatures=d(this.features,this.layoutProperties,i)},n.prototype.addToDebugBuffers=function(t){this.elementGroups.collisionBox=new a(this.buffers.collisionBoxVertex),this.elementGroups.collisionBox.makeRoomFor(0);for(var e=this.buffers.collisionBoxVertex,i=-t.angle,n=t.yStretch,r=0;r<this.symbolInstances.length;r++)for(var s=0;2>s;s++){var l=this.symbolInstances[r][0===s?"textCollisionFeature":"iconCollisionFeature"];if(l)for(var u=l.boxes,c=0;c<u.length;c++){var h=u[c],p=h.anchorPoint,d=new x(h.x1,h.y1*n)._rotate(i),f=new x(h.x2,h.y1*n)._rotate(i),m=new x(h.x1,h.y2*n)._rotate(i),g=new x(h.x2,h.y2*n)._rotate(i),y=Math.max(0,Math.min(25,this.zoom+Math.log(h.maxScale)/Math.LN2)),v=Math.max(0,Math.min(25,this.zoom+Math.log(h.placementScale)/Math.LN2));o(e,p,d,y,v),o(e,p,f,y,v),o(e,p,f,y,v),o(e,p,g,y,v),o(e,p,g,y,v),o(e,p,m,y,v),o(e,p,m,y,v),o(e,p,d,y,v),this.elementGroups.collisionBox.current.vertexLength+=8}}}},{"../symbol/anchor":171,"../symbol/clip_line":174,"../symbol/collision_feature":176,"../symbol/get_anchors":178,"../symbol/mergelines":181,"../symbol/quads":182,"../symbol/resolve_text":183,"../symbol/shaping":184,"../util/token":213,"./element_groups":123,"point-geometry":243}],128:[function(t,e,i){"use strict";function n(t,e,i){this.column=t,this.row=e,this.zoom=i}e.exports=n,n.prototype={clone:function(){return new n(this.column,this.row,this.zoom)},zoomTo:function(t){return this.clone()._zoomTo(t)},sub:function(t){return this.clone()._sub(t)},_zoomTo:function(t){var e=Math.pow(2,t-this.zoom);return this.column*=e,this.row*=e,this.zoom=t,this},_sub:function(t){return t=t.zoomTo(this.zoom),this.column-=t.column,this.row-=t.row,this}}},{}],129:[function(t,e,i){"use strict";function n(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}e.exports=n;var o=t("../util/util").wrap;n.prototype.wrap=function(){return new n(o(this.lng,-180,180),this.lat)},n.prototype.toArray=function(){return[this.lng,this.lat]},n.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},n.convert=function(t){return t instanceof n?t:Array.isArray(t)?new n(t[0],t[1]):t}},{"../util/util":214}],130:[function(t,e,i){"use strict";function n(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;o>n;n++)this.extend(i[n])}e.exports=n;var o=t("./lng_lat");n.prototype={extend:function(t){var e,i,r=this._sw,s=this._ne;if(t instanceof o)e=t,i=t;else{if(!(t instanceof n))return t?this.extend(o.convert(t)||n.convert(t)):this;if(e=t._sw,i=t._ne,!e||!i)return this}return r||s?(r.lng=Math.min(e.lng,r.lng),r.lat=Math.min(e.lat,r.lat),s.lng=Math.max(i.lng,s.lng),s.lat=Math.max(i.lat,s.lat)):(this._sw=new o(e.lng,e.lat),this._ne=new o(i.lng,i.lat)),this},getCenter:function(){return new o((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},getSouthWest:function(){return this._sw},getNorthEast:function(){return this._ne},getNorthWest:function(){return new o(this.getWest(),this.getNorth())},getSouthEast:function(){return new o(this.getEast(),this.getSouth())},getWest:function(){return this._sw.lng},getSouth:function(){return this._sw.lat},getEast:function(){return this._ne.lng},getNorth:function(){return this._ne.lat},toArray:function(){return[this._sw.toArray(),this._ne.toArray()]},toString:function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"}},n.convert=function(t){return!t||t instanceof n?t:new n(t)}},{"./lng_lat":129}],131:[function(t,e,i){"use strict";function n(t,e){this.tileSize=512,this._minZoom=t||0,this._maxZoom=e||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this._center=new o(0,0),this.zoom=0,this.angle=0,this._altitude=1.5,this._pitch=0,this._unmodified=!0}var o=t("./lng_lat"),r=t("point-geometry"),s=t("./coordinate"),a=t("../util/util").wrap,l=t("../util/interpolate"),u=t("gl-matrix"),c=u.vec4,h=u.mat4,p=u.mat2;e.exports=n,n.prototype={get minZoom(){return this._minZoom},set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},get maxZoom(){return this._maxZoom},set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},get worldSize(){return this.tileSize*this.scale},get centerPoint(){return this.size._div(2)},get size(){return new r(this.width,this.height)},get bearing(){return-this.angle/Math.PI*180},set bearing(t){var e=-a(t,-180,180)*Math.PI/180;this.angle!==e&&(this._unmodified=!1,this.angle=e,this._calcProjMatrix(),this.rotationMatrix=p.create(),p.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},get pitch(){return this._pitch/Math.PI*180},set pitch(t){var e=Math.min(60,t)/180*Math.PI;this._pitch!==e&&(this._unmodified=!1,this._pitch=e,this._calcProjMatrix())},get altitude(){return this._altitude},set altitude(t){var e=Math.max(.75,t);this._altitude!==e&&(this._unmodified=!1,this._altitude=e,this._calcProjMatrix())},get zoom(){return this._zoom},set zoom(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._calcProjMatrix(),this._constrain())},get center(){return this._center},set center(t){(t.lat!==this._center.lat||t.lng!==this._center.lng)&&(this._unmodified=!1,this._center=t,this._calcProjMatrix(),this._constrain())},resize:function(t,e){this.width=t,this.height=e,this.exMatrix=h.create(),h.ortho(this.exMatrix,0,t,e,0,0,-1),this._calcProjMatrix(),this._constrain()},get unmodified(){return this._unmodified},zoomScale:function(t){return Math.pow(2,t)},scaleZoom:function(t){return Math.log(t)/Math.LN2},project:function(t,e){return new r(this.lngX(t.lng,e),this.latY(t.lat,e))},unproject:function(t,e){return new o(this.xLng(t.x,e),this.yLat(t.y,e))},get x(){return this.lngX(this.center.lng)},get y(){return this.latY(this.center.lat)},get point(){return new r(this.x,this.y)},lngX:function(t,e){return(180+t)*(e||this.worldSize)/360},latY:function(t,e){var i=180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360));return(180-i)*(e||this.worldSize)/360},xLng:function(t,e){return 360*t/(e||this.worldSize)-180},yLat:function(t,e){var i=180-360*t/(e||this.worldSize);return 360/Math.PI*Math.atan(Math.exp(i*Math.PI/180))-90},panBy:function(t){var e=this.centerPoint._add(t);this.center=this.pointLocation(e)},setLocationAtPoint:function(t,e){var i=this.locationCoordinate(t),n=this.pointCoordinate(e),o=this.pointCoordinate(this.centerPoint),r=n._sub(i);this._unmodified=!1,this.center=this.coordinateLocation(o._sub(r))},setZoomAround:function(t,e){var i;e&&(i=this.locationPoint(e)),this.zoom=t,e&&this.setLocationAtPoint(e,i)},setBearingAround:function(t,e){var i;e&&(i=this.locationPoint(e)),this.bearing=t,e&&this.setLocationAtPoint(e,i)},locationPoint:function(t){return this.coordinatePoint(this.locationCoordinate(t))},pointLocation:function(t){return this.coordinateLocation(this.pointCoordinate(t))},locationCoordinate:function(t){var e=this.zoomScale(this.tileZoom)/this.worldSize,i=o.convert(t);return new s(this.lngX(i.lng)*e,this.latY(i.lat)*e,this.tileZoom)},coordinateLocation:function(t){var e=this.zoomScale(t.zoom);return new o(this.xLng(t.column,e),this.yLat(t.row,e))},pointCoordinate:function(t,e){void 0===e&&(e=0);var i=this.coordinatePointMatrix(this.tileZoom);if(h.invert(i,i),!i)throw new Error("failed to invert matrix");var n=[t.x,t.y,0,1],o=[t.x,t.y,1,1];c.transformMat4(n,n,i),c.transformMat4(o,o,i);var r=n[3],a=o[3],u=n[0]/r,p=o[0]/a,d=n[1]/r,f=o[1]/a,m=n[2]/r,g=o[2]/a,y=m===g?0:(e-m)/(g-m);return new s(l(u,p,y),l(d,f,y),this.tileZoom)},coordinatePoint:function(t){var e=this.coordinatePointMatrix(t.zoom),i=[t.column,t.row,0,1];return c.transformMat4(i,i,e),new r(i[0]/i[3],i[1]/i[3])},coordinatePointMatrix:function(t){var e=h.copy(new Float64Array(16),this.projMatrix),i=this.worldSize/this.zoomScale(t);return h.scale(e,e,[i,i,1]),h.multiply(e,this.getPixelMatrix(),e),e},getPixelMatrix:function(){var t=h.create();return h.scale(t,t,[this.width/2,-this.height/2,1]),
h.translate(t,t,[1,-1,0]),t},_constrain:function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t,e,i,n,o,s,a,l,u=this.size,c=this._unmodified;this.latRange&&(t=this.latY(this.latRange[1]),e=this.latY(this.latRange[0]),o=e-t<u.y?u.y/(e-t):0),this.lngRange&&(i=this.lngX(this.lngRange[0]),n=this.lngX(this.lngRange[1]),s=n-i<u.x?u.x/(n-i):0);var h=Math.max(s||0,o||0);if(h)return this.center=this.unproject(new r(s?(n+i)/2:this.x,o?(e+t)/2:this.y)),this.zoom+=this.scaleZoom(h),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var p=this.y,d=u.y/2;t>p-d&&(l=t+d),p+d>e&&(l=e-d)}if(this.lngRange){var f=this.x,m=u.x/2;i>f-m&&(a=i+m),f+m>n&&(a=n-m)}(void 0!==a||void 0!==l)&&(this.center=this.unproject(new r(void 0!==a?a:this.x,void 0!==l?l:this.y))),this._unmodified=c,this._constraining=!1}},_calcProjMatrix:function(){var t=new Float64Array(16),e=Math.atan(.5/this.altitude),i=Math.sin(e)*this.altitude/Math.sin(Math.PI/2-this._pitch-e),n=Math.cos(Math.PI/2-this._pitch)*i+this.altitude;h.perspective(t,2*Math.atan(this.height/2/this.altitude),this.width/this.height,.1,n),h.translate(t,t,[0,0,-this.altitude]),h.scale(t,t,[1,-1,1/this.height]),h.rotateX(t,t,this._pitch),h.rotateZ(t,t,this.angle),h.translate(t,t,[-this.x,-this.y,0]),this.projMatrix=t}}},{"../util/interpolate":210,"../util/util":214,"./coordinate":128,"./lng_lat":129,"gl-matrix":223,"point-geometry":243}],132:[function(t,e,i){"use strict";var n={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]};e.exports=function(t,e,i,o){o=o||1;var r,s,a,l,u,c,h,p,d=[];for(r=0,s=t.length;s>r;r++)if(u=n[t[r]]){for(p=null,a=0,l=u[1].length;l>a;a+=2)-1===u[1][a]&&-1===u[1][a+1]?p=null:(c=e+u[1][a]*o,h=i-u[1][a+1]*o,p&&d.push(p.x,p.y,c,h),p={x:c,y:h});e+=u[0]*o}return d}},{}],133:[function(t,e,i){"use strict";var n=e.exports={};n.Map=t("./ui/map"),n.Control=t("./ui/control/control"),n.Navigation=t("./ui/control/navigation"),n.Attribution=t("./ui/control/attribution"),n.Popup=t("./ui/popup"),n.GeoJSONSource=t("./source/geojson_source"),n.VideoSource=t("./source/video_source"),n.ImageSource=t("./source/image_source"),n.Style=t("./style/style"),n.LngLat=t("./geo/lng_lat"),n.LngLatBounds=t("./geo/lng_lat_bounds"),n.Point=t("point-geometry"),n.Evented=t("./util/evented"),n.util=t("./util/util"),n.supported=t("./util/browser").supported;var o=t("./util/ajax");n.util.getJSON=o.getJSON,n.util.getArrayBuffer=o.getArrayBuffer;var r=t("./util/config");n.config=r,Object.defineProperty(n,"accessToken",{get:function(){return r.ACCESS_TOKEN},set:function(t){r.ACCESS_TOKEN=t}})},{"./geo/lng_lat":129,"./geo/lng_lat_bounds":130,"./source/geojson_source":148,"./source/image_source":150,"./source/video_source":157,"./style/style":165,"./ui/control/attribution":187,"./ui/control/control":188,"./ui/control/navigation":189,"./ui/map":199,"./ui/popup":200,"./util/ajax":202,"./util/browser":203,"./util/config":207,"./util/evented":208,"./util/util":214,"point-geometry":243}],134:[function(t,e,i){"use strict";function n(t,e,i){var n,r=t.gl,s=e.paint["background-color"],a=e.paint["background-pattern"],l=e.paint["background-opacity"],u=a?t.spriteAtlas.getPosition(a.from,!0):null,c=a?t.spriteAtlas.getPosition(a.to,!0):null;if(u&&c){n=t.patternShader,r.switchShader(n,i),r.uniform1i(n.u_image,0),r.uniform2fv(n.u_pattern_tl_a,u.tl),r.uniform2fv(n.u_pattern_br_a,u.br),r.uniform2fv(n.u_pattern_tl_b,c.tl),r.uniform2fv(n.u_pattern_br_b,c.br),r.uniform1f(n.u_opacity,l);var h=t.transform,p=u.size,d=c.size,f=h.locationCoordinate(h.center),m=1/Math.pow(2,h.zoomFraction);r.uniform1f(n.u_mix,a.t);var g=o.create();o.scale(g,g,[1/(p[0]*a.fromScale),1/(p[1]*a.fromScale)]),o.translate(g,g,[f.column*h.tileSize%(p[0]*a.fromScale),f.row*h.tileSize%(p[1]*a.fromScale)]),o.rotate(g,g,-h.angle),o.scale(g,g,[m*h.width/2,-m*h.height/2]);var y=o.create();o.scale(y,y,[1/(d[0]*a.toScale),1/(d[1]*a.toScale)]),o.translate(y,y,[f.column*h.tileSize%(d[0]*a.toScale),f.row*h.tileSize%(d[1]*a.toScale)]),o.rotate(y,y,-h.angle),o.scale(y,y,[m*h.width/2,-m*h.height/2]),r.uniformMatrix3fv(n.u_patternmatrix_a,!1,g),r.uniformMatrix3fv(n.u_patternmatrix_b,!1,y),t.spriteAtlas.bind(r,!0)}else n=t.fillShader,r.switchShader(n,i),r.uniform4fv(n.u_color,s);r.disable(r.STENCIL_TEST),r.bindBuffer(r.ARRAY_BUFFER,t.backgroundBuffer),r.vertexAttribPointer(n.a_pos,t.backgroundBuffer.itemSize,r.SHORT,!1,0,0),r.drawArrays(r.TRIANGLE_STRIP,0,t.backgroundBuffer.itemCount),r.enable(r.STENCIL_TEST),r.stencilMask(0),r.stencilFunc(r.EQUAL,128,128)}var o=t("gl-matrix").mat3;e.exports=n},{"gl-matrix":223}],135:[function(t,e,i){"use strict";function n(t,e,i,n){if(n.buffers){i=t.translateMatrix(i,n,e.paint["circle-translate"],e.paint["circle-translate-anchor"]);var r=n.elementGroups[e.ref||e.id];if(r){var s=t.gl;s.disable(s.STENCIL_TEST),s.switchShader(t.circleShader,i,n.exMatrix);var a=n.buffers.circleVertex,l=t.circleShader,u=n.buffers.circleElement,c=1/o.devicePixelRatio/e.paint["circle-radius"];s.uniform4fv(l.u_color,e.paint["circle-color"]),s.uniform1f(l.u_blur,Math.max(e.paint["circle-blur"],c)),s.uniform1f(l.u_size,e.paint["circle-radius"]);for(var h=0;h<r.groups.length;h++){var p=r.groups[h],d=p.vertexStartIndex*a.itemSize;a.bind(s),a.setAttribPointers(s,l,d),u.bind(s);var f=3*p.elementLength,m=p.elementStartIndex*u.itemSize;s.drawElements(s.TRIANGLES,f,s.UNSIGNED_SHORT,m)}s.enable(s.STENCIL_TEST)}}}var o=t("../util/browser.js");e.exports=n},{"../util/browser.js":203}],136:[function(t,e,i){"use strict";function n(t,e,i,n){var o=n.elementGroups[e.ref||e.id].collisionBox;if(o){var r=t.gl,s=n.buffers.collisionBoxVertex,a=t.collisionBoxShader;r.enable(r.STENCIL_TEST),r.switchShader(a,i),s.bind(r),s.setAttribPointers(r,a,0),r.lineWidth(1),r.uniform1f(a.u_scale,Math.pow(2,t.transform.zoom-n.coord.z)),r.uniform1f(a.u_zoom,10*t.transform.zoom),r.uniform1f(a.u_maxzoom,10*(n.coord.z+1));var l=o.groups[0].vertexStartIndex,u=o.groups[0].vertexLength;r.drawArrays(r.LINES,l,u),r.disable(r.STENCIL_TEST)}}e.exports=n},{}],137:[function(t,e,i){"use strict";function n(t,e){var i=t.gl;i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),i.switchShader(t.debugShader,e.posMatrix),i.bindBuffer(i.ARRAY_BUFFER,t.debugBuffer),i.vertexAttribPointer(t.debugShader.a_pos,t.debugBuffer.itemSize,i.SHORT,!1,0,0),i.uniform4f(t.debugShader.u_color,1,0,0,1),i.lineWidth(4),i.drawArrays(i.LINE_STRIP,0,t.debugBuffer.itemCount);var n=o(e.coord.toString(),50,200,5);i.bindBuffer(i.ARRAY_BUFFER,t.debugTextBuffer),i.bufferData(i.ARRAY_BUFFER,new Int16Array(n),i.STREAM_DRAW),i.vertexAttribPointer(t.debugShader.a_pos,t.debugTextBuffer.itemSize,i.SHORT,!1,0,0),i.lineWidth(8*r.devicePixelRatio),i.uniform4f(t.debugShader.u_color,1,1,1,1),i.drawArrays(i.LINES,0,n.length/t.debugTextBuffer.itemSize),i.lineWidth(2*r.devicePixelRatio),i.uniform4f(t.debugShader.u_color,0,0,0,1),i.drawArrays(i.LINES,0,n.length/t.debugTextBuffer.itemSize),i.blendFunc(i.ONE_MINUS_DST_ALPHA,i.ONE)}var o=t("../lib/debugtext"),r=t("../util/browser");e.exports=n},{"../lib/debugtext":132,"../util/browser":203}],138:[function(t,e,i){"use strict";function n(t,e,i,n){if(n.buffers){var s=n.elementGroups[e.ref||e.id];if(s){var a,l,u,c,h=t.gl,p=t.translateMatrix(i,n,e.paint["fill-translate"],e.paint["fill-translate-anchor"]),d=e.paint["fill-color"];h.stencilMask(63),h.clear(h.STENCIL_BUFFER_BIT),h.stencilFunc(h.NOTEQUAL,128,128),h.stencilOpSeparate(h.FRONT,h.INCR_WRAP,h.KEEP,h.KEEP),h.stencilOpSeparate(h.BACK,h.DECR_WRAP,h.KEEP,h.KEEP),h.colorMask(!1,!1,!1,!1),h.switchShader(t.fillShader,p),a=n.buffers.fillVertex,a.bind(h),l=n.buffers.fillElement,l.bind(h);for(var f,m,g=0;g<s.groups.length;g++)u=s.groups[g],f=u.vertexStartIndex*a.itemSize,a.setAttribPointers(h,t.fillShader,f),c=3*u.elementLength,m=u.elementStartIndex*l.itemSize,h.drawElements(h.TRIANGLES,c,h.UNSIGNED_SHORT,m);h.colorMask(!0,!0,!0,!0),h.stencilOp(h.KEEP,h.KEEP,h.KEEP),h.stencilMask(0);var y=e.paint["fill-outline-color"];if(e.paint["fill-antialias"]===!0&&(!e.paint["fill-pattern"]||y)){h.switchShader(t.outlineShader,p),h.lineWidth(2*o.devicePixelRatio),y?h.stencilFunc(h.EQUAL,128,128):h.stencilFunc(h.EQUAL,128,191),h.uniform2f(t.outlineShader.u_world,h.drawingBufferWidth,h.drawingBufferHeight),h.uniform4fv(t.outlineShader.u_color,y?y:d),a=n.buffers.fillVertex,l=n.buffers.outlineElement,l.bind(h);for(var v=0;v<s.groups.length;v++)u=s.groups[v],f=u.vertexStartIndex*a.itemSize,a.setAttribPointers(h,t.outlineShader,f),c=2*u.secondElementLength,m=u.secondElementStartIndex*l.itemSize,h.drawElements(h.LINES,c,h.UNSIGNED_SHORT,m)}var b,x=e.paint["fill-pattern"],_=e.paint["fill-opacity"]||1;if(x){var w=t.spriteAtlas.getPosition(x.from,!0),S=t.spriteAtlas.getPosition(x.to,!0);if(!w||!S)return;b=t.patternShader,h.switchShader(b,i),h.uniform1i(b.u_image,0),h.uniform2fv(b.u_pattern_tl_a,w.tl),h.uniform2fv(b.u_pattern_br_a,w.br),h.uniform2fv(b.u_pattern_tl_b,S.tl),h.uniform2fv(b.u_pattern_br_b,S.br),h.uniform1f(b.u_opacity,_),h.uniform1f(b.u_mix,x.t);var k=n.tileExtent/n.tileSize/Math.pow(2,t.transform.tileZoom-n.coord.z),T=r.create();r.scale(T,T,[1/(w.size[0]*k*x.fromScale),1/(w.size[1]*k*x.fromScale)]);var E=r.create();r.scale(E,E,[1/(S.size[0]*k*x.toScale),1/(S.size[1]*k*x.toScale)]),h.uniformMatrix3fv(b.u_patternmatrix_a,!1,T),h.uniformMatrix3fv(b.u_patternmatrix_b,!1,E),t.spriteAtlas.bind(h,!0)}else b=t.fillShader,h.switchShader(b,i),h.uniform4fv(b.u_color,d);h.stencilFunc(h.NOTEQUAL,0,63),h.bindBuffer(h.ARRAY_BUFFER,t.tileExtentBuffer),h.vertexAttribPointer(b.a_pos,t.tileExtentBuffer.itemSize,h.SHORT,!1,0,0),h.drawArrays(h.TRIANGLE_STRIP,0,t.tileExtentBuffer.itemCount),h.stencilMask(0),h.stencilFunc(h.EQUAL,128,128)}}}var o=t("../util/browser"),r=t("gl-matrix").mat3;e.exports=n},{"../util/browser":203,"gl-matrix":223}],139:[function(t,e,i){"use strict";var n=t("../util/browser"),o=t("gl-matrix").mat2;e.exports=function(t,e,i,r){if(r.buffers){var s=r.elementGroups[e.ref||e.id];if(s){var a=t.gl;if(!(e.paint["line-width"]<=0)){var l=1/n.devicePixelRatio,u=e.paint["line-blur"]+l,c=e.paint["line-width"]/2,h=-1,p=0,d=0;e.paint["line-gap-width"]>0&&(h=e.paint["line-gap-width"]/2+.5*l,c=e.paint["line-width"],p=h-l/2);var f=p+c+l/2+d,m=e.paint["line-color"],g=t.transform.scale/(1<<r.coord.z)/(r.tileExtent/r.tileSize),y=t.translateMatrix(i,r,e.paint["line-translate"],e.paint["line-translate-anchor"]),v=t.transform,b=o.create();o.scale(b,b,[1,Math.cos(v._pitch)]),o.rotate(b,b,t.transform.angle);var x,_=Math.sqrt(v.height*v.height/4*(1+v.altitude*v.altitude)),w=v.height/2*Math.tan(v._pitch),S=(_+w)/_-1,k=r.tileSize/t.transform.tileSize,T=e.paint["line-dasharray"],E=e.paint["line-pattern"];if(T){x=t.linesdfpatternShader,a.switchShader(x,y,r.exMatrix),a.uniform2fv(x.u_linewidth,[f,h]),a.uniform1f(x.u_ratio,g),a.uniform1f(x.u_blur,u),a.uniform4fv(x.u_color,m);var M=t.lineAtlas.getDash(T.from,"round"===e.layout["line-cap"]),C=t.lineAtlas.getDash(T.to,"round"===e.layout["line-cap"]);t.lineAtlas.bind(a);var A=Math.pow(2,Math.floor(Math.log(t.transform.scale)/Math.LN2)-r.coord.z)/8*k,R=[A/M.width/T.fromScale,-M.height/2],D=t.lineAtlas.width/(T.fromScale*M.width*256*n.devicePixelRatio)/2,z=[A/C.width/T.toScale,-C.height/2],L=t.lineAtlas.width/(T.toScale*C.width*256*n.devicePixelRatio)/2;a.uniform2fv(x.u_patternscale_a,R),a.uniform1f(x.u_tex_y_a,M.y),a.uniform2fv(x.u_patternscale_b,z),a.uniform1f(x.u_tex_y_b,C.y),a.uniform1i(x.u_image,0),a.uniform1f(x.u_sdfgamma,Math.max(D,L)),a.uniform1f(x.u_mix,T.t),a.uniform1f(x.u_extra,S),a.uniformMatrix2fv(x.u_antialiasingmatrix,!1,b)}else if(E){var P=t.spriteAtlas.getPosition(E.from,!0),I=t.spriteAtlas.getPosition(E.to,!0);if(!P||!I)return;var N=r.tileExtent/r.tileSize/Math.pow(2,t.transform.tileZoom-r.coord.z)*k;t.spriteAtlas.bind(a,!0),x=t.linepatternShader,a.switchShader(x,y,r.exMatrix),a.uniform2fv(x.u_linewidth,[f,h]),a.uniform1f(x.u_ratio,g),a.uniform1f(x.u_blur,u),a.uniform2fv(x.u_pattern_size_a,[P.size[0]*N*E.fromScale,I.size[1]]),a.uniform2fv(x.u_pattern_size_b,[I.size[0]*N*E.toScale,I.size[1]]),a.uniform2fv(x.u_pattern_tl_a,P.tl),a.uniform2fv(x.u_pattern_br_a,P.br),a.uniform2fv(x.u_pattern_tl_b,I.tl),a.uniform2fv(x.u_pattern_br_b,I.br),a.uniform1f(x.u_fade,E.t),a.uniform1f(x.u_opacity,e.paint["line-opacity"]),a.uniform1f(x.u_extra,S),a.uniformMatrix2fv(x.u_antialiasingmatrix,!1,b)}else x=t.lineShader,a.switchShader(x,y,r.exMatrix),a.uniform2fv(x.u_linewidth,[f,h]),a.uniform1f(x.u_ratio,g),a.uniform1f(x.u_blur,u),a.uniform1f(x.u_extra,S),a.uniformMatrix2fv(x.u_antialiasingmatrix,!1,b),a.uniform4fv(x.u_color,m);var O=r.buffers.lineVertex;O.bind(a);var j=r.buffers.lineElement;j.bind(a);for(var U=0;U<s.groups.length;U++){var B=s.groups[U],F=B.vertexStartIndex*O.itemSize;O.setAttribPointers(a,x,F);var q=3*B.elementLength,$=B.elementStartIndex*j.itemSize;a.drawElements(a.TRIANGLES,q,a.UNSIGNED_SHORT,$)}}}}}},{"../util/browser":203,"gl-matrix":223}],140:[function(t,e,i){"use strict";function n(t,e,i,n){var l=t.gl;l.disable(l.STENCIL_TEST);var u=t.rasterShader;l.switchShader(u,i),l.uniform1f(u.u_brightness_low,e.paint["raster-brightness-min"]),l.uniform1f(u.u_brightness_high,e.paint["raster-brightness-max"]),l.uniform1f(u.u_saturation_factor,s(e.paint["raster-saturation"])),l.uniform1f(u.u_contrast_factor,r(e.paint["raster-contrast"])),l.uniform3fv(u.u_spin_weights,o(e.paint["raster-hue-rotate"]));var c,h,p=n.source&&n.source._pyramid.findLoadedParent(n.coord,0,{}),d=a(n,p,e,t.transform);l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,n.texture),p?(l.activeTexture(l.TEXTURE1),l.bindTexture(l.TEXTURE_2D,p.texture),c=Math.pow(2,p.coord.z-n.coord.z),h=[n.coord.x*c%1,n.coord.y*c%1]):d[1]=0,l.uniform2fv(u.u_tl_parent,h||[0,0]),l.uniform1f(u.u_scale_parent,c||1),l.uniform1f(u.u_buffer_scale,1),l.uniform1f(u.u_opacity0,d[0]),l.uniform1f(u.u_opacity1,d[1]),l.uniform1i(u.u_image0,0),l.uniform1i(u.u_image1,1),l.bindBuffer(l.ARRAY_BUFFER,n.boundsBuffer||t.tileExtentBuffer),l.vertexAttribPointer(u.a_pos,2,l.SHORT,!1,8,0),l.vertexAttribPointer(u.a_texture_pos,2,l.SHORT,!1,8,4),l.drawArrays(l.TRIANGLE_STRIP,0,4),l.enable(l.STENCIL_TEST)}function o(t){t*=Math.PI/180;var e=Math.sin(t),i=Math.cos(t);return[(2*i+1)/3,(-Math.sqrt(3)*e-i+1)/3,(Math.sqrt(3)*e-i+1)/3]}function r(t){return t>0?1/(1-t):1+t}function s(t){return t>0?1-1/(1.001-t):-t}function a(t,e,i,n){if(!t.source)return[1,0];var o=(new Date).getTime(),r=i.paint["raster-fade-duration"],s=(o-t.timeAdded)/r,a=e?(o-e.timeAdded)/r:-1,u=t.source._pyramid.coveringZoomLevel(n),c=e?Math.abs(e.coord.z-u)>Math.abs(t.coord.z-u):!1,h=[];!e||c?(h[0]=l.clamp(s,0,1),h[1]=1-h[0]):(h[0]=l.clamp(1-a,0,1),h[1]=1-h[0]);var p=i.paint["raster-opacity"];return h[0]*=p,h[1]*=p,h}var l=t("../util/util");e.exports=n},{"../util/util":214}],141:[function(t,e,i){"use strict";function n(t,e,i,n){if(n.buffers){var r=n.elementGroups[e.ref||e.id];if(r){var s=!(e.layout["text-allow-overlap"]||e.layout["icon-allow-overlap"]||e.layout["text-ignore-placement"]||e.layout["icon-ignore-placement"]),l=t.gl;s&&l.disable(l.STENCIL_TEST),r.text.groups.length&&o(t,e,i,n,r.text,"text",!0),r.icon.groups.length&&o(t,e,i,n,r.icon,"icon",r.sdfIcons),a(t,e,i,n),s&&l.enable(l.STENCIL_TEST)}}}function o(t,e,i,n,o,a,u){var c=t.gl;i=t.translateMatrix(i,n,e.paint[a+"-translate"],e.paint[a+"-translate-anchor"]);var h,p,d,f=t.transform,m="map"===e.layout[a+"-rotation-alignment"],g=m;g?(h=s.create(),p=n.tileExtent/n.tileSize/Math.pow(2,t.transform.zoom-n.coord.z),d=1/Math.cos(f._pitch)):(h=s.clone(n.exMatrix),p=t.transform.altitude,d=1),s.scale(h,h,[p,p,1]);var y=e.paint[a+"-size"],v=y/l[a];s.scale(h,h,[v,v,1]);var b,x,_,w,S=Math.sqrt(f.height*f.height/4*(1+f.altitude*f.altitude)),k=f.height/2*Math.tan(f._pitch),T=(S+k)/S-1,E="text"===a;if(E||t.style.sprite.loaded()){c.activeTexture(c.TEXTURE0),b=u?t.sdfShader:t.iconShader,E?(t.glyphAtlas.updateTexture(c),x=n.buffers.glyphVertex,_=n.buffers.glyphElement,w=[t.glyphAtlas.width/4,t.glyphAtlas.height/4]):(t.spriteAtlas.bind(c,m||t.options.rotating||t.options.zooming||1!==v||u||t.transform.pitch),x=n.buffers.iconVertex,_=n.buffers.iconElement,w=[t.spriteAtlas.width/4,t.spriteAtlas.height/4]),c.switchShader(b,i,h),c.uniform1i(b.u_texture,0),c.uniform2fv(b.u_texsize,w),c.uniform1i(b.u_skewed,g),c.uniform1f(b.u_extra,T);var M=Math.log(y/o[a+"-size"])/Math.LN2||0;c.uniform1f(b.u_zoom,10*(t.transform.zoom-M));var C=t.frameHistory.getFadeProperties(300);c.uniform1f(b.u_fadedist,10*C.fadedist),c.uniform1f(b.u_minfadezoom,Math.floor(10*C.minfadezoom)),c.uniform1f(b.u_maxfadezoom,Math.floor(10*C.maxfadezoom)),c.uniform1f(b.u_fadezoom,10*(t.transform.zoom+C.bump));var A,R,D,z;if(_.bind(c),u){var L=8,P=1.19,I=6,N=.105*l[a]/y/r.devicePixelRatio;c.uniform1f(b.u_gamma,N*d),c.uniform4fv(b.u_color,e.paint[a+"-color"]),c.uniform1f(b.u_buffer,.75);for(var O=0;O<o.groups.length;O++)A=o.groups[O],R=A.vertexStartIndex*x.itemSize,x.bind(c),x.setAttribPointers(c,b,R),D=3*A.elementLength,z=A.elementStartIndex*_.itemSize,c.drawElements(c.TRIANGLES,D,c.UNSIGNED_SHORT,z);if(e.paint[a+"-halo-width"]){c.uniform1f(b.u_gamma,(e.paint[a+"-halo-blur"]*P/v/L+N)*d),c.uniform4fv(b.u_color,e.paint[a+"-halo-color"]),c.uniform1f(b.u_buffer,(I-e.paint[a+"-halo-width"]/v)/L);for(var j=0;j<o.groups.length;j++)A=o.groups[j],R=A.vertexStartIndex*x.itemSize,x.bind(c),x.setAttribPointers(c,b,R),D=3*A.elementLength,z=A.elementStartIndex*_.itemSize,c.drawElements(c.TRIANGLES,D,c.UNSIGNED_SHORT,z)}}else{c.uniform1f(b.u_opacity,e.paint["icon-opacity"]);for(var U=0;U<o.groups.length;U++)A=o.groups[U],R=A.vertexStartIndex*x.itemSize,x.bind(c),x.setAttribPointers(c,b,R),D=3*A.elementLength,z=A.elementStartIndex*_.itemSize,c.drawElements(c.TRIANGLES,D,c.UNSIGNED_SHORT,z)}}}var r=t("../util/browser"),s=t("gl-matrix").mat4,a=t("./draw_collision_debug");e.exports=n;var l={icon:1,text:24}},{"../util/browser":203,"./draw_collision_debug":136,"gl-matrix":223}],142:[function(t,e,i){"use strict";function n(t,e,i,n){function s(e,i,n){a.switchShader(t.dotShader,n),a.uniform1f(t.dotShader.u_size,4*o.devicePixelRatio),a.uniform1f(t.dotShader.u_blur,.25),a.uniform4fv(t.dotShader.u_color,[.1,0,0,.1]),e.bind(a);for(var r=0;r<i.length;r++){var s=i[r],l=s.vertexStartIndex,u=s.vertexLength;a.vertexAttribPointer(t.dotShader.a_pos,2,a.SHORT,!1,e.itemSize,0),a.drawArrays(a.POINTS,l,u)}}var a=t.gl;if(n&&n.buffers){var l=n.elementGroups[e.ref||e.id];if(l){if(a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA),"fill"===e.type)s(n.buffers.fillVertex,l.groups,i);else if("symbol"===e.type)s(n.buffers.iconVertex,l.icon.groups,i),s(n.buffers.glyphVertex,l.text.groups,i);else if("line"===e.type){var u=r.clone(i);r.scale(u,u,[.5,.5,1]),s(n.buffers.lineVertex,l.groups,u)}a.blendFunc(a.ONE_MINUS_DST_ALPHA,a.ONE)}}}var o=t("../util/browser"),r=t("gl-matrix").mat4;e.exports=n},{"../util/browser":203,"gl-matrix":223}],143:[function(t,e,i){"use strict";function n(){this.frameHistory=[]}e.exports=n,n.prototype.getFadeProperties=function(t){void 0===t&&(t=300);for(var e=(new Date).getTime();this.frameHistory.length>3&&this.frameHistory[1].time+t<e;)this.frameHistory.shift();this.frameHistory[1].time+t<e&&(this.frameHistory[0].z=this.frameHistory[1].z);var i=this.frameHistory.length;3>i&&console.warn("there should never be less than three frames in the history");var n=this.frameHistory[0].z,o=this.frameHistory[i-1],r=o.z,s=Math.min(n,r),a=Math.max(n,r),l=o.z-this.frameHistory[1].z,u=o.time-this.frameHistory[1].time,c=l/(u/t);isNaN(c)&&console.warn("fadedist should never be NaN");var h=(e-o.time)/t*c;return{fadedist:c,minfadezoom:s,maxfadezoom:a,bump:h}},n.prototype.record=function(t){var e=(new Date).getTime();this.frameHistory.length||this.frameHistory.push({time:0,z:t},{time:0,z:t}),(2===this.frameHistory.length||this.frameHistory[this.frameHistory.length-1].z!==t)&&this.frameHistory.push({time:e,z:t})}},{}],144:[function(t,e,i){"use strict";var n=t("./shaders"),o=t("../util/util");i.extend=function(t){var e=t.lineWidth,i=t.getParameter(t.ALIASED_LINE_WIDTH_RANGE);return t.lineWidth=function(n){e.call(t,o.clamp(n,i[0],i[1]))},t.getShader=function(t,e){var i=e===this.FRAGMENT_SHADER?"fragment":"vertex";if(!n[t]||!n[t][i])throw new Error("Could not find shader "+t);var o=this.createShader(e),r=n[t][i];if("undefined"==typeof orientation&&(r=r.replace(/ highp /g," ")),this.shaderSource(o,r),this.compileShader(o),!this.getShaderParameter(o,this.COMPILE_STATUS))throw new Error(this.getShaderInfoLog(o));return o},t.initializeShader=function(t,e,i){var n={program:this.createProgram(),fragment:this.getShader(t,this.FRAGMENT_SHADER),vertex:this.getShader(t,this.VERTEX_SHADER),attributes:[]};if(this.attachShader(n.program,n.vertex),this.attachShader(n.program,n.fragment),this.linkProgram(n.program),this.getProgramParameter(n.program,this.LINK_STATUS)){for(var o=0;o<e.length;o++)n[e[o]]=this.getAttribLocation(n.program,e[o]),n.attributes.push(n[e[o]]);for(var r=0;r<i.length;r++)n[i[r]]=this.getUniformLocation(n.program,i[r])}else console.error(this.getProgramInfoLog(n.program));return n},t.switchShader=function(t,e,i){if(e||console.trace("posMatrix does not have required argument"),this.currentShader!==t){this.useProgram(t.program);for(var n=this.currentShader?this.currentShader.attributes:[],o=t.attributes,r=0;r<n.length;r++)o.indexOf(n[r])<0&&this.disableVertexAttribArray(n[r]);for(var s=0;s<o.length;s++)n.indexOf(o[s])<0&&this.enableVertexAttribArray(o[s]);this.currentShader=t}t.posMatrix!==e&&(this.uniformMatrix4fv(t.u_matrix,!1,e),t.posMatrix=e),i&&t.exMatrix!==i&&t.u_exmatrix&&(this.uniformMatrix4fv(t.u_exmatrix,!1,i),t.exMatrix=i)},t.vertexAttrib2fv=function(e,i){t.vertexAttrib2f(e,i[0],i[1])},t.vertexAttrib3fv=function(e,i){t.vertexAttrib3f(e,i[0],i[1],i[2])},t.vertexAttrib4fv=function(e,i){t.vertexAttrib4f(e,i[0],i[1],i[2],i[3])},t}},{"../util/util":214,"./shaders":147}],145:[function(t,e,i){"use strict";function n(t,e){this.width=t,this.height=e,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}}e.exports=n,n.prototype.setSprite=function(t){this.sprite=t},n.prototype.getDash=function(t,e){var i=t.join(",")+e;return this.positions[i]||(this.positions[i]=this.addDash(t,e)),this.positions[i]},n.prototype.addDash=function(t,e){var i=e?7:0,n=2*i+1,o=128;if(this.nextRow+n>this.height)return console.warn("LineAtlas out of space"),null;for(var r=0,s=0;s<t.length;s++)r+=t[s];for(var a=this.width/r,l=a/2,u=t.length%2===1,c=-i;i>=c;c++)for(var h=this.nextRow+i+c,p=this.width*h,d=u?-t[t.length-1]:0,f=t[0],m=1,g=0;g<this.width;g++){for(;g/a>f;)d=f,f+=t[m],u&&m===t.length-1&&(f+=t[0]),m++;var y,v=Math.abs(g-d*a),b=Math.abs(g-f*a),x=Math.min(v,b),_=m%2===1;if(e){var w=i?c/i*(l+1):0;if(_){var S=l-Math.abs(w);y=Math.sqrt(x*x+S*S)}else y=l-Math.sqrt(x*x+w*w)}else y=(_?1:-1)*x;this.data[3+4*(p+g)]=Math.max(0,Math.min(255,y+o))}var k={y:(this.nextRow+i+.5)/this.height,height:2*i/this.height,width:r};return this.nextRow+=n,this.dirty=!0,k},n.prototype.bind=function(t){this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.RGBA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,this.data))},n.prototype.debug=function(){var t=document.createElement("canvas");document.body.appendChild(t),t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.background="#ff0",t.width=this.width,t.height=this.height;for(var e=t.getContext("2d"),i=e.getImageData(0,0,this.width,this.height),n=0;n<this.data.length;n++)if(this.sdf){var o=4*n;i.data[o]=i.data[o+1]=i.data[o+2]=0,i.data[o+3]=this.data[n]}else i.data[n]=this.data[n];e.putImageData(i,0,0)}},{}],146:[function(t,e,i){"use strict";function n(t,e){this.gl=o.extend(t),this.transform=e,this.reusableTextures={},this.preFbos={},this.frameHistory=new a,this.setup()}var o=t("./gl_util"),r=t("../util/browser"),s=t("gl-matrix").mat4,a=t("./frame_history");e.exports=n,n.prototype.resize=function(t,e){var i=this.gl;this.width=t*r.devicePixelRatio,this.height=e*r.devicePixelRatio,i.viewport(0,0,this.width,this.height)},n.prototype.setup=function(){var t=this.gl;t.verbose=!0,t.enable(t.BLEND),t.blendFunc(t.ONE_MINUS_DST_ALPHA,t.ONE),t.enable(t.STENCIL_TEST),this.debugShader=t.initializeShader("debug",["a_pos"],["u_matrix","u_color"]),this.rasterShader=t.initializeShader("raster",["a_pos","a_texture_pos"],["u_matrix","u_brightness_low","u_brightness_high","u_saturation_factor","u_spin_weights","u_contrast_factor","u_opacity0","u_opacity1","u_image0","u_image1","u_tl_parent","u_scale_parent","u_buffer_scale"]),this.circleShader=t.initializeShader("circle",["a_pos"],["u_matrix","u_exmatrix","u_blur","u_size","u_color"]),this.lineShader=t.initializeShader("line",["a_pos","a_data"],["u_matrix","u_linewidth","u_color","u_ratio","u_blur","u_extra","u_antialiasingmatrix"]),
this.linepatternShader=t.initializeShader("linepattern",["a_pos","a_data"],["u_matrix","u_linewidth","u_ratio","u_pattern_size_a","u_pattern_size_b","u_pattern_tl_a","u_pattern_br_a","u_pattern_tl_b","u_pattern_br_b","u_blur","u_fade","u_opacity","u_extra","u_antialiasingmatrix"]),this.linesdfpatternShader=t.initializeShader("linesdfpattern",["a_pos","a_data"],["u_matrix","u_linewidth","u_color","u_ratio","u_blur","u_patternscale_a","u_tex_y_a","u_patternscale_b","u_tex_y_b","u_image","u_sdfgamma","u_mix","u_extra","u_antialiasingmatrix"]),this.dotShader=t.initializeShader("dot",["a_pos"],["u_matrix","u_size","u_color","u_blur"]),this.sdfShader=t.initializeShader("sdf",["a_pos","a_offset","a_data1","a_data2"],["u_matrix","u_exmatrix","u_texture","u_texsize","u_color","u_gamma","u_buffer","u_zoom","u_fadedist","u_minfadezoom","u_maxfadezoom","u_fadezoom","u_skewed","u_extra"]),this.iconShader=t.initializeShader("icon",["a_pos","a_offset","a_data1","a_data2"],["u_matrix","u_exmatrix","u_texture","u_texsize","u_zoom","u_fadedist","u_minfadezoom","u_maxfadezoom","u_fadezoom","u_opacity","u_skewed","u_extra"]),this.outlineShader=t.initializeShader("outline",["a_pos"],["u_matrix","u_color","u_world"]),this.patternShader=t.initializeShader("pattern",["a_pos"],["u_matrix","u_pattern_tl_a","u_pattern_br_a","u_pattern_tl_b","u_pattern_br_b","u_mix","u_patternmatrix_a","u_patternmatrix_b","u_opacity","u_image"]),this.fillShader=t.initializeShader("fill",["a_pos"],["u_matrix","u_color"]),this.collisionBoxShader=t.initializeShader("collisionbox",["a_pos","a_extrude","a_data"],["u_matrix","u_scale","u_zoom","u_maxzoom"]),this.identityMatrix=s.create(),this.backgroundBuffer=t.createBuffer(),this.backgroundBuffer.itemSize=2,this.backgroundBuffer.itemCount=4,t.bindBuffer(t.ARRAY_BUFFER,this.backgroundBuffer),t.bufferData(t.ARRAY_BUFFER,new Int16Array([-1,-1,1,-1,-1,1,1,1]),t.STATIC_DRAW),this.setExtent(4096),this.debugTextBuffer=t.createBuffer(),this.debugTextBuffer.itemSize=2},n.prototype.setExtent=function(t){if(t&&t!==this.tileExtent){this.tileExtent=t;var e=this.gl;this.tileExtentBuffer=e.createBuffer(),this.tileExtentBuffer.itemSize=4,this.tileExtentBuffer.itemCount=4,e.bindBuffer(e.ARRAY_BUFFER,this.tileExtentBuffer),e.bufferData(e.ARRAY_BUFFER,new Int16Array([0,0,0,0,this.tileExtent,0,32767,0,0,this.tileExtent,0,32767,this.tileExtent,this.tileExtent,32767,32767]),e.STATIC_DRAW),this.debugBuffer=e.createBuffer(),this.debugBuffer.itemSize=2,this.debugBuffer.itemCount=5,e.bindBuffer(e.ARRAY_BUFFER,this.debugBuffer),e.bufferData(e.ARRAY_BUFFER,new Int16Array([0,0,this.tileExtent-1,0,this.tileExtent-1,this.tileExtent-1,0,this.tileExtent-1,0,0]),e.STATIC_DRAW)}},n.prototype.clearColor=function(){var t=this.gl;t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)},n.prototype.clearStencil=function(){var t=this.gl;t.clearStencil(0),t.stencilMask(255),t.clear(t.STENCIL_BUFFER_BIT)},n.prototype.drawClippingMask=function(t){var e=this.gl;e.switchShader(this.fillShader,t.posMatrix),e.colorMask(!1,!1,!1,!1),e.clearStencil(0),e.stencilMask(191),e.clear(e.STENCIL_BUFFER_BIT),e.stencilFunc(e.EQUAL,192,64),e.stencilMask(192),e.stencilOp(e.REPLACE,e.KEEP,e.KEEP),e.bindBuffer(e.ARRAY_BUFFER,this.tileExtentBuffer),e.vertexAttribPointer(this.fillShader.a_pos,this.tileExtentBuffer.itemSize,e.SHORT,!1,8,0),e.drawArrays(e.TRIANGLE_STRIP,0,this.tileExtentBuffer.itemCount),e.stencilFunc(e.EQUAL,128,128),e.stencilOp(e.KEEP,e.KEEP,e.REPLACE),e.stencilMask(0),e.colorMask(!0,!0,!0,!0)},n.prototype.prepareBuffers=function(){},n.prototype.bindDefaultFramebuffer=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)};var l={symbol:t("./draw_symbol"),circle:t("./draw_circle"),line:t("./draw_line"),fill:t("./draw_fill"),raster:t("./draw_raster"),background:t("./draw_background"),debug:t("./draw_debug"),vertices:t("./draw_vertices")};n.prototype.render=function(t,e){this.style=t,this.options=e,this.lineAtlas=t.lineAtlas,this.spriteAtlas=t.spriteAtlas,this.spriteAtlas.setSprite(t.sprite),this.glyphAtlas=t.glyphAtlas,this.glyphAtlas.bind(this.gl),this.frameHistory.record(this.transform.zoom),this.prepareBuffers(),this.clearColor();for(var i=t._groups.length-1;i>=0;i--){var n=t._groups[i],o=t.sources[n.source];o?(this.clearStencil(),o.render(n,this)):void 0===n.source&&this.drawLayers(n,this.identityMatrix)}},n.prototype.drawTile=function(t,e){this.setExtent(t.tileExtent),this.drawClippingMask(t),this.drawLayers(e,t.posMatrix,t),this.options.debug&&l.debug(this,t)},n.prototype.drawLayers=function(t,e,i){for(var n=t.length-1;n>=0;n--){var o=t[n];o.hidden||(l[o.type](this,o,e,i),this.options.vertices&&l.vertices(this,o,e,i))}},n.prototype.drawStencilBuffer=function(){var t=this.gl;t.switchShader(this.fillShader,this.identityMatrix),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.stencilMask(0),t.stencilFunc(t.EQUAL,128,128),t.bindBuffer(t.ARRAY_BUFFER,this.backgroundBuffer),t.vertexAttribPointer(this.fillShader.a_pos,this.backgroundBuffer.itemSize,t.SHORT,!1,0,0),t.uniform4fv(this.fillShader.u_color,[0,0,0,.5]),t.drawArrays(t.TRIANGLE_STRIP,0,this.tileExtentBuffer.itemCount),t.blendFunc(t.ONE_MINUS_DST_ALPHA,t.ONE)},n.prototype.translateMatrix=function(t,e,i,n){if(!i[0]&&!i[1])return t;if("viewport"===n){var o=Math.sin(-this.transform.angle),r=Math.cos(-this.transform.angle);i=[i[0]*r-i[1]*o,i[0]*o+i[1]*r]}var a=this.transform.scale/(1<<e.coord.z)/(e.tileExtent/e.tileSize),l=[i[0]/a,i[1]/a,0],u=new Float32Array(16);return s.translate(u,t,l),u},n.prototype.saveTexture=function(t){var e=this.reusableTextures[t.size];e?e.push(t):this.reusableTextures[t.size]=[t]},n.prototype.getTexture=function(t){var e=this.reusableTextures[t];return e&&e.length>0?e.pop():null}},{"../util/browser":203,"./draw_background":134,"./draw_circle":135,"./draw_debug":137,"./draw_fill":138,"./draw_line":139,"./draw_raster":140,"./draw_symbol":141,"./draw_vertices":142,"./frame_history":143,"./gl_util":144,"gl-matrix":223}],147:[function(t,e,i){"use strict";e.exports={debug:{vertex:"precision mediump float;attribute vec2 a_pos;uniform mat4 u_matrix;void main(){gl_Position=u_matrix*vec4(a_pos,step(32767.,a_pos.x),1);}",fragment:"precision mediump float;uniform vec4 u_color;void main(){gl_FragColor=u_color;}"},dot:{vertex:"precision mediump float;uniform mat4 u_matrix;uniform float u_size;attribute vec2 a_pos;void main(){gl_Position=u_matrix*vec4(a_pos,0,1);gl_PointSize=u_size;}",fragment:"precision mediump float;uniform vec4 u_color;uniform float u_blur;void main(){float a,b;a=length(gl_PointCoord-.5);b=smoothstep(.5,.5-u_blur,a);gl_FragColor=u_color*b;}"},fill:{vertex:"precision mediump float;attribute vec2 a_pos;uniform mat4 u_matrix;void main(){gl_Position=u_matrix*vec4(a_pos,0,1);}",fragment:"precision mediump float;uniform vec4 u_color;void main(){gl_FragColor=u_color;}"},circle:{vertex:"precision mediump float;uniform float u_size;attribute vec2 a_pos;uniform mat4 u_matrix,u_exmatrix;varying vec2 a;void main(){a=vec2(mod(a_pos,2.)*2.-1.);vec4 b=u_exmatrix*vec4(a*u_size,0,0);gl_Position=u_matrix*vec4(floor(a_pos*.5),0,1);gl_Position+=b*gl_Position.w;}",fragment:"precision mediump float;uniform vec4 u_color;uniform float u_blur,u_size;varying vec2 a;void main(){float b=smoothstep(1.-u_blur,1.,length(a));gl_FragColor=u_color*(1.-b);}"},line:{vertex:"precision mediump float;attribute vec2 a_pos;attribute vec4 a_data;uniform highp mat4 u_matrix;uniform float u_ratio,u_extra;uniform vec2 u_linewidth;uniform mat2 u_antialiasingmatrix;varying vec2 a;varying float b,c;void main(){vec2 d,e;d=a_data.xy;e=mod(a_pos,2.);e.y=sign(e.y-.5);a=e;vec4 f=vec4(u_linewidth.s*d*.015873016,0,0);gl_Position=u_matrix*vec4(floor(a_pos*.5)+f.xy/u_ratio,0,1);float g,h,i;g=gl_Position.y/gl_Position.w;h=length(d)/length(u_antialiasingmatrix*d);i=1./(1.-min(g*u_extra,.9));c=i*h;}",fragment:"precision mediump float;uniform vec2 u_linewidth;uniform vec4 u_color;uniform float u_blur;varying vec2 a;varying float b,c;void main(){float d,e,f;d=length(a)*u_linewidth.s;e=u_blur*c;f=clamp(min(d-(u_linewidth.t-e),u_linewidth.s-d)/e,0.,1.);gl_FragColor=u_color*f;}"},linepattern:{vertex:"precision mediump float;attribute vec2 a_pos;attribute vec4 a_data;uniform highp mat4 u_matrix;uniform float u_ratio,u_extra;uniform vec2 u_linewidth;uniform vec4 u_color;uniform mat2 u_antialiasingmatrix;varying vec2 a;varying float b,c;void main(){vec2 d,f,g,h;d=a_data.xy;float e,i,j,k;e=a_data.z*128.+a_data.w;f=mod(a_pos,2.);f.y=sign(f.y-.5);a=f;g=d*.015873016;h=u_linewidth.s*g;gl_Position=u_matrix*vec4(floor(a_pos*.5)+h.xy/u_ratio,0,1);b=e;i=gl_Position.y/gl_Position.w;j=length(d)/length(u_antialiasingmatrix*d);k=1./(1.-min(i*u_extra,.9));c=k*j;}",fragment:"precision mediump float;uniform vec2 u_linewidth,u_pattern_size_a,u_pattern_size_b,u_pattern_tl_a,u_pattern_br_a,u_pattern_tl_b,u_pattern_br_b;uniform float u_point,u_blur,u_fade,u_opacity;uniform sampler2D u_image;varying vec2 a;varying float b,c;void main(){float d,e,f,g,h,i,j;d=length(a)*u_linewidth.s;e=u_blur*c;f=clamp(min(d-(u_linewidth.t-e),u_linewidth.s-d)/e,0.,1.);g=mod(b/u_pattern_size_a.x,1.);h=mod(b/u_pattern_size_b.x,1.);i=.5+a.y*u_linewidth.s/u_pattern_size_a.y;j=.5+a.y*u_linewidth.s/u_pattern_size_b.y;vec2 k,l;k=mix(u_pattern_tl_a,u_pattern_br_a,vec2(g,i));l=mix(u_pattern_tl_b,u_pattern_br_b,vec2(h,j));vec4 m=mix(texture2D(u_image,k),texture2D(u_image,l),u_fade);f*=u_opacity;gl_FragColor=m*f;}"},linesdfpattern:{vertex:"precision mediump float;attribute vec2 a_pos;attribute vec4 a_data;uniform highp mat4 u_matrix;uniform vec2 u_linewidth,u_patternscale_a,u_patternscale_b;uniform float u_ratio,u_tex_y_a,u_tex_y_b,u_extra;uniform mat2 u_antialiasingmatrix;varying vec2 a,b,c;varying float d;void main(){vec2 e,g;e=a_data.xy;float f,i,j,k;f=a_data.z*128.+a_data.w;g=mod(a_pos,2.);g.y=sign(g.y-.5);a=g;vec4 h=vec4(u_linewidth.s*e*.015873016,0,0);gl_Position=u_matrix*vec4(floor(a_pos*.5)+h.xy/u_ratio,0,1);b=vec2(f*u_patternscale_a.x,g.y*u_patternscale_a.y+u_tex_y_a);c=vec2(f*u_patternscale_b.x,g.y*u_patternscale_b.y+u_tex_y_b);i=gl_Position.y/gl_Position.w;j=length(e)/length(u_antialiasingmatrix*e);k=1./(1.-min(i*u_extra,.9));d=k*j;}",fragment:"precision mediump float;uniform vec2 u_linewidth;uniform vec4 u_color;uniform float u_blur,u_sdfgamma,u_mix;uniform sampler2D u_image;varying vec2 a,b,c;varying float d;void main(){float e,f,g,h,i,j;e=length(a)*u_linewidth.s;f=u_blur*d;g=clamp(min(e-(u_linewidth.t-f),u_linewidth.s-e)/f,0.,1.);h=texture2D(u_image,b).a;i=texture2D(u_image,c).a;j=mix(h,i,u_mix);g*=smoothstep(.5-u_sdfgamma,.5+u_sdfgamma,j);gl_FragColor=u_color*g;}"},outline:{vertex:"precision mediump float;attribute vec2 a_pos;uniform highp mat4 u_matrix;uniform vec2 u_world;varying vec2 a;void main(){gl_Position=u_matrix*vec4(a_pos,0,1);a=(gl_Position.xy/gl_Position.w+1.)/2.*u_world;}",fragment:"precision mediump float;uniform vec4 u_color;varying vec2 a;void main(){float b,c;b=length(a-gl_FragCoord.xy);c=smoothstep(1.,0.,b);gl_FragColor=u_color*c;}"},pattern:{vertex:"precision mediump float;uniform mat4 u_matrix;uniform mat3 u_patternmatrix_a,u_patternmatrix_b;attribute vec2 a_pos;varying vec2 a,b;void main(){gl_Position=u_matrix*vec4(a_pos,0,1);a=(u_patternmatrix_a*vec3(a_pos,1)).xy;b=(u_patternmatrix_b*vec3(a_pos,1)).xy;}",fragment:"precision mediump float;uniform float u_opacity,u_mix;uniform vec2 u_pattern_tl_a,u_pattern_br_a,u_pattern_tl_b,u_pattern_br_b;uniform sampler2D u_image;varying vec2 a,b;void main(){vec2 c,d,f,g;c=mod(a,1.);d=mix(u_pattern_tl_a,u_pattern_br_a,c);vec4 e,h;e=texture2D(u_image,d);f=mod(b,1.);g=mix(u_pattern_tl_b,u_pattern_br_b,f);h=texture2D(u_image,g);gl_FragColor=mix(e,h,u_mix)*u_opacity;}"},raster:{vertex:"precision mediump float;uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent,u_buffer_scale;attribute vec2 a_pos,a_texture_pos;varying vec2 a,b;void main(){gl_Position=u_matrix*vec4(a_pos,0,1);a=(a_texture_pos/32767.-.5)/u_buffer_scale+.5;b=a*u_scale_parent+u_tl_parent;}",fragment:"precision mediump float;uniform float u_opacity0,u_opacity1,u_brightness_low,u_brightness_high,u_saturation_factor,u_contrast_factor;uniform sampler2D u_image0,u_image1;varying vec2 a,b;uniform vec3 u_spin_weights;void main(){vec4 c,d,e;c=texture2D(u_image0,a);d=texture2D(u_image1,b);e=c*u_opacity0+d*u_opacity1;vec3 f,h,i;f=e.rgb;f=vec3(dot(f,u_spin_weights.xyz),dot(f,u_spin_weights.zxy),dot(f,u_spin_weights.yzx));float g=(e.r+e.g+e.b)/3.;f+=(g-f)*u_saturation_factor;f=(f-.5)*u_contrast_factor+.5;h=vec3(u_brightness_low);i=vec3(u_brightness_high);gl_FragColor=vec4(mix(h,i,f),e.a);}"},icon:{vertex:"precision mediump float;attribute vec2 a_pos,a_offset;attribute vec4 a_data1,a_data2;uniform highp mat4 u_matrix;uniform mat4 u_exmatrix;uniform float u_zoom,u_fadedist,u_minfadezoom,u_maxfadezoom,u_fadezoom,u_opacity,u_extra;uniform bool u_skewed;uniform vec2 u_texsize;varying vec2 a;varying float b;void main(){vec2 c,e;c=a_data1.xy;float d,f,g,h,i,j;d=a_data1[2];e=a_data2.st;f=e[0];g=e[1];h=10.;i=2.-step(f,u_zoom)-(1.-step(g,u_zoom));j=clamp((u_fadezoom-d)/u_fadedist,0.,1.);if(u_fadedist>=0.)b=j;else b=1.-j;if(u_maxfadezoom<d)b=0.;if(u_minfadezoom>=d)b=1.;i+=step(b,0.);if(u_skewed){vec4 k=u_exmatrix*vec4(a_offset/64.,0,0);gl_Position=u_matrix*vec4(a_pos+k.xy,0,1);gl_Position.z+=i*gl_Position.w;}else{vec4 k=u_exmatrix*vec4(a_offset/64.,i,0);gl_Position=u_matrix*vec4(a_pos,0,1)+k;}a=c/u_texsize;b*=u_opacity;}",fragment:"precision mediump float;uniform sampler2D u_texture;varying vec2 a;varying float b;void main(){gl_FragColor=texture2D(u_texture,a)*b;}"},sdf:{vertex:"precision mediump float;attribute vec2 a_pos,a_offset;attribute vec4 a_data1,a_data2;uniform highp mat4 u_matrix;uniform mat4 u_exmatrix;uniform float u_zoom,u_fadedist,u_minfadezoom,u_maxfadezoom,u_fadezoom,u_extra;uniform bool u_skewed;uniform vec2 u_texsize;varying vec2 a;varying float b,c;void main(){vec2 d,f;d=a_data1.xy;float e,g,h,i,j,k,l;e=a_data1[2];f=a_data2.st;g=f[0];h=f[1];i=2.-step(g,u_zoom)-(1.-step(h,u_zoom));j=clamp((u_fadezoom-e)/u_fadedist,0.,1.);if(u_fadedist>=0.)b=j;else b=1.-j;if(u_maxfadezoom<e)b=0.;if(u_minfadezoom>=e)b=1.;i+=step(b,0.);if(u_skewed){vec4 k=u_exmatrix*vec4(a_offset/64.,0,0);gl_Position=u_matrix*vec4(a_pos+k.xy,0,1);gl_Position.z+=i*gl_Position.w;}else{vec4 k=u_exmatrix*vec4(a_offset/64.,i,0);gl_Position=u_matrix*vec4(a_pos,0,1)+k;}k=gl_Position.y/gl_Position.w;l=1./(1.-k*u_extra);c=l;a=d/u_texsize;}",fragment:"precision mediump float;uniform sampler2D u_texture;uniform vec4 u_color;uniform float u_buffer,u_gamma;varying vec2 a;varying float b,c;void main(){float d,e,f;d=u_gamma*c;e=texture2D(u_texture,a).a;f=smoothstep(u_buffer-d,u_buffer+d,e)*b;gl_FragColor=u_color*f;}"},collisionbox:{vertex:"precision mediump float;attribute vec2 a_pos,a_extrude,a_data;uniform mat4 u_matrix;uniform float u_scale;varying float a,b;void main(){gl_Position=u_matrix*vec4(a_pos+a_extrude/u_scale,0,1);a=a_data.x;b=a_data.y;}",fragment:"precision mediump float;uniform float u_zoom,u_maxzoom;varying float a,b;void main(){float c=.5;gl_FragColor=vec4(0,1,0,1)*c;if(b>u_zoom)gl_FragColor=vec4(1,0,0,1)*c;if(u_zoom>=a)gl_FragColor=vec4(0,0,0,1)*c*.25;if(b>=u_maxzoom)gl_FragColor=vec4(0,0,1,1)*c*.2;}"}}},{}],148:[function(t,e,i){"use strict";function n(t){t=t||{},this._data=t.data,void 0!==t.maxzoom&&(this.maxzoom=t.maxzoom),this.geojsonVtOptions={maxZoom:this.maxzoom},void 0!==t.buffer&&(this.geojsonVtOptions.buffer=t.buffer),void 0!==t.tolerance&&(this.geojsonVtOptions.tolerance=t.tolerance),this._pyramid=new s({tileSize:512,minzoom:this.minzoom,maxzoom:this.maxzoom,cacheSize:20,load:this._loadTile.bind(this),abort:this._abortTile.bind(this),unload:this._unloadTile.bind(this),add:this._addTile.bind(this),remove:this._removeTile.bind(this)})}var o=t("../util/util"),r=t("../util/evented"),s=t("./tile_pyramid"),a=t("./source"),l=t("resolve-url");e.exports=n,n.prototype=o.inherit(r,{minzoom:0,maxzoom:14,_dirty:!0,setData:function(t){return this._data=t,this._dirty=!0,this.fire("change"),this.map&&this.update(this.map.transform),this},onAdd:function(t){this.map=t},loaded:function(){return this._loaded&&this._pyramid.loaded()},update:function(t){this._dirty&&this._updateData(),this._loaded&&this._pyramid.update(this.used,t)},reload:function(){this._loaded&&this._pyramid.reload()},render:a._renderTiles,featuresAt:a._vectorFeaturesAt,featuresIn:a._vectorFeaturesIn,_updateData:function(){this._dirty=!1;var t=this._data;"string"==typeof t&&(t=l(window.location.href,t)),this.workerID=this.dispatcher.send("parse geojson",{data:t,tileSize:512,source:this.id,geojsonVtOptions:this.geojsonVtOptions},function(t){return t?void this.fire("error",{error:t}):(this._loaded=!0,this._pyramid.reload(),void this.fire("change"))}.bind(this))},_loadTile:function(t){var e=t.coord.z>this.maxzoom?Math.pow(2,t.coord.z-this.maxzoom):1,i={uid:t.uid,coord:t.coord,zoom:t.coord.z,maxZoom:this.maxzoom,tileSize:512,source:this.id,overscaling:e,angle:this.map.transform.angle,pitch:this.map.transform.pitch,collisionDebug:this.map.collisionDebug};t.workerID=this.dispatcher.send("load geojson tile",i,function(e,i){if(t.unloadVectorData(this.map.painter),!t.aborted){if(e)return void this.fire("tile.error",{tile:t});t.loadVectorData(i),this.fire("tile.load",{tile:t})}}.bind(this),this.workerID)},_abortTile:function(t){t.aborted=!0},_addTile:function(t){this.fire("tile.add",{tile:t})},_removeTile:function(t){this.fire("tile.remove",{tile:t})},_unloadTile:function(t){t.unloadVectorData(this.map.painter),this.glyphAtlas.removeGlyphs(t.uid),this.dispatcher.send("remove tile",{uid:t.uid,source:this.id},null,t.workerID)}})},{"../util/evented":208,"../util/util":214,"./source":152,"./tile_pyramid":155,"resolve-url":245}],149:[function(t,e,i){"use strict";function n(t){this.features=t,this.length=t.length}function o(t){this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=4096}var r=t("point-geometry"),s=t("vector-tile").VectorTileFeature;e.exports=n,n.prototype.feature=function(t){return new o(this.features[t])},o.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var i=t[e],n=[],o=0;o<i.length;o++)n.push(new r(i[o][0],i[o][1]));this.geometry.push(n)}return this.geometry},o.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,i=-(1/0),n=1/0,o=-(1/0),r=0;r<t.length;r++)for(var s=t[r],a=0;a<s.length;a++){var l=s[a];e=Math.min(e,l.x),i=Math.max(i,l.x),n=Math.min(n,l.y),o=Math.max(o,l.y)}return[e,n,i,o]},o.prototype.toGeoJSON=s.prototype.toGeoJSON},{"point-geometry":243,"vector-tile":247}],150:[function(t,e,i){"use strict";function n(t){this.coordinates=t.coordinates,u.getImage(t.url,function(t,e){t||(this.image=e,this.image.addEventListener("load",function(){this.map._rerender()}.bind(this)),this._loaded=!0,this.map&&(this.createTile(),this.fire("change")))}.bind(this))}var o=t("../util/util"),r=t("./tile"),s=t("../geo/lng_lat"),a=t("point-geometry"),l=t("../util/evented"),u=t("../util/ajax");e.exports=n,n.prototype=o.inherit(l,{onAdd:function(t){this.map=t,this.image&&this.createTile()},createTile:function(){var t=this.map,e=this.coordinates.map(function(e){var i=s.convert(e);return t.transform.locationCoordinate(i).zoomTo(0)}),i=o.getCoordinatesCenter(e),n=4096,l=e.map(function(t){var e=t.zoomTo(i.zoom);return new a(Math.round((e.column-i.column)*n),Math.round((e.row-i.row)*n))}),u=t.painter.gl,c=32767,h=new Int16Array([l[0].x,l[0].y,0,0,l[1].x,l[1].y,c,0,l[3].x,l[3].y,0,c,l[2].x,l[2].y,c,c]);this.tile=new r,this.tile.buckets={},this.tile.boundsBuffer=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,this.tile.boundsBuffer),u.bufferData(u.ARRAY_BUFFER,h,u.STATIC_DRAW),this.center=i},loaded:function(){return this.image&&this.image.complete},update:function(){},reload:function(){},render:function(t,e){if(this._loaded&&this.loaded()){var i=this.center;this.tile.calculateMatrices(i.zoom,i.column,i.row,this.map.transform,e);var n=e.gl;this.tile.texture?(n.bindTexture(n.TEXTURE_2D,this.tile.texture),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.image)):(this.tile.texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.tile.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,this.image)),e.drawLayers(t,this.tile.posMatrix,this.tile)}},featuresAt:function(t,e,i){return i(null,[])}})},{"../geo/lng_lat":129,"../util/ajax":202,"../util/evented":208,"../util/util":214,"./tile":153,"point-geometry":243}],151:[function(t,e,i){"use strict";function n(t){o.extend(this,o.pick(t,["url","tileSize"])),a._loadTileJSON.call(this,t)}var o=t("../util/util"),r=t("../util/ajax"),s=t("../util/evented"),a=t("./source"),l=t("../util/mapbox").normalizeTileURL;e.exports=n,n.prototype=o.inherit(s,{minzoom:0,maxzoom:22,roundZoom:!0,tileSize:512,_loaded:!1,onAdd:function(t){this.map=t},loaded:function(){return this._pyramid&&this._pyramid.loaded()},update:function(t){this._pyramid&&this._pyramid.update(this.used,t,this.map.style.rasterFadeDuration)},reload:function(){},render:a._renderTiles,_loadTile:function(t){function e(e,i){if(delete t.request,!t.aborted){if(e)return void this.fire("tile.error",{tile:t});var n=this.map.painter.gl;t.texture=this.map.painter.getTexture(i.width),t.texture?(n.bindTexture(n.TEXTURE_2D,t.texture),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,i)):(t.texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,t.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR_MIPMAP_NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,i),t.texture.size=i.width),n.generateMipmap(n.TEXTURE_2D),t.timeAdded=(new Date).getTime(),this.map.animationLoop.set(this.style.rasterFadeDuration),t.source=this,t.loaded=!0,this.fire("tile.load",{tile:t})}}var i=l(t.coord.url(this.tiles),this.url);t.request=r.getImage(i,e.bind(this))},_abortTile:function(t){t.aborted=!0,t.request&&(t.request.abort(),delete t.request)},_addTile:function(t){this.fire("tile.add",{tile:t})},_removeTile:function(t){this.fire("tile.remove",{tile:t})},_unloadTile:function(t){t.texture&&this.map.painter.saveTexture(t.texture)},featuresAt:function(t,e,i){i(null,[])},featuresIn:function(t,e,i){i(null,[])}})},{"../util/ajax":202,"../util/evented":208,"../util/mapbox":211,"../util/util":214,"./source":152}],152:[function(t,e,i){"use strict";var n=t("../util/util"),o=t("../util/ajax"),r=t("../util/browser"),s=t("./tile_pyramid"),a=t("./tile_coord"),l=t("../util/mapbox").normalizeSourceURL;i._loadTileJSON=function(t){var e=function(t,e){return t?void this.fire("error",{error:t}):(n.extend(this,n.pick(e,["tiles","minzoom","maxzoom","attribution"])),this._pyramid=new s({tileSize:this.tileSize,cacheSize:20,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom,reparseOverscaled:this.reparseOverscaled,load:this._loadTile.bind(this),abort:this._abortTile.bind(this),unload:this._unloadTile.bind(this),add:this._addTile.bind(this),remove:this._removeTile.bind(this),redoPlacement:this._redoTilePlacement?this._redoTilePlacement.bind(this):void 0}),void this.fire("load"))}.bind(this);t.url?o.getJSON(l(t.url),e):r.frame(e.bind(this,null,t))},i._renderTiles=function(t,e){if(this._pyramid)for(var i=this._pyramid.renderedIDs(),n=0;n<i.length;n++){var o=this._pyramid.getTile(i[n]),r=a.fromID(i[n]),s=r.z,l=r.x,u=r.y,c=r.w;s=Math.min(s,this.maxzoom),l+=c*(1<<s),o.calculateMatrices(s,l,u,e.transform,e),e.drawTile(o,t)}},i._vectorFeaturesAt=function(t,e,i){if(!this._pyramid)return i(null,[]);var n=this._pyramid.tileAt(t);return n?void this.dispatcher.send("query features",{uid:n.tile.uid,x:n.x,y:n.y,tileExtent:n.tile.tileExtent,scale:n.scale,source:this.id,params:e},i,n.tile.workerID):i(null,[])},i._vectorFeaturesIn=function(t,e,i){if(!this._pyramid)return i(null,[]);var o=this._pyramid.tilesIn(t);return o?void n.asyncAll(o,function(t,i){this.dispatcher.send("query features",{uid:t.tile.uid,source:this.id,minX:t.minX,maxX:t.maxX,minY:t.minY,maxY:t.maxY,params:e},i,t.tile.workerID)}.bind(this),function(t,e){i(t,Array.prototype.concat.apply([],e))}):i(null,[])},i.create=function(e){var i={vector:t("./vector_tile_source"),raster:t("./raster_tile_source"),geojson:t("./geojson_source"),video:t("./video_source"),image:t("./image_source")};for(var n in i)if(e instanceof i[n])return e;return new i[e.type](e)}},{"../util/ajax":202,"../util/browser":203,"../util/mapbox":211,"../util/util":214,"./geojson_source":148,"./image_source":150,"./raster_tile_source":151,"./tile_coord":154,"./tile_pyramid":155,"./vector_tile_source":156,"./video_source":157}],153:[function(t,e,i){"use strict";function n(t,e){this.coord=t,this.uid=r.uniqueId(),this.loaded=!1,this.uses=0,this.tileSize=e}var o=t("gl-matrix").mat4,r=t("../util/util"),s=t("../data/buffer_set");e.exports=n,n.prototype={tileExtent:4096,calculateMatrices:function(t,e,i,n){var r=Math.pow(2,t),s=n.worldSize/r;this.scale=s,this.posMatrix=new Float64Array(16),o.identity(this.posMatrix),o.translate(this.posMatrix,this.posMatrix,[e*s,i*s,0]),o.scale(this.posMatrix,this.posMatrix,[s/this.tileExtent,s/this.tileExtent,1]),o.multiply(this.posMatrix,n.projMatrix,this.posMatrix),this.posMatrix=new Float32Array(this.posMatrix),this.exMatrix=n.exMatrix,this.rotationMatrix=n.rotationMatrix},positionAt:function(t,e){return t=t.zoomTo(Math.min(this.coord.z,e)),{x:(t.column-this.coord.x)*this.tileExtent,y:(t.row-this.coord.y)*this.tileExtent,scale:this.scale}},loadVectorData:function(t){this.loaded=!0,t&&(this.buffers=new s(t.buffers),this.elementGroups=t.elementGroups,this.tileExtent=t.extent)},reloadSymbolData:function(t,e){if(this.buffers){this.buffers.glyphVertex.destroy(e.gl),this.buffers.glyphElement.destroy(e.gl),this.buffers.iconVertex.destroy(e.gl),this.buffers.iconElement.destroy(e.gl),this.buffers.collisionBoxVertex.destroy(e.gl);var i=new s(t.buffers);this.buffers.glyphVertex=i.glyphVertex,this.buffers.glyphElement=i.glyphElement,this.buffers.iconVertex=i.iconVertex,this.buffers.iconElement=i.iconElement,this.buffers.collisionBoxVertex=i.collisionBoxVertex;for(var n in t.elementGroups)this.elementGroups[n]=t.elementGroups[n]}},unloadVectorData:function(t){for(var e in this.buffers)this.buffers[e].destroy(t.gl);this.buffers=null}}},{"../data/buffer_set":120,"../util/util":214,"gl-matrix":223}],154:[function(t,e,i){"use strict";function n(t,e,i,n){a(!isNaN(t)),a(!isNaN(e)),a(!isNaN(i)),a(t>=0),a(e>=0),a(i>=0),isNaN(n)&&(n=0),this.z=+t,this.x=+e,this.y=+i,this.w=+n,n*=2,0>n&&(n=-1*n-1);var o=1<<this.z;this.id=32*(o*o*n+o*this.y+this.x)+this.z}function o(t,e){if(t.row>e.row){var i=t;t=e,e=i}return{x0:t.column,y0:t.row,x1:e.column,y1:e.row,dx:e.column-t.column,dy:e.row-t.row}}function r(t,e,i,n,o){var r=Math.max(i,Math.floor(e.y0)),s=Math.min(n,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var a=t;t=e,e=a}for(var l=t.dx/t.dy,u=e.dx/e.dy,c=t.dx>0,h=e.dx<0,p=r;s>p;p++){var d=l*Math.max(0,Math.min(t.dy,p+c-t.y0))+t.x0,f=u*Math.max(0,Math.min(e.dy,p+h-e.y0))+e.x0;o(Math.floor(f),Math.ceil(d),p)}}function s(t,e,i,n,s,a){var l,u=o(t,e),c=o(e,i),h=o(i,t);u.dy>c.dy&&(l=u,u=c,c=l),u.dy>h.dy&&(l=u,u=h,h=l),c.dy>h.dy&&(l=c,c=h,h=l),u.dy&&r(h,u,n,s,a),c.dy&&r(h,c,n,s,a)}var a=t("assert");e.exports=n,n.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y},n.fromID=function(t){var e=t%32,i=1<<e,o=(t-e)/32,r=o%i,s=(o-r)/i%i,a=Math.floor(o/(i*i));return a%2!==0&&(a=-1*a-1),a/=2,new n(e,r,s,a)},n.prototype.url=function(t,e){return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",Math.min(this.z,e||this.z)).replace("{x}",this.x).replace("{y}",this.y)},n.prototype.parent=function(t){return 0===this.z?null:this.z>t?new n(this.z-1,this.x,this.y,this.w):new n(this.z-1,Math.floor(this.x/2),Math.floor(this.y/2),this.w)},n.prototype.wrapped=function(){return new n(this.z,this.x,this.y,0)},n.prototype.children=function(t){if(this.z>=t)return[new n(this.z+1,this.x,this.y,this.w)];var e=this.z+1,i=2*this.x,o=2*this.y;return[new n(e,i,o,this.w),new n(e,i+1,o,this.w),new n(e,i,o+1,this.w),new n(e,i+1,o+1,this.w)]},n.cover=function(t,e,i){function o(t,e,o){var s,l,u;if(o>=0&&r>=o)for(s=t;e>s;s++)l=(s%r+r)%r,u=new n(i,l,o,Math.floor(s/r)),a[u.id]=u}var r=1<<t,a={};return s(e[0],e[1],e[2],0,r,o),s(e[2],e[3],e[0],0,r,o),Object.keys(a).map(function(t){return a[t]})}},{assert:87}],155:[function(t,e,i){"use strict";function n(t){this.tileSize=t.tileSize,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,this.roundZoom=t.roundZoom,this.reparseOverscaled=t.reparseOverscaled,this._load=t.load,this._abort=t.abort,this._unload=t.unload,this._add=t.add,this._remove=t.remove,this._redoPlacement=t.redoPlacement,this._tiles={},this._cache=new l(t.cacheSize,function(t){return this._unload(t)}.bind(this)),this._filterRendered=this._filterRendered.bind(this)}function o(t,e){return e%32-t%32}var r=t("./tile"),s=t("./tile_coord"),a=t("point-geometry"),l=t("../util/mru_cache"),u=t("../util/util");e.exports=n,n.prototype={loaded:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0},orderedIDs:function(){return Object.keys(this._tiles).map(Number).sort(o)},renderedIDs:function(){return this.orderedIDs().filter(this._filterRendered)},_filterRendered:function(t){return this._tiles[t].loaded&&!this._coveredTiles[t]},reload:function(){this._cache.reset();for(var t in this._tiles)this._load(this._tiles[t])},getTile:function(t){return this._tiles[t]},getZoom:function(t){return t.zoom+Math.log(t.tileSize/this.tileSize)/Math.LN2},coveringZoomLevel:function(t){return(this.roundZoom?Math.round:Math.floor)(this.getZoom(t))},coveringTiles:function(t){var e=this.coveringZoomLevel(t),i=e;if(e<this.minzoom)return[];e>this.maxzoom&&(e=this.maxzoom);var n=t,o=n.locationCoordinate(n.center)._zoomTo(e),r=new a(o.column-.5,o.row-.5);return s.cover(e,[n.pointCoordinate(new a(0,0))._zoomTo(e),n.pointCoordinate(new a(n.width,0))._zoomTo(e),n.pointCoordinate(new a(n.width,n.height))._zoomTo(e),n.pointCoordinate(new a(0,n.height))._zoomTo(e)],this.reparseOverscaled?i:e).sort(function(t,e){return r.dist(t)-r.dist(e)})},findLoadedChildren:function(t,e,i){for(var n=!0,o=t.z,r=t.children(this.maxzoom),s=0;s<r.length;s++){var a=r[s].id;this._tiles[a]&&this._tiles[a].loaded?i[a]=!0:(n=!1,e>o&&this.findLoadedChildren(r[s],e,i))}return n},findLoadedParent:function(t,e,i){for(var n=t.z-1;n>=e;n--){t=t.parent(this.maxzoom);var o=this._tiles[t.id];if(o&&o.loaded)return i[t.id]=!0,o}},update:function(t,e,i){var n,o,r,a=(this.roundZoom?Math.round:Math.floor)(this.getZoom(e)),l=u.clamp(a-10,this.minzoom,this.maxzoom),c=u.clamp(a+1,this.minzoom,this.maxzoom),h={},p=(new Date).getTime();this._coveredTiles={};var d=t?this.coveringTiles(e):[];for(n=0;n<d.length;n++)o=d[n],r=this.addTile(o),h[o.id]=!0,r.loaded||this.findLoadedChildren(o,c,h)||this.findLoadedParent(o,l,h);for(var f in h)o=s.fromID(f),r=this._tiles[f],r&&r.timeAdded>p-(i||0)&&(this.findLoadedChildren(o,c,h)?(this._coveredTiles[f]=!0,h[f]=!0):this.findLoadedParent(o,l,h));var m=u.keysDifference(this._tiles,h);for(n=0;n<m.length;n++)this.removeTile(+m[n])},addTile:function(t){var e=this._tiles[t.id];if(e)return e;var i=t.wrapped();if(e=this._tiles[i.id],e||(e=this._cache.get(i.id),e&&this._redoPlacement&&this._redoPlacement(e)),!e){var n=t.z,o=n>this.maxzoom?Math.pow(2,n-this.maxzoom):1;e=new r(i,this.tileSize*o),this._load(e)}return e.uses++,this._tiles[t.id]=e,this._add(e,t),e},removeTile:function(t){var e=this._tiles[t];
e&&(e.uses--,delete this._tiles[t],this._remove(e),e.uses>0||(e.loaded?this._cache.add(e.coord.wrapped().id,e):(this._abort(e),this._unload(e))))},clearTiles:function(){for(var t in this._tiles)this.removeTile(t);this._cache.reset()},tileAt:function(t){for(var e=this.orderedIDs(),i=0;i<e.length;i++){var n=this._tiles[e[i]],o=n.positionAt(t,this.maxzoom);if(o&&o.x>=0&&o.x<n.tileExtent&&o.y>=0&&o.y<n.tileExtent)return{tile:n,x:o.x,y:o.y,scale:o.scale}}},tilesIn:function(t){for(var e=[],i=this.orderedIDs(),n=0;n<i.length;n++){var o=this._tiles[i[n]],r=[o.positionAt(t[0],this.maxzoom),o.positionAt(t[1],this.maxzoom)];r[0].x<o.tileExtent&&r[0].y<o.tileExtent&&r[1].x>=0&&r[1].y>=0&&e.push({tile:o,minX:r[0].x,maxX:r[1].x,minY:r[0].y,maxY:r[1].y})}return e}}},{"../util/mru_cache":212,"../util/util":214,"./tile":153,"./tile_coord":154,"point-geometry":243}],156:[function(t,e,i){"use strict";function n(t){if(o.extend(this,o.pick(t,["url","tileSize"])),512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");s._loadTileJSON.call(this,t)}var o=t("../util/util"),r=t("../util/evented"),s=t("./source");e.exports=n,n.prototype=o.inherit(r,{minzoom:0,maxzoom:22,tileSize:512,reparseOverscaled:!0,_loaded:!1,onAdd:function(t){this.map=t},loaded:function(){return this._pyramid&&this._pyramid.loaded()},update:function(t){this._pyramid&&this._pyramid.update(this.used,t)},reload:function(){this._pyramid&&this._pyramid.reload()},redoPlacement:function(){if(this._pyramid)for(var t=this._pyramid.orderedIDs(),e=0;e<t.length;e++){var i=this._pyramid.getTile(t[e]);this._redoTilePlacement(i)}},render:s._renderTiles,featuresAt:s._vectorFeaturesAt,featuresIn:s._vectorFeaturesIn,_loadTile:function(t){var e=t.coord.z>this.maxzoom?Math.pow(2,t.coord.z-this.maxzoom):1,i={url:t.coord.url(this.tiles,this.maxzoom),uid:t.uid,coord:t.coord,zoom:t.coord.z,tileSize:this.tileSize*e,source:this.id,overscaling:e,angle:this.map.transform.angle,pitch:this.map.transform.pitch,collisionDebug:this.map.collisionDebug};t.workerID?this.dispatcher.send("reload tile",i,this._tileLoaded.bind(this,t),t.workerID):t.workerID=this.dispatcher.send("load tile",i,this._tileLoaded.bind(this,t))},_tileLoaded:function(t,e,i){if(!t.aborted){if(e)return void this.fire("tile.error",{tile:t});t.loadVectorData(i),t.redoWhenDone&&(t.redoWhenDone=!1,this._redoTilePlacement(t)),this.fire("tile.load",{tile:t}),this.fire("tile.stats",i.bucketStats)}},_abortTile:function(t){t.aborted=!0,this.dispatcher.send("abort tile",{uid:t.uid,source:this.id},null,t.workerID)},_addTile:function(t){this.fire("tile.add",{tile:t})},_removeTile:function(t){this.fire("tile.remove",{tile:t})},_unloadTile:function(t){t.unloadVectorData(this.map.painter),this.glyphAtlas.removeGlyphs(t.uid),this.dispatcher.send("remove tile",{uid:t.uid,source:this.id},null,t.workerID)},_redoTilePlacement:function(t){function e(e,i){t.reloadSymbolData(i,this.map.painter),this.fire("tile.load",{tile:t}),t.redoingPlacement=!1,t.redoWhenDone&&(this._redoTilePlacement(t),t.redoWhenDone=!1)}return!t.loaded||t.redoingPlacement?void(t.redoWhenDone=!0):(t.redoingPlacement=!0,void this.dispatcher.send("redo placement",{uid:t.uid,source:this.id,angle:this.map.transform.angle,pitch:this.map.transform.pitch,collisionDebug:this.map.collisionDebug},e.bind(this),t.workerID))}})},{"../util/evented":208,"../util/util":214,"./source":152}],157:[function(t,e,i){"use strict";function n(t){this.coordinates=t.coordinates,u.getVideo(t.urls,function(t,e){if(!t){this.video=e,this.video.loop=!0;var i;this.video.addEventListener("playing",function(){i=this.map.style.animationLoop.set(1/0),this.map._rerender()}.bind(this)),this.video.addEventListener("pause",function(){this.map.style.animationLoop.cancel(i)}.bind(this)),this._loaded=!0,this.map&&(this.video.play(),this.createTile(),this.fire("change"))}}.bind(this))}var o=t("../util/util"),r=t("./tile"),s=t("../geo/lng_lat"),a=t("point-geometry"),l=t("../util/evented"),u=t("../util/ajax");e.exports=n,n.prototype=o.inherit(l,{roundZoom:!0,getVideo:function(){return this.video},onAdd:function(t){this.map=t,this.video&&(this.video.play(),this.createTile())},createTile:function(){var t=this.map,e=this.coordinates.map(function(e){var i=s.convert(e);return t.transform.locationCoordinate(i).zoomTo(0)}),i=o.getCoordinatesCenter(e),n=4096,l=e.map(function(t){var e=t.zoomTo(i.zoom);return new a(Math.round((e.column-i.column)*n),Math.round((e.row-i.row)*n))}),u=t.painter.gl,c=32767,h=new Int16Array([l[0].x,l[0].y,0,0,l[1].x,l[1].y,c,0,l[3].x,l[3].y,0,c,l[2].x,l[2].y,c,c]);this.tile=new r,this.tile.buckets={},this.tile.boundsBuffer=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,this.tile.boundsBuffer),u.bufferData(u.ARRAY_BUFFER,h,u.STATIC_DRAW),this.center=i},loaded:function(){return this.video&&this.video.readyState>=2},update:function(){},reload:function(){},render:function(t,e){if(this._loaded&&!(this.video.readyState<2)){var i=this.center;this.tile.calculateMatrices(i.zoom,i.column,i.row,this.map.transform,e);var n=e.gl;this.tile.texture?(n.bindTexture(n.TEXTURE_2D,this.tile.texture),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.tile.texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.tile.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,this.video)),e.drawLayers(t,this.tile.posMatrix,this.tile)}},featuresAt:function(t,e,i){return i(null,[])},featuresIn:function(t,e,i){return i(null,[])}})},{"../geo/lng_lat":129,"../util/ajax":202,"../util/evented":208,"../util/util":214,"./tile":153,"point-geometry":243}],158:[function(t,e,i){"use strict";function n(t){this.self=t,this.actor=new o(t,this),this.loading={},this.loaded={},this.layers=[],this.geoJSONIndexes={}}var o=t("../util/actor"),r=t("./worker_tile"),s=t("../util/util"),a=t("../util/ajax"),l=t("vector-tile"),u=t("pbf"),c=t("geojson-vt"),h=t("./geojson_wrapper");e.exports=function(t){return new n(t)},s.extend(n.prototype,{"set layers":function(t){this.layers=t},"load tile":function(t,e){function i(t,i){return delete this.loading[n][o],t?e(t):(s.data=new l.VectorTile(new u(new Uint8Array(i))),s.parse(s.data,this.layers,this.actor,e),this.loaded[n]=this.loaded[n]||{},void(this.loaded[n][o]=s))}var n=t.source,o=t.uid;this.loading[n]||(this.loading[n]={});var s=this.loading[n][o]=new r(t);s.xhr=a.getArrayBuffer(t.url,i.bind(this))},"reload tile":function(t,e){var i=this.loaded[t.source],n=t.uid;if(i&&i[n]){var o=i[n];o.parse(o.data,this.layers,this.actor,e)}},"abort tile":function(t){var e=this.loading[t.source],i=t.uid;e&&e[i]&&(e[i].xhr.abort(),delete e[i])},"remove tile":function(t){var e=this.loaded[t.source],i=t.uid;e&&e[i]&&delete e[i]},"redo placement":function(t,e){var i=this.loaded[t.source],n=this.loading[t.source],o=t.uid;if(i&&i[o]){var r=i[o],s=r.redoPlacement(t.angle,t.pitch,t.collisionDebug);s.result&&e(null,s.result,s.transferables)}else n&&n[o]&&(n[o].angle=t.angle)},"parse geojson":function(t,e){var i=function(i,n){return i?e(i):(this.geoJSONIndexes[t.source]=c(n,t.geojsonVtOptions),void e(null))}.bind(this);"string"==typeof t.data?a.getJSON(t.data,i):i(null,t.data)},"load geojson tile":function(t,e){var i=t.source,n=t.coord,o=this.geoJSONIndexes[i].getTile(n.z,n.x,n.y);if(!o)return e(null,null);var s=new r(t);s.parse(new h(o.features),this.layers,this.actor,e),this.loaded[i]=this.loaded[i]||{},this.loaded[i][t.uid]=s},"query features":function(t,e){var i=this.loaded[t.source]&&this.loaded[t.source][t.uid];i?i.featureTree.query(t,e):e(null,[])}})},{"../util/actor":201,"../util/ajax":202,"../util/util":214,"./geojson_wrapper":149,"./worker_tile":159,"geojson-vt":219,pbf:241,"vector-tile":247}],159:[function(t,e,i){"use strict";function n(t){this.coord=t.coord,this.uid=t.uid,this.zoom=t.zoom,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=t.overscaling,this.angle=t.angle,this.pitch=t.pitch,this.collisionDebug=t.collisionDebug}function o(t){for(var e={},i=0;i<t.length;i++)e[t[i].id]=t[i].elementGroups;return e}function r(t){var e=[];for(var i in t)e.push(t[i].arrayBuffer),t[i].push=null;return e}var s=t("../data/feature_tree"),a=t("../symbol/collision_tile"),l=t("../data/buffer_set"),u=t("../data/create_bucket");e.exports=n,n.prototype.parse=function(t,e,i,n){function c(t,e){for(var i=0;i<t.length;i++){var n=t.feature(i);for(var o in e)e[o].filter(n)&&e[o].features.push(n)}}function h(t){if(t)return n(t);if(D++,2===D){for(var e=T.length-1;e>=0;e--)p(v,T[e]);d()}}function p(t,e){var i=Date.now();e.addFeatures(x,A,C);var n=Date.now()-i;if(e.interactive)for(var o=0;o<e.features.length;o++){var r=e.features[o];t.featureTree.insert(r.bbox(),e.layers,r)}e.features=null,"undefined"!=typeof self&&(self.bucketStats=self.bucketStats||{_total:0},self.bucketStats._total+=n,self.bucketStats[e.id]=(self.bucketStats[e.id]||0)+n)}function d(){if(v.status="done",v.redoPlacementAfterDone){var t=v.redoPlacement(v.angle,v.pitch).result;b.glyphVertex=t.buffers.glyphVertex,b.iconVertex=t.buffers.iconVertex,b.collisionBoxVertex=t.buffers.collisionBoxVertex,v.redoPlacementAfterDone=!1}n(null,{elementGroups:o(k),buffers:b,extent:S,bucketStats:"undefined"!=typeof self?self.bucketStats:null},r(b))}this.status="parsing",this.featureTree=new s(this.coord,this.overscaling);var f,m,g,y,v=this,b=new l,x=new a(this.angle,this.pitch),_={},w={};for(f=0;f<e.length;f++)m=e[f],m.source!==this.source||m.ref||m.minzoom&&this.zoom<m.minzoom||m.maxzoom&&this.zoom>=m.maxzoom||"none"===m.layout.visibility||(y=u(m,b,this.zoom,this.overscaling,this.collisionDebug),y.layers=[m.id],_[m.id]=y,t.layers&&(g=m["source-layer"],w[g]=w[g]||{},w[g][m.id]=y));for(f=0;f<e.length;f++)m=e[f],m.source===this.source&&m.ref&&_[m.ref]&&_[m.ref].layers.push(m.id);var S=4096;if(t.layers)for(g in w)m=t.layers[g],m&&(m.extent&&(S=m.extent),c(m,w[g]));else c(t,_);var k=[],T=this.symbolBuckets=[],E=[];for(var M in _)y=_[M],0!==y.features.length&&(k.push(y),"symbol"===y.type?T.push(y):E.push(y));var C={},A={};if(T.length>0){for(f=T.length-1;f>=0;f--)T[f].updateIcons(C),T[f].updateFont(A);for(var R in A)A[R]=Object.keys(A[R]).map(Number);C=Object.keys(C);var D=0;i.send("get glyphs",{uid:this.uid,stacks:A},function(t,e){A=e,h(t)}),C.length?i.send("get icons",{icons:C},function(t,e){C=e,h(t)}):h()}for(f=E.length-1;f>=0;f--)p(this,E[f]);return 0===T.length?d():void 0},n.prototype.redoPlacement=function(t,e,i){if("done"!==this.status)return this.redoPlacementAfterDone=!0,this.angle=t,{};for(var n=new l,s=new a(t,e),u=this.symbolBuckets.length-1;u>=0;u--)this.symbolBuckets[u].placeFeatures(s,n,i);return{result:{elementGroups:o(this.symbolBuckets),buffers:n},transferables:r(n)}}},{"../data/buffer_set":120,"../data/create_bucket":122,"../data/feature_tree":124,"../symbol/collision_tile":177}],160:[function(t,e,i){"use strict";function n(){this.n=0,this.times=[]}e.exports=n,n.prototype.stopped=function(){return this.times=this.times.filter(function(t){return t.time>=(new Date).getTime()}),!this.times.length},n.prototype.set=function(t){return this.times.push({id:this.n,time:t+(new Date).getTime()}),this.n++},n.prototype.cancel=function(t){this.times=this.times.filter(function(e){return e.id!==t})}},{}],161:[function(t,e,i){"use strict";function n(t){this.base=t,this.retina=a.devicePixelRatio>1;var e=this.retina?"@2x":"";s.getJSON(l(t,e,".json"),function(t,e){return t?void this.fire("error",{error:t}):(this.data=e,void(this.img&&this.fire("load")))}.bind(this)),s.getImage(l(t,e,".png"),function(t,e){if(t)return void this.fire("error",{error:t});for(var i=e.getData(),n=e.data=new Uint8Array(i.length),o=0;o<i.length;o+=4){var r=i[o+3]/255;n[o+0]=i[o+0]*r,n[o+1]=i[o+1]*r,n[o+2]=i[o+2]*r,n[o+3]=i[o+3]}this.img=e,this.data&&this.fire("load")}.bind(this))}function o(){}var r=t("../util/evented"),s=t("../util/ajax"),a=t("../util/browser"),l=t("../util/mapbox").normalizeSpriteURL;e.exports=n,n.prototype=Object.create(r),n.prototype.toJSON=function(){return this.base},n.prototype.loaded=function(){return!(!this.data||!this.img)},n.prototype.resize=function(){if(a.devicePixelRatio>1!==this.retina){var t=new n(this.base);t.on("load",function(){this.img=t.img,this.data=t.data,this.retina=t.retina}.bind(this))}},o.prototype={x:0,y:0,width:0,height:0,pixelRatio:1,sdf:!1},n.prototype.getSpritePosition=function(t){if(!this.loaded())return new o;var e=this.data&&this.data[t];return e&&this.img?e:new o}},{"../util/ajax":202,"../util/browser":203,"../util/evented":208,"../util/mapbox":211}],162:[function(t,e,i){"use strict";var n=t("./reference");e.exports={},n.layout.forEach(function(t){var i=function(t){for(var e in t)this[e]=t[e]},o=n[t];for(var r in o)void 0!==o[r]["default"]&&(i.prototype[r]=o[r]["default"]);e.exports[t.replace("layout_","")]=i})},{"./reference":164}],163:[function(t,e,i){"use strict";var n=t("./reference"),o=t("csscolorparser").parseCSSColor;e.exports={},n.paint.forEach(function(t){var i=function(){},r=n[t];for(var s in r){var a=r[s],l=a["default"];void 0!==l&&("color"===a.type&&(l=o(l)),i.prototype[s]=l)}i.prototype.hidden=!1,e.exports[t.replace("paint_","")]=i})},{"./reference":164,csscolorparser:215}],164:[function(t,e,i){"use strict";e.exports=t("mapbox-gl-style-spec/reference/latest")},{"mapbox-gl-style-spec/reference/latest":236}],165:[function(t,e,i){"use strict";function n(t,e){this.animationLoop=e||new y,this.dispatcher=new g(Math.max(m.hardwareConcurrency-1,1),this),this.glyphAtlas=new u(1024,1024),this.spriteAtlas=new c(512,512),this.spriteAtlas.resize(m.devicePixelRatio),this.lineAtlas=new h(256,512),this._layers={},this._order=[],this._groups=[],this.sources={},this.zoomHistory={},p.bindAll(["_forwardSourceEvent","_forwardTileEvent","_redoPlacement"],this);var i=function(t,e){if(t)return void this.fire("error",{error:t});var i=v(e);if(i.length)for(var n=0;n<i.length;n++)this.fire("error",{error:new Error(i[n].message)});else{this._loaded=!0,this.stylesheet=e;var o=e.sources;for(var r in o)this.addSource(r,o[r]);e.sprite&&(this.sprite=new a(e.sprite),this.sprite.on("load",this.fire.bind(this,"change"))),this.glyphSource=new l(e.glyphs,this.glyphAtlas),this._resolve(),this.fire("load")}}.bind(this);"string"==typeof t?d.getJSON(f(t),i):m.frame(i.bind(this,null,t))}var o=t("../util/evented"),r=t("./style_batch"),s=t("./style_layer"),a=t("./image_sprite"),l=t("../symbol/glyph_source"),u=t("../symbol/glyph_atlas"),c=t("../symbol/sprite_atlas"),h=t("../render/line_atlas"),p=t("../util/util"),d=t("../util/ajax"),f=t("../util/mapbox").normalizeStyleURL,m=t("../util/browser"),g=t("../util/dispatcher"),y=t("./animation_loop"),v=t("mapbox-gl-style-spec/lib/validate/latest");e.exports=n,n.prototype=p.inherit(o,{_loaded:!1,loaded:function(){if(!this._loaded)return!1;for(var t in this.sources)if(!this.sources[t].loaded())return!1;return this.sprite&&!this.sprite.loaded()?!1:!0},_resolve:function(){var t,e;this._layers={},this._order=[];for(var i=0;i<this.stylesheet.layers.length;i++)e=new s(this.stylesheet.layers[i]),this._layers[e.id]=e,this._order.push(e.id);for(t in this._layers)this._layers[t].resolveLayout();for(t in this._layers)this._layers[t].resolveReference(this._layers),this._layers[t].resolvePaint();this._groupLayers(),this._broadcastLayers()},_groupLayers:function(){var t;this._groups=[];for(var e=0;e<this._order.length;++e){var i=this._layers[this._order[e]];t&&i.source===t.source||(t=[],t.source=i.source,this._groups.push(t)),t.push(i)}},_broadcastLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e].json());this.dispatcher.broadcast("set layers",t)},_cascade:function(t,e){if(this._loaded){e=e||{transition:!0};for(var i in this._layers)this._layers[i].cascade(t,e,this.stylesheet.transition||{},this.animationLoop);this.fire("change")}},_recalculate:function(t){for(var e in this.sources)this.sources[e].used=!1;this._updateZoomHistory(t),this.rasterFadeDuration=300;for(e in this._layers){var i=this._layers[e];i.recalculate(t,this.zoomHistory)&&i.source&&(this.sources[i.source].used=!0)}var n=300;Math.floor(this.z)!==Math.floor(t)&&this.animationLoop.set(n),this.z=t,this.fire("zoom")},_updateZoomHistory:function(t){var e=this.zoomHistory;void 0===e.lastIntegerZoom&&(e.lastIntegerZoom=Math.floor(t),e.lastIntegerZoomTime=0,e.lastZoom=t),Math.floor(e.lastZoom)<Math.floor(t)?(e.lastIntegerZoom=Math.floor(t),e.lastIntegerZoomTime=Date.now()):Math.floor(e.lastZoom)>Math.floor(t)&&(e.lastIntegerZoom=Math.floor(t+1),e.lastIntegerZoomTime=Date.now()),e.lastZoom=t},batch:function(t){r(this,t)},addSource:function(t,e){return this.batch(function(i){i.addSource(t,e)}),this},removeSource:function(t){return this.batch(function(e){e.removeSource(t)}),this},getSource:function(t){return this.sources[t]},addLayer:function(t,e){return this.batch(function(i){i.addLayer(t,e)}),this},removeLayer:function(t){return this.batch(function(e){e.removeLayer(t)}),this},getLayer:function(t){return this._layers[t]},getReferentLayer:function(t){var e=this.getLayer(t);return e.ref&&(e=this.getLayer(e.ref)),e},setFilter:function(t,e){return this.batch(function(i){i.setFilter(t,e)}),this},setLayerZoomRange:function(t,e,i){return this.batch(function(n){n.setLayerZoomRange(t,e,i)}),this},getFilter:function(t){return this.getReferentLayer(t).filter},getLayoutProperty:function(t,e){return this.getReferentLayer(t).getLayoutProperty(e)},getPaintProperty:function(t,e,i){return this.getLayer(t).getPaintProperty(e,i)},featuresAt:function(t,e,i){var n=[],o=null;e.layer&&(e.layerIds=Array.isArray(e.layer)?e.layer:[e.layer]),p.asyncEach(Object.keys(this.sources),function(i,r){var s=this.sources[i];s.featuresAt(t,e,function(t,e){e&&(n=n.concat(e)),t&&(o=t),r()})}.bind(this),function(){return o?i(o):void i(null,n.filter(function(t){return void 0!==this._layers[t.layer]}.bind(this)).map(function(t){return t.layer=this._layers[t.layer].json(),t}.bind(this)))}.bind(this))},featuresIn:function(t,e,i){var n=[],o=null;e.layer&&(e.layer={id:e.layer}),p.asyncEach(Object.keys(this.sources),function(i,r){var s=this.sources[i];s.featuresIn(t,e,function(t,e){e&&(n=n.concat(e)),t&&(o=t),r()})}.bind(this),function(){return o?i(o):void i(null,n.filter(function(t){return void 0!==this._layers[t.layer]}.bind(this)).map(function(t){return t.layer=this._layers[t.layer].json(),t}.bind(this)))}.bind(this))},_remove:function(){this.dispatcher.remove()},_reloadSource:function(t){this.sources[t].reload()},_updateSources:function(t){for(var e in this.sources)this.sources[e].update(t)},_redoPlacement:function(){for(var t in this.sources)this.sources[t].redoPlacement&&this.sources[t].redoPlacement()},_forwardSourceEvent:function(t){this.fire("source."+t.type,p.extend({source:t.target},t))},_forwardTileEvent:function(t){this.fire(t.type,p.extend({source:t.target},t))},"get sprite json":function(t,e){var i=this.sprite;i.loaded()?e(null,{sprite:i.data,retina:i.retina}):i.on("load",function(){e(null,{sprite:i.data,retina:i.retina})})},"get icons":function(t,e){var i=this.sprite,n=this.spriteAtlas;i.loaded()?(n.setSprite(i),n.addIcons(t.icons,e)):i.on("load",function(){n.setSprite(i),n.addIcons(t.icons,e)})},"get glyphs":function(t,e){function i(t,i,n){t&&console.error(t),r[n]=i,o--,0===o&&e(null,r)}var n=t.stacks,o=Object.keys(n).length,r={};for(var s in n)this.glyphSource.getSimpleGlyphs(s,n[s],t.uid,i)}})},{"../render/line_atlas":145,"../symbol/glyph_atlas":179,"../symbol/glyph_source":180,"../symbol/sprite_atlas":185,"../util/ajax":202,"../util/browser":203,"../util/dispatcher":205,"../util/evented":208,"../util/mapbox":211,"../util/util":214,"./animation_loop":160,"./image_sprite":161,"./style_batch":166,"./style_layer":169,"mapbox-gl-style-spec/lib/validate/latest":234}],166:[function(t,e,i){"use strict";function n(t,e){if(!t._loaded)throw new Error("Style is not done loading");var i=Object.create(n.prototype);i._style=t,i._groupLayers=!1,i._broadcastLayers=!1,i._reloadSources={},i._events=[],i._change=!1,e(i),i._groupLayers&&i._style._groupLayers(),i._broadcastLayers&&i._style._broadcastLayers(),Object.keys(i._reloadSources).forEach(function(t){i._style._reloadSource(t)}),i._events.forEach(function(t){i._style.fire.apply(i._style,t)}),i._change&&i._style.fire("change")}var o=t("../source/source"),r=t("./style_layer");n.prototype={addLayer:function(t,e){if(void 0!==this._style._layers[t.id])throw new Error("There is already a layer with this ID");return t instanceof r||(t=new r(t)),this._style._layers[t.id]=t,this._style._order.splice(e?this._style._order.indexOf(e):1/0,0,t.id),t.resolveLayout(),t.resolveReference(this._style._layers),t.resolvePaint(),this._groupLayers=!0,this._broadcastLayers=!0,t.source&&(this._reloadSources[t.source]=!0),this._events.push(["layer.add",{layer:t}]),this._change=!0,this},removeLayer:function(t){var e=this._style._layers[t];if(void 0===e)throw new Error("There is no layer with this ID");for(var i in this._style._layers)this._style._layers[i].ref===t&&this.removeLayer(i);return delete this._style._layers[t],this._style._order.splice(this._style._order.indexOf(t),1),this._groupLayers=!0,this._broadcastLayers=!0,this._events.push(["layer.remove",{layer:e}]),this._change=!0,this},setPaintProperty:function(t,e,i,n){return this._style.getLayer(t).setPaintProperty(e,i,n),this._change=!0,this},setLayoutProperty:function(t,e,i){return t=this._style.getReferentLayer(t),t.setLayoutProperty(e,i),this._broadcastLayers=!0,t.source&&(this._reloadSources[t.source]=!0),this._change=!0,this},setFilter:function(t,e){return t=this._style.getReferentLayer(t),t.filter=e,this._broadcastLayers=!0,t.source&&(this._reloadSources[t.source]=!0),this._change=!0,this},setLayerZoomRange:function(t,e,i){var n=this._style.getReferentLayer(t);return null!=e&&(n.minzoom=e),null!=i&&(n.maxzoom=i),this._broadcastLayers=!0,n.source&&(this._reloadSources[n.source]=!0),this._change=!0,this},addSource:function(t,e){if(!this._style._loaded)throw new Error("Style is not done loading");if(void 0!==this._style.sources[t])throw new Error("There is already a source with this ID");return e=o.create(e),this._style.sources[t]=e,e.id=t,e.style=this._style,e.dispatcher=this._style.dispatcher,e.glyphAtlas=this._style.glyphAtlas,e.on("load",this._style._forwardSourceEvent).on("error",this._style._forwardSourceEvent).on("change",this._style._forwardSourceEvent).on("tile.add",this._style._forwardTileEvent).on("tile.load",this._style._forwardTileEvent).on("tile.error",this._style._forwardTileEvent).on("tile.remove",this._style._forwardTileEvent).on("tile.stats",this._style._forwardTileEvent),this._events.push(["source.add",{source:e}]),this._change=!0,this},removeSource:function(t){if(void 0===this._style.sources[t])throw new Error("There is no source with this ID");var e=this._style.sources[t];return delete this._style.sources[t],e.off("load",this._style._forwardSourceEvent).off("error",this._style._forwardSourceEvent).off("change",this._style._forwardSourceEvent).off("tile.add",this._style._forwardTileEvent).off("tile.load",this._style._forwardTileEvent).off("tile.error",this._style._forwardTileEvent).off("tile.remove",this._style._forwardTileEvent).off("tile.stats",this._style._forwardTileEvent),this._events.push(["source.remove",{source:e}]),this._change=!0,this}},e.exports=n},{"../source/source":152,"./style_layer":169}],167:[function(t,e,i){"use strict";function n(t,e){this.type=t.type,this.transitionable=t.transition,null==e&&(e=t["default"]),this.json=JSON.stringify(e),"color"===this.type?this.value=r(e):this.value=e,"interpolated"===t["function"]?this.calculate=l.interpolated(this.value):(this.calculate=l["piecewise-constant"](this.value),t.transition&&(this.calculate=o(this.calculate)))}function o(t){return function(e,i,n){var o,r,s,a=e%1,l=Math.min((Date.now()-i.lastIntegerZoomTime)/n,1),u=1,c=1;return e>i.lastIntegerZoom?(o=a+(1-a)*l,u*=2,r=t(e-1),s=t(e)):(o=1-(1-l)*a,s=t(e),r=t(e+1),u/=2),{from:r,fromScale:u,to:s,toScale:c,t:o}}}function r(t){if(c[t])return c[t];if(Array.isArray(t))return t;if(t.stops)return u.extend({},t,{stops:t.stops.map(function(t){return[t[0],r(t[1])]})});if("string"==typeof t){var e=s(a(t));return c[t]=e,e}throw new Error("Invalid color "+t)}function s(t){return[t[0]/255,t[1]/255,t[2]/255,t[3]/1]}var a=t("csscolorparser").parseCSSColor,l=t("mapbox-gl-function"),u=t("../util/util");e.exports=n;var c={}},{"../util/util":214,csscolorparser:215,"mapbox-gl-function":233}],168:[function(t,e,i){"use strict";function n(t){function e(t){this._values={},this._transitions={};for(var e in t)this[e]=t[e]}return Object.keys(t).forEach(function(i){var n=t[i];Object.defineProperty(e.prototype,i,{set:function(t){this._values[i]=new s(n,t)},get:function(){return this._values[i].value}}),n.transition&&Object.defineProperty(e.prototype,i+"-transition",{set:function(t){this._transitions[i]=t},get:function(){return this._transitions[i]}})}),e.prototype.values=function(){return this._values},e.prototype.transition=function(t,e){var i=this._transitions[t]||{};return{duration:o.coalesce(i.duration,e.duration,300),delay:o.coalesce(i.delay,e.delay,0)}},e.prototype.json=function(){var t={};for(var e in this._values)t[e]=this._values[e].value;for(var i in this._transitions)t[i+"-transition"]=this._transitions[e];return t},e}var o=t("../util/util"),r=t("./reference"),s=t("./style_declaration"),a={paint:{},layout:{}};r.layer.type.values.forEach(function(t){a.paint[t]=n(r["paint_"+t]),a.layout[t]=n(r["layout_"+t])}),e.exports=function(t,e,i){return new a[t][e](i)}},{"../util/util":214,"./reference":164,"./style_declaration":167}],169:[function(t,e,i){"use strict";function n(t){this._layer=t,this.id=t.id,this.ref=t.ref,this._resolved={},this._cascaded={},this.assign(t)}function o(t,e){var i=e+"-color",n=e+"-halo-color",o=e+"-outline-color",s=t[i],a=t[n],l=t[o],u=t[e+"-opacity"],c=s&&u*s[3],h=a&&u*a[3],p=l&&u*l[3];void 0!==c&&1>c&&(t[i]=r.premultiply([s[0],s[1],s[2],c])),void 0!==h&&1>h&&(t[n]=r.premultiply([a[0],a[1],a[2],h])),void 0!==p&&1>p&&(t[o]=r.premultiply([l[0],l[1],l[2],p]))}var r=t("../util/util"),s=t("./style_transition"),a=t("./style_declaration_set"),l=t("./layout_properties"),u=t("./paint_properties");e.exports=n,n.prototype={resolveLayout:function(){this.ref||(this.layout=new l[this.type](this._layer.layout),"line"===this.layout["symbol-placement"]&&(this.layout.hasOwnProperty("text-rotation-alignment")||(this.layout["text-rotation-alignment"]="map"),this.layout.hasOwnProperty("icon-rotation-alignment")||(this.layout["icon-rotation-alignment"]="map"),this.layout["symbol-avoid-edges"]=!0))},setLayoutProperty:function(t,e){null==e?delete this.layout[t]:this.layout[t]=e},getLayoutProperty:function(t){return this.layout[t]},resolveReference:function(t){this.ref&&this.assign(t[this.ref])},resolvePaint:function(){for(var t in this._layer){var e=t.match(/^paint(?:\.(.*))?$/);e&&(this._resolved[e[1]||""]=new a("paint",this.type,this._layer[t]))}},setPaintProperty:function(t,e,i){var n=this._resolved[i||""];n||(n=this._resolved[i||""]=new a("paint",this.type,{})),n[t]=e},getPaintProperty:function(t,e){var i=this._resolved[e||""];return i?i[t]:void 0},cascade:function(t,e,i,n){for(var o in this._resolved)if(""===o||t[o]){var r=this._resolved[o],l=r.values();for(var u in l){var c=l[u],h=e.transition?this._cascaded[u]:void 0;if(!h||h.declaration.json!==c.json){var p=r.transition(u,i),d=this._cascaded[u]=new s(c,h,p);d.instant()||(d.loopID=n.set(d.endTime-(new Date).getTime())),h&&n.cancel(h.loopID)}}}if("symbol"===this.type){var f=new a("layout",this.type,this.layout);this._cascaded["text-size"]=new s(f.values()["text-size"],void 0,i),this._cascaded["icon-size"]=new s(f.values()["icon-size"],void 0,i)}},recalculate:function(t,e){var i=this.type,n=this.paint=new u[i];for(var r in this._cascaded)n[r]=this._cascaded[r].at(t,e);if(this.hidden=this.minzoom&&t<this.minzoom||this.maxzoom&&t>=this.maxzoom||"none"===this.layout.visibility,"symbol"===i?0!==n["text-opacity"]&&this.layout["text-field"]||0!==n["icon-opacity"]&&this.layout["icon-image"]?(o(n,"text"),o(n,"icon")):this.hidden=!0:0===n[i+"-opacity"]?this.hidden=!0:o(n,i),this._cascaded["line-dasharray"]){var s=n["line-dasharray"],a=this._cascaded["line-width"]?this._cascaded["line-width"].at(Math.floor(t),1/0):n["line-width"];s.fromScale*=a,s.toScale*=a}return!this.hidden},assign:function(t){r.extend(this,r.pick(t,["type","source","source-layer","minzoom","maxzoom","filter","layout"]))},json:function(){return r.extend({},this._layer,r.pick(this,["type","source","source-layer","minzoom","maxzoom","filter","layout","paint"]))}}},{"../util/util":214,"./layout_properties":162,"./paint_properties":163,"./style_declaration_set":168,"./style_transition":170}],170:[function(t,e,i){"use strict";function n(t,e,i){this.declaration=t,this.startTime=this.endTime=(new Date).getTime();var n=t.type;"string"!==n&&"array"!==n||!t.transitionable?this.interp=s[n]:this.interp=o,this.oldTransition=e,this.duration=i.duration||0,this.delay=i.delay||0,this.instant()||(this.endTime=this.startTime+this.duration+this.delay,this.ease=r.easeCubicInOut),e&&e.endTime<=this.startTime&&delete e.oldTransition}function o(t,e,i){return{from:t.to,fromScale:t.toScale,to:e.to,toScale:e.toScale,t:i}}var r=t("../util/util"),s=t("../util/interpolate");e.exports=n,n.prototype.instant=function(){return!this.oldTransition||!this.interp||0===this.duration&&0===this.delay},n.prototype.at=function(t,e,i){var n=this.declaration.calculate(t,e,this.duration);if(this.instant())return n;if(i=i||Date.now(),i<this.endTime){var o=this.oldTransition.at(t,e,this.startTime),r=this.ease((i-this.startTime-this.delay)/this.duration);n=this.interp(o,n,r)}return n}},{"../util/interpolate":210,"../util/util":214}],171:[function(t,e,i){"use strict";function n(t,e,i,n){this.x=t,this.y=e,this.angle=i,void 0!==n&&(this.segment=n)}var o=t("point-geometry");e.exports=n,n.prototype=Object.create(o.prototype),n.prototype.clone=function(){return new n(this.x,this.y,this.angle,this.segment)}},{"point-geometry":243}],172:[function(t,e,i){"use strict";function n(t,e){this.width=t,this.height=e,this.free=[{x:0,y:0,w:t,h:e}]}e.exports=n,n.prototype.release=function(t){for(var e=0;e<this.free.length;e++){var i=this.free[e];if(i.y===t.y&&i.h===t.h&&i.x+i.w===t.x)i.w+=t.w;else if(i.x===t.x&&i.w===t.w&&i.y+i.h===t.y)i.h+=t.h;else if(t.y===i.y&&t.h===i.h&&t.x+t.w===i.x)i.x=t.x,i.w+=t.w;else{if(t.x!==i.x||t.w!==i.w||t.y+t.h!==i.y)continue;i.y=t.y,i.h+=t.h}return this.free.splice(e,1),void this.release(i)}this.free.push(t)},n.prototype.allocate=function(t,e){for(var i={x:1/0,y:1/0,w:1/0,h:1/0},n=-1,o=0;o<this.free.length;o++){var r=this.free[o];t<=r.w&&e<=r.h&&r.y<=i.y&&r.x<=i.x&&(i=r,n=o)}return 0>n?{x:-1,y:-1}:(this.free.splice(n,1),i.w<i.h?(i.w>t&&this.free.push({x:i.x+t,y:i.y,w:i.w-t,h:e}),i.h>e&&this.free.push({x:i.x,y:i.y+e,w:i.w,h:i.h-e})):(i.w>t&&this.free.push({x:i.x+t,y:i.y,w:i.w-t,h:i.h}),i.h>e&&this.free.push({x:i.x,y:i.y+e,w:t,h:i.h-e})),{x:i.x,y:i.y,w:t,h:e})}},{}],173:[function(t,e,i){"use strict";function n(t,e,i,n,o){if(void 0===e.segment)return!0;for(var r=e,s=e.segment+1,a=0;a>-i/2;){if(s--,0>s)return!1;a-=t[s].dist(r),r=t[s]}a+=t[s].dist(t[s+1]),s++;for(var l=[],u=0;i/2>a;){var c=t[s-1],h=t[s],p=t[s+1];if(!p)return!1;var d=c.angleTo(h)-h.angleTo(p);for(d=(d+3*Math.PI)%(2*Math.PI)-Math.PI,l.push({distance:a,angleDelta:d}),u+=d;a-l[0].distance>n;)u-=l.shift().angleDelta;if(Math.abs(u)>o)return!1;s++,a+=h.dist(p)}return!0}e.exports=n},{}],174:[function(t,e,i){"use strict";function n(t,e,i,n,r){for(var s=[],a=0;a<t.length;a++)for(var l,u=t[a],c=0;c<u.length-1;c++){var h=u[c],p=u[c+1];h.x<e&&p.x<e||(h.x<e?h=new o(e,h.y+(p.y-h.y)*((e-h.x)/(p.x-h.x))):p.x<e&&(p=new o(e,h.y+(p.y-h.y)*((e-h.x)/(p.x-h.x)))),h.y<i&&p.y<i||(h.y<i?h=new o(h.x+(p.x-h.x)*((i-h.y)/(p.y-h.y)),i):p.y<i&&(p=new o(h.x+(p.x-h.x)*((i-h.y)/(p.y-h.y)),i)),
h.x>=n&&p.x>=n||(h.x>=n?h=new o(n,h.y+(p.y-h.y)*((n-h.x)/(p.x-h.x))):p.x>=n&&(p=new o(n,h.y+(p.y-h.y)*((n-h.x)/(p.x-h.x)))),h.y>=r&&p.y>=r||(h.y>=r?h=new o(h.x+(p.x-h.x)*((r-h.y)/(p.y-h.y)),r):p.y>=r&&(p=new o(h.x+(p.x-h.x)*((r-h.y)/(p.y-h.y)),r)),l&&h.equals(l[l.length-1])||(l=[h],s.push(l)),l.push(p)))))}return s}var o=t("point-geometry");e.exports=n},{"point-geometry":243}],175:[function(t,e,i){"use strict";function n(t,e,i,n,o,r){this.anchorPoint=t,this.x1=e,this.y1=i,this.x2=n,this.y2=o,this.maxScale=r,this.placementScale=0,this[0]=this[1]=this[2]=this[3]=0}e.exports=n},{}],176:[function(t,e,i){"use strict";function n(t,e,i,n,s,a){var l=i.top*n-s,u=i.bottom*n+s,c=i.left*n-s,h=i.right*n+s;if(this.boxes=[],a){var p=u-l,d=h-c;if(0>=p)return;p=Math.max(10*n,p),this._addLineCollisionBoxes(t,e,d,p)}else this.boxes.push(new o(new r(e.x,e.y),c,l,h,u,1/0))}var o=t("./collision_box"),r=t("point-geometry");e.exports=n,n.prototype._addLineCollisionBoxes=function(t,e,i,n){var r=n/2,s=Math.floor(i/r),a=-n/2,l=this.boxes,u=e,c=e.segment+1,h=a;do{if(c--,0>c)return l;h-=t[c].dist(u),u=t[c]}while(h>-i/2);for(var p=t[c].dist(t[c+1]),d=0;s>d;d++){for(var f=-i/2+d*r;f>h+p;){if(h+=p,c++,c+1>=t.length)return l;p=t[c].dist(t[c+1])}var m=f-h,g=t[c],y=t[c+1],v=y.sub(g)._unit()._mult(m)._add(g),b=Math.max(Math.abs(f-a)-r/2,0),x=i/2/b;l.push(new o(v,-n/2,-n/2,n/2,n/2,x))}return l}},{"./collision_box":175,"point-geometry":243}],177:[function(t,e,i){"use strict";function n(t,e){this.tree=o(),this.angle=t;var i=Math.sin(t),n=Math.cos(t);this.rotationMatrix=[n,-i,i,n],this.yStretch=1/Math.cos(e/180*Math.PI),this.yStretch=Math.pow(this.yStretch,1.3)}var o=t("rbush");e.exports=n,n.prototype.minScale=.25,n.prototype.maxScale=2,n.prototype.placeCollisionFeature=function(t){for(var e=this.minScale,i=this.rotationMatrix,n=this.yStretch,o=0;o<t.boxes.length;o++){var r=t.boxes[o],s=r.anchorPoint.matMult(i),a=s.x,l=s.y;r[0]=a+r.x1,r[1]=l+r.y1*n,r[2]=a+r.x2,r[3]=l+r.y2*n;for(var u=this.tree.search(r),c=0;c<u.length;c++){var h=u[c],p=h.anchorPoint.matMult(i),d=(h.x1-r.x2)/(a-p.x),f=(h.x2-r.x1)/(a-p.x),m=(h.y1-r.y2)*n/(l-p.y),g=(h.y2-r.y1)*n/(l-p.y);(isNaN(d)||isNaN(f))&&(d=f=1),(isNaN(m)||isNaN(g))&&(m=g=1);var y=Math.min(Math.max(d,f),Math.max(m,g));if(y>h.maxScale&&(y=h.maxScale),y>r.maxScale&&(y=r.maxScale),y>e&&y>=h.placementScale&&(e=y),e>=this.maxScale)return e}}return e},n.prototype.insertCollisionFeature=function(t,e){for(var i=t.boxes,n=0;n<i.length;n++)i[n].placementScale=e;e<this.maxScale&&this.tree.load(i)}},{rbush:244}],178:[function(t,e,i){"use strict";function n(t,e,i,n,r,s,a,l){var u=n?.6*s*a:0,c=Math.max(n?n.right-n.left:0,r?r.right-r.left:0);if(0===t[0].x||4096===t[0].x||0===t[0].y||4096===t[0].y)var h=!0;e/4>e-c*a&&(e=c*a+e/4);var p=2*s,d=h?e/2*l%e:(c/2+p)*a*l%e;return o(t,d,e,u,i,c*a,h,!1)}function o(t,e,i,n,l,u,c,h){for(var p=0,d=e-i,f=[],m=0;m<t.length-1;m++){for(var g=t[m],y=t[m+1],v=g.dist(y),b=y.angleTo(g);p+v>d+i;){d+=i;var x=(d-p)/v,_=r(g.x,y.x,x),w=r(g.y,y.y,x);if(_>=0&&4096>_&&w>=0&&4096>w){_=Math.round(_),w=Math.round(w);var S=new s(_,w,b,m);(!n||a(t,S,u,n,l))&&f.push(S)}}p+=v}return h||f.length||c||(f=o(t,p/2,i,n,l,u,c,!0)),f}var r=t("../util/interpolate"),s=t("../symbol/anchor"),a=t("./check_max_angle");e.exports=n},{"../symbol/anchor":171,"../util/interpolate":210,"./check_max_angle":173}],179:[function(t,e,i){"use strict";function n(t,e){this.width=t,this.height=e,this.bin=new o(t,e),this.index={},this.ids={},this.data=new Uint8Array(t*e)}var o=t("./bin_pack");e.exports=n,n.prototype={get debug(){return"canvas"in this},set debug(t){t&&!this.canvas?(this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,document.body.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d")):!t&&this.canvas&&(this.canvas.parentNode.removeChild(this.canvas),delete this.ctx,delete this.canvas)}},n.prototype.getGlyphs=function(){var t,e,i,n={};for(var o in this.ids)t=o.split("#"),e=t[0],i=t[1],n[e]||(n[e]=[]),n[e].push(i);return n},n.prototype.getRects=function(){var t,e,i,n={};for(var o in this.ids)t=o.split("#"),e=t[0],i=t[1],n[e]||(n[e]={}),n[e][i]=this.index[o];return n},n.prototype.removeGlyphs=function(t){for(var e in this.ids){var i=this.ids[e],n=i.indexOf(t);if(n>=0&&i.splice(n,1),this.ids[e]=i,!i.length){for(var o=this.index[e],r=this.data,s=0;s<o.h;s++)for(var a=this.width*(o.y+s)+o.x,l=0;l<o.w;l++)r[a+l]=0;this.dirty=!0,this.bin.release(o),delete this.index[e],delete this.ids[e]}}this.updateTexture(this.gl)},n.prototype.addGlyph=function(t,e,i,n){if(!i)return null;var o=e+"#"+i.id;if(this.index[o])return this.ids[o].indexOf(t)<0&&this.ids[o].push(t),this.index[o];if(!i.bitmap)return null;var r=i.width+2*n,s=i.height+2*n,a=1,l=r+2*a,u=s+2*a;l+=4-l%4,u+=4-u%4;var c=this.bin.allocate(l,u);if(c.x<0)return console.warn("glyph bitmap overflow"),{glyph:i,rect:null};this.index[o]=c,this.ids[o]=[t];for(var h=this.data,p=i.bitmap,d=0;s>d;d++)for(var f=this.width*(c.y+d+a)+c.x+a,m=r*d,g=0;r>g;g++)h[f+g]=p[m+g];return this.dirty=!0,c},n.prototype.bind=function(t){this.gl=t,this.texture?t.bindTexture(t.TEXTURE_2D,this.texture):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,null))},n.prototype.updateTexture=function(t){if(this.bind(t),this.dirty){if(t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data),this.ctx){for(var e=this.ctx.getImageData(0,0,this.width,this.height),i=0,n=0;i<this.data.length;i++,n+=4)e.data[n]=this.data[i],e.data[n+1]=this.data[i],e.data[n+2]=this.data[i],e.data[n+3]=255;this.ctx.putImageData(e,0,0),this.ctx.strokeStyle="red";for(var o=0;o<this.bin.free.length;o++){var r=this.bin.free[o];this.ctx.strokeRect(r.x,r.y,r.w,r.h)}}this.dirty=!1}}},{"./bin_pack":172}],180:[function(t,e,i){"use strict";function n(t,e){this.url=t&&s(t),this.glyphAtlas=e,this.stacks=[],this.loading={}}function o(t,e,i){var n=1;this.advance=t.advance,this.left=t.left-i-n,this.top=t.top+i+n,this.rect=e}function r(t,e,i,n){return n=n||"abc",i.replace("{s}",n[t.length%n.length]).replace("{fontstack}",t).replace("{range}",e)}var s=t("../util/mapbox").normalizeGlyphsURL,a=t("../util/ajax").getArrayBuffer,l=t("../util/glyphs"),u=t("pbf");e.exports=n,n.prototype.getSimpleGlyphs=function(t,e,i,n){void 0===this.stacks[t]&&(this.stacks[t]={});for(var r,s={},a=this.stacks[t],l=this.glyphAtlas,u=3,c={},h=0,p=0;p<e.length;p++){var d=e[p];if(r=Math.floor(d/256),a[r]){var f=a[r].glyphs[d],m=l.addGlyph(i,t,f,u);f&&(s[d]=new o(f,m,u))}else void 0===c[r]&&(c[r]=[],h++),c[r].push(d)}h||n(void 0,s,t);var g=function(e,r,a){if(!e)for(var p=this.stacks[t][r]=a.stacks[0],d=0;d<c[r].length;d++){var f=c[r][d],m=p.glyphs[f],g=l.addGlyph(i,t,m,u);m&&(s[f]=new o(m,g,u))}h--,h||n(void 0,s,t)}.bind(this);for(var y in c)this.loadRange(t,y,g)},n.prototype.loadRange=function(t,e,i){if(256*e>65535)return i("gyphs > 65535 not supported");void 0===this.loading[t]&&(this.loading[t]={});var n=this.loading[t];if(n[e])n[e].push(i);else{n[e]=[i];var o=256*e+"-"+(256*e+255),s=r(t,o,this.url);a(s,function(t,i){for(var o=!t&&new l(new u(new Uint8Array(i))),r=0;r<n[e].length;r++)n[e][r](t,e,o);delete n[e]})}}},{"../util/ajax":202,"../util/glyphs":209,"../util/mapbox":211,pbf:241}],181:[function(t,e,i){"use strict";e.exports=function(t,e,i){function n(n){c.push(t[n]),h.push(i[n]),p.push(e[n]),d++}function o(t,e,i){var n=u[t];return delete u[t],u[e]=n,h[n][0].pop(),h[n][0]=h[n][0].concat(i[0]),n}function r(t,e,i){var n=l[e];return delete l[e],l[t]=n,h[n][0].shift(),h[n][0]=i[0].concat(h[n][0]),n}function s(t,e,i){var n=i?e[0][e[0].length-1]:e[0][0];return t+":"+n.x+":"+n.y}var a,l={},u={},c=[],h=[],p=[],d=0;for(a=0;a<t.length;a++){var f=i[a],m=e[a];if(m){var g=s(m,f),y=s(m,f,!0);if(g in u&&y in l&&u[g]!==l[y]){var v=r(g,y,f),b=o(g,y,h[v]);delete l[g],delete u[y],u[s(m,h[b],!0)]=b,h[v]=null}else g in u?o(g,y,f):y in l?r(g,y,f):(n(a),l[g]=d-1,u[y]=d-1)}else n(a)}return{features:c,textFeatures:p,geometries:h}}},{}],182:[function(t,e,i){"use strict";function n(t,e,i,n,o,r,s,a,l){this.anchorPoint=t,this.tl=e,this.tr=i,this.bl=n,this.br=o,this.tex=r,this.angle=s,this.minScale=a,this.maxScale=l}function o(t,e,i,o,r,s){var u=e.image.rect,c=1,h=e.left-c,p=h+u.w,d=e.top-c,f=d+u.h,m=new a(h,d),g=new a(p,d),y=new a(p,f),v=new a(h,f),b=r["icon-rotate"]*Math.PI/180;if(s){var x=o[t.segment];if(t.y===x.y&&t.x===x.x&&t.segment+1<o.length){var _=o[t.segment+1];b+=Math.atan2(t.y-_.y,t.x-_.x)+Math.PI}else b+=Math.atan2(t.y-x.y,t.x-x.x)}if(b){var w=Math.sin(b),S=Math.cos(b),k=[S,-w,w,S];m=m.matMult(k),g=g.matMult(k),v=v.matMult(k),y=y.matMult(k)}return[new n(new a(t.x,t.y),m,g,v,y,e.image.rect,0,l,1/0)]}function r(t,e,i,o,r,u){for(var c=r["text-rotate"]*Math.PI/180,h=r["text-keep-upright"],p=e.positionedGlyphs,d=[],f=0;f<p.length;f++){var m=p[f],g=m.glyph,y=g.rect;if(y){var v,b=(m.x+g.advance/2)*i,x=l;u?(v=[],x=s(v,t,b,o,t.segment,!0),h&&(x=Math.min(x,s(v,t,b,o,t.segment,!1)))):v=[{anchorPoint:new a(t.x,t.y),offset:0,angle:0,maxScale:1/0,minScale:l}];for(var _=m.x+g.left,w=m.y-g.top,S=_+y.w,k=w+y.h,T=new a(_,w),E=new a(S,w),M=new a(_,k),C=new a(S,k),A=0;A<v.length;A++){var R=v[A],D=T,z=E,L=M,P=C,I=R.angle+c;if(I){var N=Math.sin(I),O=Math.cos(I),j=[O,-N,N,O];D=D.matMult(j),z=z.matMult(j),L=L.matMult(j),P=P.matMult(j)}var U=Math.max(R.minScale,x),B=(t.angle+c+R.offset+2*Math.PI)%(2*Math.PI);d.push(new n(R.anchorPoint,D,z,L,P,y,B,U,R.maxScale))}}}return d}function s(t,e,i,n,o,r){var s=!r;0>i&&(r=!r),r&&o++;var u=new a(e.x,e.y),c=n[o],h=1/0;i=Math.abs(i);for(var p=l;;){var d=u.dist(c),f=i/d,m=Math.atan2(c.y-u.y,c.x-u.x);if(r||(m+=Math.PI),s&&(m+=Math.PI),t.push({anchorPoint:u,offset:s?Math.PI:0,minScale:f,maxScale:h,angle:(m+2*Math.PI)%(2*Math.PI)}),p>=f)break;for(u=c;u.equals(c);)if(o+=r?1:-1,c=n[o],!c)return f;var g=c.sub(u)._unit();u=u.sub(g._mult(d)),h=f}return p}var a=t("point-geometry");e.exports={getIconQuads:o,getGlyphQuads:r};var l=.5},{"point-geometry":243}],183:[function(t,e,i){"use strict";function n(t,e,i){for(var n=[],r=0,s=t.length;s>r;r++){var a=o(t[r].properties,e["text-field"]);if(a){a=a.toString();var l=e["text-transform"];"uppercase"===l?a=a.toLocaleUpperCase():"lowercase"===l&&(a=a.toLocaleLowerCase());for(var u=0;u<a.length;u++)i[a.charCodeAt(u)]=!0;n[r]=a}else n[r]=null}return n}var o=t("../util/token");e.exports=n},{"../util/token":213}],184:[function(t,e,i){"use strict";function n(t,e,i,n){this.codePoint=t,this.x=e,this.y=i,this.glyph=n}function o(t,e,i,n,o,r){this.positionedGlyphs=t,this.text=e,this.top=i,this.bottom=n,this.left=o,this.right=r}function r(t,e,i,r,a,l,u,c,h){for(var p=[],d=new o(p,t,h[1],h[1],h[0],h[0]),f=-17,m=h[0],g=h[1]+f,y=0;y<t.length;y++){var v=t.charCodeAt(y),b=e[v];b&&(p.push(new n(v,m,g,b)),m+=b.advance+c)}return p.length?(s(d,e,r,i,a,l,u),d):!1}function s(t,e,i,n,o,r,s){var u=null,c=0,d=0,f=0,m=0,g=t.positionedGlyphs;if(n)for(var y=0;y<g.length;y++){var v=g[y];if(v.x-=c,v.y+=i*f,v.x>n&&null!==u){var b=g[u+1].x;m=Math.max(b,m);for(var x=u+1;y>=x;x++)g[x].y+=i,g[x].x-=b;if(s){var _=u;h[g[u].codePoint]&&_--,a(g,e,d,_,s)}d=u+1,u=null,c+=b,f++}p[v.codePoint]&&(u=y)}var w=g[g.length-1],S=w.x+e[w.codePoint].advance;m=Math.max(m,S);var k=(f+1)*i;a(g,e,d,g.length-1,s),l(g,s,o,r,m,i,f),t.top+=-r*k,t.bottom=t.top+k,t.left+=-o*m,t.right=t.left+m}function a(t,e,i,n,o){for(var r=e[t[n].codePoint].advance,s=(t[n].x+r)*o,a=i;n>=a;a++)t[a].x-=s}function l(t,e,i,n,o,r,s){for(var a=(e-i)*o,l=(-n*(s+1)+.5)*r,u=0;u<t.length;u++)t[u].x+=a,t[u].y+=l}function u(t,e){if(!t||!t.rect)return null;var i=e["icon-offset"][0],n=e["icon-offset"][1],o=i-t.width/2,r=o+t.width,s=n-t.height/2,a=s+t.height;return new c(t,s,a,o,r)}function c(t,e,i,n,o){this.image=t,this.top=e,this.bottom=i,this.left=n,this.right=o}e.exports={shapeText:r,shapeIcon:u};var h={32:!0,8203:!0},p={32:!0,38:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0}},{}],185:[function(t,e,i){"use strict";function n(t,e){this.width=t,this.height=e,this.bin=new s(t,e),this.images={},this.data=!1,this.texture=0,this.filter=0,this.pixelRatio=1,this.dirty=!0}function o(t,e,i,n,o,r,s,a,l,u,c){var h,p,d=n*e+i,f=a*r+s;if(c)for(f-=r,p=-1;u>=p;p++,d=((p+u)%u+n)*e+i,f+=r)for(h=-1;l>=h;h++)o[f+h]=t[d+(h+l)%l];else for(p=0;u>p;p++,d+=e,f+=r)for(h=0;l>h;h++)o[f+h]=t[d+h]}function r(t,e,i,n){this.rect=t,this.width=e,this.height=i,this.sdf=n}var s=t("./bin_pack");e.exports=n,n.prototype={get debug(){return"canvas"in this},set debug(t){t&&!this.canvas?(this.canvas=document.createElement("canvas"),this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,this.canvas.style.width=this.width+"px",this.canvas.style.width=this.width+"px",document.body.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d")):!t&&this.canvas&&(this.canvas.parentNode.removeChild(this.canvas),delete this.ctx,delete this.canvas)}},n.prototype.resize=function(t){if(t=t>1?2:1,this.pixelRatio===t)return!1;var e=this.pixelRatio;if(this.pixelRatio=t,this.canvas&&(this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio),this.data){var i=this.data;this.data=!1,this.allocate(),this.texture=!1;for(var n=this.width*e,o=this.height*e,r=this.width*t,s=this.height*t,a=this.data,l=i,u=0;s>u;u++)for(var c=Math.floor(u*o/s)*n,h=u*r,p=0;r>p;p++){var d=Math.floor(p*n/r);a[h+p]=l[c+d]}i=null,this.dirty=!0}return this.dirty},n.prototype.allocateImage=function(t,e){var i=2,n=t+i+(4-(t+i)%4),o=e+i+(4-(e+i)%4),r=this.bin.allocate(n,o);return 0===r.w?r:(r.originalWidth=t,r.originalHeight=e,r)},n.prototype.getImage=function(t,e){if(this.images[t])return this.images[t];if(!this.sprite)return null;var i=this.sprite.getSpritePosition(t);if(!i.width||!i.height)return null;var n=i.width/i.pixelRatio,o=i.height/i.pixelRatio,s=this.allocateImage(n,o);if(0===s.w)return s;var a=new r(s,n,o,i.sdf);return this.images[t]=a,this.copy(s,i,e),a},n.prototype.getPosition=function(t,e){var i=this.getImage(t,e),n=i&&i.rect;if(!n)return null;var o=e?i.width:n.w,r=e?i.height:n.h,s=1;return{size:[o,r],tl:[(n.x+s)/this.width,(n.y+s)/this.height],br:[(n.x+s+o)/this.width,(n.y+s+r)/this.height]}},n.prototype.allocate=function(){if(!this.data){var t=Math.floor(this.width*this.pixelRatio),e=Math.floor(this.height*this.pixelRatio);this.data=new Uint32Array(t*e);for(var i=0;i<this.data.length;i++)this.data[i]=0}},n.prototype.copy=function(t,e,i){if(this.sprite.img.data){var n=new Uint32Array(this.sprite.img.data.buffer);this.allocate();var r=this.data,s=1;o(n,this.sprite.img.width,e.x,e.y,r,this.width*this.pixelRatio,(t.x+s)*this.pixelRatio,(t.y+s)*this.pixelRatio,e.width,e.height,i),this.dirty=!0}},n.prototype.setSprite=function(t){this.sprite=t},n.prototype.addIcons=function(t,e){for(var i=0;i<t.length;i++)this.getImage(t[i]);e(null,this.images)},n.prototype.bind=function(t,e){var i=!1;this.texture?t.bindTexture(t.TEXTURE_2D,this.texture):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),i=!0);var n=e?t.LINEAR:t.NEAREST;if(n!==this.filter&&(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n),this.filter=n),this.dirty&&(this.allocate(),i?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width*this.pixelRatio,this.height*this.pixelRatio,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(this.data.buffer)):t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width*this.pixelRatio,this.height*this.pixelRatio,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(this.data.buffer)),this.dirty=!1,this.ctx)){var o=this.ctx.getImageData(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio);o.data.set(new Uint8ClampedArray(this.data.buffer)),this.ctx.putImageData(o,0,0),this.ctx.strokeStyle="red";for(var r=0;r<this.bin.free.length;r++){var s=this.bin.free[r];this.ctx.strokeRect(s.x*this.pixelRatio,s.y*this.pixelRatio,s.w*this.pixelRatio,s.h*this.pixelRatio)}}}},{"./bin_pack":172}],186:[function(t,e,i){"use strict";var n=t("../util/util"),o=t("../util/interpolate"),r=t("../util/browser"),s=t("../geo/lng_lat"),a=t("../geo/lng_lat_bounds"),l=t("point-geometry"),u=e.exports=function(){};n.extend(u.prototype,{getCenter:function(){return this.transform.center},setCenter:function(t){return this.jumpTo({center:t}),this},panBy:function(t,e){return this.panTo(this.transform.center,n.extend({offset:l.convert(t).mult(-1)},e)),this},panTo:function(t,e){this.stop(),t=s.convert(t),e=n.extend({duration:500,easing:n.ease,offset:[0,0]},e);var i=this.transform,o=l.convert(e.offset).rotate(-i.angle),r=i.point,a=i.project(t).sub(o);return e.noMoveStart||this.fire("movestart"),this._ease(function(t){i.center=i.unproject(r.add(a.sub(r).mult(t))),this.fire("move")},function(){this.fire("moveend")},e),this},getZoom:function(){return this.transform.zoom},setZoom:function(t){return this.jumpTo({zoom:t}),this},zoomTo:function(t,e){this.stop(),e=n.extend({duration:500},e),e.easing=this._updateEasing(e.duration,t,e.easing);var i=this.transform,r=i.center,a=i.zoom;return e.around?r=s.convert(e.around):e.offset&&(r=i.pointLocation(i.centerPoint.add(l.convert(e.offset)))),e.animate===!1&&(e.duration=0),this.zooming||(this.zooming=!0,this.fire("movestart")),this._ease(function(e){i.setZoomAround(o(a,t,e),r),this.fire("move").fire("zoom")},function(){this.ease=null,e.duration>=200&&(this.zooming=!1,this.fire("moveend"))},e),e.duration<200&&(clearTimeout(this._onZoomEnd),this._onZoomEnd=setTimeout(function(){this.zooming=!1,this.fire("moveend")}.bind(this),200)),this},zoomIn:function(t){return this.zoomTo(this.getZoom()+1,t),this},zoomOut:function(t){return this.zoomTo(this.getZoom()-1,t),this},getBearing:function(){return this.transform.bearing},setBearing:function(t){return this.jumpTo({bearing:t}),this},rotateTo:function(t,e){this.stop(),e=n.extend({duration:500,easing:n.ease},e);var i=this.transform,r=this.getBearing(),a=i.center;return e.around?a=s.convert(e.around):e.offset&&(a=i.pointLocation(i.centerPoint.add(l.convert(e.offset)))),t=this._normalizeBearing(t,r),this.rotating=!0,this.fire("movestart"),this._ease(function(e){i.setBearingAround(o(r,t,e),a),this.fire("move").fire("rotate")},function(){this.rotating=!1,this.fire("moveend")},e),this},resetNorth:function(t){return this.rotateTo(0,n.extend({duration:1e3},t)),this},snapToNorth:function(t){return Math.abs(this.getBearing())<this.options.bearingSnap?this.resetNorth(t):this},getPitch:function(){return this.transform.pitch},setPitch:function(t){return this.jumpTo({pitch:t}),this},fitBounds:function(t,e){e=n.extend({padding:0,offset:[0,0],maxZoom:1/0},e),t=a.convert(t);var i=l.convert(e.offset),o=this.transform,r=o.project(t.getNorthWest()),s=o.project(t.getSouthEast()),u=s.sub(r),c=(o.width-2*e.padding-2*Math.abs(i.x))/u.x,h=(o.height-2*e.padding-2*Math.abs(i.y))/u.y;return e.center=o.unproject(r.add(s).div(2)),e.zoom=Math.min(o.scaleZoom(o.scale*Math.min(c,h)),e.maxZoom),e.bearing=0,e.linear?this.easeTo(e):this.flyTo(e)},jumpTo:function(t){this.stop();var e=this.transform,i=!1,n=!1,o=!1;return"zoom"in t&&e.zoom!==+t.zoom&&(i=!0,e.zoom=+t.zoom),"center"in t&&(e.center=s.convert(t.center)),"bearing"in t&&e.bearing!==+t.bearing&&(n=!0,e.bearing=+t.bearing),"pitch"in t&&e.pitch!==+t.pitch&&(o=!0,e.pitch=+t.pitch),this.fire("movestart").fire("move"),i&&this.fire("zoom"),n&&this.fire("rotate"),o&&this.fire("pitch"),this.fire("moveend")},easeTo:function(t){this.stop(),t=n.extend({offset:[0,0],duration:500,easing:n.ease},t);var e=this.transform,i=l.convert(t.offset).rotate(-e.angle),r=e.point,a=this.getZoom(),u=this.getBearing(),c=this.getPitch(),h="zoom"in t?+t.zoom:a,p="bearing"in t?this._normalizeBearing(t.bearing,u):u,d="pitch"in t?+t.pitch:c,f=e.zoomScale(h-a),m="center"in t?e.project(s.convert(t.center)).sub(i.div(f)):r,g=s.convert(t.around);return h!==a&&(this.zooming=!0),u!==p&&(this.rotating=!0),this.zooming&&!g&&(g=e.pointLocation(e.centerPoint.add(m.sub(r).div(1-1/f)))),this.fire("movestart"),this._ease(function(t){this.zooming?e.setZoomAround(o(a,h,t),g):e.center=e.unproject(r.add(m.sub(r).mult(t))),this.rotating&&(e.bearing=o(u,p,t)),d!==c&&(e.pitch=o(c,d,t)),this.fire("move"),this.zooming&&this.fire("zoom"),this.rotating&&this.fire("rotate")},function(){this.zooming=!1,this.rotating=!1,this.fire("moveend")},t),this},flyTo:function(t){function e(t){var e=(S*S-w*w+(t?-1:1)*T*T*k*k)/(2*(t?S:w)*T*k);return Math.log(Math.sqrt(e*e+1)-e)}function i(t){return(Math.exp(t)-Math.exp(-t))/2}function r(t){return(Math.exp(t)+Math.exp(-t))/2}function a(t){return i(t)/r(t)}this.stop(),t=n.extend({offset:[0,0],speed:1.2,curve:1.42,easing:n.ease},t);var u=this.transform,c=l.convert(t.offset),h=this.getZoom(),p=this.getBearing(),d="center"in t?s.convert(t.center):this.getCenter(),f="zoom"in t?+t.zoom:h,m="bearing"in t?this._normalizeBearing(t.bearing,p):p,g=u.zoomScale(f-h),y=u.point,v=u.project(d).sub(c.div(g)),b=u.worldSize,x=t.curve,_=t.speed,w=Math.max(u.width,u.height),S=w/g,k=v.sub(y).mag(),T=x*x,E=e(0),M=function(t){return r(E)/r(E+x*t)},C=function(t){return w*((r(E)*a(E+x*t)-i(E))/T)/k},A=(e(1)-E)/x;if(Math.abs(k)<1e-6){if(Math.abs(w-S)<1e-6)return this;var R=w>S?-1:1;A=Math.abs(Math.log(S/w))/x,C=function(){return 0},M=function(t){return Math.exp(R*x*t)}}return t.duration=1e3*A/_,this.zooming=!0,p!==m&&(this.rotating=!0),this.fire("movestart"),this._ease(function(t){var e=t*A,i=C(e);u.zoom=h+u.scaleZoom(1/M(e)),u.center=u.unproject(y.add(v.sub(y).mult(i)),b),m!==p&&(u.bearing=o(p,m,t)),this.fire("move").fire("zoom"),m!==p&&this.fire("rotate")},function(){this.zooming=!1,this.rotating=!1,this.fire("moveend")},t),this},isEasing:function(){return!!this._abortFn},stop:function(){return this._abortFn&&(this._abortFn(),this._finishEase()),this},_ease:function(t,e,i){this._finishFn=e,this._abortFn=r.timed(function(e){t.call(this,i.easing(e)),1===e&&this._finishEase()},i.animate===!1?0:i.duration,this)},_finishEase:function(){delete this._abortFn;var t=this._finishFn;delete this._finishFn,t.call(this)},_normalizeBearing:function(t,e){t=n.wrap(t,-180,180);var i=Math.abs(t-e);return Math.abs(t-360-e)<i&&(t-=360),Math.abs(t+360-e)<i&&(t+=360),t},_updateEasing:function(t,e,i){var o;if(this.ease){var r=this.ease,s=(Date.now()-r.start)/r.duration,a=r.easing(s+.01)-r.easing(s),l=.27/Math.sqrt(a*a+1e-4)*.01,u=Math.sqrt(.0729-l*l);o=n.bezier(l,u,.25,1)}else o=i?n.bezier.apply(n,i):n.ease;return this.ease={start:(new Date).getTime(),to:Math.pow(2,e),duration:t,easing:o},o}})},{"../geo/lng_lat":129,"../geo/lng_lat_bounds":130,"../util/browser":203,"../util/interpolate":210,"../util/util":214,"point-geometry":243}],187:[function(t,e,i){"use strict";function n(){}var o=t("./control"),r=t("../../util/dom"),s=t("../../util/util");e.exports=n,n.prototype=s.inherit(o,{options:{position:"bottom-right"},onAdd:function(t){var e="mapboxgl-ctrl-attrib",i=this._container=r.create("div",e,t.getContainer());return this._update(),t.on("source.load",this._update.bind(this)),t.on("source.change",this._update.bind(this)),t.on("source.remove",this._update.bind(this)),t.on("moveend",this._updateEditLink.bind(this)),i},_update:function(){var t=[];if(this._map.style)for(var e in this._map.style.sources){var i=this._map.style.sources[e];i.attribution&&t.indexOf(i.attribution)<0&&t.push(i.attribution)}this._container.innerHTML=t.join(" | "),this._editLink=this._container.getElementsByClassName("mapbox-improve-map")[0],this._updateEditLink()},_updateEditLink:function(){if(this._editLink){var t=this._map.getCenter();this._editLink.href="https://www.mapbox.com/map-feedback/#/"+t.lng+"/"+t.lat+"/"+Math.round(this._map.getZoom()+1)}}})},{"../../util/dom":206,"../../util/util":214,"./control":188}],188:[function(t,e,i){"use strict";function n(){}e.exports=n,n.prototype={addTo:function(t){this._map=t;var e=this._container=this.onAdd(t);if(this.options&&this.options.position){var i=this.options.position,n=t._controlCorners[i];e.className+=" mapboxgl-ctrl",-1!==i.indexOf("bottom")?n.insertBefore(e,n.firstChild):n.appendChild(e)}return this},remove:function(){return this._container.parentNode.removeChild(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this}}},{}],189:[function(t,e,i){"use strict";function n(t){s.setOptions(this,t)}var o=t("./control"),r=t("../../util/dom"),s=t("../../util/util");e.exports=n,n.prototype=s.inherit(o,{options:{position:"top-right"},onAdd:function(t){var e="mapboxgl-ctrl",i=this._container=r.create("div",e+"-group",t.getContainer());this._zoomInButton=this._createButton(e+"-icon "+e+"-zoom-in",t.zoomIn.bind(t)),this._zoomOutButton=this._createButton(e+"-icon "+e+"-zoom-out",t.zoomOut.bind(t)),this._compass=this._createButton(e+"-compass",t.resetNorth.bind(t));var n=this._compassCanvas=r.create("canvas",e+"-compass-canvas",this._compass);return n.style.cssText="width:30px; height:30px;",n.width=52,n.height=52,this._compass.addEventListener("mousedown",this._onCompassDown.bind(this)),this._onCompassMove=this._onCompassMove.bind(this),this._onCompassUp=this._onCompassUp.bind(this),this._compassCtx=n.getContext("2d"),t.on("rotate",this._drawNorth.bind(this)),this._drawNorth(),i},_onCompassDown:function(t){r.disableDrag(),document.addEventListener("mousemove",this._onCompassMove),document.addEventListener("mouseup",this._onCompassUp),this._prevX=t.screenX,t.stopPropagation()},_onCompassMove:function(t){var e=t.screenX,i=2>e?-5:e>window.screen.width-2?5:(e-this._prevX)/4;this._map.setBearing(this._map.getBearing()-i),this._prevX=t.screenX,this._moved=!0,t.preventDefault()},_onCompassUp:function(){document.removeEventListener("mousemove",this._onCompassMove),document.removeEventListener("mouseup",this._onCompassUp),r.enableDrag(),this._moved&&(this._moved=!1,r.suppressClick()),this._map.snapToNorth()},_createButton:function(t,e){var i=r.create("button",t,this._container);return i.addEventListener("click",function(){e()}),i},_drawNorth:function(){var t=20,e=8,i=26,n=this._map.transform.angle+Math.PI/2,o=this._compassCtx;this._compassCanvas.width=this._compassCanvas.width,o.translate(i,i),o.rotate(n),o.beginPath(),o.fillStyle="#000",o.lineTo(0,-e),o.lineTo(-t,0),o.lineTo(0,e),o.fill(),o.beginPath(),o.fillStyle="#bbb",o.moveTo(0,0),o.lineTo(0,e),o.lineTo(t,0),o.lineTo(0,-e),o.fill(),o.beginPath(),o.strokeStyle="#fff",o.lineWidth=4,o.moveTo(0,-e),o.lineTo(0,e),o.stroke()}})},{"../../util/dom":206,"../../util/util":214,"./control":188}],190:[function(t,e,i){"use strict";function n(t){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),s.bindHandlers(this)}var o=t("../../util/dom"),r=t("../../geo/lng_lat_bounds"),s=t("../../util/util");e.exports=n,n.prototype={enable:function(){this._el.addEventListener("mousedown",this._onMouseDown,!1)},disable:function(){this._el.removeEventListener("mousedown",this._onMouseDown)},_onMouseDown:function(t){(t.shiftKey||1===t.which&&1===t.button)&&(document.addEventListener("mousemove",this._onMouseMove,!1),document.addEventListener("keydown",this._onKeyDown,!1),document.addEventListener("mouseup",this._onMouseUp,!1),this._startPos=o.mousePos(this._el,t),this.active=!0)},_onMouseMove:function(t){var e=this._startPos,i=o.mousePos(this._el,t);this._box||(this._box=o.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),o.disableDrag(),this._map.fire("boxzoomstart"));var n=Math.min(e.x,i.x),r=Math.max(e.x,i.x),s=Math.min(e.y,i.y),a=Math.max(e.y,i.y);o.setTransform(this._box,"translate("+n+"px,"+s+"px)"),this._box.style.width=r-n+"px",this._box.style.height=a-s+"px"},_onMouseUp:function(t){var e=this._startPos,i=o.mousePos(this._el,t),n=new r(this._map.unproject(e),this._map.unproject(i));this._finish(),this._map.fitBounds(n,{linear:!0}).fire("boxzoomend",{boxZoomBounds:n})},_onKeyDown:function(t){27===t.keyCode&&(this._finish(),this._map.fire("boxzoomcancel"))},_finish:function(){this._box&&(this.active=!1,document.removeEventListener("mousemove",this._onMouseMove,!1),document.removeEventListener("keydown",this._onKeyDown,!1),document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box.parentNode.removeChild(this._box),this._box=null,o.enableDrag())}}},{"../../geo/lng_lat_bounds":130,"../../util/dom":206,"../../util/util":214}],191:[function(t,e,i){"use strict";function n(t){this._map=t,this._onDblClick=this._onDblClick.bind(this)}e.exports=n,n.prototype={enable:function(){this._map.on("dblclick",this._onDblClick)},disable:function(){this._map.off("dblclick",this._onDblClick)},_onDblClick:function(t){this._map.zoomTo(Math.round(this._map.getZoom())+1,{around:t.lngLat})}}},{}],192:[function(t,e,i){"use strict";function n(t){this._map=t,this._el=t.getCanvasContainer(),r.bindHandlers(this)}var o=t("../../util/dom"),r=t("../../util/util");e.exports=n;var s=.25,a=r.bezier(0,0,s,1),l=3e3,u=4e3;n.prototype={enable:function(){this._el.addEventListener("mousedown",this._onDown,!1),this._el.addEventListener("touchstart",this._onDown,!1)},disable:function(){this._el.removeEventListener("mousedown",this._onDown),this._el.removeEventListener("touchstart",this._onDown)},_onDown:function(t){this._startPos=this._pos=o.mousePos(this._el,t),this._inertia=[[Date.now(),this._pos]],t.touches?1===t.touches.length&&(document.addEventListener("touchmove",this._onMove,!1),document.addEventListener("touchend",this._onTouchEnd,!1)):(document.addEventListener("mousemove",this._onMove,!1),document.addEventListener("mouseup",this._onMouseUp,!1))},_onMove:function(t){var e=this._map;if(!(e.boxZoom.active||e.dragRotate.active||t.touches&&t.touches.length>1)){this.active=!0;var i=o.mousePos(this._el,t),n=this._inertia,r=Date.now();for(n.push([r,i]);n.length>2&&r-n[0][0]>50;)n.shift();e.stop(),e.transform.setLocationAtPoint(e.transform.pointLocation(this._pos),i),e.fire("move"),this._pos=i,t.preventDefault()}},_onUp:function(){var t=this._inertia;if(t.length<2)return void this._map.fire("moveend");var e=t[t.length-1],i=t[0],n=e[1].sub(i[1]),o=(e[0]-i[0])/1e3,r=n.mult(s/o),c=r.mag();c>l&&(c=l,r._unit()._mult(c));var h=c/(u*s),p=r.mult(-h/2);this._map.panBy(p,{duration:1e3*h,easing:a,noMoveStart:!0}),this.active=!1},_onMouseUp:function(){this._onUp(),document.removeEventListener("mousemove",this._onMove,!1),document.removeEventListener("mouseup",this._onMouseUp,!1)},_onTouchEnd:function(){this._onUp(),document.removeEventListener("touchmove",this._onMove),document.removeEventListener("touchend",this._onTouchEnd)}}},{"../../util/dom":206,"../../util/util":214}],193:[function(t,e,i){"use strict";function n(t){this._map=t,this._el=t.getCanvasContainer(),s.bindHandlers(this)}var o=t("../../util/dom"),r=t("point-geometry"),s=t("../../util/util");e.exports=n,n.prototype={enable:function(){this._el.addEventListener("contextmenu",this._onContextMenu,!1)},disable:function(){this._el.removeEventListener("contextmenu",this._onContextMenu)},_onContextMenu:function(t){this._map.stop(),this._startPos=this._pos=o.mousePos(this._el,t),document.addEventListener("mousemove",this._onMouseMove,!1),document.addEventListener("mouseup",this._onMouseUp,!1),t.preventDefault()},_onMouseMove:function(t){var e=this._startPos,i=this._pos,n=o.mousePos(this._el,t),s=this._map,a=s.transform.centerPoint,l=e.sub(a),u=l.mag();this.active=!0,s.rotating||(s.fire("movestart"),s.rotating=!0),200>u&&(a=e.add(new r(-200,0)._rotate(l.angle())));var c=i.sub(a).angleWith(n.sub(a))/Math.PI*180;s.transform.bearing=s.getBearing()-c,s.fire("move").fire("rotate"),clearTimeout(this._timeout),this._timeout=setTimeout(this._onTimeout,200),
this._pos=n},_onTimeout:function(){var t=this._map;t.rotating=!1,t.snapToNorth(),t.rotating||(t._rerender(),t.fire("moveend"))},_onMouseUp:function(){this.active=!1,document.removeEventListener("mousemove",this._onMouseMove,!1),document.removeEventListener("mouseup",this._onMouseUp,!1)}}},{"../../util/dom":206,"../../util/util":214,"point-geometry":243}],194:[function(t,e,i){"use strict";function n(t){this._map=t,this._el=t.getCanvasContainer(),this._onKeyDown=this._onKeyDown.bind(this)}e.exports=n;var o=80,r=2;n.prototype={enable:function(){this._el.addEventListener("keydown",this._onKeyDown,!1)},disable:function(){this._el.removeEventListener("keydown",this._onKeyDown)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=this._map;switch(t.keyCode){case 61:case 107:case 171:case 187:e.zoomTo(Math.round(e.getZoom())+(t.shiftKey?2:1));break;case 189:case 109:case 173:e.zoomTo(Math.round(e.getZoom())-(t.shiftKey?2:1));break;case 37:t.shiftKey?e.setBearing(e.getBearing()-r):e.panBy([-o,0]);break;case 39:t.shiftKey?e.setBearing(e.getBearing()+r):e.panBy([o,0]);break;case 38:e.panBy([0,-o]);break;case 40:e.panBy([0,o])}}}}},{}],195:[function(t,e,i){"use strict";function n(t){this._map=t,this._el=t.getCanvasContainer(),r.bindHandlers(this)}var o=t("../../util/dom"),r=t("../../util/util");e.exports=n,n.prototype={enable:function(){this._el.addEventListener("touchstart",this._onStart,!1)},disable:function(){this._el.removeEventListener("touchstart",this._onStart)},_onStart:function(t){if(2===t.touches.length){var e=o.mousePos(this._el,t.touches[0]),i=o.mousePos(this._el,t.touches[1]);this._startVec=e.sub(i),this._startScale=this._map.transform.scale,this._startBearing=this._map.transform.bearing,document.addEventListener("touchmove",this._onMove,!1),document.addEventListener("touchend",this._onEnd,!1)}},_onMove:function(t){if(2===t.touches.length){var e=o.mousePos(this._el,t.touches[0]),i=o.mousePos(this._el,t.touches[1]),n=e.add(i).div(2),r=e.sub(i),s=r.mag()/this._startVec.mag(),a=180*r.angleWith(this._startVec)/Math.PI,l=this._map;l.easeTo({zoom:l.transform.scaleZoom(this._startScale*s),bearing:this._startBearing+a,duration:0,around:l.unproject(n)}),t.preventDefault()}},_onEnd:function(){this._map.snapToNorth(),document.removeEventListener("touchmove",this._onMove),document.removeEventListener("touchend",this._onEnd)}}},{"../../util/dom":206,"../../util/util":214}],196:[function(t,e,i){"use strict";function n(t){this._map=t,this._el=t.getCanvasContainer(),s.bindHandlers(this)}var o=t("../../util/dom"),r=t("../../util/browser"),s=t("../../util/util");e.exports=n;var a="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",l=-1!==a.indexOf("firefox"),u=-1!==a.indexOf("safari")&&-1===a.indexOf("chrom");n.prototype={enable:function(){this._el.addEventListener("wheel",this._onWheel,!1),this._el.addEventListener("mousewheel",this._onWheel,!1)},disable:function(){this._el.removeEventListener("wheel",this._onWheel),this._el.removeEventListener("mousewheel",this._onWheel)},_onWheel:function(t){var e;"wheel"===t.type?(e=t.deltaY,l&&t.deltaMode===window.WheelEvent.DOM_DELTA_PIXEL&&(e/=r.devicePixelRatio),t.deltaMode===window.WheelEvent.DOM_DELTA_LINE&&(e*=40)):"mousewheel"===t.type&&(e=-t.wheelDeltaY,u&&(e/=3));var i=(window.performance||Date).now(),n=i-(this._time||0);this._pos=o.mousePos(this._el,t),this._time=i,0!==e&&e%4.000244140625===0?(this._type="wheel",e=Math.floor(e/4)):0!==e&&Math.abs(e)<4?this._type="trackpad":n>400?(this._type=null,this._lastValue=e,this._timeout=setTimeout(this._onTimeout,40)):this._type||(this._type=Math.abs(n*e)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,e+=this._lastValue)),t.shiftKey&&e&&(e/=4),this._type&&this._zoom(-e),t.preventDefault()},_onTimeout:function(){this._type="wheel",this._zoom(-this._lastValue)},_zoom:function(t){var e=this._map,i=2/(1+Math.exp(-Math.abs(t/100)));0>t&&0!==i&&(i=1/i);var n=e.ease?e.ease.to:e.transform.scale,o=e.transform.scaleZoom(n*i);e.zoomTo(o,{duration:0,around:e.unproject(this._pos)})}}},{"../../util/browser":203,"../../util/dom":206,"../../util/util":214}],197:[function(t,e,i){"use strict";function n(){o.bindAll(["_onHashChange","_updateHash"],this)}e.exports=n;var o=t("../util/util");n.prototype={addTo:function(t){return this._map=t,window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},remove:function(){return window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),delete this._map,this},_onHashChange:function(){var t=location.hash.replace("#","").split("/");return t.length>=3?(this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:+(t[3]||0)}),!0):!1},_updateHash:function(){var t=this._map.getCenter(),e=this._map.getZoom(),i=this._map.getBearing(),n=Math.max(0,Math.ceil(Math.log(e)/Math.LN2)),o="#"+Math.round(100*e)/100+"/"+t.lat.toFixed(n)+"/"+t.lng.toFixed(n)+(i?"/"+Math.round(10*i)/10:"");window.history.replaceState("","",o)}}},{"../util/util":214}],198:[function(t,e,i){"use strict";function n(t){this._map=t,this._el=t.getCanvasContainer();for(var e in o)t[e]=new o[e](t);s.bindHandlers(this)}var o={scrollZoom:t("./handler/scroll_zoom"),boxZoom:t("./handler/box_zoom"),dragRotate:t("./handler/drag_rotate"),dragPan:t("./handler/drag_pan"),keyboard:t("./handler/keyboard"),doubleClickZoom:t("./handler/dblclick_zoom"),pinch:t("./handler/pinch")},r=t("../util/dom"),s=t("../util/util");e.exports=n,n.prototype={enable:function(){var t=this._map.options,e=this._el;for(var i in o)t[i]&&this._map[i].enable();e.addEventListener("mousedown",this._onMouseDown,!1),e.addEventListener("mouseup",this._onMouseUp,!1),e.addEventListener("touchstart",this._onTouchStart,!1),e.addEventListener("click",this._onClick,!1),e.addEventListener("mousemove",this._onMouseMove,!1),e.addEventListener("dblclick",this._onDblClick,!1),e.addEventListener("contextmenu",this._onContextMenu,!1)},disable:function(){var t=this._map.options,e=this._el;for(var i in o)t[i]&&this._map[i].disable();e.removeEventListener("mousedown",this._onMouseDown),e.removeEventListener("mouseup",this._onMouseUp),e.removeEventListener("touchstart",this._onTouchStart),e.removeEventListener("click",this._onClick),e.removeEventListener("mousemove",this._onMouseMove),e.removeEventListener("dblclick",this._onDblClick),e.removeEventListener("contextmenu",this._onContextMenu)},_onMouseDown:function(t){this._startPos=r.mousePos(this._el,t)},_onMouseUp:function(t){!this._contextMenuFired||this._map.dragRotate.active||this._map.dragPan.active||this._fireEvent("contextmenu",t),this._contextMenuFired=null},_onTouchStart:function(t){!t.touches||t.touches.length>1||(this._tapped?(clearTimeout(this._tapped),this._tapped=null,this._fireEvent("dblclick",t)):this._tapped=setTimeout(this._onTimeout,300))},_onTimeout:function(){this._tapped=null},_onMouseMove:function(t){var e=this._map,i=this._el;if(!e.dragPan.active&&!e.dragRotate.active){for(var n=t.toElement||t.target;n&&n!==i;)n=n.parentNode;n===i&&this._fireEvent("mousemove",t)}},_onClick:function(t){var e=r.mousePos(this._el,t);e.equals(this._startPos)&&this._fireEvent("click",t)},_onDblClick:function(t){this._fireEvent("dblclick",t),t.preventDefault()},_onContextMenu:function(){this._contextMenuFired=!0},_fireEvent:function(t,e){var i=r.mousePos(this._el,e);this._map.fire(t,{lngLat:this._map.unproject(i),point:i,originalEvent:e})}}},{"../util/dom":206,"../util/util":214,"./handler/box_zoom":190,"./handler/dblclick_zoom":191,"./handler/drag_pan":192,"./handler/drag_rotate":193,"./handler/keyboard":194,"./handler/pinch":195,"./handler/scroll_zoom":196}],199:[function(t,e,i){"use strict";var n=t("../util/canvas"),o=t("../util/util"),r=t("../util/browser"),s=t("../util/evented"),a=t("../util/dom"),l=t("../style/style"),u=t("../style/animation_loop"),c=t("../render/painter"),h=t("../geo/transform"),p=t("./hash"),d=t("./interaction"),f=t("./camera"),m=t("../geo/lng_lat"),g=t("../geo/lng_lat_bounds"),y=t("point-geometry"),v=t("./control/attribution"),b=e.exports=function(t){if(t=this.options=o.inherit(this.options,t),this.animationLoop=new u,this.transform=new h(t.minZoom,t.maxZoom),t.maxBounds){var e=g.convert(t.maxBounds);this.transform.lngRange=[e.getWest(),e.getEast()],this.transform.latRange=[e.getSouth(),e.getNorth()]}o.bindAll(["_forwardStyleEvent","_forwardSourceEvent","_forwardLayerEvent","_forwardTileEvent","_onStyleLoad","_onStyleChange","_onSourceAdd","_onSourceRemove","_onSourceUpdate","_onWindowResize","onError","update","render"],this),this._setupContainer(),this._setupPainter(),this.on("move",this.update.bind(this,!1)),this.on("zoom",this.update.bind(this,!0)),this.on("moveend",function(){this.animationLoop.set(300),this._rerender()}.bind(this)),"undefined"!=typeof window&&window.addEventListener("resize",this._onWindowResize,!1),this.interaction=new d(this),t.interactive&&this.interaction.enable(),this._hash=t.hash&&(new p).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo(t),this.sources={},this.stacks={},this._classes={},this.resize(),t.classes&&this.setClasses(t.classes),t.style&&this.setStyle(t.style),t.attributionControl&&this.addControl(new v),this.on("style.error",this.onError),this.on("source.error",this.onError),this.on("tile.error",this.onError)};o.extend(b.prototype,s),o.extend(b.prototype,f.prototype),o.extend(b.prototype,{options:{center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:20,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,pinch:!0,bearingSnap:7,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1},addControl:function(t){return t.addTo(this),this},addClass:function(t,e){this._classes[t]||(this._classes[t]=!0,this.style&&this.style._cascade(this._classes,e))},removeClass:function(t,e){this._classes[t]&&(delete this._classes[t],this.style&&this.style._cascade(this._classes,e))},setClasses:function(t,e){this._classes={};for(var i=0;i<t.length;i++)this._classes[t[i]]=!0;this.style&&this.style._cascade(this._classes,e)},hasClass:function(t){return!!this._classes[t]},getClasses:function(){return Object.keys(this._classes)},resize:function(){var t=0,e=0;return this._container&&(t=this._container.offsetWidth||400,e=this._container.offsetHeight||300),this._canvas.resize(t,e),this.transform.resize(t,e),this.painter.resize(t,e),this.fire("movestart").fire("move").fire("resize").fire("moveend")},getBounds:function(){return new g(this.transform.pointLocation(new y(0,0)),this.transform.pointLocation(this.transform.size))},project:function(t){return this.transform.locationPoint(m.convert(t))},unproject:function(t){return this.transform.pointLocation(y.convert(t))},featuresAt:function(t,e,i){var n=this.unproject(t).wrap(),o=this.transform.locationCoordinate(n);return this.style.featuresAt(o,e,i),this},featuresIn:function(t,e,i){return"undefined"==typeof i&&(i=e,e=t,t=[y.convert([0,0]),y.convert([this.transform.width,this.transform.height])]),t=t.map(y.convert.bind(y)),t=[new y(Math.min(t[0].x,t[1].x),Math.min(t[0].y,t[1].y)),new y(Math.max(t[0].x,t[1].x),Math.max(t[0].y,t[1].y))].map(this.transform.pointCoordinate.bind(this.transform)),this.style.featuresIn(t,e,i),this},batch:function(t){this.style.batch(t),this.style._cascade(this._classes),this.update(!0)},setStyle:function(t){return this.style&&(this.style.off("load",this._onStyleLoad).off("error",this._forwardStyleEvent).off("change",this._onStyleChange).off("source.add",this._onSourceAdd).off("source.remove",this._onSourceRemove).off("source.load",this._onSourceUpdate).off("source.error",this._forwardSourceEvent).off("source.change",this._onSourceUpdate).off("layer.add",this._forwardLayerEvent).off("layer.remove",this._forwardLayerEvent).off("tile.add",this._forwardTileEvent).off("tile.remove",this._forwardTileEvent).off("tile.load",this.update).off("tile.error",this._forwardTileEvent).off("tile.stats",this._forwardTileEvent)._remove(),this.off("rotate",this.style._redoPlacement),this.off("pitch",this.style._redoPlacement)),t?(t instanceof l?this.style=t:this.style=new l(t,this.animationLoop),this.style.on("load",this._onStyleLoad).on("error",this._forwardStyleEvent).on("change",this._onStyleChange).on("source.add",this._onSourceAdd).on("source.remove",this._onSourceRemove).on("source.load",this._onSourceUpdate).on("source.error",this._forwardSourceEvent).on("source.change",this._onSourceUpdate).on("layer.add",this._forwardLayerEvent).on("layer.remove",this._forwardLayerEvent).on("tile.add",this._forwardTileEvent).on("tile.remove",this._forwardTileEvent).on("tile.load",this.update).on("tile.error",this._forwardTileEvent).on("tile.stats",this._forwardTileEvent),this.on("rotate",this.style._redoPlacement),this.on("pitch",this.style._redoPlacement),this):(this.style=null,this)},addSource:function(t,e){return this.style.addSource(t,e),this},removeSource:function(t){return this.style.removeSource(t),this},getSource:function(t){return this.style.getSource(t)},addLayer:function(t,e){return this.style.addLayer(t,e),this.style._cascade(this._classes),this},removeLayer:function(t){return this.style.removeLayer(t),this.style._cascade(this._classes),this},getLayer:function(t){return this.style.getLayer(t)},setFilter:function(t,e){return this.style.setFilter(t,e),this},setLayerZoomRange:function(t,e,i){return this.style.setLayerZoomRange(t,e,i),this},getFilter:function(t){return this.style.getFilter(t)},setPaintProperty:function(t,e,i,n){return this.batch(function(o){o.setPaintProperty(t,e,i,n)}),this},getPaintProperty:function(t,e,i){return this.style.getPaintProperty(t,e,i)},setLayoutProperty:function(t,e,i){return this.batch(function(n){n.setLayoutProperty(t,e,i)}),this},getLayoutProperty:function(t,e){return this.style.getLayoutProperty(t,e)},getContainer:function(){return this._container},getCanvasContainer:function(){return this._canvasContainer},getCanvas:function(){return this._canvas.getElement()},_setupContainer:function(){var t=this.options.container,e=this._container="string"==typeof t?document.getElementById(t):t;e.classList.add("mapboxgl-map");var i=this._canvasContainer=a.create("div","mapboxgl-canvas-container",e);this.options.interactive&&i.classList.add("mapboxgl-interactive"),this._canvas=new n(this,i);var o=a.create("div","mapboxgl-control-container",e),r=this._controlCorners={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){r[t]=a.create("div","mapboxgl-ctrl-"+t,o)})},_setupPainter:function(){var t=this._canvas.getWebGLContext({failIfMajorPerformanceCaveat:this.options.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.options.preserveDrawingBuffer});return t?void(this.painter=new c(t,this.transform)):void console.error("Failed to initialize WebGL")},_contextLost:function(t){t.preventDefault(),this._frameId&&r.cancelFrame(this._frameId),this.fire("webglcontextlost",{originalEvent:t})},_contextRestored:function(t){this._setupPainter(),this.resize(),this.update(),this.fire("webglcontextrestored",{originalEvent:t})},loaded:function(){return this._styleDirty||this._sourcesDirty?!1:this.style&&!this.style.loaded()?!1:!0},update:function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this._rerender(),this):this},render:function(){return this.style&&this._styleDirty&&(this._styleDirty=!1,this.style._recalculate(this.transform.zoom)),this.style&&this._sourcesDirty&&!this._sourcesDirtyTimeout&&(this._sourcesDirty=!1,this._sourcesDirtyTimeout=setTimeout(function(){this._sourcesDirtyTimeout=null}.bind(this),50),this.style._updateSources(this.transform)),this.painter.render(this.style,{debug:this.debug,vertices:this.vertices,rotating:this.rotating,zooming:this.zooming}),this.fire("render"),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire("load")),this._frameId=null,this.animationLoop.stopped()||(this._styleDirty=!0),(this._sourcesDirty||this._repaint||!this.animationLoop.stopped())&&this._rerender(),this},remove:function(){return this._hash&&this._hash.remove(),r.cancelFrame(this._frameId),clearTimeout(this._sourcesDirtyTimeout),this.setStyle(null),"undefined"!=typeof window&&window.removeEventListener("resize",this._onWindowResize,!1),this},onError:function(t){console.error(t.error)},_rerender:function(){this.style&&!this._frameId&&(this._frameId=r.frame(this.render))},_forwardStyleEvent:function(t){this.fire("style."+t.type,o.extend({style:t.target},t))},_forwardSourceEvent:function(t){this.fire(t.type,o.extend({style:t.target},t))},_forwardLayerEvent:function(t){this.fire(t.type,o.extend({style:t.target},t))},_forwardTileEvent:function(t){this.fire(t.type,o.extend({style:t.target},t))},_onStyleLoad:function(t){this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this.style._cascade(this._classes,{transition:!1}),this._forwardStyleEvent(t)},_onStyleChange:function(t){this.update(!0),this._forwardStyleEvent(t)},_onSourceAdd:function(t){var e=t.source;e.onAdd&&e.onAdd(this),this._forwardSourceEvent(t)},_onSourceRemove:function(t){var e=t.source;e.onRemove&&e.onRemove(this),this._forwardSourceEvent(t)},_onSourceUpdate:function(t){this.update(),this._forwardSourceEvent(t)},_onWindowResize:function(){this.stop().resize().update()}}),o.extendAll(b.prototype,{_debug:!1,get debug(){return this._debug},set debug(t){this._debug=t,this.update()},_collisionDebug:!1,get collisionDebug(){return this._collisionDebug},set collisionDebug(t){this._collisionDebug=t,this.style._redoPlacement()},_repaint:!1,get repaint(){return this._repaint},set repaint(t){this._repaint=t,this.update()},_vertices:!1,get vertices(){return this._vertices},set vertices(t){this._vertices=t,this.update()}})},{"../geo/lng_lat":129,"../geo/lng_lat_bounds":130,"../geo/transform":131,"../render/painter":146,"../style/animation_loop":160,"../style/style":165,"../util/browser":203,"../util/canvas":204,"../util/dom":206,"../util/evented":208,"../util/util":214,"./camera":186,"./control/attribution":187,"./hash":197,"./interaction":198,"point-geometry":243}],200:[function(t,e,i){"use strict";function n(t){o.setOptions(this,t),o.bindAll(["_updatePosition","_onClickClose"],this)}e.exports=n;var o=t("../util/util"),r=t("../util/evented"),s=t("../util/dom"),a=t("../geo/lng_lat");n.prototype=o.inherit(r,{options:{closeButton:!0,closeOnClick:!0},addTo:function(t){return this._map=t,this._map.on("move",this._updatePosition),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this},remove:function(){return this._container&&this._container.parentNode.removeChild(this._container),this._map&&(this._map.off("move",this._updatePosition),this._map.off("click",this._onClickClose),delete this._map),this},getLngLat:function(){return this._lngLat},setLngLat:function(t){return this._lngLat=a.convert(t),this._update(),this},setText:function(t){return this._content=document.createTextNode(t),this._updateContent(),this},setHTML:function(t){this._content=document.createDocumentFragment();var e,i=document.createElement("body");for(i.innerHTML=t;;){if(e=i.firstChild,!e)break;this._content.appendChild(e)}return this._updateContent(),this},_update:function(){this._map&&(this._container||(this._container=s.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=s.create("div","mapboxgl-popup-tip",this._container),this._wrapper=s.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=s.create("button","mapboxgl-popup-close-button",this._wrapper),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))),this._updateContent(),this._updatePosition())},_updateContent:function(){if(this._content&&this._container){for(var t=this._wrapper;t.hasChildNodes();)t.removeChild(t.firstChild);this.options.closeButton&&t.appendChild(this._closeButton),t.appendChild(this._content)}},_updatePosition:function(){if(this._lngLat&&this._container){var t=this._map.project(this._lngLat).round(),e=this.options.anchor;if(!e){var i=this._container.offsetWidth,n=this._container.offsetHeight;e=t.y<n?["top"]:t.y>this._map.transform.height-n?["bottom"]:[],t.x<i/2?e.push("left"):t.x>this._map.transform.width-i/2&&e.push("right"),e=0===e.length?"bottom":e.join("-"),this.options.anchor=e}var o={top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},r=this._container.classList;for(var a in o)r.remove("mapboxgl-popup-anchor-"+a);r.add("mapboxgl-popup-anchor-"+e),s.setTransform(this._container,o[e]+" translate("+t.x+"px,"+t.y+"px)")}},_onClickClose:function(){this.remove()}})},{"../geo/lng_lat":129,"../util/dom":206,"../util/evented":208,"../util/util":214}],201:[function(t,e,i){"use strict";function n(t,e){this.target=t,this.parent=e,this.callbacks={},this.callbackID=0,this.receive=this.receive.bind(this),this.target.addEventListener("message",this.receive,!1)}e.exports=n,n.prototype.receive=function(t){var e,i=t.data;if("<response>"===i.type)e=this.callbacks[i.id],delete this.callbacks[i.id],e(i.error||null,i.data);else if("undefined"!=typeof i.id){var n=i.id;this.parent[i.type](i.data,function(t,e,i){this.postMessage({type:"<response>",id:String(n),error:t?String(t):null,data:e},i)}.bind(this))}else this.parent[i.type](i.data)},n.prototype.send=function(t,e,i,n){var o=null;i&&(this.callbacks[o=this.callbackID++]=i),this.postMessage({type:t,id:String(o),data:e},n)},n.prototype.postMessage=function(t,e){try{this.target.postMessage(t,e)}catch(i){this.target.postMessage(t)}}},{}],202:[function(t,e,i){"use strict";function n(t){var e=document.createElement("a");return e.href=t,e.protocol===document.location.protocol&&e.host===document.location.host}i.getJSON=function(t,e){var i=new XMLHttpRequest;return i.open("GET",t,!0),i.setRequestHeader("Accept","application/json"),i.onerror=function(t){e(t)},i.onload=function(){if(i.status>=200&&i.status<300&&i.response){var t;try{t=JSON.parse(i.response)}catch(n){return e(n)}e(null,t)}else e(new Error(i.statusText))},i.send(),i},i.getArrayBuffer=function(t,e){var i=new XMLHttpRequest;return i.open("GET",t,!0),i.responseType="arraybuffer",i.onerror=function(t){e(t)},i.onload=function(){i.status>=200&&i.status<300&&i.response?e(null,i.response):e(new Error(i.statusText))},i.send(),i},i.getImage=function(t,e){return i.getArrayBuffer(t,function(t,i){if(t)return e(t);var n=new Image;n.onload=function(){e(null,n),(window.URL||window.webkitURL).revokeObjectURL(n.src)};var o=new Blob([new Uint8Array(i)],{type:"image/png"});return n.src=(window.URL||window.webkitURL).createObjectURL(o),n.getData=function(){var t=document.createElement("canvas"),e=t.getContext("2d");return t.width=n.width,t.height=n.height,e.drawImage(n,0,0),e.getImageData(0,0,n.width,n.height).data},n})},i.getVideo=function(t,e){var i=document.createElement("video");i.onloadstart=function(){e(null,i)};for(var o=0;o<t.length;o++){var r=document.createElement("source");n(t[o])||(i.crossOrigin="Anonymous"),r.src=t[o],i.appendChild(r)}return i.getData=function(){return i},i}},{}],203:[function(t,e,i){"use strict";var n=t("./canvas"),o=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;i.frame=function(t){return o(t)};var r=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame;i.cancelFrame=function(t){r(t)},i.timed=function(t,e,n){function o(a){r||(window.performance||(a=Date.now()),a>=s+e?t.call(n,1):(t.call(n,(a-s)/e),i.frame(o)))}if(!e)return t.call(n,1),null;var r=!1,s=window.performance?window.performance.now():Date.now();return i.frame(o),function(){r=!0}},i.supported=function(t){for(var e=([function(){return"undefined"!=typeof window},function(){return"undefined"!=typeof document},function(){return!!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray)},function(){return!(!Function.prototype||!Function.prototype.bind||!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions))},function(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON},function(){return(new n).supportsWebGLContext(t&&t.failIfMajorPerformanceCaveat||!1)},function(){return"Worker"in window}]),i=0;i<e.length;i++)if(!e[i]())return!1;return!0},i.hardwareConcurrency=navigator.hardwareConcurrency||8,Object.defineProperty(i,"devicePixelRatio",{get:function(){return window.devicePixelRatio}})},{"./canvas":204}],204:[function(t,e,i){"use strict";function n(t,e){this.canvas=document.createElement("canvas"),t&&e&&(this.canvas.style.position="absolute",this.canvas.classList.add("mapboxgl-canvas"),this.canvas.addEventListener("webglcontextlost",t._contextLost.bind(t),!1),this.canvas.addEventListener("webglcontextrestored",t._contextRestored.bind(t),!1),this.canvas.setAttribute("tabindex",0),e.appendChild(this.canvas))}var o=t("../util");e.exports=n,n.prototype.resize=function(t,e){var i=window.devicePixelRatio||1;this.canvas.width=i*t,this.canvas.height=i*e,this.canvas.style.width=t+"px",this.canvas.style.height=e+"px"};var r={antialias:!1,alpha:!0,stencil:!0,depth:!1};n.prototype.getWebGLContext=function(t){return t=o.extend({},t,r),this.canvas.getContext("webgl",t)||this.canvas.getContext("experimental-webgl",t)},n.prototype.supportsWebGLContext=function(t){var e=o.extend({failIfMajorPerformanceCaveat:t},r);return"probablySupportsContext"in this.canvas?this.canvas.probablySupportsContext("webgl",e)||this.canvas.probablySupportsContext("experimental-webgl",e):"supportsContext"in this.canvas?this.canvas.supportsContext("webgl",e)||this.canvas.supportsContext("experimental-webgl",e):!!window.WebGLRenderingContext&&!!this.getWebGLContext(t)},n.prototype.getElement=function(){return this.canvas}},{"../util":214}],205:[function(t,e,i){"use strict";function n(e,i){this.actors=[],this.currentActor=0;for(var n=0;e>n;n++){var s=new r(t("../../source/worker")),a=new o(s,i);a.name="Worker "+n,this.actors.push(a)}}var o=t("../actor"),r=t("webworkify");e.exports=n,n.prototype={broadcast:function(t,e){for(var i=0;i<this.actors.length;i++)this.actors[i].send(t,e)},send:function(t,e,i,n,o){return("number"!=typeof n||isNaN(n))&&(n=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[n].send(t,e,i,o),n},remove:function(){for(var t=0;t<this.actors.length;t++)this.actors[t].target.terminate();this.actors=[]}}},{"../../source/worker":158,"../actor":201,webworkify:251}],206:[function(t,e,i){"use strict";function n(t){for(var e=0;e<t.length;e++)if(t[e]in a)return t[e]}function o(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",o,!0)}var r=t("point-geometry");i.create=function(t,e,i){var n=document.createElement(t);return e&&(n.className=e),i&&i.appendChild(n),n};var s,a=document.documentElement.style,l=n(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);i.disableDrag=function(){l&&(s=a[l],a[l]="none")},i.enableDrag=function(){l&&(a[l]=s)};var u=n(["transform","WebkitTransform"]);i.setTransform=function(t,e){t.style[u]=e},i.suppressClick=function(){window.addEventListener("click",o,!0),window.setTimeout(function(){window.removeEventListener("click",o,!0)},0)},i.mousePos=function(t,e){var i=t.getBoundingClientRect();return e=e.touches?e.touches[0]:e,new r(e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop)}},{"point-geometry":243}],207:[function(t,e,i){"use strict";e.exports={API_URL:"https://api.mapbox.com",REQUIRE_ACCESS_TOKEN:!0}},{}],208:[function(t,e,i){"use strict";var n=t("./util"),o={on:function(t,e){return this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e),this},off:function(t,e){if(!t)return delete this._events,this;if(!this.listens(t))return this;if(e){var i=this._events[t].indexOf(e);i>=0&&this._events[t].splice(i,1),this._events[t].length||delete this._events[t]}else delete this._events[t];return this},once:function(t,e){var i=function(n){this.off(t,i),e.call(this,n)}.bind(this);return this.on(t,i),this},fire:function(t,e){if(!this.listens(t))return this;e=n.extend({},e),n.extend(e,{type:t,target:this});for(var i=this._events[t].slice(),o=0;o<i.length;o++)i[o].call(this,e);return this},listens:function(t){return!(!this._events||!this._events[t])}};e.exports=o},{"./util":214}],209:[function(t,e,i){"use strict";function n(t,e){this.stacks=t.readFields(o,[],e)}function o(t,e,i){if(1===t){var n=i.readMessage(r,{glyphs:{}});e.push(n)}}function r(t,e,i){if(1===t)e.name=i.readString();else if(2===t)e.range=i.readString();else if(3===t){var n=i.readMessage(s,{});e.glyphs[n.id]=n}}function s(t,e,i){1===t?e.id=i.readVarint():2===t?e.bitmap=i.readBytes():3===t?e.width=i.readVarint():4===t?e.height=i.readVarint():5===t?e.left=i.readSVarint():6===t?e.top=i.readSVarint():7===t&&(e.advance=i.readVarint())}e.exports=n},{}],210:[function(t,e,i){"use strict";function n(t,e,i){return t*(1-i)+e*i}e.exports=n,n.number=n,n.vec2=function(t,e,i){return[n(t[0],e[0],i),n(t[1],e[1],i)]},n.color=function(t,e,i){return[n(t[0],e[0],i),n(t[1],e[1],i),n(t[2],e[2],i),n(t[3],e[3],i)]},n.array=function(t,e,i){return t.map(function(t,o){return n(t,e[o],i)})}},{}],211:[function(t,e,i){"use strict";function n(t,e,i){if(i=i||o.ACCESS_TOKEN,!i&&o.REQUIRE_ACCESS_TOKEN)throw new Error("An API access token is required to use Mapbox GL. See https://www.mapbox.com/developers/api/#access-tokens");if(t=t.replace(/^mapbox:\/\//,o.API_URL+e),t+=-1!==t.indexOf("?")?"&access_token=":"?access_token=",o.REQUIRE_ACCESS_TOKEN){if("s"===i[0])throw new Error("Use a public access token (pk.*) with Mapbox GL JS, not a secret access token (sk.*). See https://www.mapbox.com/developers/api/#access-tokens");t+=i}return t}var o=t("./config"),r=t("./browser");e.exports.normalizeStyleURL=function(t,e){if(!t.match(/^mapbox:\/\/styles\//))return t;var i=t.split("/"),o=i[3],r=i[4],s=i[5]?"/draft":"";return n("mapbox://"+o+"/"+r+s,"/styles/v1/",e)},e.exports.normalizeSourceURL=function(t,e){return t.match(/^mapbox:\/\//)?n(t+".json","/v4/",e)+"&secure":t},e.exports.normalizeGlyphsURL=function(t,e){if(!t.match(/^mapbox:\/\//))return t;var i=t.split("/")[3];return n("mapbox://"+i+"/{fontstack}/{range}.pbf","/fonts/v1/",e)},e.exports.normalizeSpriteURL=function(t,e,i,o){if(!t.match(/^mapbox:\/\/sprites\//))return t+e+i;var r=t.split("/"),s=r[3],a=r[4],l=r[5]?"/draft":"";return n("mapbox://"+s+"/"+a+l+"/sprite"+e+i,"/styles/v1/",o)},e.exports.normalizeTileURL=function(t,e){return e&&e.match(/^mapbox:\/\//)?t.replace(/\.((?:png|jpg)\d*)(?=$|\?)/,r.devicePixelRatio>=2?"@2x.$1":".$1"):t}},{"./browser":203,"./config":207}],212:[function(t,e,i){"use strict";function n(t,e){this.max=t,this.onRemove=e,this.reset()}e.exports=n,n.prototype.reset=function(){for(var t in this.list)this.onRemove(this.list[t]);return this.list={},this.order=[],this},n.prototype.add=function(t,e){if(this.list[t]=e,this.order.push(t),this.order.length>this.max){var i=this.get(this.order[0]);i&&this.onRemove(i)}return this},n.prototype.has=function(t){return t in this.list},n.prototype.keys=function(){return this.order},n.prototype.get=function(t){if(!this.has(t))return null;var e=this.list[t];return delete this.list[t],this.order.splice(this.order.indexOf(t),1),e}},{}],213:[function(t,e,i){"use strict";function n(t,e){return e.replace(/{([^{}()\[\]<>$=:;.,^]+)}/g,function(e,i){return i in t?t[i]:""})}e.exports=n},{}],
214:[function(t,e,i){"use strict";var n=t("unitbezier"),o=t("../geo/coordinate");i.easeCubicInOut=function(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,i=e*t;return 4*(.5>t?i:3*(t-e)+i-.75)},i.bezier=function(t,e,i,o){var r=new n(t,e,i,o);return function(t){return r.solve(t)}},i.ease=i.bezier(.25,.1,.25,1),i.premultiply=function(t){return t[0]*=t[3],t[1]*=t[3],t[2]*=t[3],t},i.clamp=function(t,e,i){return Math.min(i,Math.max(e,t))},i.wrap=function(t,e,i){var n=i-e,o=((t-e)%n+n)%n+e;return o===e?i:o},i.coalesce=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t];if(null!==e&&void 0!==e)return e}},i.asyncEach=function(t,e,i){function n(){0===--o&&i()}var o=t.length;if(0===o)return i();for(var r=0;r<t.length;r++)e(t[r],n)},i.asyncAll=function(t,e,i){var n=t.length,o=new Array(t.length),r=null;t.forEach(function(t,s){e(t,function(t,e){t&&(r=t),o[s]=e,0===--n&&i(r,o)})})},i.keysDifference=function(t,e){var i=[];for(var n in t)n in e||i.push(n);return i},i.extend=function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)t[n]=i[n]}return t},i.extendAll=function(t,e){for(var i in e)Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i));return t},i.inherit=function(t,e){var n="function"==typeof t?t.prototype:t,o=Object.create(n);return i.extendAll(o,e),o},i.pick=function(t,e){for(var i={},n=0;n<e.length;n++){var o=e[n];o in t&&(i[o]=t[o])}return i};var r=1;i.uniqueId=function(){return r++},i.throttle=function(t,e,i){var n,o,r,s;return s=function(){n=!1,o&&(r.apply(i,o),o=!1)},r=function(){n?o=arguments:(t.apply(i,arguments),setTimeout(s,e),n=!0)}},i.debounce=function(t,e){var i,n;return function(){n=arguments,clearTimeout(i),i=setTimeout(function(){t.apply(null,n)},e)}},i.bindAll=function(t,e){t.forEach(function(t){e[t]=e[t].bind(e)})},i.bindHandlers=function(t){for(var e in t)"function"==typeof t[e]&&0===e.indexOf("_on")&&(t[e]=t[e].bind(t))},i.setOptions=function(t,e){t.hasOwnProperty("options")||(t.options=t.options?Object.create(t.options):{});for(var i in e)t.options[i]=e[i];return t.options},i.getCoordinatesCenter=function(t){for(var e=1/0,i=1/0,n=-(1/0),r=-(1/0),s=0;s<t.length;s++)e=Math.min(e,t[s].column),i=Math.min(i,t[s].row),n=Math.max(n,t[s].column),r=Math.max(r,t[s].row);var a=n-e,l=r-i,u=Math.max(a,l);return new o((e+n)/2,(i+r)/2,0).zoomTo(Math.floor(-Math.log(u)/Math.LN2))}},{"../geo/coordinate":128,unitbezier:246}],215:[function(t,e,i){function n(t){return t=Math.round(t),0>t?0:t>255?255:t}function o(t){return 0>t?0:t>1?1:t}function r(t){return n("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function s(t){return o("%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))}function a(t,e,i){return 0>i?i+=1:i>1&&(i-=1),1>6*i?t+(e-t)*i*6:1>2*i?e:2>3*i?t+(e-t)*(2/3-i)*6:t}function l(t){var e=t.replace(/ /g,"").toLowerCase();if(e in u)return u[e].slice();if("#"===e[0]){if(4===e.length){var i=parseInt(e.substr(1),16);return i>=0&&4095>=i?[(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,1]:null}if(7===e.length){var i=parseInt(e.substr(1),16);return i>=0&&16777215>=i?[(16711680&i)>>16,(65280&i)>>8,255&i,1]:null}return null}var o=e.indexOf("("),l=e.indexOf(")");if(-1!==o&&l+1===e.length){var c=e.substr(0,o),h=e.substr(o+1,l-(o+1)).split(","),p=1;switch(c){case"rgba":if(4!==h.length)return null;p=s(h.pop());case"rgb":return 3!==h.length?null:[r(h[0]),r(h[1]),r(h[2]),p];case"hsla":if(4!==h.length)return null;p=s(h.pop());case"hsl":if(3!==h.length)return null;var d=(parseFloat(h[0])%360+360)%360/360,f=s(h[1]),m=s(h[2]),g=.5>=m?m*(f+1):m+f-m*f,y=2*m-g;return[n(255*a(y,g,d+1/3)),n(255*a(y,g,d)),n(255*a(y,g,d-1/3)),p];default:return null}}return null}var u={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{i.parseCSSColor=l}catch(c){}},{}],216:[function(t,e,i){"use strict";function n(t){return function(e,i,n){return"$type"===i?"t"+t+a.indexOf(n):"p["+JSON.stringify(i)+"]"+t+JSON.stringify(n)}}function o(t){var e=n(t);return function(t,i,n){return"$type"===i?e(t,i,n):"typeof(p["+JSON.stringify(i)+"]) === typeof("+JSON.stringify(n)+") && "+e(t,i,n)}}function r(t){return l[t[0]].apply(t,t)}function s(){return!0}var a=["Unknown","Point","LineString","Polygon"],l={"==":n("==="),"!=":n("!=="),">":o(">"),"<":o("<"),"<=":o("<="),">=":o(">="),"in":function(t,e){return Array.prototype.slice.call(arguments,2).map(function(i){return"("+l["=="](t,e,i)+")"}).join("||")||"false"},"!in":function(){return"!("+l["in"].apply(this,arguments)+")"},any:function(){return Array.prototype.slice.call(arguments,1).map(function(t){return"("+r(t)+")"}).join("||")||"false"},all:function(){return Array.prototype.slice.call(arguments,1).map(function(t){return"("+r(t)+")"}).join("&&")||"true"},none:function(){return"!("+l.any.apply(this,arguments)+")"}};e.exports=function(t){if(!t)return s;var e="var p = f.properties || f.tags || {}, t = f.type; return "+r(t)+";";return new Function("f",e)}},{}],217:[function(t,e,i){"use strict";function n(t,e,i,n,s,a,l,u){if(i/=e,n/=e,l>=i&&n>=u)return t;if(l>n||i>u)return null;for(var c=[],h=0;h<t.length;h++){var p,d,f=t[h],m=f.geometry,g=f.type;if(p=f.min[s],d=f.max[s],p>=i&&n>=d)c.push(f);else if(!(p>n||i>d)){var y=1===g?o(m,i,n,s):r(m,i,n,s,a,3===g);y.length&&c.push({geometry:y,type:g,tags:t[h].tags||null,min:f.min,max:f.max})}}return c.length?c:null}function o(t,e,i,n){for(var o=[],r=0;r<t.length;r++){var s=t[r],a=s[n];a>=e&&i>=a&&o.push(s)}return o}function r(t,e,i,n,o,r){for(var a=[],l=0;l<t.length;l++){var u,c,h,p=0,d=0,f=null,m=t[l],g=m.area,y=m.dist,v=m.length,b=[];for(c=0;v-1>c;c++)u=f||m[c],f=m[c+1],p=d||u[n],d=f[n],e>p?d>i?(b.push(o(u,f,e),o(u,f,i)),r||(b=s(a,b,g,y))):d>=e&&b.push(o(u,f,e)):p>i?e>d?(b.push(o(u,f,i),o(u,f,e)),r||(b=s(a,b,g,y))):i>=d&&b.push(o(u,f,i)):(b.push(u),e>d?(b.push(o(u,f,e)),r||(b=s(a,b,g,y))):d>i&&(b.push(o(u,f,i)),r||(b=s(a,b,g,y))));u=m[v-1],p=u[n],p>=e&&i>=p&&b.push(u),h=b[b.length-1],r&&h&&(b[0][0]!==h[0]||b[0][1]!==h[1])&&b.push(b[0]),s(a,b,g,y)}return a}function s(t,e,i,n){return e.length&&(e.area=i,e.dist=n,t.push(e)),[]}e.exports=n},{}],218:[function(t,e,i){"use strict";function n(t,e){var i=[];if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)o(i,t.features[n],e);else"Feature"===t.type?o(i,t,e):o(i,{geometry:t},e);return i}function o(t,e,i){var n,l,u,c=e.geometry,h=c.type,p=c.coordinates,d=e.properties;if("Point"===h)t.push(r(d,1,[a(p)]));else if("MultiPoint"===h)t.push(r(d,1,s(p)));else if("LineString"===h)t.push(r(d,2,[s(p,i)]));else if("MultiLineString"===h||"Polygon"===h){for(u=[],n=0;n<p.length;n++)u.push(s(p[n],i));t.push(r(d,"Polygon"===h?3:2,u))}else if("MultiPolygon"===h){for(u=[],n=0;n<p.length;n++)for(l=0;l<p[n].length;l++)u.push(s(p[n][l],i));t.push(r(d,3,u))}else{if("GeometryCollection"!==h)throw new Error("Input data is not a valid GeoJSON object.");for(n=0;n<c.geometries.length;n++)o(t,{geometry:c.geometries[n],properties:d},i)}}function r(t,e,i){var n={geometry:i,type:e,tags:t||null,min:[2,1],max:[-1,0]};return u(n),n}function s(t,e){for(var i=[],n=0;n<t.length;n++)i.push(a(t[n]));return e&&(h(i,e),l(i)),i}function a(t){var e=Math.sin(t[1]*Math.PI/180),i=t[0]/360+.5,n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n=-1>n?-1:n>1?1:n,[i,n,0]}function l(t){for(var e,i,n=0,o=0,r=0;r<t.length-1;r++)e=i||t[r],i=t[r+1],n+=e[0]*i[1]-i[0]*e[1],o+=Math.abs(i[0]-e[0])+Math.abs(i[1]-e[1]);t.area=Math.abs(n/2),t.dist=o}function u(t){var e=t.geometry,i=t.min,n=t.max;if(1===t.type)c(i,n,e);else for(var o=0;o<e.length;o++)c(i,n,e[o]);return t}function c(t,e,i){for(var n,o=0;o<i.length;o++)n=i[o],t[0]=Math.min(n[0],t[0]),e[0]=Math.max(n[0],e[0]),t[1]=Math.min(n[1],t[1]),e[1]=Math.max(n[1],e[1])}e.exports=n;var h=t("./simplify")},{"./simplify":220}],219:[function(t,e,i){"use strict";function n(t,e){return new o(t,e)}function o(t,e){e=this.options=c(Object.create(this.options),e);var i=e.debug;i&&console.time("preprocess data");var n=1<<e.maxZoom,o=p(t,e.tolerance/(n*e.extent));this.tiles={},this.tileCoords=[],i&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),o=f(o,e.buffer/e.extent,l),o.length&&this.splitTile(o,0,0,0),i&&(o.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function r(t,e){if(t.transformed)return t;var i,n,o,r=t.z2,a=t.x,l=t.y;for(i=0;i<t.features.length;i++){var u=t.features[i],c=u.geometry,h=u.type;if(1===h)for(n=0;n<c.length;n++)c[n]=s(c[n],e,r,a,l);else for(n=0;n<c.length;n++){var p=c[n];for(o=0;o<p.length;o++)p[o]=s(p[o],e,r,a,l)}}return t.transformed=!0,t}function s(t,e,i,n,o){var r=Math.round(e*(t[0]*i-n)),s=Math.round(e*(t[1]*i-o));return[r,s]}function a(t,e,i){return 32*((1<<t)*i+e)+t}function l(t,e,i){return[i,(i-t[0])*(e[1]-t[1])/(e[0]-t[0])+t[1],1]}function u(t,e,i){return[(i-t[1])*(e[0]-t[0])/(e[1]-t[1])+t[0],i,1]}function c(t,e){for(var i in e)t[i]=e[i];return t}function h(t,e,i){var n=t.source;if(1!==n.length)return!1;var o=n[0];if(3!==o.type||o.geometry.length>1)return!1;var r=o.geometry[0].length;if(5!==r)return!1;for(var a=0;r>a;a++){var l=s(o.geometry[0][a],e,t.z2,t.x,t.y);if(l[0]!==-i&&l[0]!==e+i||l[1]!==-i&&l[1]!==e+i)return!1}return!0}e.exports=n;var p=t("./convert"),d=t("./clip"),f=t("./wrap"),m=t("./tile");o.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,solidChildren:!1,tolerance:3,extent:4096,buffer:64,debug:0},o.prototype.splitTile=function(t,e,i,n,o,r,s){for(var c=[t,e,i,n],p=this.options,f=p.debug;c.length;){n=c.pop(),i=c.pop(),e=c.pop(),t=c.pop();var g=1<<e,y=a(e,i,n),v=this.tiles[y],b=e===p.maxZoom?0:p.tolerance/(g*p.extent);if(!v&&(f>1&&console.time("creation"),v=this.tiles[y]=m(t,g,i,n,b,e===p.maxZoom),this.tileCoords.push({z:e,x:i,y:n}),f)){f>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,i,n,v.numFeatures,v.numPoints,v.numSimplified),console.timeEnd("creation"));var x="z"+e;this.stats[x]=(this.stats[x]||0)+1,this.total++}if(v.source=t,p.solidChildren||!h(v,p.extent,p.buffer)){if(o){if(e===p.maxZoom||e===o)continue;var _=1<<o-e;if(i!==Math.floor(r/_)||n!==Math.floor(s/_))continue}else if(e===p.indexMaxZoom||v.numPoints<=p.indexMaxPoints)continue;v.source=null,f>1&&console.time("clipping");var w,S,k,T,E,M,C=.5*p.buffer/p.extent,A=.5-C,R=.5+C,D=1+C;w=S=k=T=null,E=d(t,g,i-C,i+R,0,l,v.min[0],v.max[0]),M=d(t,g,i+A,i+D,0,l,v.min[0],v.max[0]),E&&(w=d(E,g,n-C,n+R,1,u,v.min[1],v.max[1]),S=d(E,g,n+A,n+D,1,u,v.min[1],v.max[1])),M&&(k=d(M,g,n-C,n+R,1,u,v.min[1],v.max[1]),T=d(M,g,n+A,n+D,1,u,v.min[1],v.max[1])),f>1&&console.timeEnd("clipping"),w&&c.push(w,e+1,2*i,2*n),S&&c.push(S,e+1,2*i,2*n+1),k&&c.push(k,e+1,2*i+1,2*n),T&&c.push(T,e+1,2*i+1,2*n+1)}}},o.prototype.getTile=function(t,e,i){var n=this.options,o=n.extent,s=n.debug,l=1<<t;e=(e%l+l)%l;var u=a(t,e,i);if(this.tiles[u])return r(this.tiles[u],o);s>1&&console.log("drilling down to z%d-%d-%d",t,e,i);for(var c,p=t,d=e,f=i;!c&&p>0;)p--,d=Math.floor(d/2),f=Math.floor(f/2),c=this.tiles[a(p,d,f)];if(!c)return null;if(s>1&&console.log("found parent tile z%d-%d-%d",p,d,f),c.source){if(h(c,o,n.buffer))return r(c,o);s>1&&console.time("drilling down"),this.splitTile(c.source,p,d,f,t,e,i),s>1&&console.timeEnd("drilling down")}return this.tiles[u]?r(this.tiles[u],o):null}},{"./clip":217,"./convert":218,"./tile":221,"./wrap":222}],220:[function(t,e,i){"use strict";function n(t,e){var i,n,r,s,a=e*e,l=t.length,u=0,c=l-1,h=[];for(t[u][2]=1,t[c][2]=1;c;){for(n=0,i=u+1;c>i;i++)r=o(t[i],t[u],t[c]),r>n&&(s=i,n=r);n>a?(t[s][2]=n,h.push(u),h.push(s),u=s):(c=h.pop(),u=h.pop())}}function o(t,e,i){var n=e[0],o=e[1],r=i[0],s=i[1],a=t[0],l=t[1],u=r-n,c=s-o;if(0!==u||0!==c){var h=((a-n)*u+(l-o)*c)/(u*u+c*c);h>1?(n=r,o=s):h>0&&(n+=u*h,o+=c*h)}return u=a-n,c=l-o,u*u+c*c}e.exports=n},{}],221:[function(t,e,i){"use strict";function n(t,e,i,n,r,s){for(var a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:n,z2:e,transformed:!1,min:[2,1],max:[-1,0]},l=0;l<t.length;l++){a.numFeatures++,o(a,t[l],r,s);var u=t[l].min,c=t[l].max;u[0]<a.min[0]&&(a.min[0]=u[0]),u[1]<a.min[1]&&(a.min[1]=u[1]),c[0]>a.max[0]&&(a.max[0]=c[0]),c[1]>a.max[1]&&(a.max[1]=c[1])}return a}function o(t,e,i,n){var o,r,s,a,l=e.geometry,u=e.type,c=[],h=i*i;if(1===u)for(o=0;o<l.length;o++)c.push(l[o]),t.numPoints++,t.numSimplified++;else for(o=0;o<l.length;o++)if(s=l[o],n||!(2===u&&s.dist<i||3===u&&s.area<h)){var p=[];for(r=0;r<s.length;r++)a=s[r],(n||a[2]>h)&&(p.push(a),t.numSimplified++),t.numPoints++;c.push(p)}else t.numPoints+=s.length;c.length&&t.features.push({geometry:c,type:u,tags:e.tags||null})}e.exports=n},{}],222:[function(t,e,i){"use strict";function n(t,e,i){var n=t,r=s(t,1,-1-e,e,0,i,-1,2),a=s(t,1,1-e,2+e,0,i,-1,2);return(r||a)&&(n=s(t,1,-e,1+e,0,i,-1,2),r&&(n=o(r,1).concat(n)),a&&(n=n.concat(o(a,-1)))),n}function o(t,e){for(var i=[],n=0;n<t.length;n++){var o,s=t[n],a=s.type;if(1===a)o=r(s.geometry,e);else{o=[];for(var l=0;l<s.geometry.length;l++)o.push(r(s.geometry[l],e))}i.push({geometry:o,type:a,tags:s.tags,min:[s.min[0]+e,s.min[1]],max:[s.max[0]+e,s.max[1]]})}return i}function r(t,e){var i=[];i.area=t.area,i.dist=t.dist;for(var n=0;n<t.length;n++)i.push([t[n][0]+e,t[n][1],t[n][2]]);return i}var s=t("./clip");e.exports=n},{"./clip":217}],223:[function(t,e,i){i.glMatrix=t("./gl-matrix/common.js"),i.mat2=t("./gl-matrix/mat2.js"),i.mat2d=t("./gl-matrix/mat2d.js"),i.mat3=t("./gl-matrix/mat3.js"),i.mat4=t("./gl-matrix/mat4.js"),i.quat=t("./gl-matrix/quat.js"),i.vec2=t("./gl-matrix/vec2.js"),i.vec3=t("./gl-matrix/vec3.js"),i.vec4=t("./gl-matrix/vec4.js")},{"./gl-matrix/common.js":224,"./gl-matrix/mat2.js":225,"./gl-matrix/mat2d.js":226,"./gl-matrix/mat3.js":227,"./gl-matrix/mat4.js":228,"./gl-matrix/quat.js":229,"./gl-matrix/vec2.js":230,"./gl-matrix/vec3.js":231,"./gl-matrix/vec4.js":232}],224:[function(t,e,i){var n={};n.EPSILON=1e-6,n.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,n.RANDOM=Math.random,n.setMatrixArrayType=function(t){GLMAT_ARRAY_TYPE=t};var o=Math.PI/180;n.toRadian=function(t){return t*o},e.exports=n},{}],225:[function(t,e,i){var n=t("./common.js"),o={};o.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},o.clone=function(t){var e=new n.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},o.transpose=function(t,e){if(t===e){var i=e[1];t[1]=e[2],t[2]=i}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},o.invert=function(t,e){var i=e[0],n=e[1],o=e[2],r=e[3],s=i*r-o*n;return s?(s=1/s,t[0]=r*s,t[1]=-n*s,t[2]=-o*s,t[3]=i*s,t):null},o.adjoint=function(t,e){var i=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=i,t},o.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},o.multiply=function(t,e,i){var n=e[0],o=e[1],r=e[2],s=e[3],a=i[0],l=i[1],u=i[2],c=i[3];return t[0]=n*a+r*l,t[1]=o*a+s*l,t[2]=n*u+r*c,t[3]=o*u+s*c,t},o.mul=o.multiply,o.rotate=function(t,e,i){var n=e[0],o=e[1],r=e[2],s=e[3],a=Math.sin(i),l=Math.cos(i);return t[0]=n*l+r*a,t[1]=o*l+s*a,t[2]=n*-a+r*l,t[3]=o*-a+s*l,t},o.scale=function(t,e,i){var n=e[0],o=e[1],r=e[2],s=e[3],a=i[0],l=i[1];return t[0]=n*a,t[1]=o*a,t[2]=r*l,t[3]=s*l,t},o.fromRotation=function(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=-i,t[3]=n,t},o.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},o.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},o.LDU=function(t,e,i,n){return t[2]=n[2]/n[0],i[0]=n[0],i[1]=n[1],i[3]=n[3]-t[2]*i[1],[t,e,i]},e.exports=o},{"./common.js":224}],226:[function(t,e,i){var n=t("./common.js"),o={};o.create=function(){var t=new n.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},o.clone=function(t){var e=new n.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},o.invert=function(t,e){var i=e[0],n=e[1],o=e[2],r=e[3],s=e[4],a=e[5],l=i*r-n*o;return l?(l=1/l,t[0]=r*l,t[1]=-n*l,t[2]=-o*l,t[3]=i*l,t[4]=(o*a-r*s)*l,t[5]=(n*s-i*a)*l,t):null},o.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},o.multiply=function(t,e,i){var n=e[0],o=e[1],r=e[2],s=e[3],a=e[4],l=e[5],u=i[0],c=i[1],h=i[2],p=i[3],d=i[4],f=i[5];return t[0]=n*u+r*c,t[1]=o*u+s*c,t[2]=n*h+r*p,t[3]=o*h+s*p,t[4]=n*d+r*f+a,t[5]=o*d+s*f+l,t},o.mul=o.multiply,o.rotate=function(t,e,i){var n=e[0],o=e[1],r=e[2],s=e[3],a=e[4],l=e[5],u=Math.sin(i),c=Math.cos(i);return t[0]=n*c+r*u,t[1]=o*c+s*u,t[2]=n*-u+r*c,t[3]=o*-u+s*c,t[4]=a,t[5]=l,t},o.scale=function(t,e,i){var n=e[0],o=e[1],r=e[2],s=e[3],a=e[4],l=e[5],u=i[0],c=i[1];return t[0]=n*u,t[1]=o*u,t[2]=r*c,t[3]=s*c,t[4]=a,t[5]=l,t},o.translate=function(t,e,i){var n=e[0],o=e[1],r=e[2],s=e[3],a=e[4],l=e[5],u=i[0],c=i[1];return t[0]=n,t[1]=o,t[2]=r,t[3]=s,t[4]=n*u+r*c+a,t[5]=o*u+s*c+l,t},o.fromRotation=function(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=-i,t[3]=n,t[4]=0,t[5]=0,t},o.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},o.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},o.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},e.exports=o},{"./common.js":224}],227:[function(t,e,i){var n=t("./common.js"),o={};o.create=function(){var t=new n.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},o.clone=function(t){var e=new n.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.transpose=function(t,e){if(t===e){var i=e[1],n=e[2],o=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=n,t[7]=o}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},o.invert=function(t,e){var i=e[0],n=e[1],o=e[2],r=e[3],s=e[4],a=e[5],l=e[6],u=e[7],c=e[8],h=c*s-a*u,p=-c*r+a*l,d=u*r-s*l,f=i*h+n*p+o*d;return f?(f=1/f,t[0]=h*f,t[1]=(-c*n+o*u)*f,t[2]=(a*n-o*s)*f,t[3]=p*f,t[4]=(c*i-o*l)*f,t[5]=(-a*i+o*r)*f,t[6]=d*f,t[7]=(-u*i+n*l)*f,t[8]=(s*i-n*r)*f,t):null},o.adjoint=function(t,e){var i=e[0],n=e[1],o=e[2],r=e[3],s=e[4],a=e[5],l=e[6],u=e[7],c=e[8];return t[0]=s*c-a*u,t[1]=o*u-n*c,t[2]=n*a-o*s,t[3]=a*l-r*c,t[4]=i*c-o*l,t[5]=o*r-i*a,t[6]=r*u-s*l,t[7]=n*l-i*u,t[8]=i*s-n*r,t},o.determinant=function(t){var e=t[0],i=t[1],n=t[2],o=t[3],r=t[4],s=t[5],a=t[6],l=t[7],u=t[8];return e*(u*r-s*l)+i*(-u*o+s*a)+n*(l*o-r*a)},o.multiply=function(t,e,i){var n=e[0],o=e[1],r=e[2],s=e[3],a=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=i[0],d=i[1],f=i[2],m=i[3],g=i[4],y=i[5],v=i[6],b=i[7],x=i[8];return t[0]=p*n+d*s+f*u,t[1]=p*o+d*a+f*c,t[2]=p*r+d*l+f*h,t[3]=m*n+g*s+y*u,t[4]=m*o+g*a+y*c,t[5]=m*r+g*l+y*h,t[6]=v*n+b*s+x*u,t[7]=v*o+b*a+x*c,t[8]=v*r+b*l+x*h,t},o.mul=o.multiply,o.translate=function(t,e,i){var n=e[0],o=e[1],r=e[2],s=e[3],a=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=i[0],d=i[1];return t[0]=n,t[1]=o,t[2]=r,t[3]=s,t[4]=a,t[5]=l,t[6]=p*n+d*s+u,t[7]=p*o+d*a+c,t[8]=p*r+d*l+h,t},o.rotate=function(t,e,i){var n=e[0],o=e[1],r=e[2],s=e[3],a=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=Math.sin(i),d=Math.cos(i);return t[0]=d*n+p*s,t[1]=d*o+p*a,t[2]=d*r+p*l,t[3]=d*s-p*n,t[4]=d*a-p*o,t[5]=d*l-p*r,t[6]=u,t[7]=c,t[8]=h,t},o.scale=function(t,e,i){var n=i[0],o=i[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},o.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},o.fromRotation=function(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=0,t[3]=-i,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},o.fromQuat=function(t,e){var i=e[0],n=e[1],o=e[2],r=e[3],s=i+i,a=n+n,l=o+o,u=i*s,c=n*s,h=n*a,p=o*s,d=o*a,f=o*l,m=r*s,g=r*a,y=r*l;return t[0]=1-h-f,t[3]=c-y,t[6]=p+g,t[1]=c+y,t[4]=1-u-f,t[7]=d-m,t[2]=p-g,t[5]=d+m,t[8]=1-u-h,t},o.normalFromMat4=function(t,e){var i=e[0],n=e[1],o=e[2],r=e[3],s=e[4],a=e[5],l=e[6],u=e[7],c=e[8],h=e[9],p=e[10],d=e[11],f=e[12],m=e[13],g=e[14],y=e[15],v=i*a-n*s,b=i*l-o*s,x=i*u-r*s,_=n*l-o*a,w=n*u-r*a,S=o*u-r*l,k=c*m-h*f,T=c*g-p*f,E=c*y-d*f,M=h*g-p*m,C=h*y-d*m,A=p*y-d*g,R=v*A-b*C+x*M+_*E-w*T+S*k;return R?(R=1/R,t[0]=(a*A-l*C+u*M)*R,t[1]=(l*E-s*A-u*T)*R,t[2]=(s*C-a*E+u*k)*R,t[3]=(o*C-n*A-r*M)*R,t[4]=(i*A-o*E+r*T)*R,t[5]=(n*E-i*C-r*k)*R,t[6]=(m*S-g*w+y*_)*R,t[7]=(g*x-f*S-y*b)*R,t[8]=(f*w-m*x+y*v)*R,t):null},o.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},e.exports=o},{"./common.js":224}],228:[function(t,e,i){var n=t("./common.js"),o={};o.create=function(){var t=new n.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.clone=function(t){var e=new n.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.transpose=function(t,e){if(t===e){var i=e[1],n=e[2],o=e[3],r=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=r,t[11]=e[14],t[12]=o,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},o.invert=function(t,e){var i=e[0],n=e[1],o=e[2],r=e[3],s=e[4],a=e[5],l=e[6],u=e[7],c=e[8],h=e[9],p=e[10],d=e[11],f=e[12],m=e[13],g=e[14],y=e[15],v=i*a-n*s,b=i*l-o*s,x=i*u-r*s,_=n*l-o*a,w=n*u-r*a,S=o*u-r*l,k=c*m-h*f,T=c*g-p*f,E=c*y-d*f,M=h*g-p*m,C=h*y-d*m,A=p*y-d*g,R=v*A-b*C+x*M+_*E-w*T+S*k;return R?(R=1/R,t[0]=(a*A-l*C+u*M)*R,t[1]=(o*C-n*A-r*M)*R,t[2]=(m*S-g*w+y*_)*R,t[3]=(p*w-h*S-d*_)*R,t[4]=(l*E-s*A-u*T)*R,t[5]=(i*A-o*E+r*T)*R,t[6]=(g*x-f*S-y*b)*R,t[7]=(c*S-p*x+d*b)*R,t[8]=(s*C-a*E+u*k)*R,t[9]=(n*E-i*C-r*k)*R,t[10]=(f*w-m*x+y*v)*R,t[11]=(h*x-c*w-d*v)*R,t[12]=(a*T-s*M-l*k)*R,t[13]=(i*M-n*T+o*k)*R,t[14]=(m*b-f*_-g*v)*R,t[15]=(c*_-h*b+p*v)*R,t):null},o.adjoint=function(t,e){var i=e[0],n=e[1],o=e[2],r=e[3],s=e[4],a=e[5],l=e[6],u=e[7],c=e[8],h=e[9],p=e[10],d=e[11],f=e[12],m=e[13],g=e[14],y=e[15];return t[0]=a*(p*y-d*g)-h*(l*y-u*g)+m*(l*d-u*p),t[1]=-(n*(p*y-d*g)-h*(o*y-r*g)+m*(o*d-r*p)),t[2]=n*(l*y-u*g)-a*(o*y-r*g)+m*(o*u-r*l),t[3]=-(n*(l*d-u*p)-a*(o*d-r*p)+h*(o*u-r*l)),t[4]=-(s*(p*y-d*g)-c*(l*y-u*g)+f*(l*d-u*p)),t[5]=i*(p*y-d*g)-c*(o*y-r*g)+f*(o*d-r*p),t[6]=-(i*(l*y-u*g)-s*(o*y-r*g)+f*(o*u-r*l)),t[7]=i*(l*d-u*p)-s*(o*d-r*p)+c*(o*u-r*l),t[8]=s*(h*y-d*m)-c*(a*y-u*m)+f*(a*d-u*h),t[9]=-(i*(h*y-d*m)-c*(n*y-r*m)+f*(n*d-r*h)),t[10]=i*(a*y-u*m)-s*(n*y-r*m)+f*(n*u-r*a),t[11]=-(i*(a*d-u*h)-s*(n*d-r*h)+c*(n*u-r*a)),t[12]=-(s*(h*g-p*m)-c*(a*g-l*m)+f*(a*p-l*h)),t[13]=i*(h*g-p*m)-c*(n*g-o*m)+f*(n*p-o*h),t[14]=-(i*(a*g-l*m)-s*(n*g-o*m)+f*(n*l-o*a)),t[15]=i*(a*p-l*h)-s*(n*p-o*h)+c*(n*l-o*a),t},o.determinant=function(t){var e=t[0],i=t[1],n=t[2],o=t[3],r=t[4],s=t[5],a=t[6],l=t[7],u=t[8],c=t[9],h=t[10],p=t[11],d=t[12],f=t[13],m=t[14],g=t[15],y=e*s-i*r,v=e*a-n*r,b=e*l-o*r,x=i*a-n*s,_=i*l-o*s,w=n*l-o*a,S=u*f-c*d,k=u*m-h*d,T=u*g-p*d,E=c*m-h*f,M=c*g-p*f,C=h*g-p*m;return y*C-v*M+b*E+x*T-_*k+w*S},o.multiply=function(t,e,i){var n=e[0],o=e[1],r=e[2],s=e[3],a=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],d=e[10],f=e[11],m=e[12],g=e[13],y=e[14],v=e[15],b=i[0],x=i[1],_=i[2],w=i[3];return t[0]=b*n+x*a+_*h+w*m,t[1]=b*o+x*l+_*p+w*g,t[2]=b*r+x*u+_*d+w*y,t[3]=b*s+x*c+_*f+w*v,b=i[4],x=i[5],_=i[6],w=i[7],t[4]=b*n+x*a+_*h+w*m,t[5]=b*o+x*l+_*p+w*g,t[6]=b*r+x*u+_*d+w*y,t[7]=b*s+x*c+_*f+w*v,b=i[8],x=i[9],_=i[10],w=i[11],t[8]=b*n+x*a+_*h+w*m,t[9]=b*o+x*l+_*p+w*g,t[10]=b*r+x*u+_*d+w*y,t[11]=b*s+x*c+_*f+w*v,b=i[12],x=i[13],_=i[14],w=i[15],t[12]=b*n+x*a+_*h+w*m,t[13]=b*o+x*l+_*p+w*g,t[14]=b*r+x*u+_*d+w*y,t[15]=b*s+x*c+_*f+w*v,t},o.mul=o.multiply,o.translate=function(t,e,i){var n,o,r,s,a,l,u,c,h,p,d,f,m=i[0],g=i[1],y=i[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*y+e[12],t[13]=e[1]*m+e[5]*g+e[9]*y+e[13],t[14]=e[2]*m+e[6]*g+e[10]*y+e[14],t[15]=e[3]*m+e[7]*g+e[11]*y+e[15]):(n=e[0],o=e[1],r=e[2],s=e[3],a=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],d=e[10],f=e[11],t[0]=n,t[1]=o,t[2]=r,t[3]=s,t[4]=a,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=p,t[10]=d,t[11]=f,t[12]=n*m+a*g+h*y+e[12],t[13]=o*m+l*g+p*y+e[13],t[14]=r*m+u*g+d*y+e[14],t[15]=s*m+c*g+f*y+e[15]),t},o.scale=function(t,e,i){var n=i[0],o=i[1],r=i[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},o.rotate=function(t,e,i,o){var r,s,a,l,u,c,h,p,d,f,m,g,y,v,b,x,_,w,S,k,T,E,M,C,A=o[0],R=o[1],D=o[2],z=Math.sqrt(A*A+R*R+D*D);return Math.abs(z)<n.EPSILON?null:(z=1/z,A*=z,R*=z,D*=z,r=Math.sin(i),s=Math.cos(i),a=1-s,l=e[0],u=e[1],c=e[2],h=e[3],p=e[4],d=e[5],f=e[6],m=e[7],g=e[8],y=e[9],v=e[10],b=e[11],x=A*A*a+s,_=R*A*a+D*r,w=D*A*a-R*r,S=A*R*a-D*r,k=R*R*a+s,T=D*R*a+A*r,E=A*D*a+R*r,M=R*D*a-A*r,C=D*D*a+s,t[0]=l*x+p*_+g*w,t[1]=u*x+d*_+y*w,t[2]=c*x+f*_+v*w,t[3]=h*x+m*_+b*w,t[4]=l*S+p*k+g*T,t[5]=u*S+d*k+y*T,t[6]=c*S+f*k+v*T,t[7]=h*S+m*k+b*T,t[8]=l*E+p*M+g*C,t[9]=u*E+d*M+y*C,t[10]=c*E+f*M+v*C,t[11]=h*E+m*M+b*C,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},o.rotateX=function(t,e,i){var n=Math.sin(i),o=Math.cos(i),r=e[4],s=e[5],a=e[6],l=e[7],u=e[8],c=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=r*o+u*n,t[5]=s*o+c*n,t[6]=a*o+h*n,t[7]=l*o+p*n,t[8]=u*o-r*n,t[9]=c*o-s*n,t[10]=h*o-a*n,t[11]=p*o-l*n,t},o.rotateY=function(t,e,i){var n=Math.sin(i),o=Math.cos(i),r=e[0],s=e[1],a=e[2],l=e[3],u=e[8],c=e[9],h=e[10],p=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*o-u*n,t[1]=s*o-c*n,t[2]=a*o-h*n,t[3]=l*o-p*n,t[8]=r*n+u*o,t[9]=s*n+c*o,t[10]=a*n+h*o,t[11]=l*n+p*o,t},o.rotateZ=function(t,e,i){var n=Math.sin(i),o=Math.cos(i),r=e[0],s=e[1],a=e[2],l=e[3],u=e[4],c=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*o+u*n,t[1]=s*o+c*n,t[2]=a*o+h*n,t[3]=l*o+p*n,t[4]=u*o-r*n,t[5]=c*o-s*n,t[6]=h*o-a*n,t[7]=p*o-l*n,t},o.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},o.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromRotation=function(t,e,i){var o,r,s,a=i[0],l=i[1],u=i[2],c=Math.sqrt(a*a+l*l+u*u);return Math.abs(c)<n.EPSILON?null:(c=1/c,a*=c,l*=c,u*=c,o=Math.sin(e),r=Math.cos(e),s=1-r,t[0]=a*a*s+r,t[1]=l*a*s+u*o,t[2]=u*a*s-l*o,
t[3]=0,t[4]=a*l*s-u*o,t[5]=l*l*s+r,t[6]=u*l*s+a*o,t[7]=0,t[8]=a*u*s+l*o,t[9]=l*u*s-a*o,t[10]=u*u*s+r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},o.fromXRotation=function(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromYRotation=function(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromZRotation=function(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromRotationTranslation=function(t,e,i){var n=e[0],o=e[1],r=e[2],s=e[3],a=n+n,l=o+o,u=r+r,c=n*a,h=n*l,p=n*u,d=o*l,f=o*u,m=r*u,g=s*a,y=s*l,v=s*u;return t[0]=1-(d+m),t[1]=h+v,t[2]=p-y,t[3]=0,t[4]=h-v,t[5]=1-(c+m),t[6]=f+g,t[7]=0,t[8]=p+y,t[9]=f-g,t[10]=1-(c+d),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},o.fromRotationTranslationScale=function(t,e,i,n){var o=e[0],r=e[1],s=e[2],a=e[3],l=o+o,u=r+r,c=s+s,h=o*l,p=o*u,d=o*c,f=r*u,m=r*c,g=s*c,y=a*l,v=a*u,b=a*c,x=n[0],_=n[1],w=n[2];return t[0]=(1-(f+g))*x,t[1]=(p+b)*x,t[2]=(d-v)*x,t[3]=0,t[4]=(p-b)*_,t[5]=(1-(h+g))*_,t[6]=(m+y)*_,t[7]=0,t[8]=(d+v)*w,t[9]=(m-y)*w,t[10]=(1-(h+f))*w,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},o.fromRotationTranslationScaleOrigin=function(t,e,i,n,o){var r=e[0],s=e[1],a=e[2],l=e[3],u=r+r,c=s+s,h=a+a,p=r*u,d=r*c,f=r*h,m=s*c,g=s*h,y=a*h,v=l*u,b=l*c,x=l*h,_=n[0],w=n[1],S=n[2],k=o[0],T=o[1],E=o[2];return t[0]=(1-(m+y))*_,t[1]=(d+x)*_,t[2]=(f-b)*_,t[3]=0,t[4]=(d-x)*w,t[5]=(1-(p+y))*w,t[6]=(g+v)*w,t[7]=0,t[8]=(f+b)*S,t[9]=(g-v)*S,t[10]=(1-(p+m))*S,t[11]=0,t[12]=i[0]+k-(t[0]*k+t[4]*T+t[8]*E),t[13]=i[1]+T-(t[1]*k+t[5]*T+t[9]*E),t[14]=i[2]+E-(t[2]*k+t[6]*T+t[10]*E),t[15]=1,t},o.fromQuat=function(t,e){var i=e[0],n=e[1],o=e[2],r=e[3],s=i+i,a=n+n,l=o+o,u=i*s,c=n*s,h=n*a,p=o*s,d=o*a,f=o*l,m=r*s,g=r*a,y=r*l;return t[0]=1-h-f,t[1]=c+y,t[2]=p-g,t[3]=0,t[4]=c-y,t[5]=1-u-f,t[6]=d+m,t[7]=0,t[8]=p+g,t[9]=d-m,t[10]=1-u-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.frustum=function(t,e,i,n,o,r,s){var a=1/(i-e),l=1/(o-n),u=1/(r-s);return t[0]=2*r*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*l,t[6]=0,t[7]=0,t[8]=(i+e)*a,t[9]=(o+n)*l,t[10]=(s+r)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*r*2*u,t[15]=0,t},o.perspective=function(t,e,i,n,o){var r=1/Math.tan(e/2),s=1/(n-o);return t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(o+n)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*o*n*s,t[15]=0,t},o.perspectiveFromFieldOfView=function(t,e,i,n){var o=Math.tan(e.upDegrees*Math.PI/180),r=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),l=2/(s+a),u=2/(o+r);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-((s-a)*l*.5),t[9]=(o-r)*u*.5,t[10]=n/(i-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*i/(i-n),t[15]=0,t},o.ortho=function(t,e,i,n,o,r,s){var a=1/(e-i),l=1/(n-o),u=1/(r-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+i)*a,t[13]=(o+n)*l,t[14]=(s+r)*u,t[15]=1,t},o.lookAt=function(t,e,i,r){var s,a,l,u,c,h,p,d,f,m,g=e[0],y=e[1],v=e[2],b=r[0],x=r[1],_=r[2],w=i[0],S=i[1],k=i[2];return Math.abs(g-w)<n.EPSILON&&Math.abs(y-S)<n.EPSILON&&Math.abs(v-k)<n.EPSILON?o.identity(t):(p=g-w,d=y-S,f=v-k,m=1/Math.sqrt(p*p+d*d+f*f),p*=m,d*=m,f*=m,s=x*f-_*d,a=_*p-b*f,l=b*d-x*p,m=Math.sqrt(s*s+a*a+l*l),m?(m=1/m,s*=m,a*=m,l*=m):(s=0,a=0,l=0),u=d*l-f*a,c=f*s-p*l,h=p*a-d*s,m=Math.sqrt(u*u+c*c+h*h),m?(m=1/m,u*=m,c*=m,h*=m):(u=0,c=0,h=0),t[0]=s,t[1]=u,t[2]=p,t[3]=0,t[4]=a,t[5]=c,t[6]=d,t[7]=0,t[8]=l,t[9]=h,t[10]=f,t[11]=0,t[12]=-(s*g+a*y+l*v),t[13]=-(u*g+c*y+h*v),t[14]=-(p*g+d*y+f*v),t[15]=1,t)},o.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},e.exports=o},{"./common.js":224}],229:[function(t,e,i){var n=t("./common.js"),o=t("./mat3.js"),r=t("./vec3.js"),s=t("./vec4.js"),a={};a.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},a.rotationTo=function(){var t=r.create(),e=r.fromValues(1,0,0),i=r.fromValues(0,1,0);return function(n,o,s){var l=r.dot(o,s);return-.999999>l?(r.cross(t,e,o),r.length(t)<1e-6&&r.cross(t,i,o),r.normalize(t,t),a.setAxisAngle(n,t,Math.PI),n):l>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(r.cross(t,o,s),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+l,a.normalize(n,n))}}(),a.setAxes=function(){var t=o.create();return function(e,i,n,o){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=o[0],t[4]=o[1],t[7]=o[2],t[2]=-i[0],t[5]=-i[1],t[8]=-i[2],a.normalize(e,a.fromMat3(e,t))}}(),a.clone=s.clone,a.fromValues=s.fromValues,a.copy=s.copy,a.set=s.set,a.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},a.setAxisAngle=function(t,e,i){i=.5*i;var n=Math.sin(i);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(i),t},a.add=s.add,a.multiply=function(t,e,i){var n=e[0],o=e[1],r=e[2],s=e[3],a=i[0],l=i[1],u=i[2],c=i[3];return t[0]=n*c+s*a+o*u-r*l,t[1]=o*c+s*l+r*a-n*u,t[2]=r*c+s*u+n*l-o*a,t[3]=s*c-n*a-o*l-r*u,t},a.mul=a.multiply,a.scale=s.scale,a.rotateX=function(t,e,i){i*=.5;var n=e[0],o=e[1],r=e[2],s=e[3],a=Math.sin(i),l=Math.cos(i);return t[0]=n*l+s*a,t[1]=o*l+r*a,t[2]=r*l-o*a,t[3]=s*l-n*a,t},a.rotateY=function(t,e,i){i*=.5;var n=e[0],o=e[1],r=e[2],s=e[3],a=Math.sin(i),l=Math.cos(i);return t[0]=n*l-r*a,t[1]=o*l+s*a,t[2]=r*l+n*a,t[3]=s*l-o*a,t},a.rotateZ=function(t,e,i){i*=.5;var n=e[0],o=e[1],r=e[2],s=e[3],a=Math.sin(i),l=Math.cos(i);return t[0]=n*l+o*a,t[1]=o*l-n*a,t[2]=r*l+s*a,t[3]=s*l-r*a,t},a.calculateW=function(t,e){var i=e[0],n=e[1],o=e[2];return t[0]=i,t[1]=n,t[2]=o,t[3]=Math.sqrt(Math.abs(1-i*i-n*n-o*o)),t},a.dot=s.dot,a.lerp=s.lerp,a.slerp=function(t,e,i,n){var o,r,s,a,l,u=e[0],c=e[1],h=e[2],p=e[3],d=i[0],f=i[1],m=i[2],g=i[3];return r=u*d+c*f+h*m+p*g,0>r&&(r=-r,d=-d,f=-f,m=-m,g=-g),1-r>1e-6?(o=Math.acos(r),s=Math.sin(o),a=Math.sin((1-n)*o)/s,l=Math.sin(n*o)/s):(a=1-n,l=n),t[0]=a*u+l*d,t[1]=a*c+l*f,t[2]=a*h+l*m,t[3]=a*p+l*g,t},a.sqlerp=function(){var t=a.create(),e=a.create();return function(i,n,o,r,s,l){return a.slerp(t,n,s,l),a.slerp(e,o,r,l),a.slerp(i,t,e,2*l*(1-l)),i}}(),a.invert=function(t,e){var i=e[0],n=e[1],o=e[2],r=e[3],s=i*i+n*n+o*o+r*r,a=s?1/s:0;return t[0]=-i*a,t[1]=-n*a,t[2]=-o*a,t[3]=r*a,t},a.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},a.length=s.length,a.len=a.length,a.squaredLength=s.squaredLength,a.sqrLen=a.squaredLength,a.normalize=s.normalize,a.fromMat3=function(t,e){var i,n=e[0]+e[4]+e[8];if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,i=.5/i,t[0]=(e[5]-e[7])*i,t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{var o=0;e[4]>e[0]&&(o=1),e[8]>e[3*o+o]&&(o=2);var r=(o+1)%3,s=(o+2)%3;i=Math.sqrt(e[3*o+o]-e[3*r+r]-e[3*s+s]+1),t[o]=.5*i,i=.5/i,t[3]=(e[3*r+s]-e[3*s+r])*i,t[r]=(e[3*r+o]+e[3*o+r])*i,t[s]=(e[3*s+o]+e[3*o+s])*i}return t},a.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.exports=a},{"./common.js":224,"./mat3.js":227,"./vec3.js":231,"./vec4.js":232}],230:[function(t,e,i){var n=t("./common.js"),o={};o.create=function(){var t=new n.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},o.clone=function(t){var e=new n.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},o.fromValues=function(t,e){var i=new n.ARRAY_TYPE(2);return i[0]=t,i[1]=e,i},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},o.set=function(t,e,i){return t[0]=e,t[1]=i,t},o.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t},o.subtract=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t},o.sub=o.subtract,o.multiply=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t},o.mul=o.multiply,o.divide=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t},o.div=o.divide,o.min=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t},o.max=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t},o.scale=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t},o.scaleAndAdd=function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t},o.distance=function(t,e){var i=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(i*i+n*n)},o.dist=o.distance,o.squaredDistance=function(t,e){var i=e[0]-t[0],n=e[1]-t[1];return i*i+n*n},o.sqrDist=o.squaredDistance,o.length=function(t){var e=t[0],i=t[1];return Math.sqrt(e*e+i*i)},o.len=o.length,o.squaredLength=function(t){var e=t[0],i=t[1];return e*e+i*i},o.sqrLen=o.squaredLength,o.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},o.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},o.normalize=function(t,e){var i=e[0],n=e[1],o=i*i+n*n;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o),t},o.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},o.cross=function(t,e,i){var n=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=n,t},o.lerp=function(t,e,i,n){var o=e[0],r=e[1];return t[0]=o+n*(i[0]-o),t[1]=r+n*(i[1]-r),t},o.random=function(t,e){e=e||1;var i=2*n.RANDOM()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t},o.transformMat2=function(t,e,i){var n=e[0],o=e[1];return t[0]=i[0]*n+i[2]*o,t[1]=i[1]*n+i[3]*o,t},o.transformMat2d=function(t,e,i){var n=e[0],o=e[1];return t[0]=i[0]*n+i[2]*o+i[4],t[1]=i[1]*n+i[3]*o+i[5],t},o.transformMat3=function(t,e,i){var n=e[0],o=e[1];return t[0]=i[0]*n+i[3]*o+i[6],t[1]=i[1]*n+i[4]*o+i[7],t},o.transformMat4=function(t,e,i){var n=e[0],o=e[1];return t[0]=i[0]*n+i[4]*o+i[12],t[1]=i[1]*n+i[5]*o+i[13],t},o.forEach=function(){var t=o.create();return function(e,i,n,o,r,s){var a,l;for(i||(i=2),n||(n=0),l=o?Math.min(o*i+n,e.length):e.length,a=n;l>a;a+=i)t[0]=e[a],t[1]=e[a+1],r(t,t,s),e[a]=t[0],e[a+1]=t[1];return e}}(),o.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.exports=o},{"./common.js":224}],231:[function(t,e,i){var n=t("./common.js"),o={};o.create=function(){var t=new n.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},o.clone=function(t){var e=new n.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},o.fromValues=function(t,e,i){var o=new n.ARRAY_TYPE(3);return o[0]=t,o[1]=e,o[2]=i,o},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},o.set=function(t,e,i,n){return t[0]=e,t[1]=i,t[2]=n,t},o.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t},o.subtract=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t},o.sub=o.subtract,o.multiply=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t},o.mul=o.multiply,o.divide=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t},o.div=o.divide,o.min=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t},o.max=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t},o.scale=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t},o.scaleAndAdd=function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t},o.distance=function(t,e){var i=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2];return Math.sqrt(i*i+n*n+o*o)},o.dist=o.distance,o.squaredDistance=function(t,e){var i=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2];return i*i+n*n+o*o},o.sqrDist=o.squaredDistance,o.length=function(t){var e=t[0],i=t[1],n=t[2];return Math.sqrt(e*e+i*i+n*n)},o.len=o.length,o.squaredLength=function(t){var e=t[0],i=t[1],n=t[2];return e*e+i*i+n*n},o.sqrLen=o.squaredLength,o.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},o.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},o.normalize=function(t,e){var i=e[0],n=e[1],o=e[2],r=i*i+n*n+o*o;return r>0&&(r=1/Math.sqrt(r),t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r),t},o.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},o.cross=function(t,e,i){var n=e[0],o=e[1],r=e[2],s=i[0],a=i[1],l=i[2];return t[0]=o*l-r*a,t[1]=r*s-n*l,t[2]=n*a-o*s,t},o.lerp=function(t,e,i,n){var o=e[0],r=e[1],s=e[2];return t[0]=o+n*(i[0]-o),t[1]=r+n*(i[1]-r),t[2]=s+n*(i[2]-s),t},o.hermite=function(t,e,i,n,o,r){var s=r*r,a=s*(2*r-3)+1,l=s*(r-2)+r,u=s*(r-1),c=s*(3-2*r);return t[0]=e[0]*a+i[0]*l+n[0]*u+o[0]*c,t[1]=e[1]*a+i[1]*l+n[1]*u+o[1]*c,t[2]=e[2]*a+i[2]*l+n[2]*u+o[2]*c,t},o.bezier=function(t,e,i,n,o,r){var s=1-r,a=s*s,l=r*r,u=a*s,c=3*r*a,h=3*l*s,p=l*r;return t[0]=e[0]*u+i[0]*c+n[0]*h+o[0]*p,t[1]=e[1]*u+i[1]*c+n[1]*h+o[1]*p,t[2]=e[2]*u+i[2]*c+n[2]*h+o[2]*p,t},o.random=function(t,e){e=e||1;var i=2*n.RANDOM()*Math.PI,o=2*n.RANDOM()-1,r=Math.sqrt(1-o*o)*e;return t[0]=Math.cos(i)*r,t[1]=Math.sin(i)*r,t[2]=o*e,t},o.transformMat4=function(t,e,i){var n=e[0],o=e[1],r=e[2],s=i[3]*n+i[7]*o+i[11]*r+i[15];return s=s||1,t[0]=(i[0]*n+i[4]*o+i[8]*r+i[12])/s,t[1]=(i[1]*n+i[5]*o+i[9]*r+i[13])/s,t[2]=(i[2]*n+i[6]*o+i[10]*r+i[14])/s,t},o.transformMat3=function(t,e,i){var n=e[0],o=e[1],r=e[2];return t[0]=n*i[0]+o*i[3]+r*i[6],t[1]=n*i[1]+o*i[4]+r*i[7],t[2]=n*i[2]+o*i[5]+r*i[8],t},o.transformQuat=function(t,e,i){var n=e[0],o=e[1],r=e[2],s=i[0],a=i[1],l=i[2],u=i[3],c=u*n+a*r-l*o,h=u*o+l*n-s*r,p=u*r+s*o-a*n,d=-s*n-a*o-l*r;return t[0]=c*u+d*-s+h*-l-p*-a,t[1]=h*u+d*-a+p*-s-c*-l,t[2]=p*u+d*-l+c*-a-h*-s,t},o.rotateX=function(t,e,i,n){var o=[],r=[];return o[0]=e[0]-i[0],o[1]=e[1]-i[1],o[2]=e[2]-i[2],r[0]=o[0],r[1]=o[1]*Math.cos(n)-o[2]*Math.sin(n),r[2]=o[1]*Math.sin(n)+o[2]*Math.cos(n),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},o.rotateY=function(t,e,i,n){var o=[],r=[];return o[0]=e[0]-i[0],o[1]=e[1]-i[1],o[2]=e[2]-i[2],r[0]=o[2]*Math.sin(n)+o[0]*Math.cos(n),r[1]=o[1],r[2]=o[2]*Math.cos(n)-o[0]*Math.sin(n),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},o.rotateZ=function(t,e,i,n){var o=[],r=[];return o[0]=e[0]-i[0],o[1]=e[1]-i[1],o[2]=e[2]-i[2],r[0]=o[0]*Math.cos(n)-o[1]*Math.sin(n),r[1]=o[0]*Math.sin(n)+o[1]*Math.cos(n),r[2]=o[2],t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},o.forEach=function(){var t=o.create();return function(e,i,n,o,r,s){var a,l;for(i||(i=3),n||(n=0),l=o?Math.min(o*i+n,e.length):e.length,a=n;l>a;a+=i)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],r(t,t,s),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}}(),o.angle=function(t,e){var i=o.fromValues(t[0],t[1],t[2]),n=o.fromValues(e[0],e[1],e[2]);o.normalize(i,i),o.normalize(n,n);var r=o.dot(i,n);return r>1?0:Math.acos(r)},o.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exports=o},{"./common.js":224}],232:[function(t,e,i){var n=t("./common.js"),o={};o.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},o.clone=function(t){var e=new n.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},o.fromValues=function(t,e,i,o){var r=new n.ARRAY_TYPE(4);return r[0]=t,r[1]=e,r[2]=i,r[3]=o,r},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},o.set=function(t,e,i,n,o){return t[0]=e,t[1]=i,t[2]=n,t[3]=o,t},o.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t},o.subtract=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t},o.sub=o.subtract,o.multiply=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t},o.mul=o.multiply,o.divide=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t},o.div=o.divide,o.min=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t},o.max=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t},o.scale=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t},o.scaleAndAdd=function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t},o.distance=function(t,e){var i=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2],r=e[3]-t[3];return Math.sqrt(i*i+n*n+o*o+r*r)},o.dist=o.distance,o.squaredDistance=function(t,e){var i=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2],r=e[3]-t[3];return i*i+n*n+o*o+r*r},o.sqrDist=o.squaredDistance,o.length=function(t){var e=t[0],i=t[1],n=t[2],o=t[3];return Math.sqrt(e*e+i*i+n*n+o*o)},o.len=o.length,o.squaredLength=function(t){var e=t[0],i=t[1],n=t[2],o=t[3];return e*e+i*i+n*n+o*o},o.sqrLen=o.squaredLength,o.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},o.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},o.normalize=function(t,e){var i=e[0],n=e[1],o=e[2],r=e[3],s=i*i+n*n+o*o+r*r;return s>0&&(s=1/Math.sqrt(s),t[0]=i*s,t[1]=n*s,t[2]=o*s,t[3]=r*s),t},o.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},o.lerp=function(t,e,i,n){var o=e[0],r=e[1],s=e[2],a=e[3];return t[0]=o+n*(i[0]-o),t[1]=r+n*(i[1]-r),t[2]=s+n*(i[2]-s),t[3]=a+n*(i[3]-a),t},o.random=function(t,e){return e=e||1,t[0]=n.RANDOM(),t[1]=n.RANDOM(),t[2]=n.RANDOM(),t[3]=n.RANDOM(),o.normalize(t,t),o.scale(t,t,e),t},o.transformMat4=function(t,e,i){var n=e[0],o=e[1],r=e[2],s=e[3];return t[0]=i[0]*n+i[4]*o+i[8]*r+i[12]*s,t[1]=i[1]*n+i[5]*o+i[9]*r+i[13]*s,t[2]=i[2]*n+i[6]*o+i[10]*r+i[14]*s,t[3]=i[3]*n+i[7]*o+i[11]*r+i[15]*s,t},o.transformQuat=function(t,e,i){var n=e[0],o=e[1],r=e[2],s=i[0],a=i[1],l=i[2],u=i[3],c=u*n+a*r-l*o,h=u*o+l*n-s*r,p=u*r+s*o-a*n,d=-s*n-a*o-l*r;return t[0]=c*u+d*-s+h*-l-p*-a,t[1]=h*u+d*-a+p*-s-c*-l,t[2]=p*u+d*-l+c*-a-h*-s,t[3]=e[3],t},o.forEach=function(){var t=o.create();return function(e,i,n,o,r,s){var a,l;for(i||(i=4),n||(n=0),l=o?Math.min(o*i+n,e.length):e.length,a=n;l>a;a+=i)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],r(t,t,s),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}}(),o.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.exports=o},{"./common.js":224}],233:[function(t,e,i){"use strict";function n(t){return function(){return t}}function o(t,e,i){return t*(1-i)+e*i}function r(t,e,i){for(var n=[],r=0;r<t.length;r++)n[r]=o(t[r],e[r],i);return n}i.interpolated=function(t){if(!t.stops)return n(t);var e=t.stops,i=t.base||1,s=Array.isArray(e[0][1])?r:o;return function(t){for(var n,o,r=0;r<e.length;r++){var a=e[r];if(a[0]<=t&&(n=a),a[0]>t){o=a;break}}if(n&&o){var l=o[0]-n[0],u=t-n[0],c=1===i?u/l:(Math.pow(i,u)-1)/(Math.pow(i,l)-1);return s(n[1],o[1],c)}return n?n[1]:o?o[1]:void 0}},i["piecewise-constant"]=function(t){if(!t.stops)return n(t);var e=t.stops;return function(t){for(var i=0;i<e.length;i++)if(e[i][0]>t)return e[0===i?0:i-1][1];return e[e.length-1][1]}}},{}],234:[function(t,e,i){"use strict";var n=t("../../reference/latest.min.js"),o=t("./parsed");e.exports=function(t){return o(t,n)}},{"../../reference/latest.min.js":237,"./parsed":235}],235:[function(t,e,i){"use strict";function n(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function o(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}var r=t("csscolorparser").parseCSSColor,s=t("util").format;e.exports=function(t,e){function i(t,e){var i={message:(t?t+": ":"")+s.apply(s,Array.prototype.slice.call(arguments,2))};null!==e&&void 0!==e&&e.__line__&&(i.line=e.__line__),h.push(i)}function a(t,o,r){var s=n(o);if("string"===s&&"@"===o[0]){if(e.$version>7)return i(t,o,"constants have been deprecated as of v8");if(!(o in u))return i(t,o,'constant "%s" not found',o);o=u[o],s=n(o)}if(r["function"]&&"object"===s)return a["function"](t,o,r);if(r.type){var l=a[r.type];if(l)return l(t,o,r);r=e[r.type]}a.object(t,o,r)}function l(t){return function(e,o,r){var s=n(o);s!==t&&i(e,o,"%s expected, %s found",t,s),"minimum"in r&&o<r.minimum&&i(e,o,"%s is less than the minimum value %s",o,r.minimum),"maximum"in r&&o>r.maximum&&i(e,o,"%s is greater than the maximum value %s",o,r.maximum)}}var u=t.constants||{},c={},h=[];return a.constants=function(t,o){if(e.$version>7){if(o)return i(t,o,"constants have been deprecated as of v8")}else{var r=n(o);if("object"!==r)return i(t,o,"object expected, %s found",r);for(var s in o)"@"!==s[0]&&i(t+"."+s,o[s],'constants must start with "@"')}},a.source=function(t,n){if(!n.type)return void i(t,n,'"type" is required');var r=o(n.type);switch(r){case"vector":case"raster":if(a.object(t,n,e.source_tile),"url"in n)for(var s in n)["type","url","tileSize"].indexOf(s)<0&&i(t+"."+s,n[s],'a source with a "url" property may not include a "%s" property',s);break;case"geojson":a.object(t,n,e.source_geojson);break;case"video":a.object(t,n,e.source_video);break;case"image":a.object(t,n,e.source_image);break;default:a["enum"](t+".type",n.type,{values:["vector","raster","geojson","video","image"]})}},a.layer=function(n,r){r.type||r.ref||i(n,r,'either "type" or "ref" is required');var s=o(r.type),l=o(r.ref);if(r.id&&(c[r.id]?i(n,r.id,'duplicate layer id "%s", previously used at line %d',r.id,c[r.id]):c[r.id]=r.id.__line__),"ref"in r){["type","source","source-layer","filter","layout"].forEach(function(t){t in r&&i(n,r[t],'"%s" is prohibited for ref layers',t)});var u;t.layers.forEach(function(t){t.id==l&&(u=t)}),u?u.ref?i(n,r.ref,"ref cannot reference another ref layer"):s=u.type:i(n,r.ref,'ref layer "%s" not found',l)}else if("background"!==s)if(r.source){var h=t.sources[r.source];h?"vector"==h.type&&"raster"==s?i(n,r.source,'layer "%s" requires a raster source',r.id):"raster"==h.type&&"raster"!=s&&i(n,r.source,'layer "%s" requires a vector source',r.id):i(n,r.source,'source "%s" not found',r.source)}else i(n,r,'missing required property "source"');a.object(n,r,e.layer,{filter:a.filter,layout:function(t,i){var n=e["layout_"+s];return s&&n&&a(t,i,n)},paint:function(t,i){var n=e["paint_"+s];return s&&n&&a(t,i,n)}})},a.object=function(t,o,r,s){s=s||{};var l=n(o);if("object"!==l)return i(t,o,"object expected, %s found",l);for(var u in o){var c=u.split(".")[0],h=r[c]||r["*"],p=c.match(/^(.*)-transition$/);h?(s[c]||a)((t?t+".":t)+u,o[u],h):p&&r[p[1]]&&r[p[1]].transition?a((t?t+".":t)+u,o[u],e.transition):""!==t&&1!==t.split(".").length&&i(t,o[u],'unknown property "%s"',u)}for(var d in r)r[d].required&&void 0===r[d]["default"]&&void 0===o[d]&&i(t,o,'missing required property "%s"',d)},a.array=function(e,o,r,s){if("array"!==n(o))return i(e,o,"array expected, %s found",n(o));if(r.length&&o.length!==r.length)return i(e,o,"array length %d expected, length %d found",r.length,o.length);if(r["min-length"]&&o.length<r["min-length"])return i(e,o,"array length at least %d expected, length %d found",r["min-length"],o.length);var l={type:r.value};t.version<7&&(l["function"]=r["function"]),"object"===n(r.value)&&(l=r.value);for(var u=0;u<o.length;u++)(s||a)(e+"["+u+"]",o[u],l)},a.filter=function(t,r){var s;if("array"!==n(r))return i(t,r,"array expected, %s found",n(r));if(r.length<1)return i(t,r,"filter array must have at least 1 element");switch(a["enum"](t+"[0]",r[0],e.filter_operator),o(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&"$type"==r[1]&&i(t,r,'"$type" cannot be use with operator "%s"',r[0]);case"==":case"!=":3!=r.length&&i(t,r,'filter array for operator "%s" must have 3 elements',r[0]);case"in":case"!in":r.length>=2&&(s=n(r[1]),"string"!==s?i(t+"[1]",r[1],"string expected, %s found",s):"@"===r[1][0]&&i(t+"[1]",r[1],"filter key cannot be a constant"));for(var l=2;l<r.length;l++)s=n(r[l]),"$type"==r[1]?a["enum"](t+"["+l+"]",r[l],e.geometry_type):"string"===s&&"@"===r[l][0]?i(t+"["+l+"]",r[l],"filter value cannot be a constant"):"string"!==s&&"number"!==s&&"boolean"!==s&&i(t+"["+l+"]",r[l],"string, number, or boolean expected, %s found",s);break;case"any":case"all":case"none":for(l=1;l<r.length;l++)a.filter(t+"["+l+"]",r[l])}},a["function"]=function(t,o,r){a.object(t,o,e["function"],{stops:function(t,e,o){var s=-(1/0);a.array(t,e,o,function(t,e){return"array"!==n(e)?i(t,e,"array expected, %s found",n(e)):2!==e.length?i(t,e,"array length %d expected, length %d found",2,e.length):(a(t+"[0]",e[0],{type:"number"}),a(t+"[1]",e[1],r),void("number"===n(e[0])&&("piecewise-constant"===r["function"]&&e[0]%1!==0&&i(t+"[0]",e[0],"zoom level for piecewise-constant functions must be an integer"),e[0]<s&&i(t+"[0]",e[0],"array stops must appear in ascending order"),s=e[0])))}),"array"===n(e)&&0===e.length&&i(t,e,"array must have at least one stop")}})},a["enum"]=function(t,e,n){-1===n.values.indexOf(o(e))&&i(t,e,"expected one of [%s], %s found",n.values.join(", "),e)},a.color=function(t,e){var o=n(e);return"string"!==o?i(t,e,"color expected, %s found",o):null===r(e)?i(t,e,'color expected, "%s" found',e):void 0},a.number=l("number"),a.string=l("string"),a["boolean"]=l("boolean"),a["*"]=function(){},a("",t,e.$root),e.$version>7&&t.constants&&a.constants("constants",t.constants),h.sort(function(t,e){return t.line-e.line}),h}},{csscolorparser:215,util:95}],236:[function(t,e,i){e.exports=t("./v8.json")},{"./v8.json":238}],237:[function(t,e,i){e.exports=t("./v8.min.json")},{"./v8.min.json":239}],238:[function(t,e,i){e.exports={$version:8,$root:{version:{required:!0,type:"enum",values:[8],doc:"Stylesheet version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number","default":0,period:360,units:"degrees",doc:"Default bearing, in degrees.  The style bearing will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:29},pitch:{type:"number","default":0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface.  The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50},sources:{required:!0,type:"sources",doc:"Data source specifications.",example:{"mapbox-streets":{type:"vector",url:"mapbox://mapbox.mapbox-streets-v6"}}},sprite:{type:"string",doc:"A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended.",example:"mapbox://sprites/mapbox/bright-v8"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format. Valid tokens are {fontstack} and {range}.",example:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties.",example:{duration:300,delay:0}},layers:{required:!0,type:"array",value:"layer",doc:"Layers will be drawn in the order of this array.",example:[{id:"water",source:"mapbox-streets","source-layer":"water",type:"fill",paint:{"fill-color":"#00ffff"}}]}},sources:{"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For GeoJSON and video sources, a URL must be provided."}},source:["source_tile","source_geojson","source_video","source_image"],source_tile:{type:{required:!0,type:"enum",values:["vector","raster"],doc:"The data type of the tile source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<mapid>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},minzoom:{type:"number","default":0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number","default":22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number","default":512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},"*":{type:"*",doc:"Other keys to configure the data source."}},source_geojson:{type:{required:!0,type:"enum",values:["geojson"],doc:"The data type of the GeoJSON source."},data:{type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number","default":14,doc:"Maximum zoom to preserve detail at."},buffer:{type:"number","default":64,doc:"Tile buffer on each side."},tolerance:{type:"number","default":3,doc:"Simplification tolerance (higher means simpler)."}},source_video:{type:{required:!0,type:"enum",values:["video"],doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},source_image:{type:{required:!0,type:"enum",values:["image"],doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image"},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},layer:{id:{type:"string",doc:"Unique layer name."},type:{type:"enum",values:["fill","line","symbol","circle","raster","background"],doc:"Rendering type of this layer."},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},ref:{type:"string",doc:"References another layer to copy `type`, `source`, `source-layer`, `minzoom`, `maxzoom`, `filter`, and `layout` properties from. This allows the layers to share processing and be more efficient."},source:{type:"string",doc:"Name of a source description to be used for this layer."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required if the source supports multiple layers."},minzoom:{type:"number",minimum:0,maximum:22,doc:"The minimum zoom level on which the layer gets parsed and appears on."},maxzoom:{type:"number",minimum:0,maximum:22,doc:"The maximum zoom level on which the layer gets parsed and appears on."},interactive:{type:"boolean",doc:"Enable querying of feature data from this layer for interactivity.","default":!1},filter:{type:"filter",doc:"A expression specifying conditions on source features. Only features that match the filter are displayed."},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."},"paint.*":{type:"paint",doc:"Class-specific paint properties for this layer. The class name is the part after the first dot."}},layout:["layout_fill","layout_line","layout_circle","layout_symbol","layout_raster","layout_background"],layout_background:{visibility:{type:"enum","function":"piecewise-constant",values:["visible","none"],"default":"visible",doc:"The display of this layer. `none` hides this layer."}},layout_fill:{visibility:{type:"enum","function":"piecewise-constant",values:["visible","none"],"default":"visible",doc:"The display of this layer. `none` hides this layer."}},layout_circle:{visibility:{type:"enum","function":"piecewise-constant",values:["visible","none"],"default":"visible",doc:"The display of this layer. `none` hides this layer."}},layout_line:{"line-cap":{type:"enum","function":"piecewise-constant",values:["butt","round","square"],"default":"butt",doc:"The display of line endings."},"line-join":{type:"enum","function":"piecewise-constant",
values:["bevel","round","miter"],"default":"miter",doc:"The display of lines when joining."},"line-miter-limit":{type:"number","default":2,"function":"interpolated",doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}]},"line-round-limit":{type:"number","default":1.05,"function":"interpolated",doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}]},visibility:{type:"enum","function":"piecewise-constant",values:["visible","none"],"default":"visible",doc:"The display of this layer. `none` hides this layer."}},layout_symbol:{"symbol-placement":{type:"enum","function":"piecewise-constant",values:["point","line"],"default":"point",doc:"Label placement relative to its geometry. `line` can only be used on LineStrings and Polygons."},"symbol-spacing":{type:"number","default":250,minimum:1,"function":"interpolated",units:"pixels",doc:"Distance between two symbol anchors.",requires:[{"symbol-placement":"line"}]},"symbol-avoid-edges":{type:"boolean","function":"piecewise-constant","default":!1,doc:"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don't have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer."},"icon-allow-overlap":{type:"boolean","function":"piecewise-constant","default":!1,doc:"If true, the icon will be visible even if it collides with other previously drawn symbols.",requires:["icon-image"]},"icon-ignore-placement":{type:"boolean","function":"piecewise-constant","default":!1,doc:"If true, other symbols can be visible even if they collide with the icon.",requires:["icon-image"]},"icon-optional":{type:"boolean","function":"piecewise-constant","default":!1,doc:"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.",requires:["icon-image","text-field"]},"icon-rotation-alignment":{type:"enum","function":"piecewise-constant",values:["map","viewport"],"default":"viewport",doc:"Orientation of icon when map is rotated.",requires:["icon-image"]},"icon-size":{type:"number","default":1,minimum:0,"function":"interpolated",doc:"Scale factor for icon. 1 is original size, 3 triples the size.",requires:["icon-image"]},"icon-image":{type:"string","function":"piecewise-constant",doc:"A string with {tokens} replaced, referencing the data property to pull from.",tokens:!0},"icon-rotate":{type:"number","default":0,period:360,"function":"interpolated",units:"degrees",doc:"Rotates the icon clockwise.",requires:["icon-image"]},"icon-padding":{type:"number","default":2,minimum:0,"function":"interpolated",units:"pixels",doc:"Size of the additional area around the icon bounding box used for detecting symbol collisions.",requires:["icon-image"]},"icon-keep-upright":{type:"boolean","function":"piecewise-constant","default":!1,doc:"If true, the icon may be flipped to prevent it from being rendered upside-down.",requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}]},"icon-offset":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated",doc:"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"]},"text-rotation-alignment":{type:"enum","function":"piecewise-constant",values:["map","viewport"],"default":"viewport",doc:"Orientation of text when map is rotated.",requires:["text-field"]},"text-field":{type:"string","function":"piecewise-constant","default":"",tokens:!0,doc:"Value to use for a text label. Feature properties are specified using tokens like {field_name}."},"text-font":{type:"array",value:"string","function":"piecewise-constant","default":["Open Sans Regular","Arial Unicode MS Regular"],doc:"Font stack to use for displaying text.",requires:["text-field"]},"text-size":{type:"number","default":16,minimum:0,units:"pixels","function":"interpolated",doc:"Font size.",requires:["text-field"]},"text-max-width":{type:"number","default":10,minimum:0,units:"em","function":"interpolated",doc:"The maximum line width for text wrapping.",requires:["text-field"]},"text-line-height":{type:"number","default":1.2,units:"em","function":"interpolated",doc:"Text leading value for multi-line text.",requires:["text-field"]},"text-letter-spacing":{type:"number","default":0,units:"em","function":"interpolated",doc:"Text tracking amount.",requires:["text-field"]},"text-justify":{type:"enum","function":"piecewise-constant",values:["left","center","right"],"default":"center",doc:"Text justification options.",requires:["text-field"]},"text-anchor":{type:"enum","function":"piecewise-constant",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],"default":"center",doc:"Part of the text placed closest to the anchor.",requires:["text-field"]},"text-max-angle":{type:"number","default":45,units:"degrees","function":"interpolated",doc:"Maximum angle change between adjacent characters.",requires:["text-field",{"symbol-placement":"line"}]},"text-rotate":{type:"number","default":0,period:360,units:"degrees","function":"interpolated",doc:"Rotates the text clockwise.",requires:["text-field"]},"text-padding":{type:"number","default":2,minimum:0,units:"pixels","function":"interpolated",doc:"Size of the additional area around the text bounding box used for detecting symbol collisions.",requires:["text-field"]},"text-keep-upright":{type:"boolean","function":"piecewise-constant","default":!0,doc:"If true, the text may be flipped vertically to prevent it from being rendered upside-down.",requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}]},"text-transform":{type:"enum","function":"piecewise-constant",values:["none","uppercase","lowercase"],"default":"none",doc:"Specifies how to capitalize text, similar to the CSS `text-transform` property.",requires:["text-field"]},"text-offset":{type:"array",doc:"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up.",value:"number",units:"ems","function":"interpolated",length:2,"default":[0,0],requires:["text-field"]},"text-allow-overlap":{type:"boolean","function":"piecewise-constant","default":!1,doc:"If true, the text will be visible even if it collides with other previously drawn symbols.",requires:["text-field"]},"text-ignore-placement":{type:"boolean","function":"piecewise-constant","default":!1,doc:"If true, other symbols can be visible even if they collide with the text.",requires:["text-field"]},"text-optional":{type:"boolean","function":"piecewise-constant","default":!1,doc:"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.",requires:["text-field","icon-image"]},visibility:{type:"enum","function":"piecewise-constant",values:["visible","none"],"default":"visible",doc:"The display of this layer. `none` hides this layer."}},layout_raster:{visibility:{type:"enum","function":"piecewise-constant",values:["visible","none"],"default":"visible",doc:"The display of this layer. `none` hides this layer."}},filter:{type:"array",value:"*",doc:"A filter selects specific features from a layer."},filter_operator:{type:"enum",values:["==","!=",">",">=","<","<=","in","!in","all","any","none"],doc:"The filter operator."},geometry_type:{type:"enum",values:["Point","LineString","Polygon"],doc:"The geometry type for the filter to select."},color_operation:{type:"enum",values:["lighten","saturate","spin","fade","mix"],doc:"A color operation to apply."},"function":{stops:{type:"array",required:!0,doc:"An array of stops.",value:"function_stop"},base:{type:"number","default":1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2,doc:"Zoom level and value pair."},paint:["paint_fill","paint_line","paint_circle","paint_symbol","paint_raster","paint_background"],paint_fill:{"fill-antialias":{type:"boolean","function":"piecewise-constant","default":!0,doc:"Whether or not the fill should be antialiased."},"fill-opacity":{type:"number","function":"interpolated","default":1,minimum:0,maximum:1,doc:"The opacity given to the fill color.",transition:!0},"fill-color":{type:"color","default":"#000000",doc:"The color of the fill.","function":"interpolated",transition:!0,requires:[{"!":"fill-pattern"}]},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.","function":"interpolated",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}]},"fill-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated",transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively."},"fill-translate-anchor":{type:"enum","function":"piecewise-constant",values:["map","viewport"],doc:"Control whether the translation is relative to the map (north) or viewport (screen)","default":"map",requires:["fill-translate"]},"fill-pattern":{type:"string","function":"piecewise-constant",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512)."}},paint_line:{"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.","function":"interpolated","default":1,minimum:0,maximum:1,transition:!0},"line-color":{type:"color",doc:"The color with which the line will be drawn.","default":"#000000","function":"interpolated",transition:!0,requires:[{"!":"line-pattern"}]},"line-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated",transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively."},"line-translate-anchor":{type:"enum","function":"piecewise-constant",values:["map","viewport"],doc:"Control whether the translation is relative to the map (north) or viewport (screen)","default":"map",requires:["line-translate"]},"line-width":{type:"number","default":1,minimum:0,"function":"interpolated",transition:!0,units:"pixels",doc:"Stroke thickness."},"line-gap-width":{type:"number","default":0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.","function":"interpolated",transition:!0,units:"pixels"},"line-blur":{type:"number","default":0,minimum:0,"function":"interpolated",transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels."},"line-dasharray":{type:"array",value:"number","function":"piecewise-constant",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}]},"line-pattern":{type:"string","function":"piecewise-constant",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512)."}},paint_circle:{"circle-radius":{type:"number","default":5,minimum:0,"function":"interpolated",transition:!0,units:"pixels",doc:"Circle radius."},"circle-color":{type:"color","default":"#000000",doc:"The color of the circle.","function":"interpolated",transition:!0},"circle-blur":{type:"number","default":0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.","function":"interpolated",transition:!0},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.","default":1,minimum:0,maximum:1,"function":"interpolated",transition:!0},"circle-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated",transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively."},"circle-translate-anchor":{type:"enum","function":"piecewise-constant",values:["map","viewport"],doc:"Control whether the translation is relative to the map (north) or viewport (screen)","default":"map",requires:["circle-translate"]}},paint_symbol:{"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number","default":1,minimum:0,maximum:1,"function":"interpolated",transition:!0,requires:["icon-image"]},"icon-color":{type:"color","default":"#000000","function":"interpolated",transition:!0,doc:"The color of the icon. This can only be used with sdf icons.",requires:["icon-image"]},"icon-halo-color":{type:"color","default":"rgba(0, 0, 0, 0)","function":"interpolated",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with sdf icons.",requires:["icon-image"]},"icon-halo-width":{type:"number","default":0,minimum:0,"function":"interpolated",transition:!0,units:"pixels",doc:"Distance of halo to the icon outline.",requires:["icon-image"]},"icon-halo-blur":{type:"number","default":0,minimum:0,"function":"interpolated",transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"]},"icon-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated",transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"]},"icon-translate-anchor":{type:"enum","function":"piecewise-constant",values:["map","viewport"],doc:"Control whether the translation is relative to the map (north) or viewport (screen).","default":"map",requires:["icon-image","icon-translate"]},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.","default":1,minimum:0,maximum:1,"function":"interpolated",transition:!0,requires:["text-field"]},"text-color":{type:"color",doc:"The color with which the text will be drawn.","default":"#000000","function":"interpolated",transition:!0,requires:["text-field"]},"text-halo-color":{type:"color","default":"rgba(0, 0, 0, 0)","function":"interpolated",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"]},"text-halo-width":{type:"number","default":0,minimum:0,"function":"interpolated",transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"]},"text-halo-blur":{type:"number","default":0,minimum:0,"function":"interpolated",transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"]},"text-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated",transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"]},"text-translate-anchor":{type:"enum","function":"piecewise-constant",values:["map","viewport"],doc:"Control whether the translation is relative to the map (north) or viewport (screen).","default":"map",requires:["text-field","text-translate"]}},paint_raster:{"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.","default":1,minimum:0,maximum:1,"function":"interpolated",transition:!0},"raster-hue-rotate":{type:"number","default":0,period:360,"function":"interpolated",transition:!0,units:"degrees",doc:"Rotates hues around the color wheel."},"raster-brightness-min":{type:"number","function":"interpolated",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.","default":0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number","function":"interpolated",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.","default":1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.","default":0,minimum:-1,maximum:1,"function":"interpolated",transition:!0},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.","default":0,minimum:-1,maximum:1,"function":"interpolated",transition:!0},"raster-fade-duration":{type:"number","default":300,minimum:0,"function":"interpolated",transition:!0,units:"milliseconds",doc:"Fade duration when a new tile is added."}},paint_background:{"background-color":{type:"color","default":"#000000",doc:"The color with which the background will be drawn.","function":"interpolated",transition:!0,requires:[{"!":"background-pattern"}]},"background-pattern":{type:"string","function":"piecewise-constant",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512)."},"background-opacity":{type:"number","default":1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.","function":"interpolated",transition:!0}},transition:{duration:{type:"number","default":300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number","default":0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}}}},{}],239:[function(t,e,i){e.exports={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number","default":0,period:360,units:"degrees"},pitch:{type:"number","default":0,units:"degrees"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_tile","source_geojson","source_video","source_image"],source_tile:{type:{required:!0,type:"enum",values:["vector","raster"]},url:{type:"string"},tiles:{type:"array",value:"string"},minzoom:{type:"number","default":0},maxzoom:{type:"number","default":22},tileSize:{type:"number","default":512,units:"pixels"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:["geojson"]},data:{type:"*"},maxzoom:{type:"number","default":14},buffer:{type:"number","default":64},tolerance:{type:"number","default":3}},source_video:{type:{required:!0,type:"enum",values:["video"]},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:["image"]},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string"},type:{type:"enum",values:["fill","line","symbol","circle","raster","background"]},metadata:{type:"*"},ref:{type:"string"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:22},maxzoom:{type:"number",minimum:0,maximum:22},interactive:{type:"boolean","default":!1},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"},"paint.*":{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_symbol","layout_raster","layout_background"],layout_background:{visibility:{type:"enum","function":"piecewise-constant",values:["visible","none"],"default":"visible"}},layout_fill:{visibility:{type:"enum","function":"piecewise-constant",values:["visible","none"],"default":"visible"}},layout_circle:{visibility:{type:"enum","function":"piecewise-constant",values:["visible","none"],"default":"visible"}},layout_line:{"line-cap":{type:"enum","function":"piecewise-constant",values:["butt","round","square"],"default":"butt"},"line-join":{type:"enum","function":"piecewise-constant",values:["bevel","round","miter"],"default":"miter"},"line-miter-limit":{type:"number","default":2,"function":"interpolated",requires:[{"line-join":"miter"}]},"line-round-limit":{type:"number","default":1.05,"function":"interpolated",requires:[{"line-join":"round"}]},visibility:{type:"enum","function":"piecewise-constant",values:["visible","none"],"default":"visible"}},layout_symbol:{"symbol-placement":{type:"enum","function":"piecewise-constant",values:["point","line"],"default":"point"},"symbol-spacing":{type:"number","default":250,minimum:1,"function":"interpolated",units:"pixels",requires:[{"symbol-placement":"line"}]},"symbol-avoid-edges":{type:"boolean","function":"piecewise-constant","default":!1},"icon-allow-overlap":{type:"boolean","function":"piecewise-constant","default":!1,requires:["icon-image"]},"icon-ignore-placement":{type:"boolean","function":"piecewise-constant","default":!1,requires:["icon-image"]},"icon-optional":{type:"boolean","function":"piecewise-constant","default":!1,requires:["icon-image","text-field"]},"icon-rotation-alignment":{type:"enum","function":"piecewise-constant",values:["map","viewport"],"default":"viewport",requires:["icon-image"]},"icon-size":{type:"number","default":1,minimum:0,"function":"interpolated",requires:["icon-image"]},"icon-image":{type:"string","function":"piecewise-constant",tokens:!0},"icon-rotate":{type:"number","default":0,period:360,"function":"interpolated",units:"degrees",requires:["icon-image"]},"icon-padding":{type:"number","default":2,minimum:0,"function":"interpolated",units:"pixels",requires:["icon-image"]},"icon-keep-upright":{type:"boolean","function":"piecewise-constant","default":!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}]},"icon-offset":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated",requires:["icon-image"]},"text-rotation-alignment":{type:"enum","function":"piecewise-constant",values:["map","viewport"],"default":"viewport",requires:["text-field"]},"text-field":{type:"string","function":"piecewise-constant","default":"",tokens:!0},"text-font":{type:"array",value:"string","function":"piecewise-constant","default":["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"]},"text-size":{type:"number","default":16,minimum:0,units:"pixels","function":"interpolated",requires:["text-field"]},"text-max-width":{type:"number","default":10,minimum:0,units:"em","function":"interpolated",requires:["text-field"]},"text-line-height":{type:"number","default":1.2,units:"em","function":"interpolated",requires:["text-field"]},"text-letter-spacing":{type:"number","default":0,units:"em","function":"interpolated",requires:["text-field"]},"text-justify":{type:"enum","function":"piecewise-constant",values:["left","center","right"],"default":"center",requires:["text-field"]},"text-anchor":{type:"enum","function":"piecewise-constant",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],"default":"center",requires:["text-field"]},"text-max-angle":{type:"number","default":45,units:"degrees","function":"interpolated",requires:["text-field",{"symbol-placement":"line"}]},"text-rotate":{type:"number","default":0,period:360,units:"degrees","function":"interpolated",requires:["text-field"]},"text-padding":{type:"number","default":2,minimum:0,units:"pixels","function":"interpolated",requires:["text-field"]},"text-keep-upright":{type:"boolean","function":"piecewise-constant","default":!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}]},"text-transform":{type:"enum","function":"piecewise-constant",values:["none","uppercase","lowercase"],"default":"none",requires:["text-field"]},"text-offset":{type:"array",value:"number",units:"ems","function":"interpolated",length:2,"default":[0,0],requires:["text-field"]},"text-allow-overlap":{type:"boolean","function":"piecewise-constant","default":!1,requires:["text-field"]},"text-ignore-placement":{type:"boolean","function":"piecewise-constant","default":!1,requires:["text-field"]},"text-optional":{type:"boolean","function":"piecewise-constant","default":!1,requires:["text-field","icon-image"]},visibility:{type:"enum","function":"piecewise-constant",values:["visible","none"],"default":"visible"}},layout_raster:{visibility:{type:"enum","function":"piecewise-constant",values:["visible","none"],"default":"visible"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:["==","!=",">",">=","<","<=","in","!in","all","any","none"]},geometry_type:{type:"enum",values:["Point","LineString","Polygon"]},color_operation:{type:"enum",values:["lighten","saturate","spin","fade","mix"]},"function":{stops:{type:"array",required:!0,value:"function_stop"},base:{type:"number","default":1,minimum:0}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},paint:["paint_fill","paint_line","paint_circle","paint_symbol","paint_raster","paint_background"],paint_fill:{"fill-antialias":{type:"boolean","function":"piecewise-constant","default":!0},"fill-opacity":{type:"number","function":"interpolated","default":1,minimum:0,maximum:1,transition:!0},"fill-color":{type:"color","default":"#000000","function":"interpolated",transition:!0,requires:[{"!":"fill-pattern"}]},"fill-outline-color":{type:"color","function":"interpolated",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}]},"fill-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated",transition:!0,units:"pixels"},"fill-translate-anchor":{type:"enum","function":"piecewise-constant",values:["map","viewport"],"default":"map",requires:["fill-translate"]},"fill-pattern":{type:"string","function":"piecewise-constant",transition:!0}},paint_line:{"line-opacity":{type:"number","function":"interpolated","default":1,minimum:0,maximum:1,transition:!0},"line-color":{type:"color","default":"#000000","function":"interpolated",transition:!0,requires:[{"!":"line-pattern"}]},"line-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated",transition:!0,units:"pixels"},"line-translate-anchor":{type:"enum","function":"piecewise-constant",values:["map","viewport"],"default":"map",requires:["line-translate"]},"line-width":{type:"number","default":1,minimum:0,"function":"interpolated",transition:!0,units:"pixels"},"line-gap-width":{type:"number","default":0,minimum:0,"function":"interpolated",transition:!0,units:"pixels"},"line-blur":{type:"number","default":0,minimum:0,"function":"interpolated",transition:!0,units:"pixels"},"line-dasharray":{type:"array",value:"number","function":"piecewise-constant",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}]},"line-pattern":{type:"string","function":"piecewise-constant",transition:!0}},paint_circle:{"circle-radius":{type:"number","default":5,minimum:0,"function":"interpolated",transition:!0,units:"pixels"},"circle-color":{type:"color","default":"#000000","function":"interpolated",transition:!0},"circle-blur":{type:"number","default":0,"function":"interpolated",transition:!0},"circle-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated",transition:!0},"circle-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated",transition:!0,units:"pixels"},"circle-translate-anchor":{type:"enum","function":"piecewise-constant",values:["map","viewport"],"default":"map",requires:["circle-translate"]}},paint_symbol:{"icon-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated",transition:!0,requires:["icon-image"]},"icon-color":{type:"color","default":"#000000","function":"interpolated",transition:!0,requires:["icon-image"]},"icon-halo-color":{type:"color","default":"rgba(0, 0, 0, 0)","function":"interpolated",transition:!0,requires:["icon-image"]},"icon-halo-width":{type:"number","default":0,minimum:0,"function":"interpolated",transition:!0,units:"pixels",requires:["icon-image"]},"icon-halo-blur":{type:"number","default":0,minimum:0,"function":"interpolated",transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated",transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate-anchor":{type:"enum","function":"piecewise-constant",values:["map","viewport"],"default":"map",requires:["icon-image","icon-translate"]},"text-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated",transition:!0,requires:["text-field"]},"text-color":{type:"color","default":"#000000","function":"interpolated",transition:!0,requires:["text-field"]},"text-halo-color":{type:"color","default":"rgba(0, 0, 0, 0)","function":"interpolated",transition:!0,requires:["text-field"]},"text-halo-width":{type:"number","default":0,minimum:0,"function":"interpolated",transition:!0,units:"pixels",requires:["text-field"]},"text-halo-blur":{type:"number","default":0,minimum:0,"function":"interpolated",transition:!0,units:"pixels",requires:["text-field"]},"text-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated",transition:!0,units:"pixels",requires:["text-field"]},"text-translate-anchor":{type:"enum","function":"piecewise-constant",values:["map","viewport"],"default":"map",requires:["text-field","text-translate"]}},paint_raster:{"raster-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated",transition:!0},"raster-hue-rotate":{type:"number","default":0,period:360,"function":"interpolated",transition:!0,units:"degrees"},"raster-brightness-min":{type:"number","function":"interpolated","default":0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number","function":"interpolated","default":1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number","default":0,minimum:-1,maximum:1,"function":"interpolated",transition:!0},"raster-contrast":{type:"number","default":0,minimum:-1,maximum:1,"function":"interpolated",transition:!0},"raster-fade-duration":{type:"number","default":300,minimum:0,"function":"interpolated",transition:!0,units:"milliseconds"}},paint_background:{"background-color":{type:"color","default":"#000000","function":"interpolated",transition:!0,requires:[{"!":"background-pattern"}]},"background-pattern":{type:"string","function":"piecewise-constant",transition:!0},"background-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated",transition:!0}},transition:{duration:{type:"number","default":300,minimum:0,units:"milliseconds"},delay:{type:"number","default":0,minimum:0,units:"milliseconds"}}}},{}],240:[function(t,e,i){"use strict";function n(t){var e;t&&t.length&&(e=t,t=e.length);var i=new Uint8Array(t||0);return e&&i.set(e),i.readUInt32LE=r.readUInt32LE,i.writeUInt32LE=r.writeUInt32LE,i.readInt32LE=r.readInt32LE,i.writeInt32LE=r.writeInt32LE,i.readFloatLE=r.readFloatLE,i.writeFloatLE=r.writeFloatLE,i.readDoubleLE=r.readDoubleLE,i.writeDoubleLE=r.writeDoubleLE,i.toString=r.toString,i.write=r.write,i.slice=r.slice,i.copy=r.copy,i._isBuffer=!0,i}function o(t){for(var e,i,n=t.length,o=[],r=0;n>r;r++){if(e=t.charCodeAt(r),e>55295&&57344>e){if(!i){e>56319||r+1===n?o.push(239,191,189):i=e;continue}if(56320>e){o.push(239,191,189),i=e;continue}e=i-55296<<10|e-56320|65536,i=null}else i&&(o.push(239,191,189),i=null);128>e?o.push(e):2048>e?o.push(e>>6|192,63&e|128):65536>e?o.push(e>>12|224,e>>6&63|128,63&e|128):o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}return o}e.exports=n;var r,s,a,l=t("ieee754");r={readUInt32LE:function(t){return(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},writeUInt32LE:function(t,e){this[e]=t,this[e+1]=t>>>8,this[e+2]=t>>>16,
this[e+3]=t>>>24},readInt32LE:function(t){return(this[t]|this[t+1]<<8|this[t+2]<<16)+(this[t+3]<<24)},readFloatLE:function(t){return l.read(this,t,!0,23,4)},readDoubleLE:function(t){return l.read(this,t,!0,52,8)},writeFloatLE:function(t,e){return l.write(this,t,e,!0,23,4)},writeDoubleLE:function(t,e){return l.write(this,t,e,!0,52,8)},toString:function(t,e,i){var n="",o="";e=e||0,i=Math.min(this.length,i||this.length);for(var r=e;i>r;r++){var s=this[r];127>=s?(n+=decodeURIComponent(o)+String.fromCharCode(s),o=""):o+="%"+s.toString(16)}return n+=decodeURIComponent(o)},write:function(t,e){for(var i=t===s?a:o(t),n=0;n<i.length;n++)this[e+n]=i[n]},slice:function(t,e){return this.subarray(t,e)},copy:function(t,e){e=e||0;for(var i=0;i<this.length;i++)t[e+i]=this[i]}},r.writeInt32LE=r.writeUInt32LE,n.byteLength=function(t){return s=t,a=o(t),a.length},n.isBuffer=function(t){return!(!t||!t._isBuffer)}},{ieee754:242}],241:[function(t,e,i){(function(i){"use strict";function n(t){this.buf=d.isBuffer(t)?t:new d(t||0),this.pos=0,this.length=this.buf.length}function o(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function r(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function s(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function a(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function l(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function u(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function c(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function h(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function p(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}e.exports=n;var d=i.Buffer||t("./buffer");n.Varint=0,n.Fixed64=1,n.Bytes=2,n.Fixed32=5;var f=4294967296,m=1/f,g=Math.pow(2,63);n.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var n=this.readVarint(),o=n>>3,r=this.pos;t(o,e,this),this.pos===r&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=this.buf.readUInt32LE(this.pos);return this.pos+=4,t},readSFixed32:function(){var t=this.buf.readInt32LE(this.pos);return this.pos+=4,t},readFixed64:function(){var t=this.buf.readUInt32LE(this.pos)+this.buf.readUInt32LE(this.pos+4)*f;return this.pos+=8,t},readSFixed64:function(){var t=this.buf.readUInt32LE(this.pos)+this.buf.readInt32LE(this.pos+4)*f;return this.pos+=8,t},readFloat:function(){var t=this.buf.readFloatLE(this.pos);return this.pos+=4,t},readDouble:function(){var t=this.buf.readDoubleLE(this.pos);return this.pos+=8,t},readVarint:function(){var t,e,i,n,o,r,s=this.buf;if(i=s[this.pos++],128>i)return i;if(i=127&i,n=s[this.pos++],128>n)return i|n<<7;if(n=(127&n)<<7,o=s[this.pos++],128>o)return i|n|o<<14;if(o=(127&o)<<14,r=s[this.pos++],128>r)return i|n|o|r<<21;if(t=i|n|o|(127&r)<<21,e=s[this.pos++],t+=268435456*(127&e),128>e)return t;if(e=s[this.pos++],t+=34359738368*(127&e),128>e)return t;if(e=s[this.pos++],t+=4398046511104*(127&e),128>e)return t;if(e=s[this.pos++],t+=562949953421312*(127&e),128>e)return t;if(e=s[this.pos++],t+=72057594037927940*(127&e),128>e)return t;if(e=s[this.pos++],t+=0x8000000000000000*(127&e),128>e)return t;throw new Error("Expected varint not more than 10 bytes")},readVarint64:function(){var t=this.pos,e=this.readVarint();if(g>e)return e;for(var i=this.pos-2;255===this.buf[i];)i--;t>i&&(i=t),e=0;for(var n=0;i-t+1>n;n++){var o=127&~this.buf[t+n];e+=4>n?o<<7*n:o*Math.pow(2,7*n)}return-e-1},readSVarint:function(){var t=this.readVarint();return t%2===1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.buf.toString("utf8",this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.slice(this.pos,t);return this.pos=t,e},readPackedVarint:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readVarint());return e},readPackedSVarint:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(t){var e=7&t;if(e===n.Varint)for(;this.buf[this.pos++]>127;);else if(e===n.Bytes)this.pos=this.readVarint()+this.pos;else if(e===n.Fixed32)this.pos+=4;else{if(e!==n.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new d(e);this.buf.copy(i),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.slice(0,this.length)},writeFixed32:function(t){this.realloc(4),this.buf.writeUInt32LE(t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),this.buf.writeInt32LE(t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),this.buf.writeInt32LE(-1&t,this.pos),this.buf.writeUInt32LE(Math.floor(t*m),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),this.buf.writeInt32LE(-1&t,this.pos),this.buf.writeInt32LE(Math.floor(t*m),this.pos+4),this.pos+=8},writeVarint:function(t){if(t=+t,127>=t)this.realloc(1),this.buf[this.pos++]=t;else if(16383>=t)this.realloc(2),this.buf[this.pos++]=t>>>0&127|128,this.buf[this.pos++]=t>>>7&127;else if(2097151>=t)this.realloc(3),this.buf[this.pos++]=t>>>0&127|128,this.buf[this.pos++]=t>>>7&127|128,this.buf[this.pos++]=t>>>14&127;else if(268435455>=t)this.realloc(4),this.buf[this.pos++]=t>>>0&127|128,this.buf[this.pos++]=t>>>7&127|128,this.buf[this.pos++]=t>>>14&127|128,this.buf[this.pos++]=t>>>21&127;else{for(var e=this.pos;t>=128;)this.realloc(1),this.buf[this.pos++]=255&t|128,t/=128;if(this.realloc(1),this.buf[this.pos++]=0|t,this.pos-e>10)throw new Error("Given varint doesn't fit into 10 bytes")}},writeSVarint:function(t){this.writeVarint(0>t?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t);var e=d.byteLength(t);this.writeVarint(e),this.realloc(e),this.buf.write(t,this.pos),this.pos+=e},writeFloat:function(t){this.realloc(4),this.buf.writeFloatLE(t,this.pos),this.pos+=4},writeDouble:function(t){this.realloc(8),this.buf.writeDoubleLE(t,this.pos),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;e>i;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var n=this.pos-i,o=127>=n?1:16383>=n?2:2097151>=n?3:268435455>=n?4:Math.ceil(Math.log(n)/(7*Math.LN2));if(o>1){this.realloc(o-1);for(var r=this.pos-1;r>=i;r--)this.buf[r+o-1]=this.buf[r]}this.pos=i-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,i){this.writeTag(t,n.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){this.writeMessage(t,o,e)},writePackedSVarint:function(t,e){this.writeMessage(t,r,e)},writePackedBoolean:function(t,e){this.writeMessage(t,l,e)},writePackedFloat:function(t,e){this.writeMessage(t,s,e)},writePackedDouble:function(t,e){this.writeMessage(t,a,e)},writePackedFixed32:function(t,e){this.writeMessage(t,u,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,c,e)},writePackedFixed64:function(t,e){this.writeMessage(t,h,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,p,e)},writeBytesField:function(t,e){this.writeTag(t,n.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,n.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,n.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,n.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,n.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,n.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,n.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,n.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,n.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,n.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./buffer":240}],242:[function(t,e,i){arguments[4][90][0].apply(i,arguments)},{dup:90}],243:[function(t,e,i){"use strict";function n(t,e){this.x=t,this.y=e}e.exports=n,n.prototype={clone:function(){return new n(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,i=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=i,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),i=Math.sin(t),n=e*this.x-i*this.y,o=i*this.x+e*this.y;return this.x=n,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},n.convert=function(t){return t instanceof n?t:Array.isArray(t)?new n(t[0],t[1]):t}},{}],244:[function(t,e,i){!function(){"use strict";function t(e,i){return this instanceof t?(this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&this._initFormat(i),void this.clear()):new t(e,i)}function i(t,e){t.bbox=n(t,0,t.children.length,e)}function n(t,e,i,n){for(var s,a=o(),l=e;i>l;l++)s=t.children[l],r(a,t.leaf?n(s):s.bbox);return a}function o(){return[1/0,1/0,-(1/0),-(1/0)]}function r(t,e){return t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t}function s(t,e){return t.bbox[0]-e.bbox[0]}function a(t,e){return t.bbox[1]-e.bbox[1]}function l(t){return(t[2]-t[0])*(t[3]-t[1])}function u(t){return t[2]-t[0]+(t[3]-t[1])}function c(t,e){return(Math.max(e[2],t[2])-Math.min(e[0],t[0]))*(Math.max(e[3],t[3])-Math.min(e[1],t[1]))}function h(t,e){var i=Math.max(t[0],e[0]),n=Math.max(t[1],e[1]),o=Math.min(t[2],e[2]),r=Math.min(t[3],e[3]);return Math.max(0,o-i)*Math.max(0,r-n)}function p(t,e){return t[0]<=e[0]&&t[1]<=e[1]&&e[2]<=t[2]&&e[3]<=t[3]}function d(t,e){return e[0]<=t[2]&&e[1]<=t[3]&&e[2]>=t[0]&&e[3]>=t[1]}function f(t,e,i,n,o){for(var r,s=[e,i];s.length;)i=s.pop(),e=s.pop(),n>=i-e||(r=e+Math.ceil((i-e)/n/2)*n,m(t,e,i,r,o),s.push(e,r,r,i))}function m(t,e,i,n,o){for(var r,s,a,l,u,c,h,p,d;i>e;){for(i-e>600&&(r=i-e+1,s=n-e+1,a=Math.log(r),l=.5*Math.exp(2*a/3),u=.5*Math.sqrt(a*l*(r-l)/r)*(0>s-r/2?-1:1),c=Math.max(e,Math.floor(n-s*l/r+u)),h=Math.min(i,Math.floor(n+(r-s)*l/r+u)),m(t,c,h,n,o)),p=t[n],s=e,d=i,g(t,e,n),o(t[i],p)>0&&g(t,e,i);d>s;){for(g(t,s,d),s++,d--;o(t[s],p)<0;)s++;for(;o(t[d],p)>0;)d--}0===o(t[e],p)?g(t,e,d):(d++,g(t,d,i)),n>=d&&(e=d+1),d>=n&&(i=d-1)}}function g(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}t.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],n=this.toBBox;if(!d(t,e.bbox))return i;for(var o,r,s,a,l=[];e;){for(o=0,r=e.children.length;r>o;o++)s=e.children[o],a=e.leaf?n(s):s.bbox,d(t,a)&&(e.leaf?i.push(s):p(t,a)?this._all(s,i):l.push(s));e=l.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!d(t,e.bbox))return!1;for(var n,o,r,s,a=[];e;){for(n=0,o=e.children.length;o>n;n++)if(r=e.children[n],s=e.leaf?i(r):r.bbox,d(t,s)){if(e.leaf||p(t,s))return!0;a.push(r)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;i>e;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var o=this.data;this.data=n,n=o}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data={children:[],height:1,bbox:o(),leaf:!0},this},remove:function(t){if(!t)return this;for(var e,i,n,o,r=this.data,s=this.toBBox(t),a=[],l=[];r||a.length;){if(r||(r=a.pop(),i=a[a.length-1],e=l.pop(),o=!0),r.leaf&&(n=r.children.indexOf(t),-1!==n))return r.children.splice(n,1),a.push(r),this._condense(a),this;o||r.leaf||!p(r.bbox,s)?i?(e++,r=i.children[e],o=!1):r=null:(a.push(r),l.push(e),e=0,i=r,r=r.children[0])}return this},toBBox:function(t){return t},compareMinX:function(t,e){return t[0]-e[0]},compareMinY:function(t,e){return t[1]-e[1]},toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,n,o){var r,s=n-e+1,a=this._maxEntries;if(a>=s)return r={children:t.slice(e,n+1),height:1,bbox:null,leaf:!0},i(r,this.toBBox),r;o||(o=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,o-1))),r={children:[],height:o,bbox:null};var l,u,c,h,p=Math.ceil(s/a),d=p*Math.ceil(Math.sqrt(a));for(f(t,e,n,d,this.compareMinX),l=e;n>=l;l+=d)for(c=Math.min(l+d-1,n),f(t,l,c,p,this.compareMinY),u=l;c>=u;u+=p)h=Math.min(u+p-1,c),r.children.push(this._build(t,u,h,o-1));return i(r,this.toBBox),r},_chooseSubtree:function(t,e,i,n){for(var o,r,s,a,u,h,p,d;;){if(n.push(e),e.leaf||n.length-1===i)break;for(p=d=1/0,o=0,r=e.children.length;r>o;o++)s=e.children[o],u=l(s.bbox),h=c(t,s.bbox)-u,d>h?(d=h,p=p>u?u:p,a=s):h===d&&p>u&&(p=u,a=s);e=a}return e},_insert:function(t,e,i){var n=this.toBBox,o=i?t.bbox:n(t),s=[],a=this._chooseSubtree(o,this.data,e,s);for(a.children.push(t),r(a.bbox,o);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(o,s,e)},_split:function(t,e){var n=t[e],o=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,o);var s=this._chooseSplitIndex(n,r,o),a={children:n.children.splice(s,n.children.length-s),height:n.height};n.leaf&&(a.leaf=!0),i(n,this.toBBox),i(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data={children:[t,e],height:t.height+1},i(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var o,r,s,a,u,c,p,d;for(c=p=1/0,o=e;i-e>=o;o++)r=n(t,0,o,this.toBBox),s=n(t,o,i,this.toBBox),a=h(r,s),u=l(r)+l(s),c>a?(c=a,d=o,p=p>u?u:p):a===c&&p>u&&(p=u,d=o);return d},_chooseSplitAxis:function(t,e,i){var n=t.leaf?this.compareMinX:s,o=t.leaf?this.compareMinY:a,r=this._allDistMargin(t,e,i,n),l=this._allDistMargin(t,e,i,o);l>r&&t.children.sort(n)},_allDistMargin:function(t,e,i,o){t.children.sort(o);var s,a,l=this.toBBox,c=n(t,0,e,l),h=n(t,i-e,i,l),p=u(c)+u(h);for(s=e;i-e>s;s++)a=t.children[s],r(c,t.leaf?l(a):a.bbox),p+=u(c);for(s=i-e-1;s>=e;s--)a=t.children[s],r(h,t.leaf?l(a):a.bbox),p+=u(h);return p},_adjustParentBBoxes:function(t,e,i){for(var n=i;n>=0;n--)r(e[n].bbox,t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children,e.splice(e.indexOf(t[n]),1)):this.clear():i(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return [a"+t.join(", a")+"];")}},"function"==typeof define&&define.amd?define("rbush",function(){return t}):"undefined"!=typeof e?e.exports=t:"undefined"!=typeof self?self.rbush=t:window.rbush=t}()},{}],245:[function(t,e,i){void function(t,n){"function"==typeof define&&define.amd?define(n):"object"==typeof i?e.exports=n():t.resolveUrl=n()}(this,function(){function t(){var t=arguments.length;if(0===t)throw new Error("resolveUrl requires at least one argument; got none.");var e=document.createElement("base");if(e.href=arguments[0],1===t)return e.href;var i=document.getElementsByTagName("head")[0];i.insertBefore(e,i.firstChild);for(var n,o=document.createElement("a"),r=1;t>r;r++)o.href=arguments[r],n=o.href,e.href=n;return i.removeChild(e),n}return t})},{}],246:[function(t,e,i){function n(t,e,i,n){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=i,this.p2y=n}e.exports=n,n.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},n.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},n.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},n.prototype.solveCurveX=function(t,e){"undefined"==typeof e&&(e=1e-6);var i,n,o,r,s;for(o=t,s=0;8>s;s++){if(r=this.sampleCurveX(o)-t,Math.abs(r)<e)return o;var a=this.sampleCurveDerivativeX(o);if(Math.abs(a)<1e-6)break;o-=r/a}if(i=0,n=1,o=t,i>o)return i;if(o>n)return n;for(;n>i;){if(r=this.sampleCurveX(o),Math.abs(r-t)<e)return o;t>r?i=o:n=o,o=.5*(n-i)+i}return o},n.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}},{}],247:[function(t,e,i){e.exports.VectorTile=t("./lib/vectortile.js"),e.exports.VectorTileFeature=t("./lib/vectortilefeature.js"),e.exports.VectorTileLayer=t("./lib/vectortilelayer.js")},{"./lib/vectortile.js":248,"./lib/vectortilefeature.js":249,"./lib/vectortilelayer.js":250}],248:[function(t,e,i){"use strict";function n(t,e){this.layers=t.readFields(o,{},e)}function o(t,e,i){if(3===t){var n=new r(i,i.readVarint()+i.pos);n.length&&(e[n.name]=n)}}var r=t("./vectortilelayer");e.exports=n},{"./vectortilelayer":250}],249:[function(t,e,i){"use strict";function n(t,e,i,n,r){this.properties={},this.extent=i,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=r,t.readFields(o,this,e)}function o(t,e,i){1==t?e._id=i.readVarint():2==t?r(i,e):3==t?e.type=i.readVarint():4==t&&(e._geometry=i.pos)}function r(t,e){for(var i=t.readVarint()+t.pos;t.pos<i;){var n=e._keys[t.readVarint()],o=e._values[t.readVarint()];e.properties[n]=o}}var s=t("point-geometry");e.exports=n,n.types=["Unknown","Point","LineString","Polygon"],n.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,i=t.readVarint()+t.pos,n=1,o=0,r=0,a=0,l=[];t.pos<i;){if(!o){var u=t.readVarint();n=7&u,o=u>>3}if(o--,1===n||2===n)r+=t.readSVarint(),a+=t.readSVarint(),1===n&&(e&&l.push(e),e=[]),e.push(new s(r,a));else{if(7!==n)throw new Error("unknown command "+n);e&&e.push(e[0].clone())}}return e&&l.push(e),l},n.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,i=1,n=0,o=0,r=0,s=1/0,a=-(1/0),l=1/0,u=-(1/0);t.pos<e;){if(!n){var c=t.readVarint();i=7&c,n=c>>3}if(n--,1===i||2===i)o+=t.readSVarint(),r+=t.readSVarint(),s>o&&(s=o),o>a&&(a=o),l>r&&(l=r),r>u&&(u=r);else if(7!==i)throw new Error("unknown command "+i)}return[s,l,a,u]},n.prototype.toGeoJSON=function(t,e,i){for(var o=this.extent*Math.pow(2,i),r=this.extent*t,s=this.extent*e,a=this.loadGeometry(),l=n.types[this.type],u=0;u<a.length;u++)for(var c=a[u],h=0;h<c.length;h++){var p=c[h],d=180-360*(p.y+s)/o;c[h]=[360*(p.x+r)/o-180,360/Math.PI*Math.atan(Math.exp(d*Math.PI/180))-90]}return"Point"===l&&1===a.length?a=a[0][0]:"Point"===l?(a=a[0],l="MultiPoint"):"LineString"===l&&1===a.length?a=a[0]:"LineString"===l&&(l="MultiLineString"),{type:"Feature",geometry:{type:l,coordinates:a},properties:this.properties}}},{"point-geometry":243}],250:[function(t,e,i){"use strict";function n(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(o,this,e),this.length=this._features.length}function o(t,e,i){15===t?e.version=i.readVarint():1===t?e.name=i.readString():5===t?e.extent=i.readVarint():2===t?e._features.push(i.pos):3===t?e._keys.push(i.readString()):4===t&&e._values.push(r(i))}function r(t){for(var e=null,i=t.readVarint()+t.pos;t.pos<i;){var n=t.readVarint()>>3;e=1===n?t.readString():2===n?t.readFloat():3===n?t.readDouble():4===n?t.readVarint64():5===n?t.readVarint():6===n?t.readSVarint():7===n?t.readBoolean():null}return e}var s=t("./vectortilefeature.js");e.exports=n,n.prototype.feature=function(t){if(0>t||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new s(this._pbf,e,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":249}],251:[function(t,e,i){var n=arguments[3],o=arguments[4],r=arguments[5],s=JSON.stringify;e.exports=function(t){for(var e,i=Object.keys(r),a=0,l=i.length;l>a;a++){var u=i[a];if(r[u].exports===t){e=u;break}}if(!e){e=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var c={},a=0,l=i.length;l>a;a++){var u=i[a];c[u]=u}o[e]=[Function(["require","module","exports"],"("+t+")(self)"),c]}var h=Math.floor(Math.pow(16,8)*Math.random()).toString(16),p={};p[e]=e,o[h]=[Function(["require"],"require("+s(e)+")(self)"),p];var d="("+n+")({"+Object.keys(o).map(function(t){return s(t)+":["+o[t][0]+","+s(o[t][1])+"]"}).join(",")+"},{},["+s(h)+"])",f=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(f.createObjectURL(new Blob([d],{type:"text/javascript"})))}},{}],252:[function(t,e,i){!function(t,n){"object"==typeof i&&"undefined"!=typeof e?e.exports=n():"function"==typeof define&&define.amd?define(n):t.moment=n()}(this,function(){"use strict";function i(){return Ii.apply(null,arguments)}function n(t){Ii=t}function o(t){return"[object Array]"===Object.prototype.toString.call(t)}function r(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function s(t,e){var i,n=[];for(i=0;i<t.length;++i)n.push(e(t[i],i));return n}function a(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function l(t,e){for(var i in e)a(e,i)&&(t[i]=e[i]);return a(e,"toString")&&(t.toString=e.toString),a(e,"valueOf")&&(t.valueOf=e.valueOf),t}function u(t,e,i,n){return Rt(t,e,i,n,!0).utc()}function c(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function h(t){return null==t._pf&&(t._pf=c()),t._pf}function p(t){if(null==t._isValid){var e=h(t);t._isValid=!(isNaN(t._d.getTime())||!(e.overflow<0)||e.empty||e.invalidMonth||e.invalidWeekday||e.nullInput||e.invalidFormat||e.userInvalidated),t._strict&&(t._isValid=t._isValid&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour)}return t._isValid}function d(t){var e=u(NaN);return null!=t?l(h(e),t):h(e).userInvalidated=!0,e}function f(t,e){var i,n,o;if("undefined"!=typeof e._isAMomentObject&&(t._isAMomentObject=e._isAMomentObject),"undefined"!=typeof e._i&&(t._i=e._i),"undefined"!=typeof e._f&&(t._f=e._f),"undefined"!=typeof e._l&&(t._l=e._l),"undefined"!=typeof e._strict&&(t._strict=e._strict),"undefined"!=typeof e._tzm&&(t._tzm=e._tzm),"undefined"!=typeof e._isUTC&&(t._isUTC=e._isUTC),"undefined"!=typeof e._offset&&(t._offset=e._offset),"undefined"!=typeof e._pf&&(t._pf=h(e)),"undefined"!=typeof e._locale&&(t._locale=e._locale),Oi.length>0)for(i in Oi)n=Oi[i],o=e[n],"undefined"!=typeof o&&(t[n]=o);return t}function m(t){f(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),ji===!1&&(ji=!0,i.updateOffset(this),ji=!1)}function g(t){return t instanceof m||null!=t&&null!=t._isAMomentObject}function y(t){return 0>t?Math.ceil(t):Math.floor(t)}function v(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=y(e)),i}function b(t,e,i){var n,o=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),s=0;for(n=0;o>n;n++)(i&&t[n]!==e[n]||!i&&v(t[n])!==v(e[n]))&&s++;return s+r}function x(){}function _(t){return t?t.toLowerCase().replace("_","-"):t}function w(t){for(var e,i,n,o,r=0;r<t.length;){for(o=_(t[r]).split("-"),e=o.length,i=_(t[r+1]),i=i?i.split("-"):null;e>0;){if(n=S(o.slice(0,e).join("-")))return n;if(i&&i.length>=e&&b(o,i,!0)>=e-1)break;e--}r++}return null}function S(i){var n=null;if(!Ui[i]&&"undefined"!=typeof e&&e&&e.exports)try{n=Ni._abbr,t("./locale/"+i),k(n)}catch(o){}return Ui[i]}function k(t,e){var i;return t&&(i="undefined"==typeof e?E(t):T(t,e),i&&(Ni=i)),Ni._abbr}function T(t,e){return null!==e?(e.abbr=t,Ui[t]=Ui[t]||new x,Ui[t].set(e),k(t),Ui[t]):(delete Ui[t],null)}function E(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Ni;if(!o(t)){if(e=S(t))return e;t=[t]}return w(t)}function M(t,e){var i=t.toLowerCase();Bi[i]=Bi[i+"s"]=Bi[e]=t}function C(t){return"string"==typeof t?Bi[t]||Bi[t.toLowerCase()]:void 0}function A(t){var e,i,n={};for(i in t)a(t,i)&&(e=C(i),e&&(n[e]=t[i]));return n}function R(t,e){return function(n){return null!=n?(z(this,t,n),i.updateOffset(this,e),this):D(this,t)}}function D(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function z(t,e,i){return t._d["set"+(t._isUTC?"UTC":"")+e](i)}function L(t,e){var i;if("object"==typeof t)for(i in t)this.set(i,t[i]);else if(t=C(t),"function"==typeof this[t])return this[t](e);return this}function P(t,e,i){var n=""+Math.abs(t),o=e-n.length,r=t>=0;return(r?i?"+":"":"-")+Math.pow(10,Math.max(0,o)).toString().substr(1)+n}function I(t,e,i,n){var o=n;"string"==typeof n&&(o=function(){return this[n]()}),t&&(Hi[t]=o),e&&(Hi[e[0]]=function(){return P(o.apply(this,arguments),e[1],e[2])}),i&&(Hi[i]=function(){return this.localeData().ordinal(o.apply(this,arguments),t)})}function N(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function O(t){var e,i,n=t.match(Fi);for(e=0,i=n.length;i>e;e++)Hi[n[e]]?n[e]=Hi[n[e]]:n[e]=N(n[e]);return function(o){var r="";for(e=0;i>e;e++)r+=n[e]instanceof Function?n[e].call(o,t):n[e];return r}}function j(t,e){return t.isValid()?(e=U(e,t.localeData()),$i[e]=$i[e]||O(e),$i[e](t)):t.localeData().invalidDate()}function U(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(qi.lastIndex=0;n>=0&&qi.test(t);)t=t.replace(qi,i),qi.lastIndex=0,n-=1;return t}function B(t){return"function"==typeof t&&"[object Function]"===Object.prototype.toString.call(t)}function F(t,e,i){sn[t]=B(e)?e:function(t){return t&&i?i:e}}function q(t,e){return a(sn,t)?sn[t](e._strict,e._locale):new RegExp($(t))}function $(t){return t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,o){return e||i||n||o}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function H(t,e){var i,n=e;for("string"==typeof t&&(t=[t]),"number"==typeof e&&(n=function(t,i){i[e]=v(t)}),i=0;i<t.length;i++)an[t[i]]=n}function Y(t,e){H(t,function(t,i,n,o){n._w=n._w||{},e(t,n._w,n,o)})}function G(t,e,i){null!=e&&a(an,t)&&an[t](e,i._a,i,t)}function W(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function V(t){return this._months[t.month()]}function X(t){return this._monthsShort[t.month()]}function Z(t,e,i){var n,o,r;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;12>n;n++){if(o=u([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(r="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[n]=new RegExp(r.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}}function J(t,e){var i;return"string"==typeof e&&(e=t.localeData().monthsParse(e),"number"!=typeof e)?t:(i=Math.min(t.date(),W(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t)}function K(t){return null!=t?(J(this,t),i.updateOffset(this,!0),this):D(this,"Month")}function Q(){return W(this.year(),this.month())}function tt(t){var e,i=t._a;return i&&-2===h(t).overflow&&(e=i[un]<0||i[un]>11?un:i[cn]<1||i[cn]>W(i[ln],i[un])?cn:i[hn]<0||i[hn]>24||24===i[hn]&&(0!==i[pn]||0!==i[dn]||0!==i[fn])?hn:i[pn]<0||i[pn]>59?pn:i[dn]<0||i[dn]>59?dn:i[fn]<0||i[fn]>999?fn:-1,h(t)._overflowDayOfYear&&(ln>e||e>cn)&&(e=cn),h(t).overflow=e),t}function et(t){i.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function it(t,e){var i=!0;return l(function(){return i&&(et(t+"\n"+(new Error).stack),i=!1),e.apply(this,arguments)},e)}function nt(t,e){yn[t]||(et(e),yn[t]=!0)}function ot(t){var e,i,n=t._i,o=vn.exec(n);if(o){for(h(t).iso=!0,e=0,i=bn.length;i>e;e++)if(bn[e][1].exec(n)){t._f=bn[e][0];break}for(e=0,i=xn.length;i>e;e++)if(xn[e][1].exec(n)){t._f+=(o[6]||" ")+xn[e][0];break}n.match(nn)&&(t._f+="Z"),St(t)}else t._isValid=!1}function rt(t){var e=_n.exec(t._i);return null!==e?void(t._d=new Date(+e[1])):(ot(t),void(t._isValid===!1&&(delete t._isValid,i.createFromInputFallback(t))))}function st(t,e,i,n,o,r,s){var a=new Date(t,e,i,n,o,r,s);return 1970>t&&a.setFullYear(t),a}function at(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function lt(t){return ut(t)?366:365}function ut(t){return t%4===0&&t%100!==0||t%400===0}function ct(){return ut(this.year())}function ht(t,e,i){var n,o=i-e,r=i-t.day();return r>o&&(r-=7),o-7>r&&(r+=7),n=Dt(t).add(r,"d"),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function pt(t){return ht(t,this._week.dow,this._week.doy).week}function dt(){return this._week.dow}function ft(){return this._week.doy}function mt(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function gt(t){var e=ht(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function yt(t,e,i,n,o){var r,s=6+o-n,a=at(t,0,1+s),l=a.getUTCDay();return o>l&&(l+=7),i=null!=i?1*i:o,r=1+s+7*(e-1)-l+i,{year:r>0?t:t-1,dayOfYear:r>0?r:lt(t-1)+r}}function vt(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function bt(t,e,i){return null!=t?t:null!=e?e:i}function xt(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function _t(t){var e,i,n,o,r=[];if(!t._d){for(n=xt(t),t._w&&null==t._a[cn]&&null==t._a[un]&&wt(t),t._dayOfYear&&(o=bt(t._a[ln],n[ln]),t._dayOfYear>lt(o)&&(h(t)._overflowDayOfYear=!0),i=at(o,0,t._dayOfYear),t._a[un]=i.getUTCMonth(),t._a[cn]=i.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=r[e]=n[e];for(;7>e;e++)t._a[e]=r[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[hn]&&0===t._a[pn]&&0===t._a[dn]&&0===t._a[fn]&&(t._nextDay=!0,t._a[hn]=0),t._d=(t._useUTC?at:st).apply(null,r),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),
t._nextDay&&(t._a[hn]=24)}}function wt(t){var e,i,n,o,r,s,a;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(r=1,s=4,i=bt(e.GG,t._a[ln],ht(Dt(),1,4).year),n=bt(e.W,1),o=bt(e.E,1)):(r=t._locale._week.dow,s=t._locale._week.doy,i=bt(e.gg,t._a[ln],ht(Dt(),r,s).year),n=bt(e.w,1),null!=e.d?(o=e.d,r>o&&++n):o=null!=e.e?e.e+r:r),a=yt(i,n,o,s,r),t._a[ln]=a.year,t._dayOfYear=a.dayOfYear}function St(t){if(t._f===i.ISO_8601)return void ot(t);t._a=[],h(t).empty=!0;var e,n,o,r,s,a=""+t._i,l=a.length,u=0;for(o=U(t._f,t._locale).match(Fi)||[],e=0;e<o.length;e++)r=o[e],n=(a.match(q(r,t))||[])[0],n&&(s=a.substr(0,a.indexOf(n)),s.length>0&&h(t).unusedInput.push(s),a=a.slice(a.indexOf(n)+n.length),u+=n.length),Hi[r]?(n?h(t).empty=!1:h(t).unusedTokens.push(r),G(r,n,t)):t._strict&&!n&&h(t).unusedTokens.push(r);h(t).charsLeftOver=l-u,a.length>0&&h(t).unusedInput.push(a),h(t).bigHour===!0&&t._a[hn]<=12&&t._a[hn]>0&&(h(t).bigHour=void 0),t._a[hn]=kt(t._locale,t._a[hn],t._meridiem),_t(t),tt(t)}function kt(t,e,i){var n;return null==i?e:null!=t.meridiemHour?t.meridiemHour(e,i):null!=t.isPM?(n=t.isPM(i),n&&12>e&&(e+=12),n||12!==e||(e=0),e):e}function Tt(t){var e,i,n,o,r;if(0===t._f.length)return h(t).invalidFormat=!0,void(t._d=new Date(NaN));for(o=0;o<t._f.length;o++)r=0,e=f({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[o],St(e),p(e)&&(r+=h(e).charsLeftOver,r+=10*h(e).unusedTokens.length,h(e).score=r,(null==n||n>r)&&(n=r,i=e));l(t,i||e)}function Et(t){if(!t._d){var e=A(t._i);t._a=[e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],_t(t)}}function Mt(t){var e=new m(tt(Ct(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Ct(t){var e=t._i,i=t._f;return t._locale=t._locale||E(t._l),null===e||void 0===i&&""===e?d({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),g(e)?new m(tt(e)):(o(i)?Tt(t):i?St(t):r(e)?t._d=e:At(t),t))}function At(t){var e=t._i;void 0===e?t._d=new Date:r(e)?t._d=new Date(+e):"string"==typeof e?rt(t):o(e)?(t._a=s(e.slice(0),function(t){return parseInt(t,10)}),_t(t)):"object"==typeof e?Et(t):"number"==typeof e?t._d=new Date(e):i.createFromInputFallback(t)}function Rt(t,e,i,n,o){var r={};return"boolean"==typeof i&&(n=i,i=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=o,r._l=i,r._i=t,r._f=e,r._strict=n,Mt(r)}function Dt(t,e,i,n){return Rt(t,e,i,n,!1)}function zt(t,e){var i,n;if(1===e.length&&o(e[0])&&(e=e[0]),!e.length)return Dt();for(i=e[0],n=1;n<e.length;++n)(!e[n].isValid()||e[n][t](i))&&(i=e[n]);return i}function Lt(){var t=[].slice.call(arguments,0);return zt("isBefore",t)}function Pt(){var t=[].slice.call(arguments,0);return zt("isAfter",t)}function It(t){var e=A(t),i=e.year||0,n=e.quarter||0,o=e.month||0,r=e.week||0,s=e.day||0,a=e.hour||0,l=e.minute||0,u=e.second||0,c=e.millisecond||0;this._milliseconds=+c+1e3*u+6e4*l+36e5*a,this._days=+s+7*r,this._months=+o+3*n+12*i,this._data={},this._locale=E(),this._bubble()}function Nt(t){return t instanceof It}function Ot(t,e){I(t,0,0,function(){var t=this.utcOffset(),i="+";return 0>t&&(t=-t,i="-"),i+P(~~(t/60),2)+e+P(~~t%60,2)})}function jt(t){var e=(t||"").match(nn)||[],i=e[e.length-1]||[],n=(i+"").match(En)||["-",0,0],o=+(60*n[1])+v(n[2]);return"+"===n[0]?o:-o}function Ut(t,e){var n,o;return e._isUTC?(n=e.clone(),o=(g(t)||r(t)?+t:+Dt(t))-+n,n._d.setTime(+n._d+o),i.updateOffset(n,!1),n):Dt(t).local()}function Bt(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Ft(t,e){var n,o=this._offset||0;return null!=t?("string"==typeof t&&(t=jt(t)),Math.abs(t)<16&&(t=60*t),!this._isUTC&&e&&(n=Bt(this)),this._offset=t,this._isUTC=!0,null!=n&&this.add(n,"m"),o!==t&&(!e||this._changeInProgress?ne(this,Kt(t-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?o:Bt(this)}function qt(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function $t(t){return this.utcOffset(0,t)}function Ht(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Bt(this),"m")),this}function Yt(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(jt(this._i)),this}function Gt(t){return t=t?Dt(t).utcOffset():0,(this.utcOffset()-t)%60===0}function Wt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Vt(){if("undefined"!=typeof this._isDSTShifted)return this._isDSTShifted;var t={};if(f(t,this),t=Ct(t),t._a){var e=t._isUTC?u(t._a):Dt(t._a);this._isDSTShifted=this.isValid()&&b(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Xt(){return!this._isUTC}function Zt(){return this._isUTC}function Jt(){return this._isUTC&&0===this._offset}function Kt(t,e){var i,n,o,r=t,s=null;return Nt(t)?r={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(r={},e?r[e]=t:r.milliseconds=t):(s=Mn.exec(t))?(i="-"===s[1]?-1:1,r={y:0,d:v(s[cn])*i,h:v(s[hn])*i,m:v(s[pn])*i,s:v(s[dn])*i,ms:v(s[fn])*i}):(s=Cn.exec(t))?(i="-"===s[1]?-1:1,r={y:Qt(s[2],i),M:Qt(s[3],i),d:Qt(s[4],i),h:Qt(s[5],i),m:Qt(s[6],i),s:Qt(s[7],i),w:Qt(s[8],i)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(o=ee(Dt(r.from),Dt(r.to)),r={},r.ms=o.milliseconds,r.M=o.months),n=new It(r),Nt(t)&&a(t,"_locale")&&(n._locale=t._locale),n}function Qt(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function te(t,e){var i={milliseconds:0,months:0};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function ee(t,e){var i;return e=Ut(e,t),t.isBefore(e)?i=te(t,e):(i=te(e,t),i.milliseconds=-i.milliseconds,i.months=-i.months),i}function ie(t,e){return function(i,n){var o,r;return null===n||isNaN(+n)||(nt(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),r=i,i=n,n=r),i="string"==typeof i?+i:i,o=Kt(i,n),ne(this,o,t),this}}function ne(t,e,n,o){var r=e._milliseconds,s=e._days,a=e._months;o=null==o?!0:o,r&&t._d.setTime(+t._d+r*n),s&&z(t,"Date",D(t,"Date")+s*n),a&&J(t,D(t,"Month")+a*n),o&&i.updateOffset(t,s||a)}function oe(t,e){var i=t||Dt(),n=Ut(i,this).startOf("day"),o=this.diff(n,"days",!0),r=-6>o?"sameElse":-1>o?"lastWeek":0>o?"lastDay":1>o?"sameDay":2>o?"nextDay":7>o?"nextWeek":"sameElse";return this.format(e&&e[r]||this.localeData().calendar(r,this,Dt(i)))}function re(){return new m(this)}function se(t,e){var i;return e=C("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=g(t)?t:Dt(t),+this>+t):(i=g(t)?+t:+Dt(t),i<+this.clone().startOf(e))}function ae(t,e){var i;return e=C("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=g(t)?t:Dt(t),+t>+this):(i=g(t)?+t:+Dt(t),+this.clone().endOf(e)<i)}function le(t,e,i){return this.isAfter(t,i)&&this.isBefore(e,i)}function ue(t,e){var i;return e=C(e||"millisecond"),"millisecond"===e?(t=g(t)?t:Dt(t),+this===+t):(i=+Dt(t),+this.clone().startOf(e)<=i&&i<=+this.clone().endOf(e))}function ce(t,e,i){var n,o,r=Ut(t,this),s=6e4*(r.utcOffset()-this.utcOffset());return e=C(e),"year"===e||"month"===e||"quarter"===e?(o=he(this,r),"quarter"===e?o/=3:"year"===e&&(o/=12)):(n=this-r,o="second"===e?n/1e3:"minute"===e?n/6e4:"hour"===e?n/36e5:"day"===e?(n-s)/864e5:"week"===e?(n-s)/6048e5:n),i?o:y(o)}function he(t,e){var i,n,o=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(o,"months");return 0>e-r?(i=t.clone().add(o-1,"months"),n=(e-r)/(r-i)):(i=t.clone().add(o+1,"months"),n=(e-r)/(i-r)),-(o+n)}function pe(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function de(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():j(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):j(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function fe(t){var e=j(this,t||i.defaultFormat);return this.localeData().postformat(e)}function me(t,e){return this.isValid()?Kt({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ge(t){return this.from(Dt(),t)}function ye(t,e){return this.isValid()?Kt({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ve(t){return this.to(Dt(),t)}function be(t){var e;return void 0===t?this._locale._abbr:(e=E(t),null!=e&&(this._locale=e),this)}function xe(){return this._locale}function _e(t){switch(t=C(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function we(t){return t=C(t),void 0===t||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")}function Se(){return+this._d-6e4*(this._offset||0)}function ke(){return Math.floor(+this/1e3)}function Te(){return this._offset?new Date(+this):this._d}function Ee(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function Me(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Ce(){return p(this)}function Ae(){return l({},h(this))}function Re(){return h(this).overflow}function De(t,e){I(0,[t,t.length],0,e)}function ze(t,e,i){return ht(Dt([t,11,31+e-i]),e,i).week}function Le(t){var e=ht(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==t?e:this.add(t-e,"y")}function Pe(t){var e=ht(this,1,4).year;return null==t?e:this.add(t-e,"y")}function Ie(){return ze(this.year(),1,4)}function Ne(){var t=this.localeData()._week;return ze(this.year(),t.dow,t.doy)}function Oe(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function je(t,e){return"string"!=typeof t?t:isNaN(t)?(t=e.weekdaysParse(t),"number"==typeof t?t:null):parseInt(t,10)}function Ue(t){return this._weekdays[t.day()]}function Be(t){return this._weekdaysShort[t.day()]}function Fe(t){return this._weekdaysMin[t.day()]}function qe(t){var e,i,n;for(this._weekdaysParse=this._weekdaysParse||[],e=0;7>e;e++)if(this._weekdaysParse[e]||(i=Dt([2e3,1]).day(e),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[e]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e}function $e(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=je(t,this.localeData()),this.add(t-e,"d")):e}function He(t){var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function Ye(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)}function Ge(t,e){I(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function We(t,e){return e._meridiemParse}function Ve(t){return"p"===(t+"").toLowerCase().charAt(0)}function Xe(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"}function Ze(t,e){e[fn]=v(1e3*("0."+t))}function Je(){return this._isUTC?"UTC":""}function Ke(){return this._isUTC?"Coordinated Universal Time":""}function Qe(t){return Dt(1e3*t)}function ti(){return Dt.apply(null,arguments).parseZone()}function ei(t,e,i){var n=this._calendar[t];return"function"==typeof n?n.call(e,i):n}function ii(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function ni(){return this._invalidDate}function oi(t){return this._ordinal.replace("%d",t)}function ri(t){return t}function si(t,e,i,n){var o=this._relativeTime[i];return"function"==typeof o?o(t,e,i,n):o.replace(/%d/i,t)}function ai(t,e){var i=this._relativeTime[t>0?"future":"past"];return"function"==typeof i?i(e):i.replace(/%s/i,e)}function li(t){var e,i;for(i in t)e=t[i],"function"==typeof e?this[i]=e:this["_"+i]=e;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function ui(t,e,i,n){var o=E(),r=u().set(n,e);return o[i](r,t)}function ci(t,e,i,n,o){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return ui(t,e,i,o);var r,s=[];for(r=0;n>r;r++)s[r]=ui(t,r,i,o);return s}function hi(t,e){return ci(t,e,"months",12,"month")}function pi(t,e){return ci(t,e,"monthsShort",12,"month")}function di(t,e){return ci(t,e,"weekdays",7,"day")}function fi(t,e){return ci(t,e,"weekdaysShort",7,"day")}function mi(t,e){return ci(t,e,"weekdaysMin",7,"day")}function gi(){var t=this._data;return this._milliseconds=Jn(this._milliseconds),this._days=Jn(this._days),this._months=Jn(this._months),t.milliseconds=Jn(t.milliseconds),t.seconds=Jn(t.seconds),t.minutes=Jn(t.minutes),t.hours=Jn(t.hours),t.months=Jn(t.months),t.years=Jn(t.years),this}function yi(t,e,i,n){var o=Kt(e,i);return t._milliseconds+=n*o._milliseconds,t._days+=n*o._days,t._months+=n*o._months,t._bubble()}function vi(t,e){return yi(this,t,e,1)}function bi(t,e){return yi(this,t,e,-1)}function xi(t){return 0>t?Math.floor(t):Math.ceil(t)}function _i(){var t,e,i,n,o,r=this._milliseconds,s=this._days,a=this._months,l=this._data;return r>=0&&s>=0&&a>=0||0>=r&&0>=s&&0>=a||(r+=864e5*xi(Si(a)+s),s=0,a=0),l.milliseconds=r%1e3,t=y(r/1e3),l.seconds=t%60,e=y(t/60),l.minutes=e%60,i=y(e/60),l.hours=i%24,s+=y(i/24),o=y(wi(s)),a+=o,s-=xi(Si(o)),n=y(a/12),a%=12,l.days=s,l.months=a,l.years=n,this}function wi(t){return 4800*t/146097}function Si(t){return 146097*t/4800}function ki(t){var e,i,n=this._milliseconds;if(t=C(t),"month"===t||"year"===t)return e=this._days+n/864e5,i=this._months+wi(e),"month"===t?i:i/12;switch(e=this._days+Math.round(Si(this._months)),t){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return 24*e+n/36e5;case"minute":return 1440*e+n/6e4;case"second":return 86400*e+n/1e3;case"millisecond":return Math.floor(864e5*e)+n;default:throw new Error("Unknown unit "+t)}}function Ti(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*v(this._months/12)}function Ei(t){return function(){return this.as(t)}}function Mi(t){return t=C(t),this[t+"s"]()}function Ci(t){return function(){return this._data[t]}}function Ai(){return y(this.days()/7)}function Ri(t,e,i,n,o){return o.relativeTime(e||1,!!i,t,n)}function Di(t,e,i){var n=Kt(t).abs(),o=fo(n.as("s")),r=fo(n.as("m")),s=fo(n.as("h")),a=fo(n.as("d")),l=fo(n.as("M")),u=fo(n.as("y")),c=o<mo.s&&["s",o]||1===r&&["m"]||r<mo.m&&["mm",r]||1===s&&["h"]||s<mo.h&&["hh",s]||1===a&&["d"]||a<mo.d&&["dd",a]||1===l&&["M"]||l<mo.M&&["MM",l]||1===u&&["y"]||["yy",u];return c[2]=e,c[3]=+t>0,c[4]=i,Ri.apply(null,c)}function zi(t,e){return void 0===mo[t]?!1:void 0===e?mo[t]:(mo[t]=e,!0)}function Li(t){var e=this.localeData(),i=Di(this,!t,e);return t&&(i=e.pastFuture(+this,i)),e.postformat(i)}function Pi(){var t,e,i,n=go(this._milliseconds)/1e3,o=go(this._days),r=go(this._months);t=y(n/60),e=y(t/60),n%=60,t%=60,i=y(r/12),r%=12;var s=i,a=r,l=o,u=e,c=t,h=n,p=this.asSeconds();return p?(0>p?"-":"")+"P"+(s?s+"Y":"")+(a?a+"M":"")+(l?l+"D":"")+(u||c||h?"T":"")+(u?u+"H":"")+(c?c+"M":"")+(h?h+"S":""):"P0D"}var Ii,Ni,Oi=i.momentProperties=[],ji=!1,Ui={},Bi={},Fi=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,qi=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,$i={},Hi={},Yi=/\d/,Gi=/\d\d/,Wi=/\d{3}/,Vi=/\d{4}/,Xi=/[+-]?\d{6}/,Zi=/\d\d?/,Ji=/\d{1,3}/,Ki=/\d{1,4}/,Qi=/[+-]?\d{1,6}/,tn=/\d+/,en=/[+-]?\d+/,nn=/Z|[+-]\d\d:?\d\d/gi,on=/[+-]?\d+(\.\d{1,3})?/,rn=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,sn={},an={},ln=0,un=1,cn=2,hn=3,pn=4,dn=5,fn=6;I("M",["MM",2],"Mo",function(){return this.month()+1}),I("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),I("MMMM",0,0,function(t){return this.localeData().months(this,t)}),M("month","M"),F("M",Zi),F("MM",Zi,Gi),F("MMM",rn),F("MMMM",rn),H(["M","MM"],function(t,e){e[un]=v(t)-1}),H(["MMM","MMMM"],function(t,e,i,n){var o=i._locale.monthsParse(t,n,i._strict);null!=o?e[un]=o:h(i).invalidMonth=t});var mn="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),gn="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),yn={};i.suppressDeprecationWarnings=!1;var vn=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,bn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],xn=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],_n=/^\/?Date\((\-?\d+)/i;i.createFromInputFallback=it("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),I(0,["YY",2],0,function(){return this.year()%100}),I(0,["YYYY",4],0,"year"),I(0,["YYYYY",5],0,"year"),I(0,["YYYYYY",6,!0],0,"year"),M("year","y"),F("Y",en),F("YY",Zi,Gi),F("YYYY",Ki,Vi),F("YYYYY",Qi,Xi),F("YYYYYY",Qi,Xi),H(["YYYYY","YYYYYY"],ln),H("YYYY",function(t,e){e[ln]=2===t.length?i.parseTwoDigitYear(t):v(t)}),H("YY",function(t,e){e[ln]=i.parseTwoDigitYear(t)}),i.parseTwoDigitYear=function(t){return v(t)+(v(t)>68?1900:2e3)};var wn=R("FullYear",!1);I("w",["ww",2],"wo","week"),I("W",["WW",2],"Wo","isoWeek"),M("week","w"),M("isoWeek","W"),F("w",Zi),F("ww",Zi,Gi),F("W",Zi),F("WW",Zi,Gi),Y(["w","ww","W","WW"],function(t,e,i,n){e[n.substr(0,1)]=v(t)});var Sn={dow:0,doy:6};I("DDD",["DDDD",3],"DDDo","dayOfYear"),M("dayOfYear","DDD"),F("DDD",Ji),F("DDDD",Wi),H(["DDD","DDDD"],function(t,e,i){i._dayOfYear=v(t)}),i.ISO_8601=function(){};var kn=it("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var t=Dt.apply(null,arguments);return this>t?this:t}),Tn=it("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var t=Dt.apply(null,arguments);return t>this?this:t});Ot("Z",":"),Ot("ZZ",""),F("Z",nn),F("ZZ",nn),H(["Z","ZZ"],function(t,e,i){i._useUTC=!0,i._tzm=jt(t)});var En=/([\+\-]|\d\d)/gi;i.updateOffset=function(){};var Mn=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Cn=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Kt.fn=It.prototype;var An=ie(1,"add"),Rn=ie(-1,"subtract");i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Dn=it("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});I(0,["gg",2],0,function(){return this.weekYear()%100}),I(0,["GG",2],0,function(){return this.isoWeekYear()%100}),De("gggg","weekYear"),De("ggggg","weekYear"),De("GGGG","isoWeekYear"),De("GGGGG","isoWeekYear"),M("weekYear","gg"),M("isoWeekYear","GG"),F("G",en),F("g",en),F("GG",Zi,Gi),F("gg",Zi,Gi),F("GGGG",Ki,Vi),F("gggg",Ki,Vi),F("GGGGG",Qi,Xi),F("ggggg",Qi,Xi),Y(["gggg","ggggg","GGGG","GGGGG"],function(t,e,i,n){e[n.substr(0,2)]=v(t)}),Y(["gg","GG"],function(t,e,n,o){e[o]=i.parseTwoDigitYear(t)}),I("Q",0,0,"quarter"),M("quarter","Q"),F("Q",Yi),H("Q",function(t,e){e[un]=3*(v(t)-1)}),I("D",["DD",2],"Do","date"),M("date","D"),F("D",Zi),F("DD",Zi,Gi),F("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),H(["D","DD"],cn),H("Do",function(t,e){e[cn]=v(t.match(Zi)[0],10)});var zn=R("Date",!0);I("d",0,"do","day"),I("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),I("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),I("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),I("e",0,0,"weekday"),I("E",0,0,"isoWeekday"),M("day","d"),M("weekday","e"),M("isoWeekday","E"),F("d",Zi),F("e",Zi),F("E",Zi),F("dd",rn),F("ddd",rn),F("dddd",rn),Y(["dd","ddd","dddd"],function(t,e,i){var n=i._locale.weekdaysParse(t);null!=n?e.d=n:h(i).invalidWeekday=t}),Y(["d","e","E"],function(t,e,i,n){e[n]=v(t)});var Ln="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Pn="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),In="Su_Mo_Tu_We_Th_Fr_Sa".split("_");I("H",["HH",2],0,"hour"),I("h",["hh",2],0,function(){return this.hours()%12||12}),Ge("a",!0),Ge("A",!1),M("hour","h"),F("a",We),F("A",We),F("H",Zi),F("h",Zi),F("HH",Zi,Gi),F("hh",Zi,Gi),H(["H","HH"],hn),H(["a","A"],function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t}),H(["h","hh"],function(t,e,i){e[hn]=v(t),h(i).bigHour=!0});var Nn=/[ap]\.?m?\.?/i,On=R("Hours",!0);I("m",["mm",2],0,"minute"),M("minute","m"),F("m",Zi),F("mm",Zi,Gi),H(["m","mm"],pn);var jn=R("Minutes",!1);I("s",["ss",2],0,"second"),M("second","s"),F("s",Zi),F("ss",Zi,Gi),H(["s","ss"],dn);var Un=R("Seconds",!1);I("S",0,0,function(){return~~(this.millisecond()/100)}),I(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),I(0,["SSS",3],0,"millisecond"),I(0,["SSSS",4],0,function(){return 10*this.millisecond()}),I(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),I(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),I(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),I(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),I(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),M("millisecond","ms"),F("S",Ji,Yi),F("SS",Ji,Gi),F("SSS",Ji,Wi);var Bn;for(Bn="SSSS";Bn.length<=9;Bn+="S")F(Bn,tn);for(Bn="S";Bn.length<=9;Bn+="S")H(Bn,Ze);var Fn=R("Milliseconds",!1);I("z",0,0,"zoneAbbr"),I("zz",0,0,"zoneName");var qn=m.prototype;qn.add=An,qn.calendar=oe,qn.clone=re,qn.diff=ce,qn.endOf=we,qn.format=fe,qn.from=me,qn.fromNow=ge,qn.to=ye,qn.toNow=ve,qn.get=L,qn.invalidAt=Re,qn.isAfter=se,qn.isBefore=ae,qn.isBetween=le,qn.isSame=ue,qn.isValid=Ce,qn.lang=Dn,qn.locale=be,qn.localeData=xe,qn.max=Tn,qn.min=kn,qn.parsingFlags=Ae,qn.set=L,qn.startOf=_e,qn.subtract=Rn,qn.toArray=Ee,qn.toObject=Me,qn.toDate=Te,qn.toISOString=de,qn.toJSON=de,qn.toString=pe,qn.unix=ke,qn.valueOf=Se,qn.year=wn,qn.isLeapYear=ct,qn.weekYear=Le,qn.isoWeekYear=Pe,qn.quarter=qn.quarters=Oe,qn.month=K,qn.daysInMonth=Q,qn.week=qn.weeks=mt,qn.isoWeek=qn.isoWeeks=gt,qn.weeksInYear=Ne,qn.isoWeeksInYear=Ie,qn.date=zn,qn.day=qn.days=$e,qn.weekday=He,qn.isoWeekday=Ye,qn.dayOfYear=vt,qn.hour=qn.hours=On,qn.minute=qn.minutes=jn,qn.second=qn.seconds=Un,qn.millisecond=qn.milliseconds=Fn,qn.utcOffset=Ft,qn.utc=$t,qn.local=Ht,qn.parseZone=Yt,qn.hasAlignedHourOffset=Gt,qn.isDST=Wt,qn.isDSTShifted=Vt,qn.isLocal=Xt,qn.isUtcOffset=Zt,qn.isUtc=Jt,qn.isUTC=Jt,qn.zoneAbbr=Je,qn.zoneName=Ke,qn.dates=it("dates accessor is deprecated. Use date instead.",zn),qn.months=it("months accessor is deprecated. Use month instead",K),qn.years=it("years accessor is deprecated. Use year instead",wn),qn.zone=it("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",qt);var $n=qn,Hn={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Yn={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Gn="Invalid date",Wn="%d",Vn=/\d{1,2}/,Xn={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Zn=x.prototype;Zn._calendar=Hn,Zn.calendar=ei,Zn._longDateFormat=Yn,Zn.longDateFormat=ii,Zn._invalidDate=Gn,Zn.invalidDate=ni,Zn._ordinal=Wn,Zn.ordinal=oi,Zn._ordinalParse=Vn,Zn.preparse=ri,Zn.postformat=ri,Zn._relativeTime=Xn,Zn.relativeTime=si,Zn.pastFuture=ai,Zn.set=li,Zn.months=V,Zn._months=mn,Zn.monthsShort=X,Zn._monthsShort=gn,Zn.monthsParse=Z,Zn.week=pt,Zn._week=Sn,Zn.firstDayOfYear=ft,Zn.firstDayOfWeek=dt,Zn.weekdays=Ue,Zn._weekdays=Ln,Zn.weekdaysMin=Fe,Zn._weekdaysMin=In,Zn.weekdaysShort=Be,Zn._weekdaysShort=Pn,Zn.weekdaysParse=qe,Zn.isPM=Ve,Zn._meridiemParse=Nn,Zn.meridiem=Xe,k("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,i=1===v(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i}}),i.lang=it("moment.lang is deprecated. Use moment.locale instead.",k),i.langData=it("moment.langData is deprecated. Use moment.localeData instead.",E);var Jn=Math.abs,Kn=Ei("ms"),Qn=Ei("s"),to=Ei("m"),eo=Ei("h"),io=Ei("d"),no=Ei("w"),oo=Ei("M"),ro=Ei("y"),so=Ci("milliseconds"),ao=Ci("seconds"),lo=Ci("minutes"),uo=Ci("hours"),co=Ci("days"),ho=Ci("months"),po=Ci("years"),fo=Math.round,mo={s:45,m:45,h:22,d:26,M:11},go=Math.abs,yo=It.prototype;yo.abs=gi,yo.add=vi,yo.subtract=bi,yo.as=ki,yo.asMilliseconds=Kn,yo.asSeconds=Qn,yo.asMinutes=to,yo.asHours=eo,yo.asDays=io,yo.asWeeks=no,yo.asMonths=oo,yo.asYears=ro,yo.valueOf=Ti,yo._bubble=_i,yo.get=Mi,yo.milliseconds=so,yo.seconds=ao,yo.minutes=lo,yo.hours=uo,yo.days=co,yo.weeks=Ai,yo.months=ho,yo.years=po,yo.humanize=Li,yo.toISOString=Pi,yo.toString=Pi,yo.toJSON=Pi,yo.locale=be,yo.localeData=xe,yo.toIsoString=it("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Pi),yo.lang=Dn,I("X",0,0,"unix"),I("x",0,0,"valueOf"),F("x",en),F("X",on),H("X",function(t,e,i){i._d=new Date(1e3*parseFloat(t,10))}),H("x",function(t,e,i){i._d=new Date(v(t))}),i.version="2.10.6",n(Dt),i.fn=$n,i.min=Lt,i.max=Pt,i.utc=u,i.unix=Qe,i.months=hi,i.isDate=r,i.locale=k,i.invalid=d,i.duration=Kt,i.isMoment=g,i.weekdays=di,i.parseZone=ti,i.localeData=E,i.isDuration=Nt,i.monthsShort=pi,i.weekdaysMin=mi,i.defineLocale=T,i.weekdaysShort=fi,i.normalizeUnits=C,i.relativeTimeThreshold=zi;var vo=i;return vo})},{}],253:[function(t,e,i){!function(t){"function"==typeof define&&define.amd?define([],t):"object"==typeof i?(e.exports=t(),e.exports.css=function(){return'/*! nouislider - 8.0.2 - 2015-07-06 13:22:09 */\n\n\n.noUi-target,.noUi-target *{-webkit-touch-callout:none;-webkit-user-select:none;-ms-touch-action:none;-ms-user-select:none;-moz-user-select:none;-moz-box-sizing:border-box;box-sizing:border-box}.noUi-target{position:relative;direction:ltr}.noUi-base{width:100%;height:100%;position:relative;z-index:1}.noUi-origin{position:absolute;right:0;top:0;left:0;bottom:0}.noUi-handle{position:relative;z-index:1}.noUi-stacking .noUi-handle{z-index:10}.noUi-state-tap .noUi-origin{-webkit-transition:left .3s,top .3s;transition:left .3s,top .3s}.noUi-state-drag *{cursor:inherit!important}.noUi-base{-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}.noUi-horizontal{height:18px}.noUi-horizontal .noUi-handle{width:34px;height:28px;left:-17px;top:-6px}.noUi-vertical{width:18px}.noUi-vertical .noUi-handle{width:28px;height:34px;left:-6px;top:-17px}.noUi-background{background:#FAFAFA;box-shadow:inset 0 1px 1px #f0f0f0}.noUi-connect{background:#3FB8AF;box-shadow:inset 0 0 3px rgba(51,51,51,.45);-webkit-transition:background 450ms;transition:background 450ms}.noUi-origin{border-radius:2px}.noUi-target{border-radius:4px;border:1px solid #D3D3D3;box-shadow:inset 0 1px 1px #F0F0F0,0 3px 6px -5px #BBB}.noUi-target.noUi-connect{box-shadow:inset 0 0 3px rgba(51,51,51,.45),0 3px 6px -5px #BBB}.noUi-dragable{cursor:w-resize}.noUi-vertical .noUi-dragable{cursor:n-resize}.noUi-handle{border:1px solid #D9D9D9;border-radius:3px;background:#FFF;cursor:default;box-shadow:inset 0 0 1px #FFF,inset 0 1px 7px #EBEBEB,0 3px 6px -3px #BBB}.noUi-active{box-shadow:inset 0 0 1px #FFF,inset 0 1px 7px #DDD,0 3px 6px -3px #BBB}.noUi-handle:after,.noUi-handle:before{content:"";display:block;position:absolute;height:14px;width:1px;background:#E8E7E6;left:14px;top:6px}.noUi-handle:after{left:17px}.noUi-vertical .noUi-handle:after,.noUi-vertical .noUi-handle:before{width:14px;height:1px;left:6px;top:14px}.noUi-vertical .noUi-handle:after{top:17px}[disabled] .noUi-connect,[disabled].noUi-connect{background:#B8B8B8}[disabled] .noUi-handle,[disabled].noUi-origin{cursor:not-allowed}.noUi-pips,.noUi-pips *{-moz-box-sizing:border-box;box-sizing:border-box}.noUi-pips{position:absolute;font:400 12px Arial;color:#999}.noUi-value{width:40px;position:absolute;text-align:center}.noUi-value-sub{color:#ccc;font-size:10px}.noUi-marker{position:absolute;background:#CCC}.noUi-marker-large,.noUi-marker-sub{background:#AAA}.noUi-pips-horizontal{padding:10px 0;height:50px;top:100%;left:0;width:100%}.noUi-value-horizontal{margin-left:-20px;padding-top:20px}.noUi-value-horizontal.noUi-value-sub{padding-top:15px}.noUi-marker-horizontal.noUi-marker{margin-left:-1px;width:2px;height:5px}.noUi-marker-horizontal.noUi-marker-sub{height:10px}.noUi-marker-horizontal.noUi-marker-large{height:15px}.noUi-pips-vertical{padding:0 10px;height:100%;top:0;left:100%}.noUi-value-vertical{width:15px;margin-left:20px;margin-top:-5px}.noUi-marker-vertical.noUi-marker{width:5px;height:2px;margin-top:-1px}.noUi-marker-vertical.noUi-marker-sub{width:10px}.noUi-marker-vertical.noUi-marker-large{width:15px}'}):window.noUiSlider=t()}(function(){"use strict";function t(t){return t.filter(function(t){return this[t]?!1:this[t]=!0},{})}function e(t,e){return Math.round(t/e)*e}function i(t){var e=t.getBoundingClientRect(),i=t.ownerDocument,n=i.defaultView||i.parentWindow,o=i.documentElement,r=n.pageXOffset;return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(r=0),{top:e.top+n.pageYOffset-o.clientTop,left:e.left+r-o.clientLeft}}function n(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function o(t){var e=Math.pow(10,7);return Number((Math.round(t*e)/e).toFixed(7))}function r(t,e,i){u(t,e),setTimeout(function(){c(t,e)},i)}function s(t){return Math.max(Math.min(t,100),0)}function a(t){return Array.isArray(t)?t:[t]}function l(t){var e=t.split(".");return e.length>1?e[1].length:0}function u(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function c(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function h(t,e){t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)}function p(t,e){return 100/(e-t)}function d(t,e){return 100*e/(t[1]-t[0])}function f(t,e){return d(t,t[0]<0?e+Math.abs(t[0]):e-t[0])}function m(t,e){return e*(t[1]-t[0])/100+t[0]}function g(t,e){for(var i=1;t>=e[i];)i+=1;return i}function y(t,e,i){if(i>=t.slice(-1)[0])return 100;var n,o,r,s,a=g(i,t);return n=t[a-1],o=t[a],r=e[a-1],s=e[a],r+f([n,o],i)/p(r,s)}function v(t,e,i){if(i>=100)return t.slice(-1)[0];var n,o,r,s,a=g(i,e);return n=t[a-1],o=t[a],r=e[a-1],s=e[a],m([n,o],(i-r)*p(r,s))}function b(t,i,n,o){if(100===o)return o;var r,s,a=g(o,t);return n?(r=t[a-1],s=t[a],o-r>(s-r)/2?s:r):i[a-1]?t[a-1]+e(o-t[a-1],i[a-1]):o}function x(t,e,i){var o;if("number"==typeof e&&(e=[e]),"[object Array]"!==Object.prototype.toString.call(e))throw new Error("noUiSlider: 'range' contains invalid value.");if(o="min"===t?0:"max"===t?100:parseFloat(t),!n(o)||!n(e[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");i.xPct.push(o),i.xVal.push(e[0]),o?i.xSteps.push(isNaN(e[1])?!1:e[1]):isNaN(e[1])||(i.xSteps[0]=e[1])}function _(t,e,i){return e?void(i.xSteps[t]=d([i.xVal[t],i.xVal[t+1]],e)/p(i.xPct[t],i.xPct[t+1])):!0}function w(t,e,i,n){this.xPct=[],this.xVal=[],this.xSteps=[n||!1],this.xNumSteps=[!1],this.snap=e,this.direction=i;var o,r=[];for(o in t)t.hasOwnProperty(o)&&r.push([t[o],o]);for(r.sort(function(t,e){return t[0]-e[0]}),o=0;o<r.length;o++)x(r[o][1],r[o][0],this);for(this.xNumSteps=this.xSteps.slice(0),o=0;o<this.xNumSteps.length;o++)_(o,this.xNumSteps[o],this)}function S(t,e){if(!n(e))throw new Error("noUiSlider: 'step' is not numeric.");t.singleStep=e}function k(t,e){if("object"!=typeof e||Array.isArray(e))throw new Error("noUiSlider: 'range' is not an object.");
if(void 0===e.min||void 0===e.max)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");t.spectrum=new w(e,t.snap,t.dir,t.singleStep)}function T(t,e){if(e=a(e),!Array.isArray(e)||!e.length||e.length>2)throw new Error("noUiSlider: 'start' option is incorrect.");t.handles=e.length,t.start=e}function E(t,e){if(t.snap=e,"boolean"!=typeof e)throw new Error("noUiSlider: 'snap' option must be a boolean.")}function M(t,e){if(t.animate=e,"boolean"!=typeof e)throw new Error("noUiSlider: 'animate' option must be a boolean.")}function C(t,e){if("lower"===e&&1===t.handles)t.connect=1;else if("upper"===e&&1===t.handles)t.connect=2;else if(e===!0&&2===t.handles)t.connect=3;else{if(e!==!1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");t.connect=0}}function A(t,e){switch(e){case"horizontal":t.ort=0;break;case"vertical":t.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function R(t,e){if(!n(e))throw new Error("noUiSlider: 'margin' option must be numeric.");if(t.margin=t.spectrum.getMargin(e),!t.margin)throw new Error("noUiSlider: 'margin' option is only supported on linear sliders.")}function D(t,e){if(!n(e))throw new Error("noUiSlider: 'limit' option must be numeric.");if(t.limit=t.spectrum.getMargin(e),!t.limit)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders.")}function z(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1,t.connect=[0,2,1,3][t.connect];break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function L(t,e){if("string"!=typeof e)throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var i=e.indexOf("tap")>=0,n=e.indexOf("drag")>=0,o=e.indexOf("fixed")>=0,r=e.indexOf("snap")>=0;t.events={tap:i||r,drag:n,fixed:o,snap:r}}function P(t,e){if(t.format=e,"function"==typeof e.to&&"function"==typeof e.from)return!0;throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.")}function I(t){var e,i={margin:0,limit:0,animate:!0,format:G};e={step:{r:!1,t:S},start:{r:!0,t:T},connect:{r:!0,t:C},direction:{r:!0,t:z},snap:{r:!1,t:E},animate:{r:!1,t:M},range:{r:!0,t:k},orientation:{r:!1,t:A},margin:{r:!1,t:R},limit:{r:!1,t:D},behaviour:{r:!0,t:L},format:{r:!1,t:P}};var n={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"};return Object.keys(n).forEach(function(e){void 0===t[e]&&(t[e]=n[e])}),Object.keys(e).forEach(function(n){var o=e[n];if(void 0===t[n]){if(o.r)throw new Error("noUiSlider: '"+n+"' is required.");return!0}o.t(i,t[n])}),i.pips=t.pips,i.style=i.ort?"top":"left",i}function N(t,e,i){var n=t+e[0],o=t+e[1];return i?(0>n&&(o+=Math.abs(n)),o>100&&(n-=o-100),[s(n),s(o)]):[n,o]}function O(t){t.preventDefault();var e,i,n=0===t.type.indexOf("touch"),o=0===t.type.indexOf("mouse"),r=0===t.type.indexOf("pointer"),s=t;return 0===t.type.indexOf("MSPointer")&&(r=!0),n&&(e=t.changedTouches[0].pageX,i=t.changedTouches[0].pageY),(o||r)&&(e=t.clientX+window.pageXOffset,i=t.clientY+window.pageYOffset),s.points=[e,i],s.cursor=o||r,s}function j(t,e){var i=document.createElement("div"),n=document.createElement("div"),o=["-lower","-upper"];return t&&o.reverse(),u(n,Y[3]),u(n,Y[3]+o[e]),u(i,Y[2]),i.appendChild(n),i}function U(t,e,i){switch(t){case 1:u(e,Y[7]),u(i[0],Y[6]);break;case 3:u(i[1],Y[6]);case 2:u(i[0],Y[7]);case 0:u(e,Y[6])}}function B(t,e,i){var n,o=[];for(n=0;t>n;n+=1)o.push(i.appendChild(j(e,n)));return o}function F(t,e,i){u(i,Y[0]),u(i,Y[8+t]),u(i,Y[4+e]);var n=document.createElement("div");return u(n,Y[1]),i.appendChild(n),n}function q(e,n){function o(t,e,i){if("range"===t||"steps"===t)return j.xVal;if("count"===t){var n,o=100/(e-1),r=0;for(e=[];(n=r++*o)<=100;)e.push(n);t="positions"}return"positions"===t?e.map(function(t){return j.fromStepping(i?j.getStep(t):t)}):"values"===t?i?e.map(function(t){return j.fromStepping(j.getStep(j.toStepping(t)))}):e:void 0}function p(e,i,n){var o=j.direction,r={},s=j.xVal[0],a=j.xVal[j.xVal.length-1],l=!1,u=!1,c=0;return j.direction=0,n=t(n.slice().sort(function(t,e){return t-e})),n[0]!==s&&(n.unshift(s),l=!0),n[n.length-1]!==a&&(n.push(a),u=!0),n.forEach(function(t,o){var s,a,h,p,d,f,m,g,y,v,b=t,x=n[o+1];if("steps"===i&&(s=j.xNumSteps[o]),s||(s=x-b),b!==!1&&void 0!==x)for(a=b;x>=a;a+=s){for(p=j.toStepping(a),d=p-c,g=d/e,y=Math.round(g),v=d/y,h=1;y>=h;h+=1)f=c+h*v,r[f.toFixed(5)]=["x",0];m=n.indexOf(a)>-1?1:"steps"===i?2:0,!o&&l&&(m=0),a===x&&u||(r[p.toFixed(5)]=[a,m]),c=p}}),j.direction=o,r}function d(t,e,i){function o(t){return["-normal","-large","-sub"][t]}function r(t,e,i){return'class="'+e+" "+e+"-"+a+" "+e+o(i[1])+'" style="'+n.style+": "+t+'%"'}function s(t,n){j.direction&&(t=100-t),n[1]=n[1]&&e?e(n[0],n[1]):n[1],l.innerHTML+="<div "+r(t,"noUi-marker",n)+"></div>",n[1]&&(l.innerHTML+="<div "+r(t,"noUi-value",n)+">"+i.to(n[0])+"</div>")}var a=["horizontal","vertical"][n.ort],l=document.createElement("div");return u(l,"noUi-pips"),u(l,"noUi-pips-"+a),Object.keys(t).forEach(function(e){s(e,t[e])}),l}function f(t){var e=t.mode,i=t.density||1,n=t.filter||!1,r=t.values||!1,s=t.stepped||!1,a=o(e,r,s),l=p(i,e,a),u=t.format||{to:Math.round};return P.appendChild(d(l,n,u))}function m(){return z["offset"+["Width","Height"][n.ort]]}function g(t,e){void 0!==e&&(e=Math.abs(e-n.dir)),Object.keys($).forEach(function(i){var n=i.split(".")[0];t===n&&$[i].forEach(function(t){t(a(M()),e,y(Array.prototype.slice.call(q)))})})}function y(t){return 1===t.length?t[0]:n.dir?t.reverse():t}function v(t,e,i,o){var r=function(e){return P.hasAttribute("disabled")?!1:h(P,Y[14])?!1:(e=O(e),t===H.start&&void 0!==e.buttons&&e.buttons>1?!1:(e.calcPoint=e.points[n.ort],void i(e,o)))},s=[];return t.split(" ").forEach(function(t){e.addEventListener(t,r,!1),s.push([t,r])}),s}function b(t,e){var i,n,o=e.handles||L,r=!1,s=100*(t.calcPoint-e.start)/m(),a=o[0]===L[0]?0:1;if(i=N(s,e.positions,o.length>1),r=k(o[0],i[a],1===o.length),o.length>1){if(r=k(o[1],i[a?0:1],!1)||r)for(n=0;n<e.handles.length;n++)g("slide",n)}else r&&g("slide",a)}function x(t,e){var i=z.getElementsByClassName(Y[15]),n=e.handles[0]===L[0]?0:1;i.length&&c(i[0],Y[15]),t.cursor&&(document.body.style.cursor="",document.body.removeEventListener("selectstart",document.body.noUiListener));var o=document.documentElement;o.noUiListeners.forEach(function(t){o.removeEventListener(t[0],t[1])}),c(P,Y[12]),g("set",n),g("change",n)}function _(t,e){var i=document.documentElement;if(1===e.handles.length&&(u(e.handles[0].children[0],Y[15]),e.handles[0].hasAttribute("disabled")))return!1;t.stopPropagation();var n=v(H.move,i,b,{start:t.calcPoint,handles:e.handles,positions:[I[0],I[L.length-1]]}),o=v(H.end,i,x,{handles:e.handles});if(i.noUiListeners=n.concat(o),t.cursor){document.body.style.cursor=getComputedStyle(t.target).cursor,L.length>1&&u(P,Y[12]);var r=function(){return!1};document.body.noUiListener=r,document.body.addEventListener("selectstart",r,!1)}}function w(t){var e,o,s=t.calcPoint,a=0;return t.stopPropagation(),L.forEach(function(t){a+=i(t)[n.style]}),e=a/2>s||1===L.length?0:1,s-=i(z)[n.style],o=100*s/m(),n.events.snap||r(P,Y[14],300),L[e].hasAttribute("disabled")?!1:(k(L[e],o),g("slide",e),g("set",e),g("change",e),void(n.events.snap&&_(t,{handles:[L[a]]})))}function S(t){var e,i;if(!t.fixed)for(e=0;e<L.length;e+=1)v(H.start,L[e].children[0],_,{handles:[L[e]]});t.tap&&v(H.start,z,w,{handles:L}),t.drag&&(i=[z.getElementsByClassName(Y[7])[0]],u(i[0],Y[10]),t.fixed&&i.push(L[i[0]===L[0]?1:0].children[0]),i.forEach(function(t){v(H.start,t,_,{handles:L})}))}function k(t,e,i){var o=t!==L[0]?1:0,r=I[0]+n.margin,a=I[1]-n.margin,l=I[0]+n.limit,h=I[1]-n.limit;return L.length>1&&(e=o?Math.max(e,r):Math.min(e,a)),i!==!1&&n.limit&&L.length>1&&(e=o?Math.min(e,l):Math.max(e,h)),e=j.getStep(e),e=s(parseFloat(e.toFixed(7))),e===I[o]?!1:(t.style[n.style]=e+"%",t.previousSibling||(c(t,Y[17]),e>50&&u(t,Y[17])),I[o]=e,q[o]=j.fromStepping(e),g("update",o),!0)}function T(t,e){var i,o,r;for(n.limit&&(t+=1),i=0;t>i;i+=1)o=i%2,r=e[o],null!==r&&r!==!1&&("number"==typeof r&&(r=String(r)),r=n.format.from(r),(r===!1||isNaN(r)||k(L[o],j.toStepping(r),i===3-n.dir)===!1)&&g("update",o))}function E(t){var e,i,o=a(t);for(n.dir&&n.handles>1&&o.reverse(),n.animate&&-1!==I[0]&&r(P,Y[14],300),e=L.length>1?3:1,1===o.length&&(e=1),T(e,o),i=0;i<L.length;i++)g("set",i)}function M(){var t,e=[];for(t=0;t<n.handles;t+=1)e[t]=n.format.to(q[t]);return y(e)}function C(){Y.forEach(function(t){t&&c(P,t)}),P.innerHTML="",delete P.noUiSlider}function A(){var t=I.map(function(t,e){var i=j.getApplicableStep(t),n=l(String(i[2])),o=q[e],r=100===t?null:i[2],s=Number((o-i[2]).toFixed(n)),a=0===t?null:s>=i[1]?i[2]:i[0]||!1;return[a,r]});return y(t)}function R(t,e){$[t]=$[t]||[],$[t].push(e),"update"===t.split(".")[0]&&L.forEach(function(t,e){g("update",e)})}function D(t){var e=t.split(".")[0],i=t.substring(e.length);Object.keys($).forEach(function(t){var n=t.split(".")[0],o=t.substring(n.length);e&&e!==n||i&&i!==o||delete $[t]})}var z,L,P=e,I=[-1,-1],j=n.spectrum,q=[],$={};if(P.noUiSlider)throw new Error("Slider was already initialized.");return z=F(n.dir,n.ort,P),L=B(n.handles,n.dir,z),U(n.connect,P,L),S(n.events),n.pips&&f(n.pips),{destroy:C,steps:A,on:R,off:D,get:M,set:E}}function $(t,e){if(!t.nodeName)throw new Error("noUiSlider.create requires a single element.");var i=I(e,t),n=q(t,i);n.set(i.start),t.noUiSlider=n}var H=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},Y=["noUi-target","noUi-base","noUi-origin","noUi-handle","noUi-horizontal","noUi-vertical","noUi-background","noUi-connect","noUi-ltr","noUi-rtl","noUi-dragable","","noUi-state-drag","","noUi-state-tap","noUi-active","","noUi-stacking"];w.prototype.getMargin=function(t){return 2===this.xPct.length?d(this.xVal,t):!1},w.prototype.toStepping=function(t){return t=y(this.xVal,this.xPct,t),this.direction&&(t=100-t),t},w.prototype.fromStepping=function(t){return this.direction&&(t=100-t),o(v(this.xVal,this.xPct,t))},w.prototype.getStep=function(t){return this.direction&&(t=100-t),t=b(this.xPct,this.xSteps,this.snap,t),this.direction&&(t=100-t),t},w.prototype.getApplicableStep=function(t){var e=g(t,this.xPct),i=100===t?2:1;return[this.xNumSteps[e-2],this.xVal[e-i],this.xNumSteps[e-i]]},w.prototype.convert=function(t){return this.getStep(this.toStepping(t))};var G={to:function(t){return t.toFixed(2)},from:Number};return{create:$}})},{}],254:[function(t,e,i){e.exports=t("./lib/")},{"./lib/":255}],255:[function(t,e,i){function n(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,n=o(t),r=n.source,u=n.id;return e.forceNew||e["force new connection"]||!1===e.multiplex?(a("ignoring socket cache for %s",r),i=s(r,e)):(l[u]||(a("new io instance for %s",r),l[u]=s(r,e)),i=l[u]),i.socket(n.path)}var o=t("./url"),r=t("socket.io-parser"),s=t("./manager"),a=t("debug")("socket.io-client");e.exports=i=n;var l=i.managers={};i.protocol=r.protocol,i.connect=n,i.Manager=t("./manager"),i.Socket=t("./socket")},{"./manager":256,"./socket":258,"./url":259,debug:263,"socket.io-parser":297}],256:[function(t,e,i){function n(t,e){return this instanceof n?(t&&"object"==typeof t&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new p({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connected=[],this.encoding=!1,this.packetBuffer=[],this.encoder=new a.Encoder,this.decoder=new a.Decoder,this.autoConnect=e.autoConnect!==!1,void(this.autoConnect&&this.open())):new n(t,e)}var o=(t("./url"),t("engine.io-client")),r=t("./socket"),s=t("component-emitter"),a=t("socket.io-parser"),l=t("./on"),u=t("component-bind"),c=(t("object-component"),t("debug")("socket.io-client:manager")),h=t("indexof"),p=t("backo2");e.exports=n,n.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var t in this.nsps)this.nsps[t].emit.apply(this.nsps[t],arguments)},n.prototype.updateSocketIds=function(){for(var t in this.nsps)this.nsps[t].id=this.engine.id},s(n.prototype),n.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},n.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},n.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},n.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},n.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},n.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},n.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},n.prototype.open=n.prototype.connect=function(t){if(c("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=o(this.uri,this.opts);var e=this.engine,i=this;this.readyState="opening",this.skipReconnect=!1;var n=l(e,"open",function(){i.onopen(),t&&t()}),r=l(e,"error",function(e){if(c("connect_error"),i.cleanup(),i.readyState="closed",i.emitAll("connect_error",e),t){var n=new Error("Connection error");n.data=e,t(n)}else i.maybeReconnectOnOpen()});if(!1!==this._timeout){var s=this._timeout;c("connect attempt will timeout after %d",s);var a=setTimeout(function(){c("connect attempt timed out after %d",s),n.destroy(),e.close(),e.emit("error","timeout"),i.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(a)}})}return this.subs.push(n),this.subs.push(r),this},n.prototype.onopen=function(){c("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(l(t,"data",u(this,"ondata"))),this.subs.push(l(this.decoder,"decoded",u(this,"ondecoded"))),this.subs.push(l(t,"error",u(this,"onerror"))),this.subs.push(l(t,"close",u(this,"onclose")))},n.prototype.ondata=function(t){this.decoder.add(t)},n.prototype.ondecoded=function(t){this.emit("packet",t)},n.prototype.onerror=function(t){c("error",t),this.emitAll("error",t)},n.prototype.socket=function(t){var e=this.nsps[t];if(!e){e=new r(this,t),this.nsps[t]=e;var i=this;e.on("connect",function(){e.id=i.engine.id,~h(i.connected,e)||i.connected.push(e)})}return e},n.prototype.destroy=function(t){var e=h(this.connected,t);~e&&this.connected.splice(e,1),this.connected.length||this.close()},n.prototype.packet=function(t){c("writing packet %j",t);var e=this;e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(t){for(var i=0;i<t.length;i++)e.engine.write(t[i]);e.encoding=!1,e.processPacketQueue()}))},n.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},n.prototype.cleanup=function(){for(var t;t=this.subs.shift();)t.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},n.prototype.close=n.prototype.disconnect=function(){this.skipReconnect=!0,this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},n.prototype.onclose=function(t){c("close"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},n.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)c("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();c("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var i=setTimeout(function(){t.skipReconnect||(c("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(c("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(c("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(i)}})}},n.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},{"./on":257,"./socket":258,"./url":259,backo2:260,"component-bind":261,"component-emitter":262,debug:263,"engine.io-client":264,indexof:293,"object-component":294,"socket.io-parser":297}],257:[function(t,e,i){function n(t,e,i){return t.on(e,i),{destroy:function(){t.removeListener(e,i)}}}e.exports=n},{}],258:[function(t,e,i){function n(t,e){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.io.autoConnect&&this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0}var o=t("socket.io-parser"),r=t("component-emitter"),s=t("to-array"),a=t("./on"),l=t("component-bind"),u=t("debug")("socket.io-client:socket"),c=t("has-binary");e.exports=i=n;var h={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},p=r.prototype.emit;r(n.prototype),n.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[a(t,"open",l(this,"onopen")),a(t,"packet",l(this,"onpacket")),a(t,"close",l(this,"onclose"))]}},n.prototype.open=n.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},n.prototype.send=function(){var t=s(arguments);return t.unshift("message"),this.emit.apply(this,t),this},n.prototype.emit=function(t){if(h.hasOwnProperty(t))return p.apply(this,arguments),this;var e=s(arguments),i=o.EVENT;c(e)&&(i=o.BINARY_EVENT);var n={type:i,data:e};return"function"==typeof e[e.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this},n.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},n.prototype.onopen=function(){u("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:o.CONNECT})},n.prototype.onclose=function(t){u("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},n.prototype.onpacket=function(t){if(t.nsp==this.nsp)switch(t.type){case o.CONNECT:this.onconnect();break;case o.EVENT:this.onevent(t);break;case o.BINARY_EVENT:this.onevent(t);break;case o.ACK:this.onack(t);break;case o.BINARY_ACK:this.onack(t);break;case o.DISCONNECT:this.ondisconnect();break;case o.ERROR:this.emit("error",t.data)}},n.prototype.onevent=function(t){var e=t.data||[];u("emitting event %j",e),null!=t.id&&(u("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?p.apply(this,e):this.receiveBuffer.push(e)},n.prototype.ack=function(t){var e=this,i=!1;return function(){if(!i){i=!0;var n=s(arguments);u("sending ack %j",n);var r=c(n)?o.BINARY_ACK:o.ACK;e.packet({type:r,id:t,data:n})}}},n.prototype.onack=function(t){u("calling ack %s with %j",t.id,t.data);var e=this.acks[t.id];e.apply(this,t.data),delete this.acks[t.id]},n.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},n.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)p.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},n.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},n.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},n.prototype.close=n.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:o.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{"./on":257,"component-bind":261,"component-emitter":262,debug:263,"has-binary":291,"socket.io-parser":297,"to-array":301}],259:[function(t,e,i){(function(i){function n(t,e){var n=t,e=e||i.location;return null==t&&(t=e.protocol+"//"+e.host),"string"==typeof t&&("/"==t.charAt(0)&&(t="/"==t.charAt(1)?e.protocol+t:e.hostname+t),/^(https?|wss?):\/\//.test(t)||(r("protocol-less url %s",t),t="undefined"!=typeof e?e.protocol+"//"+t:"https://"+t),r("parse %s",t),n=o(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/",n.id=n.protocol+"://"+n.host+":"+n.port,n.href=n.protocol+"://"+n.host+(e&&e.port==n.port?"":":"+n.port),n}var o=t("parseuri"),r=t("debug")("socket.io-client:url");e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:263,parseuri:295}],260:[function(t,e,i){function n(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),i=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-i:t+i}return 0|Math.min(t,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(t){this.ms=t},n.prototype.setMax=function(t){this.max=t},n.prototype.setJitter=function(t){this.jitter=t}},{}],261:[function(t,e,i){var n=[].slice;e.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var i=n.call(arguments,2);return function(){return e.apply(t,i.concat(n.call(arguments)))}}},{}],262:[function(t,e,i){function n(t){return t?o(t):void 0}function o(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},n.prototype.once=function(t,e){function i(){n.off(t,i),e.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},i.fn=e,this.on(t,i),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks[t];if(!i)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var n,o=0;o<i.length;o++)if(n=i[o],n===e||n.fn===e){i.splice(o,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),i=this._callbacks[t];if(i){i=i.slice(0);for(var n=0,o=i.length;o>n;++n)i[n].apply(this,e)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],263:[function(t,e,i){function n(t){return n.enabled(t)?function(e){e=o(e);var i=new Date,r=i-(n[t]||i);n[t]=i,e=t+" "+e+" +"+n.humanize(r),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function o(t){return t instanceof Error?t.stack||t.message:t}e.exports=n,n.names=[],n.skips=[],n.enable=function(t){try{localStorage.debug=t}catch(e){}for(var i=(t||"").split(/[\s,]+/),o=i.length,r=0;o>r;r++)t=i[r].replace("*",".*?"),"-"===t[0]?n.skips.push(new RegExp("^"+t.substr(1)+"$")):n.names.push(new RegExp("^"+t+"$"))},n.disable=function(){n.enable("")},n.humanize=function(t){var e=1e3,i=6e4,n=60*i;return t>=n?(t/n).toFixed(1)+"h":t>=i?(t/i).toFixed(1)+"m":t>=e?(t/e|0)+"s":t+"ms"},n.enabled=function(t){for(var e=0,i=n.skips.length;i>e;e++)if(n.skips[e].test(t))return!1;for(var e=0,i=n.names.length;i>e;e++)if(n.names[e].test(t))return!0;return!1};try{window.localStorage&&n.enable(localStorage.debug)}catch(r){}},{}],264:[function(t,e,i){e.exports=t("./lib/")},{"./lib/":265}],265:[function(t,e,i){e.exports=t("./socket"),e.exports.parser=t("engine.io-parser")},{"./socket":266,"engine.io-parser":278}],266:[function(t,e,i){(function(i){function n(t,e){if(!(this instanceof n))return new n(t,e);if(e=e||{},t&&"object"==typeof t&&(e=t,t=null),t&&(t=c(t),e.host=t.host,e.secure="https"==t.protocol||"wss"==t.protocol,e.port=t.port,t.query&&(e.query=t.query)),this.secure=null!=e.secure?e.secure:i.location&&"https:"==location.protocol,e.host){var o=e.host.split(":");e.hostname=o.shift(),o.length?e.port=o.pop():e.port||(e.port=this.secure?"443":"80")}this.agent=e.agent||!1,this.hostname=e.hostname||(i.location?location.hostname:"localhost"),this.port=e.port||(i.location&&location.port?location.port:this.secure?443:80),this.query=e.query||{},"string"==typeof this.query&&(this.query=p.decode(this.query)),this.upgrade=!1!==e.upgrade,this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!e.forceJSONP,this.jsonp=!1!==e.jsonp,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.timestampParam=e.timestampParam||"t",this.timestampRequests=e.timestampRequests,this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades,this.pfx=e.pfx||null,this.key=e.key||null,this.passphrase=e.passphrase||null,this.cert=e.cert||null,this.ca=e.ca||null,this.ciphers=e.ciphers||null,this.rejectUnauthorized=e.rejectUnauthorized||null,this.open()}function o(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}var r=t("./transports"),s=t("component-emitter"),a=t("debug")("engine.io-client:socket"),l=t("indexof"),u=t("engine.io-parser"),c=t("parseuri"),h=t("parsejson"),p=t("parseqs");e.exports=n,n.priorWebsocketSuccess=!1,s(n.prototype),n.protocol=u.protocol,n.Socket=n,n.Transport=t("./transport"),n.transports=t("./transports"),n.parser=t("engine.io-parser"),n.prototype.createTransport=function(t){a('creating transport "%s"',t);var e=o(this.query);e.EIO=u.protocol,e.transport=t,this.id&&(e.sid=this.id);var i=new r[t]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:e,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized});return i},n.prototype.open=function(){var t;if(this.rememberUpgrade&&n.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))t="websocket";else{if(0==this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";var t;try{t=this.createTransport(t)}catch(i){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},n.prototype.setTransport=function(t){a("setting transport %s",t.name);var e=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},n.prototype.probe=function(t){function e(){if(p.onlyBinaryUpgrades){var e=!this.supportsBinary&&p.transport.supportsBinary;h=h||e}h||(a('probe transport "%s" opened',t),c.send([{type:"ping",data:"probe"}]),c.once("packet",function(e){if(!h)if("pong"==e.type&&"probe"==e.data){if(a('probe transport "%s" pong',t),p.upgrading=!0,p.emit("upgrading",c),!c)return;n.priorWebsocketSuccess="websocket"==c.name,a('pausing current transport "%s"',p.transport.name),p.transport.pause(function(){h||"closed"!=p.readyState&&(a("changing transport and sending upgrade packet"),u(),p.setTransport(c),c.send([{type:"upgrade"}]),p.emit("upgrade",c),c=null,p.upgrading=!1,p.flush())})}else{a('probe transport "%s" failed',t);var i=new Error("probe error");i.transport=c.name,p.emit("upgradeError",i)}}))}function i(){h||(h=!0,u(),c.close(),c=null)}function o(e){var n=new Error("probe error: "+e);n.transport=c.name,i(),a('probe transport "%s" failed because of error: %s',t,e),p.emit("upgradeError",n)}function r(){o("transport closed")}function s(){o("socket closed")}function l(t){c&&t.name!=c.name&&(a('"%s" works - aborting "%s"',t.name,c.name),i())}function u(){c.removeListener("open",e),c.removeListener("error",o),c.removeListener("close",r),p.removeListener("close",s),p.removeListener("upgrading",l)}a('probing transport "%s"',t);var c=this.createTransport(t,{probe:1}),h=!1,p=this;n.priorWebsocketSuccess=!1,c.once("open",e),c.once("error",o),c.once("close",r),this.once("close",s),this.once("upgrading",l),c.open()},n.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",n.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var t=0,e=this.upgrades.length;e>t;t++)this.probe(this.upgrades[t])}},n.prototype.onPacket=function(t){if("opening"==this.readyState||"open"==this.readyState)switch(a('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(h(t.data));break;case"pong":this.setPing();break;case"error":var e=new Error("server error");e.code=t.data,this.emit("error",e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else a('packet received with socket readyState "%s"',this.readyState)},n.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},n.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!=e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},n.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){a("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},n.prototype.ping=function(){this.sendPacket("ping")},n.prototype.onDrain=function(){for(var t=0;t<this.prevBufferLen;t++)this.callbackBuffer[t]&&this.callbackBuffer[t]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},n.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},n.prototype.write=n.prototype.send=function(t,e){return this.sendPacket("message",t,e),this},n.prototype.sendPacket=function(t,e,i){
if("closing"!=this.readyState&&"closed"!=this.readyState){var n={type:t,data:e};this.emit("packetCreate",n),this.writeBuffer.push(n),this.callbackBuffer.push(i),this.flush()}},n.prototype.close=function(){function t(){n.onClose("forced close"),a("socket closing - telling transport to close"),n.transport.close()}function e(){n.removeListener("upgrade",e),n.removeListener("upgradeError",e),t()}function i(){n.once("upgrade",e),n.once("upgradeError",e)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var n=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?i():t()}):this.upgrading?i():t()}return this},n.prototype.onError=function(t){a("socket error %j",t),n.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},n.prototype.onClose=function(t,e){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){a('socket close with reason: "%s"',t);var i=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){i.writeBuffer=[],i.callbackBuffer=[],i.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e)}},n.prototype.filterUpgrades=function(t){for(var e=[],i=0,n=t.length;n>i;i++)~l(this.transports,t[i])&&e.push(t[i]);return e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":267,"./transports":268,"component-emitter":262,debug:275,"engine.io-parser":278,indexof:293,parsejson:287,parseqs:288,parseuri:289}],267:[function(t,e,i){function n(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized}var o=t("engine.io-parser"),r=t("component-emitter");e.exports=n,r(n.prototype),n.timestamps=0,n.prototype.onError=function(t,e){var i=new Error(t);return i.type="TransportError",i.description=e,this.emit("error",i),this},n.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},n.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this},n.prototype.send=function(t){if("open"!=this.readyState)throw new Error("Transport not open");this.write(t)},n.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},n.prototype.onData=function(t){var e=o.decodePacket(t,this.socket.binaryType);this.onPacket(e)},n.prototype.onPacket=function(t){this.emit("packet",t)},n.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":262,"engine.io-parser":278}],268:[function(t,e,i){(function(e){function n(t){var i,n=!1,a=!1,l=!1!==t.jsonp;if(e.location){var u="https:"==location.protocol,c=location.port;c||(c=u?443:80),n=t.hostname!=location.hostname||c!=t.port,a=t.secure!=u}if(t.xdomain=n,t.xscheme=a,i=new o(t),"open"in i&&!t.forceJSONP)return new r(t);if(!l)throw new Error("JSONP disabled");return new s(t)}var o=t("xmlhttprequest"),r=t("./polling-xhr"),s=t("./polling-jsonp"),a=t("./websocket");i.polling=n,i.websocket=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":269,"./polling-xhr":270,"./websocket":272,xmlhttprequest:273}],269:[function(t,e,i){(function(i){function n(){}function o(t){r.call(this,t),this.query=this.query||{},a||(i.___eio||(i.___eio=[]),a=i.___eio),this.index=a.length;var e=this;a.push(function(t){e.onData(t)}),this.query.j=this.index,i.document&&i.addEventListener&&i.addEventListener("beforeunload",function(){e.script&&(e.script.onerror=n)},!1)}var r=t("./polling"),s=t("component-inherit");e.exports=o;var a,l=/\n/g,u=/\\n/g;s(o,r),o.prototype.supportsBinary=!1,o.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},o.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(e,i),this.script=e;var n="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);n&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},o.prototype.doWrite=function(t,e){function i(){n(),e()}function n(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(t){o.onError("jsonp polling iframe removal error",t)}try{var e='<iframe src="javascript:0" name="'+o.iframeId+'">';r=document.createElement(e)}catch(t){r=document.createElement("iframe"),r.name=o.iframeId,r.src="javascript:0"}r.id=o.iframeId,o.form.appendChild(r),o.iframe=r}var o=this;if(!this.form){var r,s=document.createElement("form"),a=document.createElement("textarea"),c=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=c,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),n(),t=t.replace(u,"\\\n"),this.area.value=t.replace(l,"\\n");try{this.form.submit()}catch(h){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==o.iframe.readyState&&i()}:this.iframe.onload=i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":271,"component-inherit":274}],270:[function(t,e,i){(function(i){function n(){}function o(t){if(l.call(this,t),i.location){var e="https:"==location.protocol,n=location.port;n||(n=e?443:80),this.xd=t.hostname!=i.location.hostname||n!=t.port,this.xs=t.secure!=e}}function r(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!=t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.create()}function s(){for(var t in r.requests)r.requests.hasOwnProperty(t)&&r.requests[t].abort()}var a=t("xmlhttprequest"),l=t("./polling"),u=t("component-emitter"),c=t("component-inherit"),h=t("debug")("engine.io-client:polling-xhr");e.exports=o,e.exports.Request=r,c(o,l),o.prototype.supportsBinary=!0,o.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,new r(t)},o.prototype.doWrite=function(t,e){var i="string"!=typeof t&&void 0!==t,n=this.request({method:"POST",data:t,isBinary:i}),o=this;n.on("success",e),n.on("error",function(t){o.onError("xhr post error",t)}),this.sendXhr=n},o.prototype.doPoll=function(){h("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},u(r.prototype),r.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var e=this.xhr=new a(t),n=this;try{if(h("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async),this.supportsBinary&&(e.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(o){}"withCredentials"in e&&(e.withCredentials=!0),this.hasXDR()?(e.onload=function(){n.onLoad()},e.onerror=function(){n.onError(e.responseText)}):e.onreadystatechange=function(){4==e.readyState&&(200==e.status||1223==e.status?n.onLoad():setTimeout(function(){n.onError(e.status)},0))},h("xhr data %s",this.data),e.send(this.data)}catch(o){return void setTimeout(function(){n.onError(o)},0)}i.document&&(this.index=r.requestsCount++,r.requests[this.index]=this)},r.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},r.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},r.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},r.prototype.cleanup=function(t){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=n:this.xhr.onreadystatechange=n,t)try{this.xhr.abort()}catch(e){}i.document&&delete r.requests[this.index],this.xhr=null}},r.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(i){}t="application/octet-stream"===e?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(i){this.onError(i)}null!=t&&this.onData(t)},r.prototype.hasXDR=function(){return"undefined"!=typeof i.XDomainRequest&&!this.xs&&this.enablesXDR},r.prototype.abort=function(){this.cleanup()},i.document&&(r.requestsCount=0,r.requests={},i.attachEvent?i.attachEvent("onunload",s):i.addEventListener&&i.addEventListener("beforeunload",s,!1))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":271,"component-emitter":262,"component-inherit":274,debug:275,xmlhttprequest:273}],271:[function(t,e,i){function n(t){var e=t&&t.forceBase64;(!u||e)&&(this.supportsBinary=!1),o.call(this,t)}var o=t("../transport"),r=t("parseqs"),s=t("engine.io-parser"),a=t("component-inherit"),l=t("debug")("engine.io-client:polling");e.exports=n;var u=function(){var e=t("xmlhttprequest"),i=new e({xdomain:!1});return null!=i.responseType}();a(n,o),n.prototype.name="polling",n.prototype.doOpen=function(){this.poll()},n.prototype.pause=function(t){function e(){l("paused"),i.readyState="paused",t()}var i=this;if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(l("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){l("pre-pause polling complete"),--n||e()})),this.writable||(l("we are currently writing - waiting to pause"),n++,this.once("drain",function(){l("pre-pause writing complete"),--n||e()}))}else e()},n.prototype.poll=function(){l("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},n.prototype.onData=function(t){var e=this;l("polling got data %s",t);var i=function(t,i,n){return"opening"==e.readyState&&e.onOpen(),"close"==t.type?(e.onClose(),!1):void e.onPacket(t)};s.decodePayload(t,this.socket.binaryType,i),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():l('ignoring poll - transport state "%s"',this.readyState))},n.prototype.doClose=function(){function t(){l("writing close packet"),e.write([{type:"close"}])}var e=this;"open"==this.readyState?(l("transport open - closing"),t()):(l("transport not open - deferring close"),this.once("open",t))},n.prototype.write=function(t){var e=this;this.writable=!1;var i=function(){e.writable=!0,e.emit("drain")},e=this;s.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,i)})},n.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",i="";return!1!==this.timestampRequests&&(t[this.timestampParam]=+new Date+"-"+o.timestamps++),this.supportsBinary||t.sid||(t.b64=1),t=r.encode(t),this.port&&("https"==e&&443!=this.port||"http"==e&&80!=this.port)&&(i=":"+this.port),t.length&&(t="?"+t),e+"://"+this.hostname+i+this.path+t}},{"../transport":267,"component-inherit":274,debug:275,"engine.io-parser":278,parseqs:288,xmlhttprequest:273}],272:[function(t,e,i){function n(t){var e=t&&t.forceBase64;e&&(this.supportsBinary=!1),o.call(this,t)}var o=t("../transport"),r=t("engine.io-parser"),s=t("parseqs"),a=t("component-inherit"),l=t("debug")("engine.io-client:websocket"),u=t("ws");e.exports=n,a(n,o),n.prototype.name="websocket",n.prototype.supportsBinary=!0,n.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=void 0,i={agent:this.agent};i.pfx=this.pfx,i.key=this.key,i.passphrase=this.passphrase,i.cert=this.cert,i.ca=this.ca,i.ciphers=this.ciphers,i.rejectUnauthorized=this.rejectUnauthorized,this.ws=new u(t,e,i),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},n.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(n.prototype.onData=function(t){var e=this;setTimeout(function(){o.prototype.onData.call(e,t)},0)}),n.prototype.write=function(t){function e(){i.writable=!0,i.emit("drain")}var i=this;this.writable=!1;for(var n=0,o=t.length;o>n;n++)r.encodePacket(t[n],this.supportsBinary,function(t){try{i.ws.send(t)}catch(e){l("websocket closed before onclose event")}});setTimeout(e,0)},n.prototype.onClose=function(){o.prototype.onClose.call(this)},n.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},n.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",i="";return this.port&&("wss"==e&&443!=this.port||"ws"==e&&80!=this.port)&&(i=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=+new Date),this.supportsBinary||(t.b64=1),t=s.encode(t),t.length&&(t="?"+t),e+"://"+this.hostname+i+this.path+t},n.prototype.check=function(){return!(!u||"__initialize"in u&&this.name===n.prototype.name)}},{"../transport":267,"component-inherit":274,debug:275,"engine.io-parser":278,parseqs:288,ws:290}],273:[function(t,e,i){var n=t("has-cors");e.exports=function(t){var e=t.xdomain,i=t.xscheme,o=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||n))return new XMLHttpRequest}catch(r){}try{if("undefined"!=typeof XDomainRequest&&!i&&o)return new XDomainRequest}catch(r){}if(!e)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(r){}}},{"has-cors":285}],274:[function(t,e,i){e.exports=function(t,e){var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},{}],275:[function(t,e,i){function n(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var t=arguments,e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" ")+"+"+i.humanize(this.diff),!e)return t;var n="color: "+this.color;t=[t[0],n,"color: inherit"].concat(Array.prototype.slice.call(t,1));var o=0,r=0;return t[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&(o++,"%c"===t&&(r=o))}),t.splice(r,0,n),t}function r(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(t){try{null==t?localStorage.removeItem("debug"):localStorage.debug=t}catch(e){}}function a(){var t;try{t=localStorage.debug}catch(e){}return t}i=e.exports=t("./debug"),i.log=r,i.formatArgs=o,i.save=s,i.load=a,i.useColors=n,i.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],i.formatters.j=function(t){return JSON.stringify(t)},i.enable(a())},{"./debug":276}],276:[function(t,e,i){function n(){return i.colors[c++%i.colors.length]}function o(t){function e(){}function o(){var t=o,e=+new Date,r=e-(u||e);t.diff=r,t.prev=u,t.curr=e,u=e,null==t.useColors&&(t.useColors=i.useColors()),null==t.color&&t.useColors&&(t.color=n());var s=Array.prototype.slice.call(arguments);s[0]=i.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(e,n){if("%%"===e)return e;a++;var o=i.formatters[n];if("function"==typeof o){var r=s[a];e=o.call(t,r),s.splice(a,1),a--}return e}),"function"==typeof i.formatArgs&&(s=i.formatArgs.apply(t,s));var l=o.log||i.log||console.log.bind(console);l.apply(t,s)}e.enabled=!1,o.enabled=!0;var r=i.enabled(t)?o:e;return r.namespace=t,r}function r(t){i.save(t);for(var e=(t||"").split(/[\s,]+/),n=e.length,o=0;n>o;o++)e[o]&&(t=e[o].replace(/\*/g,".*?"),"-"===t[0]?i.skips.push(new RegExp("^"+t.substr(1)+"$")):i.names.push(new RegExp("^"+t+"$")))}function s(){i.enable("")}function a(t){var e,n;for(e=0,n=i.skips.length;n>e;e++)if(i.skips[e].test(t))return!1;for(e=0,n=i.names.length;n>e;e++)if(i.names[e].test(t))return!0;return!1}function l(t){return t instanceof Error?t.stack||t.message:t}i=e.exports=o,i.coerce=l,i.disable=s,i.enable=r,i.enabled=a,i.humanize=t("ms"),i.names=[],i.skips=[],i.formatters={};var u,c=0},{ms:277}],277:[function(t,e,i){function n(t){var e=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(t);if(e){var i=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"y":return i*h;case"days":case"day":case"d":return i*c;case"hours":case"hour":case"h":return i*u;case"minutes":case"minute":case"m":return i*l;case"seconds":case"second":case"s":return i*a;case"ms":return i}}}function o(t){return t>=c?Math.round(t/c)+"d":t>=u?Math.round(t/u)+"h":t>=l?Math.round(t/l)+"m":t>=a?Math.round(t/a)+"s":t+"ms"}function r(t){return s(t,c,"day")||s(t,u,"hour")||s(t,l,"minute")||s(t,a,"second")||t+" ms"}function s(t,e,i){return e>t?void 0:1.5*e>t?Math.floor(t/e)+" "+i:Math.ceil(t/e)+" "+i+"s"}var a=1e3,l=60*a,u=60*l,c=24*u,h=365.25*c;e.exports=function(t,e){return e=e||{},"string"==typeof t?n(t):e["long"]?r(t):o(t)}},{}],278:[function(t,e,i){(function(e){function n(t,e){var n="b"+i.packets[t.type]+t.data.data;return e(n)}function o(t,e,n){if(!e)return i.encodeBase64Packet(t,n);var o=t.data,r=new Uint8Array(o),s=new Uint8Array(1+o.byteLength);s[0]=y[t.type];for(var a=0;a<r.length;a++)s[a+1]=r[a];return n(s.buffer)}function r(t,e,n){if(!e)return i.encodeBase64Packet(t,n);var o=new FileReader;return o.onload=function(){t.data=o.result,i.encodePacket(t,e,!0,n)},o.readAsArrayBuffer(t.data)}function s(t,e,n){if(!e)return i.encodeBase64Packet(t,n);if(g)return r(t,e,n);var o=new Uint8Array(1);o[0]=y[t.type];var s=new x([o.buffer,t.data]);return n(s)}function a(t,e,i){for(var n=new Array(t.length),o=p(t.length,i),r=function(t,i,o){e(i,function(e,i){n[t]=i,o(e,n)})},s=0;s<t.length;s++)r(s,t[s],o)}var l=t("./keys"),u=t("has-binary"),c=t("arraybuffer.slice"),h=t("base64-arraybuffer"),p=t("after"),d=t("utf8"),f=navigator.userAgent.match(/Android/i),m=/PhantomJS/i.test(navigator.userAgent),g=f||m;i.protocol=3;var y=i.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},v=l(y),b={type:"error",data:"parser error"},x=t("blob");i.encodePacket=function(t,i,r,a){"function"==typeof i&&(a=i,i=!1),"function"==typeof r&&(a=r,r=null);var l=void 0===t.data?void 0:t.data.buffer||t.data;if(e.ArrayBuffer&&l instanceof ArrayBuffer)return o(t,i,a);if(x&&l instanceof e.Blob)return s(t,i,a);if(l&&l.base64)return n(t,a);var u=y[t.type];return void 0!==t.data&&(u+=r?d.encode(String(t.data)):String(t.data)),a(""+u)},i.encodeBase64Packet=function(t,n){var o="b"+i.packets[t.type];if(x&&t.data instanceof x){var r=new FileReader;return r.onload=function(){var t=r.result.split(",")[1];n(o+t)},r.readAsDataURL(t.data)}var s;try{s=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(a){for(var l=new Uint8Array(t.data),u=new Array(l.length),c=0;c<l.length;c++)u[c]=l[c];s=String.fromCharCode.apply(null,u)}return o+=e.btoa(s),n(o)},i.decodePacket=function(t,e,n){if("string"==typeof t||void 0===t){if("b"==t.charAt(0))return i.decodeBase64Packet(t.substr(1),e);if(n)try{t=d.decode(t)}catch(o){return b}var r=t.charAt(0);return Number(r)==r&&v[r]?t.length>1?{type:v[r],data:t.substring(1)}:{type:v[r]}:b}var s=new Uint8Array(t),r=s[0],a=c(t,1);return x&&"blob"===e&&(a=new x([a])),{type:v[r],data:a}},i.decodeBase64Packet=function(t,i){var n=v[t.charAt(0)];if(!e.ArrayBuffer)return{type:n,data:{base64:!0,data:t.substr(1)}};var o=h.decode(t.substr(1));return"blob"===i&&x&&(o=new x([o])),{type:n,data:o}},i.encodePayload=function(t,e,n){function o(t){return t.length+":"+t}function r(t,n){i.encodePacket(t,s?e:!1,!0,function(t){n(null,o(t))})}"function"==typeof e&&(n=e,e=null);var s=u(t);return e&&s?x&&!g?i.encodePayloadAsBlob(t,n):i.encodePayloadAsArrayBuffer(t,n):t.length?void a(t,r,function(t,e){return n(e.join(""))}):n("0:")},i.decodePayload=function(t,e,n){if("string"!=typeof t)return i.decodePayloadAsBinary(t,e,n);"function"==typeof e&&(n=e,e=null);var o;if(""==t)return n(b,0,1);for(var r,s,a="",l=0,u=t.length;u>l;l++){var c=t.charAt(l);if(":"!=c)a+=c;else{if(""==a||a!=(r=Number(a)))return n(b,0,1);if(s=t.substr(l+1,r),a!=s.length)return n(b,0,1);if(s.length){if(o=i.decodePacket(s,e,!0),b.type==o.type&&b.data==o.data)return n(b,0,1);var h=n(o,l+r,u);if(!1===h)return}l+=r,a=""}}return""!=a?n(b,0,1):void 0},i.encodePayloadAsArrayBuffer=function(t,e){function n(t,e){i.encodePacket(t,!0,!0,function(t){return e(null,t)})}return t.length?void a(t,n,function(t,i){var n=i.reduce(function(t,e){var i;return i="string"==typeof e?e.length:e.byteLength,t+i.toString().length+i+2},0),o=new Uint8Array(n),r=0;return i.forEach(function(t){var e="string"==typeof t,i=t;if(e){for(var n=new Uint8Array(t.length),s=0;s<t.length;s++)n[s]=t.charCodeAt(s);i=n.buffer}e?o[r++]=0:o[r++]=1;for(var a=i.byteLength.toString(),s=0;s<a.length;s++)o[r++]=parseInt(a[s]);o[r++]=255;for(var n=new Uint8Array(i),s=0;s<n.length;s++)o[r++]=n[s]}),e(o.buffer)}):e(new ArrayBuffer(0))},i.encodePayloadAsBlob=function(t,e){function n(t,e){i.encodePacket(t,!0,!0,function(t){var i=new Uint8Array(1);if(i[0]=1,"string"==typeof t){for(var n=new Uint8Array(t.length),o=0;o<t.length;o++)n[o]=t.charCodeAt(o);t=n.buffer,i[0]=0}for(var r=t instanceof ArrayBuffer?t.byteLength:t.size,s=r.toString(),a=new Uint8Array(s.length+1),o=0;o<s.length;o++)a[o]=parseInt(s[o]);if(a[s.length]=255,x){var l=new x([i.buffer,a.buffer,t]);e(null,l)}})}a(t,n,function(t,i){return e(new x(i))})},i.decodePayloadAsBinary=function(t,e,n){"function"==typeof e&&(n=e,e=null);for(var o=t,r=[],s=!1;o.byteLength>0;){for(var a=new Uint8Array(o),l=0===a[0],u="",h=1;255!=a[h];h++){if(u.length>310){s=!0;break}u+=a[h]}if(s)return n(b,0,1);o=c(o,2+u.length),u=parseInt(u);var p=c(o,0,u);if(l)try{p=String.fromCharCode.apply(null,new Uint8Array(p))}catch(d){var f=new Uint8Array(p);p="";for(var h=0;h<f.length;h++)p+=String.fromCharCode(f[h])}r.push(p),o=c(o,u)}var m=r.length;r.forEach(function(t,o){n(i.decodePacket(t,e,!0),o,m)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":279,after:280,"arraybuffer.slice":281,"base64-arraybuffer":282,blob:283,"has-binary":291,utf8:284}],279:[function(t,e,i){e.exports=Object.keys||function(t){var e=[],i=Object.prototype.hasOwnProperty;for(var n in t)i.call(t,n)&&e.push(n);return e}},{}],280:[function(t,e,i){function n(t,e,i){function n(t,o){if(n.count<=0)throw new Error("after called too many times");--n.count,t?(r=!0,e(t),e=i):0!==n.count||r||e(null,o)}var r=!1;return i=i||o,n.count=t,0===t?e():n}function o(){}e.exports=n},{}],281:[function(t,e,i){e.exports=function(t,e,i){var n=t.byteLength;if(e=e||0,i=i||n,t.slice)return t.slice(e,i);if(0>e&&(e+=n),0>i&&(i+=n),i>n&&(i=n),e>=n||e>=i||0===n)return new ArrayBuffer(0);for(var o=new Uint8Array(t),r=new Uint8Array(i-e),s=e,a=0;i>s;s++,a++)r[a]=o[s];return r.buffer}},{}],282:[function(t,e,i){!function(t){"use strict";i.encode=function(e){var i,n=new Uint8Array(e),o=n.length,r="";for(i=0;o>i;i+=3)r+=t[n[i]>>2],r+=t[(3&n[i])<<4|n[i+1]>>4],r+=t[(15&n[i+1])<<2|n[i+2]>>6],r+=t[63&n[i+2]];return o%3===2?r=r.substring(0,r.length-1)+"=":o%3===1&&(r=r.substring(0,r.length-2)+"=="),r},i.decode=function(e){var i,n,o,r,s,a=.75*e.length,l=e.length,u=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var c=new ArrayBuffer(a),h=new Uint8Array(c);for(i=0;l>i;i+=4)n=t.indexOf(e[i]),o=t.indexOf(e[i+1]),r=t.indexOf(e[i+2]),s=t.indexOf(e[i+3]),h[u++]=n<<2|o>>4,h[u++]=(15&o)<<4|r>>2,h[u++]=(3&r)<<6|63&s;return c}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],283:[function(t,e,i){(function(t){function i(t){for(var e=0;e<t.length;e++){var i=t[e];if(i.buffer instanceof ArrayBuffer){var n=i.buffer;if(i.byteLength!==n.byteLength){var o=new Uint8Array(i.byteLength);o.set(new Uint8Array(n,i.byteOffset,i.byteLength)),n=o.buffer}t[e]=n}}}function n(t,e){e=e||{};var n=new r;i(t);for(var o=0;o<t.length;o++)n.append(t[o]);return e.type?n.getBlob(e.type):n.getBlob()}function o(t,e){return i(t),new Blob(t,e||{})}var r=t.BlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder||t.MozBlobBuilder,s=function(){try{var t=new Blob(["hi"]);return 2===t.size}catch(e){return!1}}(),a=s&&function(){try{var t=new Blob([new Uint8Array([1,2])]);return 2===t.size}catch(e){return!1}}(),l=r&&r.prototype.append&&r.prototype.getBlob;e.exports=function(){return s?a?t.Blob:o:l?n:void 0}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],284:[function(t,e,i){(function(t){!function(n){function o(t){for(var e,i,n=[],o=0,r=t.length;r>o;)e=t.charCodeAt(o++),e>=55296&&56319>=e&&r>o?(i=t.charCodeAt(o++),56320==(64512&i)?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),o--)):n.push(e);return n}function r(t){for(var e,i=t.length,n=-1,o="";++n<i;)e=t[n],e>65535&&(e-=65536,o+=b(e>>>10&1023|55296),e=56320|1023&e),o+=b(e);return o}function s(t){if(t>=55296&&57343>=t)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function a(t,e){return b(t>>e&63|128)}function l(t){if(0==(4294967168&t))return b(t);var e="";return 0==(4294965248&t)?e=b(t>>6&31|192):0==(4294901760&t)?(s(t),e=b(t>>12&15|224),e+=a(t,6)):0==(4292870144&t)&&(e=b(t>>18&7|240),e+=a(t,12),e+=a(t,6)),e+=b(63&t|128)}function u(t){for(var e,i=o(t),n=i.length,r=-1,s="";++r<n;)e=i[r],s+=l(e);return s}function c(){if(v>=y)throw Error("Invalid byte index");var t=255&g[v];if(v++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function h(){var t,e,i,n,o;if(v>y)throw Error("Invalid byte index");if(v==y)return!1;if(t=255&g[v],v++,0==(128&t))return t;if(192==(224&t)){var e=c();if(o=(31&t)<<6|e,o>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&t)){if(e=c(),i=c(),o=(15&t)<<12|e<<6|i,o>=2048)return s(o),o;throw Error("Invalid continuation byte")}if(240==(248&t)&&(e=c(),i=c(),n=c(),o=(15&t)<<18|e<<12|i<<6|n,o>=65536&&1114111>=o))return o;throw Error("Invalid UTF-8 detected")}function p(t){g=o(t),y=g.length,v=0;for(var e,i=[];(e=h())!==!1;)i.push(e);return r(i)}var d="object"==typeof i&&i,f="object"==typeof e&&e&&e.exports==d&&e,m="object"==typeof t&&t;(m.global===m||m.window===m)&&(n=m);var g,y,v,b=String.fromCharCode,x={version:"2.0.0",encode:u,decode:p};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return x});else if(d&&!d.nodeType)if(f)f.exports=x;else{var _={},w=_.hasOwnProperty;for(var S in x)w.call(x,S)&&(d[S]=x[S])}else n.utf8=x}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],285:[function(t,e,i){var n=t("global");try{e.exports="XMLHttpRequest"in n&&"withCredentials"in new n.XMLHttpRequest}catch(o){e.exports=!1}},{global:286}],286:[function(t,e,i){e.exports=function(){return this}()},{}],287:[function(t,e,i){(function(t){var i=/^[\],:{}\s]*$/,n=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,o=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,r=/(?:^|:|,)(?:\s*\[)+/g,s=/^\s+/,a=/\s+$/;e.exports=function(e){return"string"==typeof e&&e?(e=e.replace(s,"").replace(a,""),t.JSON&&JSON.parse?JSON.parse(e):i.test(e.replace(n,"@").replace(o,"]").replace(r,""))?new Function("return "+e)():void 0):null}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],288:[function(t,e,i){i.encode=function(t){var e="";for(var i in t)t.hasOwnProperty(i)&&(e.length&&(e+="&"),e+=encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e},i.decode=function(t){for(var e={},i=t.split("&"),n=0,o=i.length;o>n;n++){var r=i[n].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}},{}],289:[function(t,e,i){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,o=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(t){var e=t,i=t.indexOf("["),r=t.indexOf("]");-1!=i&&-1!=r&&(t=t.substring(0,i)+t.substring(i,r).replace(/:/g,";")+t.substring(r,t.length));for(var s=n.exec(t||""),a={},l=14;l--;)a[o[l]]=s[l]||"";return-1!=i&&-1!=r&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},{}],290:[function(t,e,i){function n(t,e,i){var n;return n=e?new r(t,e):new r(t)}var o=function(){return this}(),r=o.WebSocket||o.MozWebSocket;e.exports=r?n:null,r&&(n.prototype=r.prototype)},{}],291:[function(t,e,i){(function(i){function n(t){function e(t){if(!t)return!1;if(i.Buffer&&i.Buffer.isBuffer(t)||i.ArrayBuffer&&t instanceof ArrayBuffer||i.Blob&&t instanceof Blob||i.File&&t instanceof File)return!0;if(o(t)){for(var n=0;n<t.length;n++)if(e(t[n]))return!0}else if(t&&"object"==typeof t){t.toJSON&&(t=t.toJSON());for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return!0}return!1}return e(t)}var o=t("isarray");e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:292}],292:[function(t,e,i){e.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},{}],293:[function(t,e,i){var n=[].indexOf;e.exports=function(t,e){if(n)return t.indexOf(e);for(var i=0;i<t.length;++i)if(t[i]===e)return i;return-1}},{}],294:[function(t,e,i){var n=Object.prototype.hasOwnProperty;i.keys=Object.keys||function(t){var e=[];for(var i in t)n.call(t,i)&&e.push(i);return e},i.values=function(t){var e=[];for(var i in t)n.call(t,i)&&e.push(t[i]);return e},i.merge=function(t,e){for(var i in e)n.call(e,i)&&(t[i]=e[i]);return t},i.length=function(t){return i.keys(t).length},i.isEmpty=function(t){return 0==i.length(t)}},{}],295:[function(t,e,i){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,o=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(t){for(var e=n.exec(t||""),i={},r=14;r--;)i[o[r]]=e[r]||"";return i}},{}],296:[function(t,e,i){(function(e){var n=t("isarray"),o=t("./is-buffer");i.deconstructPacket=function(t){function e(t){if(!t)return t;if(o(t)){var r={_placeholder:!0,num:i.length
};return i.push(t),r}if(n(t)){for(var s=new Array(t.length),a=0;a<t.length;a++)s[a]=e(t[a]);return s}if("object"==typeof t&&!(t instanceof Date)){var s={};for(var l in t)s[l]=e(t[l]);return s}return t}var i=[],r=t.data,s=t;return s.data=e(r),s.attachments=i.length,{packet:s,buffers:i}},i.reconstructPacket=function(t,e){function i(t){if(t&&t._placeholder){var o=e[t.num];return o}if(n(t)){for(var r=0;r<t.length;r++)t[r]=i(t[r]);return t}if(t&&"object"==typeof t){for(var s in t)t[s]=i(t[s]);return t}return t}return t.data=i(t.data),t.attachments=void 0,t},i.removeBlobs=function(t,i){function r(t,l,u){if(!t)return t;if(e.Blob&&t instanceof Blob||e.File&&t instanceof File){s++;var c=new FileReader;c.onload=function(){u?u[l]=this.result:a=this.result,--s||i(a)},c.readAsArrayBuffer(t)}else if(n(t))for(var h=0;h<t.length;h++)r(t[h],h,t);else if(t&&"object"==typeof t&&!o(t))for(var p in t)r(t[p],p,t)}var s=0,a=t;r(a),s||i(a)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":298,isarray:299}],297:[function(t,e,i){function n(){}function o(t){var e="",n=!1;return e+=t.type,(i.BINARY_EVENT==t.type||i.BINARY_ACK==t.type)&&(e+=t.attachments,e+="-"),t.nsp&&"/"!=t.nsp&&(n=!0,e+=t.nsp),null!=t.id&&(n&&(e+=",",n=!1),e+=t.id),null!=t.data&&(n&&(e+=","),e+=h.stringify(t.data)),c("encoded %j as %s",t,e),e}function r(t,e){function i(t){var i=d.deconstructPacket(t),n=o(i.packet),r=i.buffers;r.unshift(n),e(r)}d.removeBlobs(t,i)}function s(){this.reconstructor=null}function a(t){var e={},n=0;if(e.type=Number(t.charAt(0)),null==i.types[e.type])return u();if(i.BINARY_EVENT==e.type||i.BINARY_ACK==e.type){for(var o="";"-"!=t.charAt(++n)&&(o+=t.charAt(n),n!=t.length););if(o!=Number(o)||"-"!=t.charAt(n))throw new Error("Illegal attachments");e.attachments=Number(o)}if("/"==t.charAt(n+1))for(e.nsp="";++n;){var r=t.charAt(n);if(","==r)break;if(e.nsp+=r,n==t.length)break}else e.nsp="/";var s=t.charAt(n+1);if(""!==s&&Number(s)==s){for(e.id="";++n;){var r=t.charAt(n);if(null==r||Number(r)!=r){--n;break}if(e.id+=t.charAt(n),n==t.length)break}e.id=Number(e.id)}if(t.charAt(++n))try{e.data=h.parse(t.substr(n))}catch(a){return u()}return c("decoded %s as %j",t,e),e}function l(t){this.reconPack=t,this.buffers=[]}function u(t){return{type:i.ERROR,data:"parser error"}}var c=t("debug")("socket.io-parser"),h=t("json3"),p=(t("isarray"),t("component-emitter")),d=t("./binary"),f=t("./is-buffer");i.protocol=4,i.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],i.CONNECT=0,i.DISCONNECT=1,i.EVENT=2,i.ACK=3,i.ERROR=4,i.BINARY_EVENT=5,i.BINARY_ACK=6,i.Encoder=n,i.Decoder=s,n.prototype.encode=function(t,e){if(c("encoding packet %j",t),i.BINARY_EVENT==t.type||i.BINARY_ACK==t.type)r(t,e);else{var n=o(t);e([n])}},p(s.prototype),s.prototype.add=function(t){var e;if("string"==typeof t)e=a(t),i.BINARY_EVENT==e.type||i.BINARY_ACK==e.type?(this.reconstructor=new l(e),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",e)):this.emit("decoded",e);else{if(!f(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,this.emit("decoded",e))}},s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},l.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length==this.reconPack.attachments){var e=d.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},l.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":296,"./is-buffer":298,"component-emitter":262,debug:263,isarray:299,json3:300}],298:[function(t,e,i){(function(t){function i(e){return t.Buffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer}e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],299:[function(t,e,i){arguments[4][292][0].apply(i,arguments)},{dup:292}],300:[function(t,e,i){!function(t){function e(t){if(e[t]!==r)return e[t];var i;if("bug-string-char-index"==t)i="a"!="a"[0];else if("json"==t)i=e("json-stringify")&&e("json-parse");else{var n,o='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var a=u.stringify,l="function"==typeof a&&c;if(l){(n=function(){return 1}).toJSON=n;try{l="0"===a(0)&&"0"===a(new Number)&&'""'==a(new String)&&a(s)===r&&a(r)===r&&a()===r&&"1"===a(n)&&"[1]"==a([n])&&"[null]"==a([r])&&"null"==a(null)&&"[null,null,null]"==a([r,s,null])&&a({a:[n,!0,!1,null,"\x00\b\n\f\r	"]})==o&&"1"===a(null,n)&&"[\n 1,\n 2\n]"==a([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==a(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==a(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==a(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==a(new Date(-1))}catch(h){l=!1}}i=l}if("json-parse"==t){var p=u.parse;if("function"==typeof p)try{if(0===p("0")&&!p(!1)){n=p(o);var d=5==n.a.length&&1===n.a[0];if(d){try{d=!p('"	"')}catch(h){}if(d)try{d=1!==p("01")}catch(h){}if(d)try{d=1!==p("1.")}catch(h){}}}}catch(h){d=!1}i=d}}return e[t]=!!i}var n,o,r,s={}.toString,a="function"==typeof define&&define.amd,l="object"==typeof JSON&&JSON,u="object"==typeof i&&i&&!i.nodeType&&i;u&&l?(u.stringify=l.stringify,u.parse=l.parse):u=t.JSON=l||{};var c=new Date(-0xc782b5b800cec);try{c=-109252==c.getUTCFullYear()&&0===c.getUTCMonth()&&1===c.getUTCDate()&&10==c.getUTCHours()&&37==c.getUTCMinutes()&&6==c.getUTCSeconds()&&708==c.getUTCMilliseconds()}catch(h){}if(!e("json")){var p="[object Function]",d="[object Date]",f="[object Number]",m="[object String]",g="[object Array]",y="[object Boolean]",v=e("bug-string-char-index");if(!c)var b=Math.floor,x=[0,31,59,90,120,151,181,212,243,273,304,334],_=function(t,e){return x[e]+365*(t-1970)+b((t-1969+(e=+(e>1)))/4)-b((t-1901+e)/100)+b((t-1601+e)/400)};(n={}.hasOwnProperty)||(n=function(t){var e,i={};return(i.__proto__=null,i.__proto__={toString:1},i).toString!=s?n=function(t){var e=this.__proto__,i=t in(this.__proto__=null,this);return this.__proto__=e,i}:(e=i.constructor,n=function(t){var i=(this.constructor||e).prototype;return t in this&&!(t in i&&this[t]===i[t])}),i=null,n.call(this,t)});var w={"boolean":1,number:1,string:1,undefined:1},S=function(t,e){var i=typeof t[e];return"object"==i?!!t[e]:!w[i]};if(o=function(t,e){var i,r,a,l=0;(i=function(){this.valueOf=0}).prototype.valueOf=0,r=new i;for(a in r)n.call(r,a)&&l++;return i=r=null,l?o=2==l?function(t,e){var i,o={},r=s.call(t)==p;for(i in t)r&&"prototype"==i||n.call(o,i)||!(o[i]=1)||!n.call(t,i)||e(i)}:function(t,e){var i,o,r=s.call(t)==p;for(i in t)r&&"prototype"==i||!n.call(t,i)||(o="constructor"===i)||e(i);(o||n.call(t,i="constructor"))&&e(i)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],o=function(t,e){var i,o,a=s.call(t)==p,l=!a&&"function"!=typeof t.constructor&&S(t,"hasOwnProperty")?t.hasOwnProperty:n;for(i in t)a&&"prototype"==i||!l.call(t,i)||e(i);for(o=r.length;i=r[--o];l.call(t,i)&&e(i));}),o(t,e)},!e("json-stringify")){var k={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},T="000000",E=function(t,e){return(T+(e||0)).slice(-t)},M="\\u00",C=function(t){var e,i='"',n=0,o=t.length,r=o>10&&v;for(r&&(e=t.split(""));o>n;n++){var s=t.charCodeAt(n);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:i+=k[s];break;default:if(32>s){i+=M+E(2,s.toString(16));break}i+=r?e[n]:v?t.charAt(n):t[n]}}return i+'"'},A=function(t,e,i,a,l,u,c){var h,p,v,x,w,S,k,T,M,R,D,z,L,P,I,N;try{h=e[t]}catch(O){}if("object"==typeof h&&h)if(p=s.call(h),p!=d||n.call(h,"toJSON"))"function"==typeof h.toJSON&&(p!=f&&p!=m&&p!=g||n.call(h,"toJSON"))&&(h=h.toJSON(t));else if(h>-1/0&&1/0>h){if(_){for(w=b(h/864e5),v=b(w/365.2425)+1970-1;_(v+1,0)<=w;v++);for(x=b((w-_(v,0))/30.42);_(v,x+1)<=w;x++);w=1+w-_(v,x),S=(h%864e5+864e5)%864e5,k=b(S/36e5)%24,T=b(S/6e4)%60,M=b(S/1e3)%60,R=S%1e3}else v=h.getUTCFullYear(),x=h.getUTCMonth(),w=h.getUTCDate(),k=h.getUTCHours(),T=h.getUTCMinutes(),M=h.getUTCSeconds(),R=h.getUTCMilliseconds();h=(0>=v||v>=1e4?(0>v?"-":"+")+E(6,0>v?-v:v):E(4,v))+"-"+E(2,x+1)+"-"+E(2,w)+"T"+E(2,k)+":"+E(2,T)+":"+E(2,M)+"."+E(3,R)+"Z"}else h=null;if(i&&(h=i.call(e,t,h)),null===h)return"null";if(p=s.call(h),p==y)return""+h;if(p==f)return h>-1/0&&1/0>h?""+h:"null";if(p==m)return C(""+h);if("object"==typeof h){for(P=c.length;P--;)if(c[P]===h)throw TypeError();if(c.push(h),D=[],I=u,u+=l,p==g){for(L=0,P=h.length;P>L;L++)z=A(L,h,i,a,l,u,c),D.push(z===r?"null":z);N=D.length?l?"[\n"+u+D.join(",\n"+u)+"\n"+I+"]":"["+D.join(",")+"]":"[]"}else o(a||h,function(t){var e=A(t,h,i,a,l,u,c);e!==r&&D.push(C(t)+":"+(l?" ":"")+e)}),N=D.length?l?"{\n"+u+D.join(",\n"+u)+"\n"+I+"}":"{"+D.join(",")+"}":"{}";return c.pop(),N}};u.stringify=function(t,e,i){var n,o,r,a;if("function"==typeof e||"object"==typeof e&&e)if((a=s.call(e))==p)o=e;else if(a==g){r={};for(var l,u=0,c=e.length;c>u;l=e[u++],a=s.call(l),(a==m||a==f)&&(r[l]=1));}if(i)if((a=s.call(i))==f){if((i-=i%1)>0)for(n="",i>10&&(i=10);n.length<i;n+=" ");}else a==m&&(n=i.length<=10?i:i.slice(0,10));return A("",(l={},l[""]=t,l),o,r,n,"",[])}}if(!e("json-parse")){var R,D,z=String.fromCharCode,L={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},P=function(){throw R=D=null,SyntaxError()},I=function(){for(var t,e,i,n,o,r=D,s=r.length;s>R;)switch(o=r.charCodeAt(R)){case 9:case 10:case 13:case 32:R++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=v?r.charAt(R):r[R],R++,t;case 34:for(t="@",R++;s>R;)if(o=r.charCodeAt(R),32>o)P();else if(92==o)switch(o=r.charCodeAt(++R)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=L[o],R++;break;case 117:for(e=++R,i=R+4;i>R;R++)o=r.charCodeAt(R),o>=48&&57>=o||o>=97&&102>=o||o>=65&&70>=o||P();t+=z("0x"+r.slice(e,R));break;default:P()}else{if(34==o)break;for(o=r.charCodeAt(R),e=R;o>=32&&92!=o&&34!=o;)o=r.charCodeAt(++R);t+=r.slice(e,R)}if(34==r.charCodeAt(R))return R++,t;P();default:if(e=R,45==o&&(n=!0,o=r.charCodeAt(++R)),o>=48&&57>=o){for(48==o&&(o=r.charCodeAt(R+1),o>=48&&57>=o)&&P(),n=!1;s>R&&(o=r.charCodeAt(R),o>=48&&57>=o);R++);if(46==r.charCodeAt(R)){for(i=++R;s>i&&(o=r.charCodeAt(i),o>=48&&57>=o);i++);i==R&&P(),R=i}if(o=r.charCodeAt(R),101==o||69==o){for(o=r.charCodeAt(++R),(43==o||45==o)&&R++,i=R;s>i&&(o=r.charCodeAt(i),o>=48&&57>=o);i++);i==R&&P(),R=i}return+r.slice(e,R)}if(n&&P(),"true"==r.slice(R,R+4))return R+=4,!0;if("false"==r.slice(R,R+5))return R+=5,!1;if("null"==r.slice(R,R+4))return R+=4,null;P()}return"$"},N=function(t){var e,i;if("$"==t&&P(),"string"==typeof t){if("@"==(v?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];t=I(),"]"!=t;i||(i=!0))i&&(","==t?(t=I(),"]"==t&&P()):P()),","==t&&P(),e.push(N(t));return e}if("{"==t){for(e={};t=I(),"}"!=t;i||(i=!0))i&&(","==t?(t=I(),"}"==t&&P()):P()),(","==t||"string"!=typeof t||"@"!=(v?t.charAt(0):t[0])||":"!=I())&&P(),e[t.slice(1)]=N(I());return e}P()}return t},O=function(t,e,i){var n=j(t,e,i);n===r?delete t[e]:t[e]=n},j=function(t,e,i){var n,r=t[e];if("object"==typeof r&&r)if(s.call(r)==g)for(n=r.length;n--;)O(r,n,i);else o(r,function(t){O(r,t,i)});return i.call(t,e,r)};u.parse=function(t,e){var i,n;return R=0,D=""+t,i=N(I()),"$"!=I()&&P(),R=D=null,e&&s.call(e)==p?j((n={},n[""]=i,n),"",e):i}}}a&&define(function(){return u})}(this)},{}],301:[function(t,e,i){function n(t,e){var i=[];e=e||0;for(var n=e||0;n<t.length;n++)i[n-e]=t[n];return i}e.exports=n},{}],302:[function(t,e,i){var n=t("./trim"),o=t("./decapitalize");e.exports=function(t,e){return t=n(t).replace(/[-_\s]+(.)?/g,function(t,e){return e?e.toUpperCase():""}),e===!0?o(t):t}},{"./decapitalize":311,"./trim":363}],303:[function(t,e,i){var n=t("./helper/makeString");e.exports=function(t,e){t=n(t);var i=e?t.slice(1).toLowerCase():t.slice(1);return t.charAt(0).toUpperCase()+i}},{"./helper/makeString":321}],304:[function(t,e,i){var n=t("./helper/makeString");e.exports=function(t){return n(t).split("")}},{"./helper/makeString":321}],305:[function(t,e,i){e.exports=function(t,e){return null==t?[]:(t=String(t),e=~~e,e>0?t.match(new RegExp(".{1,"+e+"}","g")):[t])}},{}],306:[function(t,e,i){var n=t("./capitalize"),o=t("./camelize"),r=t("./helper/makeString");e.exports=function(t){return t=r(t),n(o(t.replace(/[\W_]/g," ")).replace(/\s/g,""))}},{"./camelize":302,"./capitalize":303,"./helper/makeString":321}],307:[function(t,e,i){var n=t("./trim");e.exports=function(t){return n(t).replace(/\s\s+/g," ")}},{"./trim":363}],308:[function(t,e,i){var n=t("./helper/makeString"),o="ąàáäâãåæăćčĉęèéëêĝĥìíïîĵłľńňòóöőôõðøśșšŝťțŭùúüűûñÿýçżźž",r="aaaaaaaaaccceeeeeghiiiijllnnoooooooossssttuuuuuunyyczzz";o+=o.toUpperCase(),r+=r.toUpperCase(),r=r.split(""),o+="ß",r.push("ss"),e.exports=function(t){return n(t).replace(/.{1}/g,function(t){var e=o.indexOf(t);return-1===e?t:r[e]})}},{"./helper/makeString":321}],309:[function(t,e,i){var n=t("./helper/makeString");e.exports=function(t,e){return t=n(t),e=n(e),0===t.length||0===e.length?0:t.split(e).length-1}},{"./helper/makeString":321}],310:[function(t,e,i){var n=t("./trim");e.exports=function(t){return n(t).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()}},{"./trim":363}],311:[function(t,e,i){var n=t("./helper/makeString");e.exports=function(t){return t=n(t),t.charAt(0).toLowerCase()+t.slice(1)}},{"./helper/makeString":321}],312:[function(t,e,i){function n(t){for(var e=t.match(/^[\s\\t]*/gm),i=e[0].length,n=1;n<e.length;n++)i=Math.min(e[n].length,i);return i}var o=t("./helper/makeString");e.exports=function(t,e){t=o(t);var i,r=n(t);return 0===r?t:(i="string"==typeof e?new RegExp("^"+e,"gm"):new RegExp("^[ \\t]{"+r+"}","gm"),t.replace(i,""))}},{"./helper/makeString":321}],313:[function(t,e,i){var n=t("./helper/makeString"),o=t("./helper/toPositive");e.exports=function(t,e,i){return t=n(t),e=""+e,i="undefined"==typeof i?t.length-e.length:Math.min(o(i),t.length)-e.length,i>=0&&t.indexOf(e,i)===i}},{"./helper/makeString":321,"./helper/toPositive":323}],314:[function(t,e,i){var n=t("./helper/makeString"),o=t("./helper/escapeChars"),r="[";for(var s in o)r+=s;r+="]";var a=new RegExp(r,"g");e.exports=function(t){return n(t).replace(a,function(t){return"&"+o[t]+";"})}},{"./helper/escapeChars":318,"./helper/makeString":321}],315:[function(t,e,i){e.exports=function(){var t={};for(var e in this)this.hasOwnProperty(e)&&!e.match(/^(?:include|contains|reverse|join)$/)&&(t[e]=this[e]);return t}},{}],316:[function(t,e,i){var n=t("./makeString");e.exports=function(t,e){return t=n(t),0===t.length?"":t.slice(0,-1)+String.fromCharCode(t.charCodeAt(t.length-1)+e)}},{"./makeString":321}],317:[function(t,e,i){var n=t("./escapeRegExp");e.exports=function(t){return null==t?"\\s":t.source?t.source:"["+n(t)+"]"}},{"./escapeRegExp":319}],318:[function(t,e,i){var n={"¢":"cent","£":"pound","¥":"yen","€":"euro","©":"copy","®":"reg","<":"lt",">":"gt",'"':"quot","&":"amp","'":"#39"};e.exports=n},{}],319:[function(t,e,i){var n=t("./makeString");e.exports=function(t){return n(t).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}},{"./makeString":321}],320:[function(t,e,i){var n={nbsp:" ",cent:"¢",pound:"£",yen:"¥",euro:"€",copy:"©",reg:"®",lt:"<",gt:">",quot:'"',amp:"&",apos:"'"};e.exports=n},{}],321:[function(t,e,i){e.exports=function(t){return null==t?"":""+t}},{}],322:[function(t,e,i){e.exports=function(t,e){if(1>e)return"";for(var i="";e>0;)1&e&&(i+=t),e>>=1,t+=t;return i}},{}],323:[function(t,e,i){e.exports=function(t){return 0>t?0:+t||0}},{}],324:[function(t,e,i){var n=t("./capitalize"),o=t("./underscored"),r=t("./trim");e.exports=function(t){return n(r(o(t).replace(/_id$/,"").replace(/_/g," ")))}},{"./capitalize":303,"./trim":363,"./underscored":365}],325:[function(t,e,i){var n=t("./helper/makeString");e.exports=function(t,e){return""===e?!0:-1!==n(t).indexOf(e)}},{"./helper/makeString":321}],326:[function(t,e,i){"use strict";function n(t){return this instanceof n?void(this._wrapped=t):new n(t)}function o(t,e){"function"==typeof e&&(n.prototype[t]=function(){var t=[this._wrapped].concat(Array.prototype.slice.call(arguments)),i=e.apply(null,t);return"string"==typeof i?new n(i):i})}function r(t){o(t,function(e){var i=Array.prototype.slice.call(arguments,1);return String.prototype[t].apply(e,i)})}n.VERSION="3.2.2",n.isBlank=t("./isBlank"),n.stripTags=t("./stripTags"),n.capitalize=t("./capitalize"),n.decapitalize=t("./decapitalize"),n.chop=t("./chop"),n.trim=t("./trim"),n.clean=t("./clean"),n.cleanDiacritics=t("./cleanDiacritics"),n.count=t("./count"),n.chars=t("./chars"),n.swapCase=t("./swapCase"),n.escapeHTML=t("./escapeHTML"),n.unescapeHTML=t("./unescapeHTML"),n.splice=t("./splice"),n.insert=t("./insert"),n.replaceAll=t("./replaceAll"),n.include=t("./include"),n.join=t("./join"),n.lines=t("./lines"),n.dedent=t("./dedent"),n.reverse=t("./reverse"),n.startsWith=t("./startsWith"),n.endsWith=t("./endsWith"),n.pred=t("./pred"),n.succ=t("./succ"),n.titleize=t("./titleize"),n.camelize=t("./camelize"),n.underscored=t("./underscored"),n.dasherize=t("./dasherize"),n.classify=t("./classify"),n.humanize=t("./humanize"),n.ltrim=t("./ltrim"),n.rtrim=t("./rtrim"),n.truncate=t("./truncate"),n.prune=t("./prune"),n.words=t("./words"),n.pad=t("./pad"),n.lpad=t("./lpad"),n.rpad=t("./rpad"),n.lrpad=t("./lrpad"),n.sprintf=t("./sprintf"),n.vsprintf=t("./vsprintf"),n.toNumber=t("./toNumber"),n.numberFormat=t("./numberFormat"),n.strRight=t("./strRight"),n.strRightBack=t("./strRightBack"),n.strLeft=t("./strLeft"),n.strLeftBack=t("./strLeftBack"),n.toSentence=t("./toSentence"),n.toSentenceSerial=t("./toSentenceSerial"),n.slugify=t("./slugify"),n.surround=t("./surround"),n.quote=t("./quote"),n.unquote=t("./unquote"),n.repeat=t("./repeat"),n.naturalCmp=t("./naturalCmp"),n.levenshtein=t("./levenshtein"),n.toBoolean=t("./toBoolean"),n.exports=t("./exports"),n.escapeRegExp=t("./helper/escapeRegExp"),n.wrap=t("./wrap"),n.strip=n.trim,n.lstrip=n.ltrim,n.rstrip=n.rtrim,n.center=n.lrpad,n.rjust=n.lpad,n.ljust=n.rpad,n.contains=n.include,n.q=n.quote,n.toBool=n.toBoolean,n.camelcase=n.camelize,n.prototype={value:function(){return this._wrapped}};for(var s in n)o(s,n[s]);o("tap",function(t,e){return e(t)});var a=["toUpperCase","toLowerCase","split","replace","slice","substring","substr","concat"];for(var s in a)r(a[s]);e.exports=n},{"./camelize":302,"./capitalize":303,"./chars":304,"./chop":305,"./classify":306,"./clean":307,"./cleanDiacritics":308,"./count":309,"./dasherize":310,"./decapitalize":311,"./dedent":312,"./endsWith":313,"./escapeHTML":314,"./exports":315,"./helper/escapeRegExp":319,"./humanize":324,"./include":325,"./insert":327,"./isBlank":328,"./join":329,"./levenshtein":330,"./lines":331,"./lpad":332,"./lrpad":333,"./ltrim":334,"./naturalCmp":335,"./numberFormat":336,"./pad":337,"./pred":338,"./prune":339,"./quote":340,"./repeat":341,"./replaceAll":342,"./reverse":343,"./rpad":344,"./rtrim":345,"./slugify":346,"./splice":347,"./sprintf":348,"./startsWith":349,"./strLeft":350,"./strLeftBack":351,"./strRight":352,"./strRightBack":353,"./stripTags":354,"./succ":355,"./surround":356,"./swapCase":357,"./titleize":358,"./toBoolean":359,"./toNumber":360,"./toSentence":361,"./toSentenceSerial":362,"./trim":363,"./truncate":364,"./underscored":365,"./unescapeHTML":366,"./unquote":367,"./vsprintf":368,"./words":369,"./wrap":370}],327:[function(t,e,i){var n=t("./splice");e.exports=function(t,e,i){return n(t,e,0,i)}},{"./splice":347}],328:[function(t,e,i){var n=t("./helper/makeString");e.exports=function(t){return/^\s*$/.test(n(t))}},{"./helper/makeString":321}],329:[function(t,e,i){var n=t("./helper/makeString"),o=[].slice;e.exports=function(){var t=o.call(arguments),e=t.shift();return t.join(n(e))}},{"./helper/makeString":321}],330:[function(t,e,i){var n=t("./helper/makeString");e.exports=function(t,e){"use strict";if(t=n(t),e=n(e),t===e)return 0;if(!t||!e)return Math.max(t.length,e.length);for(var i=new Array(e.length+1),o=0;o<i.length;++o)i[o]=o;for(o=0;o<t.length;++o){for(var r=o+1,s=0;s<e.length;++s){var a=r;r=i[s]+(t.charAt(o)===e.charAt(s)?0:1);var l=a+1;r>l&&(r=l),l=i[s+1]+1,r>l&&(r=l),i[s]=a}i[s]=r}return r}},{"./helper/makeString":321}],331:[function(t,e,i){e.exports=function(t){return null==t?[]:String(t).split(/\r\n?|\n/)}},{}],332:[function(t,e,i){var n=t("./pad");e.exports=function(t,e,i){return n(t,e,i)}},{"./pad":337}],333:[function(t,e,i){var n=t("./pad");e.exports=function(t,e,i){return n(t,e,i,"both")}},{"./pad":337}],334:[function(t,e,i){var n=t("./helper/makeString"),o=t("./helper/defaultToWhiteSpace"),r=String.prototype.trimLeft;e.exports=function(t,e){return t=n(t),!e&&r?r.call(t):(e=o(e),t.replace(new RegExp("^"+e+"+"),""))}},{"./helper/defaultToWhiteSpace":317,"./helper/makeString":321}],335:[function(t,e,i){e.exports=function(t,e){if(t==e)return 0;if(!t)return-1;if(!e)return 1;for(var i=/(\.\d+|\d+|\D+)/g,n=String(t).match(i),o=String(e).match(i),r=Math.min(n.length,o.length),s=0;r>s;s++){var a=n[s],l=o[s];if(a!==l){var u=+a,c=+l;return u===u&&c===c?u>c?1:-1:l>a?-1:1}}return n.length!=o.length?n.length-o.length:e>t?-1:1}},{}],336:[function(t,e,i){e.exports=function(t,e,i,n){if(isNaN(t)||null==t)return"";t=t.toFixed(~~e),n="string"==typeof n?n:",";var o=t.split("."),r=o[0],s=o[1]?(i||".")+o[1]:"";return r.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+n)+s}},{}],337:[function(t,e,i){var n=t("./helper/makeString"),o=t("./helper/strRepeat");e.exports=function(t,e,i,r){t=n(t),e=~~e;var s=0;switch(i?i.length>1&&(i=i.charAt(0)):i=" ",r){case"right":return s=e-t.length,t+o(i,s);case"both":return s=e-t.length,o(i,Math.ceil(s/2))+t+o(i,Math.floor(s/2));default:return s=e-t.length,o(i,s)+t}}},{"./helper/makeString":321,"./helper/strRepeat":322}],338:[function(t,e,i){var n=t("./helper/adjacent");e.exports=function(t){return n(t,-1)}},{"./helper/adjacent":316}],339:[function(t,e,i){var n=t("./helper/makeString"),o=t("./rtrim");e.exports=function(t,e,i){if(t=n(t),e=~~e,i=null!=i?String(i):"...",t.length<=e)return t;var r=function(t){return t.toUpperCase()!==t.toLowerCase()?"A":" "},s=t.slice(0,e+1).replace(/.(?=\W*\w*$)/g,r);return s=s.slice(s.length-2).match(/\w\w/)?s.replace(/\s*\S+$/,""):o(s.slice(0,s.length-1)),(s+i).length>t.length?t:t.slice(0,s.length)+i}},{"./helper/makeString":321,"./rtrim":345}],340:[function(t,e,i){var n=t("./surround");e.exports=function(t,e){return n(t,e||'"')}},{"./surround":356}],341:[function(t,e,i){var n=t("./helper/makeString"),o=t("./helper/strRepeat");e.exports=function r(t,e,i){if(t=n(t),e=~~e,null==i)return o(t,e);for(var r=[];e>0;r[--e]=t);return r.join(i)}},{"./helper/makeString":321,"./helper/strRepeat":322}],342:[function(t,e,i){var n=t("./helper/makeString");e.exports=function(t,e,i,o){var r=o===!0?"gi":"g",s=new RegExp(e,r);return n(t).replace(s,i)}},{"./helper/makeString":321}],343:[function(t,e,i){var n=t("./chars");e.exports=function(t){return n(t).reverse().join("")}},{"./chars":304}],344:[function(t,e,i){var n=t("./pad");e.exports=function(t,e,i){return n(t,e,i,"right")}},{"./pad":337}],345:[function(t,e,i){var n=t("./helper/makeString"),o=t("./helper/defaultToWhiteSpace"),r=String.prototype.trimRight;e.exports=function(t,e){return t=n(t),!e&&r?r.call(t):(e=o(e),t.replace(new RegExp(e+"+$"),""))}},{"./helper/defaultToWhiteSpace":317,"./helper/makeString":321}],346:[function(t,e,i){var n=(t("./helper/makeString"),t("./helper/defaultToWhiteSpace"),t("./trim")),o=t("./dasherize"),r=t("./cleanDiacritics");e.exports=function(t){return n(o(r(t).replace(/[^\w\s-]/g,"-").toLowerCase()),"-")}},{"./cleanDiacritics":308,"./dasherize":310,"./helper/defaultToWhiteSpace":317,"./helper/makeString":321,"./trim":363}],347:[function(t,e,i){var n=t("./chars");e.exports=function(t,e,i,o){var r=n(t);return r.splice(~~e,~~i,o),r.join("")}},{"./chars":304}],348:[function(t,e,i){var n=t("./helper/strRepeat"),o=Object.prototype.toString,r=function(){function t(t){return o.call(t).slice(8,-1).toLowerCase()}var e=n,i=function(){return i.cache.hasOwnProperty(arguments[0])||(i.cache[arguments[0]]=i.parse(arguments[0])),i.format.call(null,i.cache[arguments[0]],arguments)};return i.format=function(i,n){var o,s,a,l,u,c,h,p=1,d=i.length,f="",m=[];for(s=0;d>s;s++)if(f=t(i[s]),"string"===f)m.push(i[s]);else if("array"===f){if(l=i[s],l[2])for(o=n[p],a=0;a<l[2].length;a++){if(!o.hasOwnProperty(l[2][a]))throw new Error(r('[_.sprintf] property "%s" does not exist',l[2][a]));o=o[l[2][a]]}else o=l[1]?n[l[1]]:n[p++];if(/[^s]/.test(l[8])&&"number"!=t(o))throw new Error(r("[_.sprintf] expecting number but found %s",t(o)));switch(l[8]){case"b":o=o.toString(2);break;case"c":o=String.fromCharCode(o);break;case"d":o=parseInt(o,10);break;case"e":o=l[7]?o.toExponential(l[7]):o.toExponential();break;case"f":o=l[7]?parseFloat(o).toFixed(l[7]):parseFloat(o);break;case"o":o=o.toString(8);break;case"s":o=(o=String(o))&&l[7]?o.substring(0,l[7]):o;break;case"u":o=Math.abs(o);break;case"x":o=o.toString(16);break;case"X":o=o.toString(16).toUpperCase()}o=/[def]/.test(l[8])&&l[3]&&o>=0?"+"+o:o,c=l[4]?"0"==l[4]?"0":l[4].charAt(1):" ",h=l[6]-String(o).length,u=l[6]?e(c,h):"",m.push(l[5]?o+u:u+o)}return m.join("")},i.cache={},i.parse=function(t){for(var e=t,i=[],n=[],o=0;e;){if(null!==(i=/^[^\x25]+/.exec(e)))n.push(i[0]);else if(null!==(i=/^\x25{2}/.exec(e)))n.push("%");else{if(null===(i=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(e)))throw new Error("[_.sprintf] huh?");if(i[2]){o|=1;var r=[],s=i[2],a=[];if(null===(a=/^([a-z_][a-z_\d]*)/i.exec(s)))throw new Error("[_.sprintf] huh?");for(r.push(a[1]);""!==(s=s.substring(a[0].length));)if(null!==(a=/^\.([a-z_][a-z_\d]*)/i.exec(s)))r.push(a[1]);else{if(null===(a=/^\[(\d+)\]/.exec(s)))throw new Error("[_.sprintf] huh?");r.push(a[1])}i[2]=r}else o|=2;if(3===o)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");n.push(i)}e=e.substring(i[0].length)}return n},i}();e.exports=r},{"./helper/strRepeat":322}],349:[function(t,e,i){var n=t("./helper/makeString"),o=t("./helper/toPositive");e.exports=function(t,e,i){return t=n(t),e=""+e,i=null==i?0:Math.min(o(i),t.length),t.lastIndexOf(e,i)===i}},{"./helper/makeString":321,"./helper/toPositive":323}],350:[function(t,e,i){var n=t("./helper/makeString");e.exports=function(t,e){t=n(t),e=n(e);var i=e?t.indexOf(e):-1;return~i?t.slice(0,i):t}},{"./helper/makeString":321}],351:[function(t,e,i){var n=t("./helper/makeString");e.exports=function(t,e){t=n(t),e=n(e);var i=t.lastIndexOf(e);return~i?t.slice(0,i):t}},{"./helper/makeString":321}],352:[function(t,e,i){var n=t("./helper/makeString");e.exports=function(t,e){t=n(t),e=n(e);var i=e?t.indexOf(e):-1;return~i?t.slice(i+e.length,t.length):t}},{"./helper/makeString":321}],353:[function(t,e,i){var n=t("./helper/makeString");e.exports=function(t,e){t=n(t),e=n(e);var i=e?t.lastIndexOf(e):-1;return~i?t.slice(i+e.length,t.length):t}},{"./helper/makeString":321}],354:[function(t,e,i){var n=t("./helper/makeString");e.exports=function(t){return n(t).replace(/<\/?[^>]+>/g,"")}},{"./helper/makeString":321}],355:[function(t,e,i){var n=t("./helper/adjacent");e.exports=function(t){return n(t,1)}},{"./helper/adjacent":316}],356:[function(t,e,i){e.exports=function(t,e){return[e,t,e].join("")}},{}],357:[function(t,e,i){var n=t("./helper/makeString");e.exports=function(t){return n(t).replace(/\S/g,function(t){return t===t.toUpperCase()?t.toLowerCase():t.toUpperCase()})}},{"./helper/makeString":321}],358:[function(t,e,i){var n=t("./helper/makeString");e.exports=function(t){return n(t).toLowerCase().replace(/(?:^|\s|-)\S/g,function(t){return t.toUpperCase()})}},{"./helper/makeString":321}],359:[function(t,e,i){function n(t,e){var i,n,o=t.toLowerCase();for(e=[].concat(e),i=0;i<e.length;i+=1)if(n=e[i]){if(n.test&&n.test(t))return!0;if(n.toLowerCase()===o)return!0}}var o=t("./trim");e.exports=function(t,e,i){return"number"==typeof t&&(t=""+t),"string"!=typeof t?!!t:(t=o(t),n(t,e||["true","1"])?!0:n(t,i||["false","0"])?!1:void 0)}},{"./trim":363}],360:[function(t,e,i){t("./trim");e.exports=function(t,e){if(null==t)return 0;var i=Math.pow(10,isFinite(e)?e:0);return Math.round(t*i)/i}},{"./trim":363}],361:[function(t,e,i){var n=t("./rtrim");e.exports=function(t,e,i,o){e=e||", ",i=i||" and ";var r=t.slice(),s=r.pop();return t.length>2&&o&&(i=n(e)+i),r.length?r.join(e)+i+s:s}},{"./rtrim":345}],362:[function(t,e,i){var n=t("./toSentence");e.exports=function(t,e,i){return n(t,e,i,!0)}},{"./toSentence":361}],363:[function(t,e,i){var n=t("./helper/makeString"),o=t("./helper/defaultToWhiteSpace"),r=String.prototype.trim;e.exports=function(t,e){return t=n(t),!e&&r?r.call(t):(e=o(e),t.replace(new RegExp("^"+e+"+|"+e+"+$","g"),""))}},{"./helper/defaultToWhiteSpace":317,"./helper/makeString":321}],364:[function(t,e,i){var n=t("./helper/makeString");e.exports=function(t,e,i){return t=n(t),i=i||"...",e=~~e,t.length>e?t.slice(0,e)+i:t}},{"./helper/makeString":321}],365:[function(t,e,i){var n=t("./trim");e.exports=function(t){return n(t).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()}},{"./trim":363}],366:[function(t,e,i){var n=t("./helper/makeString"),o=t("./helper/htmlEntities");e.exports=function(t){return n(t).replace(/\&([^;]+);/g,function(t,e){var i;return e in o?o[e]:(i=e.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(i[1],16)):(i=e.match(/^#(\d+)$/))?String.fromCharCode(~~i[1]):t})}},{"./helper/htmlEntities":320,"./helper/makeString":321}],367:[function(t,e,i){e.exports=function(t,e){return e=e||'"',t[0]===e&&t[t.length-1]===e?t.slice(1,t.length-1):t}},{}],368:[function(t,e,i){var n=t("./sprintf");e.exports=function(t,e){return e.unshift(t),n.apply(null,e)}},{"./sprintf":348}],369:[function(t,e,i){var n=t("./isBlank"),o=t("./trim");e.exports=function(t,e){return n(t)?[]:o(t,e).split(e||/\s+/)}},{"./isBlank":328,"./trim":363}],370:[function(t,e,i){makeString=t("./helper/makeString"),e.exports=function(t,e){if(t=makeString(t),e=e||{},width=e.width||75,seperator=e.seperator||"\n",cut=e.cut||!1,preserveSpaces=e.preserveSpaces||!1,trailingSpaces=e.trailingSpaces||!1,width<=0)return t;if(cut){for(index=0,result="";index<t.length;)index%width==0&&index>0&&(result+=seperator),result+=t.charAt(index),index++;if(trailingSpaces)for(;index%width>0;)result+=" ",index++;return result}for(words=t.split(" "),result="",current_column=0;words.length>0;){if(1+words[0].length+current_column>width&&current_column>0){if(preserveSpaces)result+=" ",current_column++;else if(trailingSpaces)for(;current_column<width;)result+=" ",current_column++;result+=seperator,current_column=0}current_column>0&&(result+=" ",current_column++),result+=words[0],current_column+=words[0].length,words.shift()}if(trailingSpaces)for(;current_column<width;)result+=" ",current_column++;return result}},{"./helper/makeString":321}],371:[function(t,e,i){(function(){function t(t){function e(e,i,n,o,r,s){for(;r>=0&&s>r;r+=t){var a=o?o[r]:r;n=i(n,e[a],a,e)}return n}return function(i,n,o,r){n=_(n,r,4);var s=!C(i)&&x.keys(i),a=(s||i).length,l=t>0?0:a-1;return arguments.length<3&&(o=i[s?s[l]:l],l+=t),e(i,n,o,s,l,a)}}function n(t){return function(e,i,n){i=w(i,n);for(var o=M(e),r=t>0?0:o-1;r>=0&&o>r;r+=t)if(i(e[r],r,e))return r;return-1}}function o(t,e,i){return function(n,o,r){var s=0,a=M(n);if("number"==typeof r)t>0?s=r>=0?r:Math.max(r+a,s):a=r>=0?Math.min(r+1,a):r+a+1;else if(i&&r&&a)return r=i(n,o),n[r]===o?r:-1;if(o!==o)return r=e(p.call(n,s,a),x.isNaN),r>=0?r+s:-1;for(r=t>0?s:a-1;r>=0&&a>r;r+=t)if(n[r]===o)return r;return-1}}function r(t,e){var i=L.length,n=t.constructor,o=x.isFunction(n)&&n.prototype||u,r="constructor";for(x.has(t,r)&&!x.contains(e,r)&&e.push(r);i--;)r=L[i],r in t&&t[r]!==o[r]&&!x.contains(e,r)&&e.push(r)}var s=this,a=s._,l=Array.prototype,u=Object.prototype,c=Function.prototype,h=l.push,p=l.slice,d=u.toString,f=u.hasOwnProperty,m=Array.isArray,g=Object.keys,y=c.bind,v=Object.create,b=function(){},x=function(t){
return t instanceof x?t:this instanceof x?void(this._wrapped=t):new x(t)};"undefined"!=typeof i?("undefined"!=typeof e&&e.exports&&(i=e.exports=x),i._=x):s._=x,x.VERSION="1.8.3";var _=function(t,e,i){if(void 0===e)return t;switch(null==i?3:i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,o){return t.call(e,i,n,o)};case 4:return function(i,n,o,r){return t.call(e,i,n,o,r)}}return function(){return t.apply(e,arguments)}},w=function(t,e,i){return null==t?x.identity:x.isFunction(t)?_(t,e,i):x.isObject(t)?x.matcher(t):x.property(t)};x.iteratee=function(t,e){return w(t,e,1/0)};var S=function(t,e){return function(i){var n=arguments.length;if(2>n||null==i)return i;for(var o=1;n>o;o++)for(var r=arguments[o],s=t(r),a=s.length,l=0;a>l;l++){var u=s[l];e&&void 0!==i[u]||(i[u]=r[u])}return i}},k=function(t){if(!x.isObject(t))return{};if(v)return v(t);b.prototype=t;var e=new b;return b.prototype=null,e},T=function(t){return function(e){return null==e?void 0:e[t]}},E=Math.pow(2,53)-1,M=T("length"),C=function(t){var e=M(t);return"number"==typeof e&&e>=0&&E>=e};x.each=x.forEach=function(t,e,i){e=_(e,i);var n,o;if(C(t))for(n=0,o=t.length;o>n;n++)e(t[n],n,t);else{var r=x.keys(t);for(n=0,o=r.length;o>n;n++)e(t[r[n]],r[n],t)}return t},x.map=x.collect=function(t,e,i){e=w(e,i);for(var n=!C(t)&&x.keys(t),o=(n||t).length,r=Array(o),s=0;o>s;s++){var a=n?n[s]:s;r[s]=e(t[a],a,t)}return r},x.reduce=x.foldl=x.inject=t(1),x.reduceRight=x.foldr=t(-1),x.find=x.detect=function(t,e,i){var n;return n=C(t)?x.findIndex(t,e,i):x.findKey(t,e,i),void 0!==n&&-1!==n?t[n]:void 0},x.filter=x.select=function(t,e,i){var n=[];return e=w(e,i),x.each(t,function(t,i,o){e(t,i,o)&&n.push(t)}),n},x.reject=function(t,e,i){return x.filter(t,x.negate(w(e)),i)},x.every=x.all=function(t,e,i){e=w(e,i);for(var n=!C(t)&&x.keys(t),o=(n||t).length,r=0;o>r;r++){var s=n?n[r]:r;if(!e(t[s],s,t))return!1}return!0},x.some=x.any=function(t,e,i){e=w(e,i);for(var n=!C(t)&&x.keys(t),o=(n||t).length,r=0;o>r;r++){var s=n?n[r]:r;if(e(t[s],s,t))return!0}return!1},x.contains=x.includes=x.include=function(t,e,i,n){return C(t)||(t=x.values(t)),("number"!=typeof i||n)&&(i=0),x.indexOf(t,e,i)>=0},x.invoke=function(t,e){var i=p.call(arguments,2),n=x.isFunction(e);return x.map(t,function(t){var o=n?e:t[e];return null==o?o:o.apply(t,i)})},x.pluck=function(t,e){return x.map(t,x.property(e))},x.where=function(t,e){return x.filter(t,x.matcher(e))},x.findWhere=function(t,e){return x.find(t,x.matcher(e))},x.max=function(t,e,i){var n,o,r=-(1/0),s=-(1/0);if(null==e&&null!=t){t=C(t)?t:x.values(t);for(var a=0,l=t.length;l>a;a++)n=t[a],n>r&&(r=n)}else e=w(e,i),x.each(t,function(t,i,n){o=e(t,i,n),(o>s||o===-(1/0)&&r===-(1/0))&&(r=t,s=o)});return r},x.min=function(t,e,i){var n,o,r=1/0,s=1/0;if(null==e&&null!=t){t=C(t)?t:x.values(t);for(var a=0,l=t.length;l>a;a++)n=t[a],r>n&&(r=n)}else e=w(e,i),x.each(t,function(t,i,n){o=e(t,i,n),(s>o||o===1/0&&r===1/0)&&(r=t,s=o)});return r},x.shuffle=function(t){for(var e,i=C(t)?t:x.values(t),n=i.length,o=Array(n),r=0;n>r;r++)e=x.random(0,r),e!==r&&(o[r]=o[e]),o[e]=i[r];return o},x.sample=function(t,e,i){return null==e||i?(C(t)||(t=x.values(t)),t[x.random(t.length-1)]):x.shuffle(t).slice(0,Math.max(0,e))},x.sortBy=function(t,e,i){return e=w(e,i),x.pluck(x.map(t,function(t,i,n){return{value:t,index:i,criteria:e(t,i,n)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index-e.index}),"value")};var A=function(t){return function(e,i,n){var o={};return i=w(i,n),x.each(e,function(n,r){var s=i(n,r,e);t(o,n,s)}),o}};x.groupBy=A(function(t,e,i){x.has(t,i)?t[i].push(e):t[i]=[e]}),x.indexBy=A(function(t,e,i){t[i]=e}),x.countBy=A(function(t,e,i){x.has(t,i)?t[i]++:t[i]=1}),x.toArray=function(t){return t?x.isArray(t)?p.call(t):C(t)?x.map(t,x.identity):x.values(t):[]},x.size=function(t){return null==t?0:C(t)?t.length:x.keys(t).length},x.partition=function(t,e,i){e=w(e,i);var n=[],o=[];return x.each(t,function(t,i,r){(e(t,i,r)?n:o).push(t)}),[n,o]},x.first=x.head=x.take=function(t,e,i){return null==t?void 0:null==e||i?t[0]:x.initial(t,t.length-e)},x.initial=function(t,e,i){return p.call(t,0,Math.max(0,t.length-(null==e||i?1:e)))},x.last=function(t,e,i){return null==t?void 0:null==e||i?t[t.length-1]:x.rest(t,Math.max(0,t.length-e))},x.rest=x.tail=x.drop=function(t,e,i){return p.call(t,null==e||i?1:e)},x.compact=function(t){return x.filter(t,x.identity)};var R=function(t,e,i,n){for(var o=[],r=0,s=n||0,a=M(t);a>s;s++){var l=t[s];if(C(l)&&(x.isArray(l)||x.isArguments(l))){e||(l=R(l,e,i));var u=0,c=l.length;for(o.length+=c;c>u;)o[r++]=l[u++]}else i||(o[r++]=l)}return o};x.flatten=function(t,e){return R(t,e,!1)},x.without=function(t){return x.difference(t,p.call(arguments,1))},x.uniq=x.unique=function(t,e,i,n){x.isBoolean(e)||(n=i,i=e,e=!1),null!=i&&(i=w(i,n));for(var o=[],r=[],s=0,a=M(t);a>s;s++){var l=t[s],u=i?i(l,s,t):l;e?(s&&r===u||o.push(l),r=u):i?x.contains(r,u)||(r.push(u),o.push(l)):x.contains(o,l)||o.push(l)}return o},x.union=function(){return x.uniq(R(arguments,!0,!0))},x.intersection=function(t){for(var e=[],i=arguments.length,n=0,o=M(t);o>n;n++){var r=t[n];if(!x.contains(e,r)){for(var s=1;i>s&&x.contains(arguments[s],r);s++);s===i&&e.push(r)}}return e},x.difference=function(t){var e=R(arguments,!0,!0,1);return x.filter(t,function(t){return!x.contains(e,t)})},x.zip=function(){return x.unzip(arguments)},x.unzip=function(t){for(var e=t&&x.max(t,M).length||0,i=Array(e),n=0;e>n;n++)i[n]=x.pluck(t,n);return i},x.object=function(t,e){for(var i={},n=0,o=M(t);o>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},x.findIndex=n(1),x.findLastIndex=n(-1),x.sortedIndex=function(t,e,i,n){i=w(i,n,1);for(var o=i(e),r=0,s=M(t);s>r;){var a=Math.floor((r+s)/2);i(t[a])<o?r=a+1:s=a}return r},x.indexOf=o(1,x.findIndex,x.sortedIndex),x.lastIndexOf=o(-1,x.findLastIndex),x.range=function(t,e,i){null==e&&(e=t||0,t=0),i=i||1;for(var n=Math.max(Math.ceil((e-t)/i),0),o=Array(n),r=0;n>r;r++,t+=i)o[r]=t;return o};var D=function(t,e,i,n,o){if(!(n instanceof e))return t.apply(i,o);var r=k(t.prototype),s=t.apply(r,o);return x.isObject(s)?s:r};x.bind=function(t,e){if(y&&t.bind===y)return y.apply(t,p.call(arguments,1));if(!x.isFunction(t))throw new TypeError("Bind must be called on a function");var i=p.call(arguments,2),n=function(){return D(t,n,e,this,i.concat(p.call(arguments)))};return n},x.partial=function(t){var e=p.call(arguments,1),i=function(){for(var n=0,o=e.length,r=Array(o),s=0;o>s;s++)r[s]=e[s]===x?arguments[n++]:e[s];for(;n<arguments.length;)r.push(arguments[n++]);return D(t,i,this,this,r)};return i},x.bindAll=function(t){var e,i,n=arguments.length;if(1>=n)throw new Error("bindAll must be passed function names");for(e=1;n>e;e++)i=arguments[e],t[i]=x.bind(t[i],t);return t},x.memoize=function(t,e){var i=function(n){var o=i.cache,r=""+(e?e.apply(this,arguments):n);return x.has(o,r)||(o[r]=t.apply(this,arguments)),o[r]};return i.cache={},i},x.delay=function(t,e){var i=p.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},x.defer=x.partial(x.delay,x,1),x.throttle=function(t,e,i){var n,o,r,s=null,a=0;i||(i={});var l=function(){a=i.leading===!1?0:x.now(),s=null,r=t.apply(n,o),s||(n=o=null)};return function(){var u=x.now();a||i.leading!==!1||(a=u);var c=e-(u-a);return n=this,o=arguments,0>=c||c>e?(s&&(clearTimeout(s),s=null),a=u,r=t.apply(n,o),s||(n=o=null)):s||i.trailing===!1||(s=setTimeout(l,c)),r}},x.debounce=function(t,e,i){var n,o,r,s,a,l=function(){var u=x.now()-s;e>u&&u>=0?n=setTimeout(l,e-u):(n=null,i||(a=t.apply(r,o),n||(r=o=null)))};return function(){r=this,o=arguments,s=x.now();var u=i&&!n;return n||(n=setTimeout(l,e)),u&&(a=t.apply(r,o),r=o=null),a}},x.wrap=function(t,e){return x.partial(e,t)},x.negate=function(t){return function(){return!t.apply(this,arguments)}},x.compose=function(){var t=arguments,e=t.length-1;return function(){for(var i=e,n=t[e].apply(this,arguments);i--;)n=t[i].call(this,n);return n}},x.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},x.before=function(t,e){var i;return function(){return--t>0&&(i=e.apply(this,arguments)),1>=t&&(e=null),i}},x.once=x.partial(x.before,2);var z=!{toString:null}.propertyIsEnumerable("toString"),L=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];x.keys=function(t){if(!x.isObject(t))return[];if(g)return g(t);var e=[];for(var i in t)x.has(t,i)&&e.push(i);return z&&r(t,e),e},x.allKeys=function(t){if(!x.isObject(t))return[];var e=[];for(var i in t)e.push(i);return z&&r(t,e),e},x.values=function(t){for(var e=x.keys(t),i=e.length,n=Array(i),o=0;i>o;o++)n[o]=t[e[o]];return n},x.mapObject=function(t,e,i){e=w(e,i);for(var n,o=x.keys(t),r=o.length,s={},a=0;r>a;a++)n=o[a],s[n]=e(t[n],n,t);return s},x.pairs=function(t){for(var e=x.keys(t),i=e.length,n=Array(i),o=0;i>o;o++)n[o]=[e[o],t[e[o]]];return n},x.invert=function(t){for(var e={},i=x.keys(t),n=0,o=i.length;o>n;n++)e[t[i[n]]]=i[n];return e},x.functions=x.methods=function(t){var e=[];for(var i in t)x.isFunction(t[i])&&e.push(i);return e.sort()},x.extend=S(x.allKeys),x.extendOwn=x.assign=S(x.keys),x.findKey=function(t,e,i){e=w(e,i);for(var n,o=x.keys(t),r=0,s=o.length;s>r;r++)if(n=o[r],e(t[n],n,t))return n},x.pick=function(t,e,i){var n,o,r={},s=t;if(null==s)return r;x.isFunction(e)?(o=x.allKeys(s),n=_(e,i)):(o=R(arguments,!1,!1,1),n=function(t,e,i){return e in i},s=Object(s));for(var a=0,l=o.length;l>a;a++){var u=o[a],c=s[u];n(c,u,s)&&(r[u]=c)}return r},x.omit=function(t,e,i){if(x.isFunction(e))e=x.negate(e);else{var n=x.map(R(arguments,!1,!1,1),String);e=function(t,e){return!x.contains(n,e)}}return x.pick(t,e,i)},x.defaults=S(x.allKeys,!0),x.create=function(t,e){var i=k(t);return e&&x.extendOwn(i,e),i},x.clone=function(t){return x.isObject(t)?x.isArray(t)?t.slice():x.extend({},t):t},x.tap=function(t,e){return e(t),t},x.isMatch=function(t,e){var i=x.keys(e),n=i.length;if(null==t)return!n;for(var o=Object(t),r=0;n>r;r++){var s=i[r];if(e[s]!==o[s]||!(s in o))return!1}return!0};var P=function(t,e,i,n){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof x&&(t=t._wrapped),e instanceof x&&(e=e._wrapped);var o=d.call(t);if(o!==d.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var r="[object Array]"===o;if(!r){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,a=e.constructor;if(s!==a&&!(x.isFunction(s)&&s instanceof s&&x.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}i=i||[],n=n||[];for(var l=i.length;l--;)if(i[l]===t)return n[l]===e;if(i.push(t),n.push(e),r){if(l=t.length,l!==e.length)return!1;for(;l--;)if(!P(t[l],e[l],i,n))return!1}else{var u,c=x.keys(t);if(l=c.length,x.keys(e).length!==l)return!1;for(;l--;)if(u=c[l],!x.has(e,u)||!P(t[u],e[u],i,n))return!1}return i.pop(),n.pop(),!0};x.isEqual=function(t,e){return P(t,e)},x.isEmpty=function(t){return null==t?!0:C(t)&&(x.isArray(t)||x.isString(t)||x.isArguments(t))?0===t.length:0===x.keys(t).length},x.isElement=function(t){return!(!t||1!==t.nodeType)},x.isArray=m||function(t){return"[object Array]"===d.call(t)},x.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},x.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){x["is"+t]=function(e){return d.call(e)==="[object "+t+"]"}}),x.isArguments(arguments)||(x.isArguments=function(t){return x.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(x.isFunction=function(t){return"function"==typeof t||!1}),x.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},x.isNaN=function(t){return x.isNumber(t)&&t!==+t},x.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===d.call(t)},x.isNull=function(t){return null===t},x.isUndefined=function(t){return void 0===t},x.has=function(t,e){return null!=t&&f.call(t,e)},x.noConflict=function(){return s._=a,this},x.identity=function(t){return t},x.constant=function(t){return function(){return t}},x.noop=function(){},x.property=T,x.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},x.matcher=x.matches=function(t){return t=x.extendOwn({},t),function(e){return x.isMatch(e,t)}},x.times=function(t,e,i){var n=Array(Math.max(0,t));e=_(e,i,1);for(var o=0;t>o;o++)n[o]=e(o);return n},x.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},x.now=Date.now||function(){return(new Date).getTime()};var I={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},N=x.invert(I),O=function(t){var e=function(e){return t[e]},i="(?:"+x.keys(t).join("|")+")",n=RegExp(i),o=RegExp(i,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(o,e):t}};x.escape=O(I),x.unescape=O(N),x.result=function(t,e,i){var n=null==t?void 0:t[e];return void 0===n&&(n=i),x.isFunction(n)?n.call(t):n};var j=0;x.uniqueId=function(t){var e=++j+"";return t?t+e:e},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var U=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},F=/\\|'|\r|\n|\u2028|\u2029/g,q=function(t){return"\\"+B[t]};x.template=function(t,e,i){!e&&i&&(e=i),e=x.defaults({},e,x.templateSettings);var n=RegExp([(e.escape||U).source,(e.interpolate||U).source,(e.evaluate||U).source].join("|")+"|$","g"),o=0,r="__p+='";t.replace(n,function(e,i,n,s,a){return r+=t.slice(o,a).replace(F,q),o=a+e.length,i?r+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?r+="'+\n((__t=("+n+"))==null?'':__t)+\n'":s&&(r+="';\n"+s+"\n__p+='"),e}),r+="';\n",e.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{var s=new Function(e.variable||"obj","_",r)}catch(a){throw a.source=r,a}var l=function(t){return s.call(this,t,x)},u=e.variable||"obj";return l.source="function("+u+"){\n"+r+"}",l},x.chain=function(t){var e=x(t);return e._chain=!0,e};var $=function(t,e){return t._chain?x(e).chain():e};x.mixin=function(t){x.each(x.functions(t),function(e){var i=x[e]=t[e];x.prototype[e]=function(){var t=[this._wrapped];return h.apply(t,arguments),$(this,i.apply(x,t))}})},x.mixin(x),x.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=l[t];x.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!==t&&"splice"!==t||0!==i.length||delete i[0],$(this,i)}}),x.each(["concat","join","slice"],function(t){var e=l[t];x.prototype[t]=function(){return $(this,e.apply(this._wrapped,arguments))}}),x.prototype.value=function(){return this._wrapped},x.prototype.valueOf=x.prototype.toJSON=x.prototype.value,x.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return x})}).call(this)},{}]},{},[33]);